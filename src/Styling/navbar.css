/* ========================================
   NAVBAR DESIGN SYSTEM (FULL)
======================================== */

:root{
  --primary-50:#eff6ff;--primary-100:#dbeafe;--primary-200:#bfdbfe;--primary-300:#93c5fd;--primary-400:#60a5fa;--primary-500:#3b82f6;--primary-600:#2563eb;--primary-700:#1d4ed8;--primary-800:#1e40af;--primary-900:#1e3a8a;
  --neutral-0:#fff;--neutral-50:#f9fafb;--neutral-100:#f3f4f6;--neutral-200:#e5e7eb;--neutral-300:#d1d5db;--neutral-400:#9ca3af;--neutral-500:#6b7280;--neutral-600:#4b5563;--neutral-700:#513737;--neutral-800:#1f2937;--neutral-900:#111827;
  --navbar-bg:rgba(255,255,255,.95);--navbar-bg-dark:rgba(17,24,39,.95);
  --navbar-border:rgba(229,231,235,.8);--navbar-border-dark:rgba(75,85,99,.3);
  --navbar-text:var(--neutral-700);--navbar-text-dark:var(--neutral-200);
  --navbar-text-hover:var(--neutral-900);--navbar-text-hover-dark:var(--primary-400);
  --shadow-sm:0 1px 2px 0 rgb(0 0 0 / .05);
  --shadow-md:0 4px 6px -1px rgb(0 0 0 / .1),0 2px 4px -2px rgb(0 0 0 / .1);
  --shadow-xl:0 20px 25px -5px rgb(0 0 0 / .1),0 8px 10px -6px rgb(0 0 0 / .1);
  --radius-md:.5rem;--radius-lg:.75rem;--radius-xl:1rem;--radius-full:9999px;
  --space-2:.5rem;--space-3:.75rem;--space-4:1rem;--space-5:1.25rem;--space-6:1.5rem;--space-8:2rem;
  --transition-fast:150ms cubic-bezier(.4,0,.2,1);--transition-normal:300ms cubic-bezier(.4,0,.2,1);
  --z-sticky:1100;--z-dropdown:2000;--z-backdrop:1995;
}

/* ---------- container ---------- */
.navbar_container{
  position:fixed;top:0;left:0;right:0;height:90px;background:var(--navbar-bg);
  backdrop-filter:blur(20px) saturate(180%);border-bottom:1px solid var(--navbar-border);
  box-shadow:var(--shadow-sm);z-index:var(--z-sticky);transition:all var(--transition-normal);
}
.navbar_container.scrolled{box-shadow:var(--shadow-md);}
.navbar{
  max-width:1400px;margin:0 auto;height:90px;padding:0 var(--space-6);
  display:flex;align-items:center;justify-content:space-between;position:relative;
}

/* ---------- logo ---------- */
:root{--logo-size:32px}
.logo-container{display:inline-flex;align-items:center;white-space:nowrap;line-height:1}
.logo-container img{width:var(--logo-size);height:var(--logo-size);object-fit:contain;display:block;border-radius:8px;margin-right:8px}
.logo-container h3{font-size:1.125rem;font-weight:700;background:linear-gradient(135deg,var(--primary-600),var(--primary-500));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0; position: relative; right: 25px;}

/* ---------- nav links (desktop) ---------- */
.nav-links{display:flex;align-items:center;gap:var(--space-8);list-style:none;margin:0;padding:0}
.nav-links li{position:relative;list-style:none}
.nav-links a{color:var(--navbar-text);text-decoration:none;font-weight:500;font-size:.9375rem;padding:.5rem var(--space-4);
  border-radius:12px;transition:all var(--transition-fast);display:inline-flex;align-items:center;gap:.5rem;line-height:1}
.nav-links a:hover{color:var(--navbar-text-hover);transform:translateY(-1px);background:var(--neutral-200)}

/* ---------- auth (desktop) ---------- */
.auth-buttons{display:flex;align-items:center;gap:.75rem}
.auth-buttons button{padding:.5rem var(--space-5);border-radius:12px;font-weight:500;font-size:.9375rem;cursor:pointer;transition:all var(--transition-fast);border:none;display:inline-flex;align-items:center;gap:.5rem;line-height:1}
.login-button{background:transparent;color:var(--navbar-text);border:1px solid var(--neutral-300)}
.login-button:hover{background:var(--neutral-50);border-color:var(--primary-300);color:var(--primary-600);transform:translateY(-1px);box-shadow:var(--shadow-sm)}
.register-button{background:linear-gradient(135deg,var(--primary-600),var(--primary-500));color:#fff;border:1px solid var(--primary-600)}
.register-button:hover{filter:brightness(.98);transform:translateY(-2px);box-shadow:0 10px 25px -5px rgba(59,130,246,.15),0 8px 10px -6px rgba(59,130,246,.1)}

/* ---------- user button (desktop) ---------- */
.user-menu-button{display:inline-flex;align-items:center;gap:.5rem;background:var(--neutral-100);border:1px solid var(--neutral-200);border-radius:12px;padding:.5rem var(--space-4);cursor:pointer;color:var(--navbar-text);transition:all var(--transition-fast);line-height:1}
.user-menu-button:hover{background:var(--neutral-200);border-color:var(--primary-300);transform:translateY(-1px)}
.user-icon{font-size:1.05rem;color:var(--primary-600)}
.user-avatar-img{width:22px;height:22px;border-radius:50%;object-fit:cover;display:block}
.user-name{max-width:18ch;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.caret-icon{font-size:.75rem;transition:transform var(--transition-normal);color:var(--neutral-500)}
.caret-icon.rotate{transform:rotate(180deg)}
.crown-icon{color:#f59e0b;font-size:.95rem;vertical-align:middle}
.crown-right{margin-left:auto}
.crown-inline{display:none !important}

/* ---------- desktop dropdown ---------- */
.dropdown-menu{
  position:absolute;right:0;top:calc(100% + .5rem);background:#fff;border:1px solid var(--neutral-200);
  border-radius:var(--radius-xl);box-shadow:var(--shadow-xl);min-width:260px;padding:var(--space-4);
  opacity:0;visibility:hidden;transform:translateY(-8px) scale(.98);
  transition:transform var(--transition-normal),opacity var(--transition-normal),visibility 0s linear .2s;z-index:var(--z-dropdown)
}
.dropdown-menu.open{opacity:1;visibility:visible;transform:translateY(0) scale(1)}
.dd-header{display:flex;align-items:center;gap:12px;padding:12px 14px;border:1px solid var(--neutral-200);border-radius:12px;background:var(--neutral-50);margin-bottom:.75rem}
.dd-avatar{width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--neutral-200);color:var(--neutral-700);font-weight:700;overflow:hidden}
.dd-avatar-img{width:100%;height:100%;object-fit:cover;border-radius:50%}
.dd-avatar-fallback{display:flex;align-items:center;justify-content:center;width:100%;height:100%}
.dd-meta{flex:1;min-width:0}
.dd-row{display:flex;align-items:center;gap:8px}
.dd-name{font-weight:600;color:var(--navbar-text)}
.dd-email{font-size:.875rem;color:var(--neutral-500)}
.dd-quick{display: flex; flex-direction: row; max-width: 400px;}
.dd-tile{height:50px;display:flex;align-items:center;justify-content:center;text-align:center;font-size:.9rem;font-weight:500;background-color:rgb(241, 240, 240);border:1px solid var(--neutral-200);border-radius:12px;transition:transform var(--transition-fast),background var(--transition-fast); width: 100%;;}
.dd-tile:hover{background:var(--neutral-50)}
.dd-tile:active{transform:scale(.98)}
.dd-list{display:flex;flex-direction:column;border:1px solid var(--neutral-200);border-radius:12px;overflow:hidden;background:#fff}
.dd-list .dropdown-item{display:flex;align-items:center;padding:var(--space-4) var(--space-5);width:100%;background:none;border:0;text-align:left;color:var(--navbar-text);font-weight:500}
.dd-list .dropdown-item + .dropdown-item{border-top:1px solid var(--neutral-200)}
.dd-lang{display:flex;align-items:center;justify-content:space-between;padding:var(--space-4) var(--space-5);border:1px solid var(--neutral-200);border-radius:12px;background:#fff;margin-top:.75rem}
.dd-logout{margin-top:.75rem}
.logout-button{width:100%;border:1px solid #fecaca;border-radius:12px;background-color:rgba(248, 52, 52, 0.89);color:white;padding:var(--space-4) var(--space-5)}
.user-avatar-img { width:22px; height:22px; border-radius:50%; object-fit:cover; display:block; }
.dd-avatar-img   { width:100%; height:100%; border-radius:50%; object-fit:cover; display:block; }
.dd-avatar       { width:44px; height:44px; overflow:hidden; border-radius:50%; }


/* ---------- mobile hamburger ---------- */
.hamburger{display:none;flex-direction:column;gap:4px;background:transparent;border:none;cursor:pointer;padding:.5rem;border-radius:8px;transition:all var(--transition-fast)}
.hamburger span{width:24px;height:3px;background:var(--navbar-text);border-radius:9999px;transition:all var(--transition-normal);transform-origin:center}
.hamburger.is-active span:nth-child(1){transform:translateY(7px) rotate(45deg);background:var(--primary-600)}
.hamburger.is-active span:nth-child(2){opacity:0;transform:scaleX(0)}
.hamburger.is-active span:nth-child(3){transform:translateY(-7px) rotate(-45deg);background:var(--primary-600)}

/* ---------- MOBILE (â‰¤768px) ---------- */
@media (max-width:768px){
  .navbar{padding:0 var(--space-3)}
  .logo-container img{margin-right:6px; margin-top: 8px;}
  .hamburger{display:flex !important; z-index:calc(var(--z-dropdown) + 5); margin-right:-350px}

  /* hide desktop items on phones */
  .nav-links>li:first-child, /* Map */
  .notification-container,
  .user-menu-container,
  .auth-buttons,
  .nav-links>li .lang-toggle-button{display:none !important}
}

/* ---------- MOBILE SHEET ---------- */
.sheet-backdrop{
  position:fixed;inset:0;background:rgba(0,0,0,.25);backdrop-filter:saturate(140%) blur(1px);
  z-index:var(--z-backdrop);opacity:1
}
.mobile-sheet{
  position:fixed;left:12px;right:12px;top:calc(90px + 6px);max-height:min(72vh,560px);
  background:#fff;border:1px solid var(--neutral-200);border-radius:16px;box-shadow:var(--shadow-xl);
  padding:var(--space-4);z-index:var(--z-dropdown);overflow:auto;opacity:0;visibility:hidden;transform:translateY(-8px) scale(.98);
  transition:transform var(--transition-normal),opacity var(--transition-normal),visibility 0s linear .2s;
  text-decoration: none;
  
}
.mobile-sheet.open{opacity:1;visibility:visible;transform:translateY(0) scale(1); text-decoration: none;}

.dd-tools{
  width: 100%;
  display:flex; 
  flex-direction: row;
  margin:.75rem 0;
}
.dd-tool{
  height:56px;width: 300px;display:flex;align-items:center;justify-content:center;
  border:1px solid var(--neutral-200);border-radius:12px;background:#fff;
  font-weight:600;transition:background var(--transition-fast),transform var(--transition-fast);
}
.dd-tool:hover{background:var(--neutral-50)}
.dd-notify{padding:0 .5rem}

/* ---------- desktop: hide tiles grid ---------- */
@media (min-width:769px){ .dd-quick{display:none !important} }

@media (max-width: 480px) {
  .mobile-sheet { left: 10px; right: 10px; text-decoration: none; }
  .dd-tools { grid-template-columns: 1fr 1fr; gap: .6rem; }
  .dd-name { font-size: 1rem; }
}

/* Remove underlines for links inside the mobile sheet & dropdown */
.mobile-sheet a,
.mobile-sheet .dropdown-item,
.mobile-sheet .dd-tool,
.dropdown-menu a,
.dd-list .dropdown-item {
  text-decoration: none !important;
}

/* Keep it off on interaction too */
.mobile-sheet a:hover,
.mobile-sheet a:focus,
.mobile-sheet a:active,
.dropdown-menu a:hover,
.dropdown-menu a:focus,
.dropdown-menu a:active {
  text-decoration: none !important;
}

/* If any custom underline is drawn with ::after somewhere, disable it here */
.mobile-sheet a::after,
.mobile-sheet .dropdown-item::after,
.mobile-sheet .dd-tool::after,
.dropdown-menu a::after,
.dd-list .dropdown-item::after {
  content: none !important;
}


@media (max-width: 430px) {
  .logo-container h3 { margin-left: 2px; }
  .hamburger { margin-right: -150px; }
  .dd-tools { grid-template-columns: 1fr; } /* stack Map & Notifications */
}

@media (max-width: 400px) {
  .mobile-sheet { padding: .75rem; text-decoration: none; }
  .dd-header { padding: .6rem .7rem; }
  .dd-email { font-size: .85rem; }
}

@media (max-width: 375px) {
  .user-avatar-img { width: 20px; height: 20px; }
  .dd-avatar { width: 40px; height: 40px; }
  .dd-name { font-size: .95rem; }
}

@media (max-width: 320px) {
  .mobile-sheet { left: 6px; right: 6px; text-decoration: none;}
  .dd-lang, .dd-list, .dd-logout { padding-left: .6rem; padding-right: .6rem; }
  .lang-toggle-button { padding: .4rem .6rem; }
}

@media (max-height: 640px) {
  .mobile-sheet { max-height: calc(100vh - 120px); text-decoration: none;}
}



/* ---------- dark mode ---------- */
@media (prefers-color-scheme:dark){
  .login-button:hover {background-color:#4b5563; color: white;}
  :root{--navbar-bg:var(--navbar-bg-dark);--navbar-text:var(--navbar-text-dark);--navbar-text-hover:var(--navbar-text-hover-dark)}
  .navbar_container{background:var(--navbar-bg-dark);border-bottom-color:var(--navbar-border-dark)}
  .dropdown-menu,.mobile-sheet{background:var(--neutral-800);border-color:var(--neutral-700)}
  .dd-header{background:#0f172a;border-color:var(--neutral-700)}
  .dd-name{color:var(--neutral-200)}
  .dd-email{color:var(--neutral-400)}
  .dd-tile,.dd-tool{background:var(--neutral-800);border-color:var(--neutral-700);color:var(--neutral-200)}
  .dd-tile:hover,.dd-tool:hover{background:var(--neutral-700)}
  .dd-list{border-color:var(--neutral-700);background:var(--neutral-800)}
  .dd-list .dropdown-item{color:var(--neutral-200)}
  .dd-list .dropdown-item + .dropdown-item{border-top-color:var(--neutral-700)}
  .dd-lang{border-color:var(--neutral-700);background:var(--neutral-800);color:var(--neutral-200)}
  .logout-button{background-color:rgba(236, 43, 43, 0.938); border-color:#7f1d1d;color:#fecaca}
  .user-menu-button{background:var(--neutral-800);border-color:var(--neutral-700);color:var(--neutral-200)}
  .user-menu-button:hover{background:var(--neutral-700);border-color:var(--primary-500)}
  .hamburger span{background:var(--neutral-200)}
  .nav-links a:hover{background-color: #4b5563; color: white;}
}

/* ---------- a11y/utility ---------- */
@media (prefers-reduced-motion:reduce){
  *,*::before,*::after{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important}
}
html{scroll-behavior:smooth}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
