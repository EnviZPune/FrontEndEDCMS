/*! For license information please see main.28ceb199.js.LICENSE.txt */
(()=>{var e={24:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},43:(e,t,n)=>{"use strict";e.exports=n(202)},67:(e,t,n)=>{"use strict";e.exports=n(612)},71:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},153:(e,t,n)=>{"use strict";var s=n(43),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,i={},c=null,u=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)r.call(t,s)&&!l.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:a.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},185:(e,t,n)=>{e.exports=n(392)},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,m(b,v.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,j={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,s){var o,i={},r=null,a=null;if(null!=t)for(o in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(r=""+t.key),t)w.call(t,o)&&!S.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=s;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:r,ref:a,props:i,_owner:j.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,o,i,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case s:l=!0}}if(l)return r=r(l=e),e=""===i?"."+E(l,0):i,x(r)?(o="",null!=e&&(o=e.replace(C,"$&/")+"/"),P(r,t,o,"",function(e){return e})):null!=r&&(N(r)&&(r=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,o+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(C,"$&/")+"/")+e)),t.push(r)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var u=i+E(a=e[c],c);l+=P(a,t,o,u,r)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=P(a=a.value,t,o,u=i+E(a,c++),r);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var s=[],o=0;return P(e,s,"","",function(e){return t.call(n,e,o++)}),s}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},I={transition:null},A={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:I,ReactCurrentOwner:j};function z(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=r,t.PureComponent=_,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=z,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,r=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(r=t.ref,a=j.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=s;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:r,props:o,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=z,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},218:e=>{var t,n,s,o,i,r,a,l,c,u,d,h,p,f,m,g=!1;function v(){if(!g){g=!0;var e=navigator.userAgent,v=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),y=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(h=/\b(iPhone|iP[ao]d)/.exec(e),p=/\b(iP[ao]d)/.exec(e),u=/Android/i.exec(e),f=/FBAN\/\w+;/i.exec(e),m=/Mobile/i.exec(e),d=!!/Win64/.exec(e),v){(t=v[1]?parseFloat(v[1]):v[5]?parseFloat(v[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var _=/(?:Trident\/(\d+.\d+))/.exec(e);r=_?parseFloat(_[1])+4:t,n=v[2]?parseFloat(v[2]):NaN,s=v[3]?parseFloat(v[3]):NaN,(o=v[4]?parseFloat(v[4]):NaN)?(v=/(?:Chrome\/(\d+\.\d+))/.exec(e),i=v&&v[1]?parseFloat(v[1]):NaN):i=NaN}else t=n=s=i=o=NaN;if(y){if(y[1]){var b=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);a=!b||parseFloat(b[1].replace("_","."))}else a=!1;l=!!y[2],c=!!y[3]}else a=l=c=!1}}var y={ie:function(){return v()||t},ieCompatibilityMode:function(){return v()||r>t},ie64:function(){return y.ie()&&d},firefox:function(){return v()||n},opera:function(){return v()||s},webkit:function(){return v()||o},safari:function(){return y.webkit()},chrome:function(){return v()||i},windows:function(){return v()||l},osx:function(){return v()||a},linux:function(){return v()||c},iphone:function(){return v()||h},mobile:function(){return v()||h||p||u||m},nativeApp:function(){return v()||f},android:function(){return v()||u},ipad:function(){return v()||p}};e.exports=y},228:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,s,o;for(n=1,s=arguments.length;n<s;n++)for(t in o=arguments[n])e[t]=o[t];return e}var s=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function o(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var s=n.call(arguments,2);return function(){return e.apply(t,s.length?s.concat(n.call(arguments)):arguments)}}var i=0;function r(e){return"_leaflet_id"in e||(e._leaflet_id=++i),e._leaflet_id}function a(e,t,n){var s,o,i,r;return r=function(){s=!1,o&&(i.apply(n,o),o=!1)},i=function(){s?o=arguments:(e.apply(n,arguments),setTimeout(r,t),s=!0)},i}function l(e,t,n){var s=t[1],o=t[0],i=s-o;return e===s&&n?e:((e-o)%i+i)%i+o}function c(){return!1}function u(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function d(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return d(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?s(e.options):{}),t)e.options[n]=t[n];return e.options}function f(e,t,n){var s=[];for(var o in e)s.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+s.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(m,function(e,n){var s=t[n];if(void 0===s)throw new Error("No value provided for variable "+e);return"function"===typeof s&&(s=s(t)),s})}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var x=0;function w(e){var t=+new Date,n=Math.max(0,16-(t-x));return x=t+n,window.setTimeout(e,n)}var j=window.requestAnimationFrame||b("RequestAnimationFrame")||w,S=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function k(e,t,n){if(!n||j!==w)return j.call(window,o(e,t));e.call(t)}function N(e){e&&S.call(window,e)}var C={__proto__:null,extend:n,create:s,bind:o,get lastId(){return i},stamp:r,throttle:a,wrapNum:l,falseFn:c,formatNum:u,trim:d,splitWords:h,setOptions:p,getParamString:f,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:j,cancelFn:S,requestAnimFrame:k,cancelAnimFrame:N};function E(){}function P(e){if("undefined"!==typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}E.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=t.__super__=this.prototype,i=s(o);for(var r in i.constructor=t,t.prototype=i,this)Object.prototype.hasOwnProperty.call(this,r)&&"prototype"!==r&&"__super__"!==r&&(t[r]=this[r]);return e.statics&&n(t,e.statics),e.includes&&(P(e.includes),n.apply(null,[i].concat(e.includes))),n(i,e),delete i.statics,delete i.includes,i.options&&(i.options=o.options?s(o.options):{},n(i.options,e.options)),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=i._initHooks.length;e<t;e++)i._initHooks[e].call(this)}},t},E.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},E.mergeOptions=function(e){return n(this.prototype.options,e),this},E.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var T={on:function(e,t,n){if("object"===typeof e)for(var s in e)this._on(s,e[s],t);else for(var o=0,i=(e=h(e)).length;o<i;o++)this._on(e[o],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var s in e)this._off(s,e[s],t);else{e=h(e);for(var o=1===arguments.length,i=0,r=e.length;i<r;i++)o?this._off(e[i]):this._off(e[i],t,n)}else delete this._events;return this},_on:function(e,t,n,s){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var o={fn:t,ctx:n};s&&(o.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(o)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var s,o,i;if(this._events&&(s=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var r=this._listens(e,t,n);if(!1!==r){var a=s[r];this._firingCount&&(a.fn=c,this._events[e]=s=s.slice()),s.splice(r,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(o=0,i=s.length;o<i;o++)s[o].fn=c;delete this._events[e]}},fire:function(e,t,s){if(!this.listens(e,s))return this;var o=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var i=this._events[e];if(i){this._firingCount=this._firingCount+1||1;for(var r=0,a=i.length;r<a;r++){var l=i[r],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,o)}this._firingCount--}}return s&&this._propagateEvent(o),this},listens:function(e,t,n,s){"string"!==typeof e&&console.warn('"string" type argument expected');var o=t;"function"!==typeof t&&(s=!!t,o=void 0,n=void 0);var i=this._events&&this._events[e];if(i&&i.length&&!1!==this._listens(e,o,n))return!0;if(s)for(var r in this._eventParents)if(this._eventParents[r].listens(e,t,n,s))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var s=this._events[e]||[];if(!t)return!!s.length;n===this&&(n=void 0);for(var o=0,i=s.length;o<i;o++)if(s[o].fn===t&&s[o].ctx===n)return o;return!1},once:function(e,t,n){if("object"===typeof e)for(var s in e)this._on(s,e[s],t,!0);else for(var o=0,i=(e=h(e)).length;o<i;o++)this._on(e[o],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[r(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[r(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};T.addEventListener=T.on,T.removeEventListener=T.clearAllEventListeners=T.off,T.addOneTimeEventListener=T.once,T.fireEvent=T.fire,T.hasEventListeners=T.listens;var M=E.extend(T);function I(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var A=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function z(e,t,n){return e instanceof I?e:v(e)?new I(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new I(e.x,e.y):new I(e,t,n)}function O(e,t){if(e)for(var n=t?[e,t]:e,s=0,o=n.length;s<o;s++)this.extend(n[s])}function R(e,t){return!e||e instanceof O?e:new O(e,t)}function D(e,t){if(e)for(var n=t?[e,t]:e,s=0,o=n.length;s<o;s++)this.extend(n[s])}function V(e,t){return e instanceof D?e:new D(e,t)}function B(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function $(e,t,n){return e instanceof B?e:v(e)&&"object"!==typeof e[0]?3===e.length?new B(e[0],e[1],e[2]):2===e.length?new B(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new B(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new B(e,t,n)}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(e){return this.clone()._add(z(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(z(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new I(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new I(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=A(this.x),this.y=A(this.y),this},distanceTo:function(e){var t=(e=z(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=z(e)).x===this.x&&e.y===this.y},contains:function(e){return e=z(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},O.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof I||"number"===typeof e[0]||"x"in e)t=n=z(e);else if(t=(e=R(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return z(this.min.x,this.max.y)},getTopRight:function(){return z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof I?z(e):R(e))instanceof O?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=R(e);var t=this.min,n=this.max,s=e.min,o=e.max,i=o.x>=t.x&&s.x<=n.x,r=o.y>=t.y&&s.y<=n.y;return i&&r},overlaps:function(e){e=R(e);var t=this.min,n=this.max,s=e.min,o=e.max,i=o.x>t.x&&s.x<n.x,r=o.y>t.y&&s.y<n.y;return i&&r},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,s=Math.abs(t.x-n.x)*e,o=Math.abs(t.y-n.y)*e;return R(z(t.x-s,t.y-o),z(n.x+s,n.y+o))},equals:function(e){return!!e&&(e=R(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},D.prototype={extend:function(e){var t,n,s=this._southWest,o=this._northEast;if(e instanceof B)t=e,n=e;else{if(!(e instanceof D))return e?this.extend($(e)||V(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return s||o?(s.lat=Math.min(t.lat,s.lat),s.lng=Math.min(t.lng,s.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new B(t.lat,t.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,s=Math.abs(t.lat-n.lat)*e,o=Math.abs(t.lng-n.lng)*e;return new D(new B(t.lat-s,t.lng-o),new B(n.lat+s,n.lng+o))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof B||"lat"in e?$(e):V(e);var t,n,s=this._southWest,o=this._northEast;return e instanceof D?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=s.lat&&n.lat<=o.lat&&t.lng>=s.lng&&n.lng<=o.lng},intersects:function(e){e=V(e);var t=this._southWest,n=this._northEast,s=e.getSouthWest(),o=e.getNorthEast(),i=o.lat>=t.lat&&s.lat<=n.lat,r=o.lng>=t.lng&&s.lng<=n.lng;return i&&r},overlaps:function(e){e=V(e);var t=this._southWest,n=this._northEast,s=e.getSouthWest(),o=e.getNorthEast(),i=o.lat>t.lat&&s.lat<n.lat,r=o.lng>t.lng&&s.lng<n.lng;return i&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=V(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(e,t){return!!e&&(e=$(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return U.distance(this,$(e))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return V([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var F={latLngToPoint:function(e,t){var n=this.projection.project(e),s=this.scale(t);return this.transformation._transform(n,s)},pointToLatLng:function(e,t){var n=this.scale(t),s=this.transformation.untransform(e,n);return this.projection.unproject(s)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new O(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new B(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),s=t.lat-n.lat,o=t.lng-n.lng;if(0===s&&0===o)return e;var i=e.getSouthWest(),r=e.getNorthEast();return new D(new B(i.lat-s,i.lng-o),new B(r.lat-s,r.lng-o))}},U=n({},F,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,s=e.lat*n,o=t.lat*n,i=Math.sin((t.lat-e.lat)*n/2),r=Math.sin((t.lng-e.lng)*n/2),a=i*i+Math.cos(s)*Math.cos(o)*r*r,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),H=6378137,W={R:H,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,s=Math.max(Math.min(n,e.lat),-n),o=Math.sin(s*t);return new I(this.R*e.lng*t,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(e){var t=180/Math.PI;return new B((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=H*Math.PI;return new O([-e,-e],[e,e])}()};function Z(e,t,n,s){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=s}function q(e,t,n,s){return new Z(e,t,n,s)}Z.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new I((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var K=n({},U,{code:"EPSG:3857",projection:W,transformation:function(){var e=.5/(Math.PI*W.R);return q(e,.5,-e,.5)}()}),J=n({},K,{code:"EPSG:900913"});function Y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function X(e,t){var n,s,o,i,r,a,l="";for(n=0,o=e.length;n<o;n++){for(s=0,i=(r=e[n]).length;s<i;s++)l+=(s?"L":"M")+(a=r[s]).x+" "+a.y;l+=t?Oe.svg?"z":"x":""}return l||"M0 0"}var G=document.documentElement.style,Q="ActiveXObject"in window,ee=Q&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=ze("webkit"),se=ze("android"),oe=ze("android 2")||ze("android 3"),ie=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),re=se&&ze("Google")&&ie<537&&!("AudioNode"in window),ae=!!window.opera,le=!te&&ze("chrome"),ce=ze("gecko")&&!ne&&!ae&&!Q,ue=!le&&ze("safari"),de=ze("phantom"),he="OTransition"in G,pe=0===navigator.platform.indexOf("Win"),fe=Q&&"transition"in G,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!oe,ge="MozPerspective"in G,ve=!window.L_DISABLE_3D&&(fe||me||ge)&&!he&&!de,ye="undefined"!==typeof orientation||ze("mobile"),_e=ye&&ne,be=ye&&me,xe=!window.PointerEvent&&window.MSPointerEvent,we=!(!window.PointerEvent&&!xe),je="ontouchstart"in window||!!window.TouchEvent,Se=!window.L_NO_TOUCH&&(je||we),ke=ye&&ae,Ne=ye&&ce,Ce=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ee=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Pe=!!document.createElement("canvas").getContext,Te=!(!document.createElementNS||!Y("svg").createSVGRect),Le=!!Te&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Me=!Te&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Ie=0===navigator.platform.indexOf("Mac"),Ae=0===navigator.platform.indexOf("Linux");function ze(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Oe={ie:Q,ielt9:ee,edge:te,webkit:ne,android:se,android23:oe,androidStock:re,opera:ae,chrome:le,gecko:ce,safari:ue,phantom:de,opera12:he,win:pe,ie3d:fe,webkit3d:me,gecko3d:ge,any3d:ve,mobile:ye,mobileWebkit:_e,mobileWebkit3d:be,msPointer:xe,pointer:we,touch:Se,touchNative:je,mobileOpera:ke,mobileGecko:Ne,retina:Ce,passiveEvents:Ee,canvas:Pe,svg:Te,vml:Me,inlineSvg:Le,mac:Ie,linux:Ae},Re=Oe.msPointer?"MSPointerDown":"pointerdown",De=Oe.msPointer?"MSPointerMove":"pointermove",Ve=Oe.msPointer?"MSPointerUp":"pointerup",Be=Oe.msPointer?"MSPointerCancel":"pointercancel",$e={touchstart:Re,touchmove:De,touchend:Ve,touchcancel:Be},Fe={touchstart:Ge,touchmove:Xe,touchend:Xe,touchcancel:Xe},Ue={},He=!1;function We(e,t,n){return"touchstart"===t&&Ye(),Fe[t]?(n=Fe[t].bind(this,n),e.addEventListener($e[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Ze(e,t,n){$e[t]?e.removeEventListener($e[t],n,!1):console.warn("wrong event specified:",t)}function qe(e){Ue[e.pointerId]=e}function Ke(e){Ue[e.pointerId]&&(Ue[e.pointerId]=e)}function Je(e){delete Ue[e.pointerId]}function Ye(){He||(document.addEventListener(Re,qe,!0),document.addEventListener(De,Ke,!0),document.addEventListener(Ve,Je,!0),document.addEventListener(Be,Je,!0),He=!0)}function Xe(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],Ue)t.touches.push(Ue[n]);t.changedTouches=[t],e(t)}}function Ge(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&qt(t),Xe(e,t)}function Qe(e){var t,n,s={};for(n in e)t=e[n],s[n]=t&&t.bind?t.bind(e):t;return e=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,s=0;function o(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var o=Jt(e);if(!o.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||o.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var i=Date.now();i-s<=et?2===++n&&t(Qe(e)):n=1,s=i}}}else n=e.detail}return e.addEventListener("click",o),{dblclick:t,simDblclick:o}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var st,ot,it,rt,at,lt=kt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=kt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ut="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function dt(e){return"string"===typeof e?document.getElementById(e):e}function ht(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var s=document.defaultView.getComputedStyle(e,null);n=s?s[t]:null}return"auto"===n?null:n}function pt(e,t,n){var s=document.createElement(e);return s.className=t||"",n&&n.appendChild(s),s}function ft(e){var t=e.parentNode;t&&t.removeChild(e)}function mt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function vt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function yt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=wt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function _t(e,t){if(void 0!==e.classList)for(var n=h(t),s=0,o=n.length;s<o;s++)e.classList.add(n[s]);else if(!yt(e,t)){var i=wt(e);xt(e,(i?i+" ":"")+t)}}function bt(e,t){void 0!==e.classList?e.classList.remove(t):xt(e,d((" "+wt(e)+" ").replace(" "+t+" "," ")))}function xt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function wt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function jt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&St(e,t)}function St(e,t){var n=!1,s="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(s)}catch(o){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+s+"(opacity="+t+")"}function kt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Nt(e,t,n){var s=t||new I(0,0);e.style[lt]=(Oe.ie3d?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(n?" scale("+n+")":"")}function Ct(e,t){e._leaflet_pos=t,Oe.any3d?Nt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Et(e){return e._leaflet_pos||new I(0,0)}if("onselectstart"in document)st=function(){Rt(window,"selectstart",qt)},ot=function(){Vt(window,"selectstart",qt)};else{var Pt=kt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);st=function(){if(Pt){var e=document.documentElement.style;it=e[Pt],e[Pt]="none"}},ot=function(){Pt&&(document.documentElement.style[Pt]=it,it=void 0)}}function Tt(){Rt(window,"dragstart",qt)}function Lt(){Vt(window,"dragstart",qt)}function Mt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(It(),rt=e,at=e.style.outlineStyle,e.style.outlineStyle="none",Rt(window,"keydown",It))}function It(){rt&&(rt.style.outlineStyle=at,rt=void 0,at=void 0,Vt(window,"keydown",It))}function At(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function zt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Ot={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:ut,get:dt,getStyle:ht,create:pt,remove:ft,empty:mt,toFront:gt,toBack:vt,hasClass:yt,addClass:_t,removeClass:bt,setClass:xt,getClass:wt,setOpacity:jt,testProp:kt,setTransform:Nt,setPosition:Ct,getPosition:Et,get disableTextSelection(){return st},get enableTextSelection(){return ot},disableImageDrag:Tt,enableImageDrag:Lt,preventOutline:Mt,restoreOutline:It,getSizedParentNode:At,getScale:zt};function Rt(e,t,n,s){if(t&&"object"===typeof t)for(var o in t)Ft(e,o,t[o],n);else for(var i=0,r=(t=h(t)).length;i<r;i++)Ft(e,t[i],n,s);return this}var Dt="_leaflet_events";function Vt(e,t,n,s){if(1===arguments.length)Bt(e),delete e[Dt];else if(t&&"object"===typeof t)for(var o in t)Ut(e,o,t[o],n);else if(t=h(t),2===arguments.length)Bt(e,function(e){return-1!==y(t,e)});else for(var i=0,r=t.length;i<r;i++)Ut(e,t[i],n,s);return this}function Bt(e,t){for(var n in e[Dt]){var s=n.split(/\d/)[0];t&&!t(s)||Ut(e,s,null,null,n)}}var $t={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ft(e,t,n,s){var o=t+r(n)+(s?"_"+r(s):"");if(e[Dt]&&e[Dt][o])return this;var i=function(t){return n.call(s||e,t||window.event)},a=i;!Oe.touchNative&&Oe.pointer&&0===t.indexOf("touch")?i=We(e,t,i):Oe.touch&&"dblclick"===t?i=tt(e,i):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener($t[t]||t,i,!!Oe.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(i=function(t){t=t||window.event,Qt(e,t)&&a(t)},e.addEventListener($t[t],i,!1)):e.addEventListener(t,a,!1):e.attachEvent("on"+t,i),e[Dt]=e[Dt]||{},e[Dt][o]=i}function Ut(e,t,n,s,o){o=o||t+r(n)+(s?"_"+r(s):"");var i=e[Dt]&&e[Dt][o];if(!i)return this;!Oe.touchNative&&Oe.pointer&&0===t.indexOf("touch")?Ze(e,t,i):Oe.touch&&"dblclick"===t?nt(e,i):"removeEventListener"in e?e.removeEventListener($t[t]||t,i,!1):e.detachEvent("on"+t,i),e[Dt][o]=null}function Ht(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Wt(e){return Ft(e,"wheel",Ht),this}function Zt(e){return Rt(e,"mousedown touchstart dblclick contextmenu",Ht),e._leaflet_disable_click=!0,this}function qt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Kt(e){return qt(e),Ht(e),this}function Jt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Yt(e,t){if(!t)return new I(e.clientX,e.clientY);var n=zt(t),s=n.boundingClientRect;return new I((e.clientX-s.left)/n.x-t.clientLeft,(e.clientY-s.top)/n.y-t.clientTop)}var Xt=Oe.linux&&Oe.chrome?window.devicePixelRatio:Oe.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Gt(e){return Oe.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Xt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Qt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(s){return!1}return n!==e}var en={__proto__:null,on:Rt,off:Vt,stopPropagation:Ht,disableScrollPropagation:Wt,disableClickPropagation:Zt,preventDefault:qt,stop:Kt,getPropagationPath:Jt,getMousePosition:Yt,getWheelDelta:Gt,isExternalTarget:Qt,addListener:Rt,removeListener:Vt},tn=M.extend({run:function(e,t,n,s){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=Et(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Ct(this._el,n),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=M.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView($(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&Oe.any3d&&!Oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Rt(this._proxy,ut,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,s){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter($(e),t,this.options.maxBounds),s=s||{},this._stop(),this._loaded&&!s.reset&&!0!==s&&(void 0!==s.animate&&(s.zoom=n({animate:s.animate},s.zoom),s.pan=n({animate:s.animate,duration:s.duration},s.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,s.zoom):this._tryAnimatedPan(e,s.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,s.pan&&s.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var s=this.getZoomScale(t),o=this.getSize().divideBy(2),i=(e instanceof I?e:this.latLngToContainerPoint(e)).subtract(o).multiplyBy(1-1/s),r=this.containerPointToLatLng(o.add(i));return this.setView(r,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():V(e);var n=z(t.paddingTopLeft||t.padding||[0,0]),s=z(t.paddingBottomRight||t.padding||[0,0]),o=this.getBoundsZoom(e,!1,n.add(s));if((o="number"===typeof t.maxZoom?Math.min(t.maxZoom,o):o)===1/0)return{center:e.getCenter(),zoom:o};var i=s.subtract(n).divideBy(2),r=this.project(e.getSouthWest(),o),a=this.project(e.getNorthEast(),o);return{center:this.unproject(r.add(a).divideBy(2).add(i),o),zoom:o}},fitBounds:function(e,t){if(!(e=V(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=z(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){_t(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Oe.any3d)return this.setView(e,t,n);this._stop();var s=this.project(this.getCenter()),o=this.project(e),i=this.getSize(),r=this._zoom;e=$(e),t=void 0===t?r:t;var a=Math.max(i.x,i.y),l=a*this.getZoomScale(r,t),c=o.distanceTo(s)||1,u=1.42,d=u*u;function h(e){var t=(l*l-a*a+(e?-1:1)*d*d*c*c)/(2*(e?l:a)*d*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function f(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return p(e)/f(e)}var g=h(0);function v(e){return a*(f(g)/f(g+u*e))}function y(e){return a*(f(g)*m(g+u*e)-p(g))/d}function _(e){return 1-Math.pow(1-e,1.5)}var b=Date.now(),x=(h(1)-g)/u,w=n.duration?1e3*n.duration:1e3*x*.8;function j(){var n=(Date.now()-b)/w,i=_(n)*x;n<=1?(this._flyToFrame=k(j,this),this._move(this.unproject(s.add(o.subtract(s).multiplyBy(y(i)/c)),r),this.getScaleZoom(a/v(i),r),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),j.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=V(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),s=this._limitCenter(n,this._zoom,V(e));return n.equals(s)||this.panTo(s,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=z((t=t||{}).paddingTopLeft||t.padding||[0,0]),s=z(t.paddingBottomRight||t.padding||[0,0]),o=this.project(this.getCenter()),i=this.project(e),r=this.getPixelBounds(),a=R([r.min.add(n),r.max.subtract(s)]),l=a.getSize();if(!a.contains(i)){this._enforcingBounds=!0;var c=i.subtract(a.getCenter()),u=a.extend(i).getSize().subtract(l);o.x+=c.x<0?-u.x:u.x,o.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(o),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var s=this.getSize(),i=t.divideBy(2).round(),r=s.divideBy(2).round(),a=i.subtract(r);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:s})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=o(this._handleGeolocationResponse,this),s=o(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,s,e):navigator.geolocation.getCurrentPosition(t,s,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new B(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),s=this._locateOptions;if(s.setView){var o=this.getBoundsZoom(n);this.setView(t,s.maxZoom?Math.min(o,s.maxZoom):o)}var i={latlng:t,bounds:n,timestamp:e.timestamp};for(var r in e.coords)"number"===typeof e.coords[r]&&(i[r]=e.coords[r]);this.fire("locationfound",i)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)ft(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=pt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new D(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=V(e),n=z(n||[0,0]);var s=this.getZoom()||0,o=this.getMinZoom(),i=this.getMaxZoom(),r=e.getNorthWest(),a=e.getSouthEast(),l=this.getSize().subtract(n),c=R(this.project(a,s),this.project(r,s)).getSize(),u=Oe.any3d?this.options.zoomSnap:1,d=l.x/c.x,h=l.y/c.y,p=t?Math.max(d,h):Math.min(d,h);return s=this.getScaleZoom(p,s),u&&(s=Math.round(s/(u/100))*(u/100),s=t?Math.ceil(s/u)*u:Math.floor(s/u)*u),Math.max(o,Math.min(i,s))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new O(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var s=n.zoom(e*n.scale(t));return isNaN(s)?1/0:s},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint($(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(z(e),t)},layerPointToLatLng:function(e){var t=z(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project($(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng($(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(V(e))},distance:function(e,t){return this.options.crs.distance($(e),$(t))},containerPointToLayerPoint:function(e){return z(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return z(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(z(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint($(e)))},mouseEventToContainerPoint:function(e){return Yt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=dt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Rt(t,"scroll",this._onScroll,this),this._containerId=r(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Oe.any3d,_t(e,"leaflet-container"+(Oe.touch?" leaflet-touch":"")+(Oe.retina?" leaflet-retina":"")+(Oe.ielt9?" leaflet-oldie":"")+(Oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ht(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_t(e.markerPane,"leaflet-zoom-hide"),_t(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Ct(this._mapPane,new I(0,0));var s=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var o=this._zoom!==t;this._moveStart(o,n)._move(e,t)._moveEnd(o),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,s){void 0===t&&(t=this._zoom);var o=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),s?n&&n.pinch&&this.fire("zoom",n):((o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ct(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[r(this._container)]=this;var t=e?Vt:Rt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Oe.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=k(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,s=[],o="mouseout"===t||"mouseover"===t,i=e.target||e.srcElement,a=!1;i;){if((n=this._targets[r(i)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(t,!0)){if(o&&!Qt(i,e))break;if(s.push(n),o)break}if(i===this._container)break;i=i.parentNode}return s.length||a||o||!this.listens(t,!0)||(s=[this]),s},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Mt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,s){if("click"===e.type){var o=n({},e);o.type="preclick",this._fireDOMEvent(o,o.type,s)}var i=this._findEventTargets(e,t);if(s){for(var r=[],a=0;a<s.length;a++)s[a].listens(t,!0)&&r.push(s[a]);i=r.concat(i)}if(i.length){"contextmenu"===t&&qt(e);var l=i[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(a=0;a<i.length;a++)if(i[a].fire(t,c,!0),c.originalEvent._stopped||!1===i[a].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Et(this._mapPane)||new I(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var s=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(s)},_latLngBoundsToNewLayerBounds:function(e,t,n){var s=this._getNewPixelOrigin(n,t);return R([this.project(e.getSouthWest(),t)._subtract(s),this.project(e.getNorthWest(),t)._subtract(s),this.project(e.getSouthEast(),t)._subtract(s),this.project(e.getNorthEast(),t)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var s=this.project(e,t),o=this.getSize().divideBy(2),i=new O(s.subtract(o),s.add(o)),r=this._getBoundsOffset(i,n,t);return Math.abs(r.x)<=1&&Math.abs(r.y)<=1?e:this.unproject(s.add(r),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),s=new O(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(s,t))},_getBoundsOffset:function(e,t,n){var s=R(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),o=s.min.subtract(e.min),i=s.max.subtract(e.max);return new I(this._rebound(o.x,-i.x),this._rebound(o.y,-i.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),s=Oe.any3d?this.options.zoomSnap:1;return s&&(e=Math.round(e/s)*s),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];Nt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Nt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(t),o=this._getCenterOffset(e)._divideBy(1-1/s);return!(!0!==n.animate&&!this.getSize().contains(o))&&(k(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,s){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,_t(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function sn(e,t){return new nn(e,t)}var on=E.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),s=e._controlCorners[n];return _t(t,"leaflet-control"),-1!==n.indexOf("bottom")?s.insertBefore(t,s.firstChild):s.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),rn=function(e){return new on(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=pt("div",t+"control-container",this._container);function s(s,o){var i=t+s+" "+t+o;e[s+o]=pt("div",i,n)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)ft(this._controlCorners[e]);ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var an=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,s){return n<s?-1:s<n?1:0}},initialize:function(e,t,n){for(var s in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[s],s);for(s in t)this._addLayer(t[s],s,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return on.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(r(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){_t(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(_t(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=pt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Zt(t),Wt(t);var s=this._section=pt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Rt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var o=this._layersLink=pt("a",e+"-toggle",t);o.href="#",o.title="Layers",o.setAttribute("role","button"),Rt(o,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){qt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=pt("div",e+"-base",s),this._separator=pt("div",e+"-separator",s),this._overlaysList=pt("div",e+"-overlays",s),t.appendChild(s)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&r(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(o(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mt(this._baseLayersList),mt(this._overlaysList),this._layerControlInputs=[];var e,t,n,s,o=0;for(n=0;n<this._layers.length;n++)s=this._layers[n],this._addItem(s),t=t||s.overlay,e=e||!s.overlay,o+=s.overlay?0:1;return this.options.hideSingleBase&&(e=e&&o>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(r(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=n,s.firstChild},_addItem:function(e){var t,n=document.createElement("label"),s=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=s):t=this._createRadioElement("leaflet-base-layers_"+r(this),s),this._layerControlInputs.push(t),t.layerId=r(e.layer),Rt(t,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+e.name;var i=document.createElement("span");return n.appendChild(i),i.appendChild(t),i.appendChild(o),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,s=[],o=[];this._handlingClick=!0;for(var i=n.length-1;i>=0;i--)e=n[i],t=this._getLayer(e.layerId).layer,e.checked?s.push(t):e.checked||o.push(t);for(i=0;i<o.length;i++)this._map.hasLayer(o[i])&&this._map.removeLayer(o[i]);for(i=0;i<s.length;i++)this._map.hasLayer(s[i])||this._map.addLayer(s[i]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,s=this._map.getZoom(),o=n.length-1;o>=0;o--)e=n[o],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&s<t.options.minZoom||void 0!==t.options.maxZoom&&s>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Rt(e,"click",qt),this.expand();var t=this;setTimeout(function(){Vt(e,"click",qt),t._preventClick=!1})}}),ln=function(e,t,n){return new an(e,t,n)},cn=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=pt("div",t+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,s,o){var i=pt("a",n,s);return i.innerHTML=e,i.href="#",i.title=t,i.setAttribute("role","button"),i.setAttribute("aria-label",t),Zt(i),Rt(i,"click",Kt),Rt(i,"click",o,this),Rt(i,"click",this._refocusOnMap,this),i},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";bt(this._zoomInButton,t),bt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(_t(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(_t(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var un=function(e){return new cn(e)},dn=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=pt("div",t),s=this.options;return this._addScales(s,t+"-line",n),e.on(s.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=pt("div",t,n)),e.imperial&&(this._iScale=pt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,s,o=3.2808399*e;o>5280?(t=o/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(s=this._getRoundNum(o),this._updateScale(this._iScale,s+" ft",s/o))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),hn=function(e){return new dn(e)},pn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Oe.inlineSvg?pn+" ":"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),Zt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new fn).addTo(this)});var mn=function(e){return new fn(e)};on.Layers=an,on.Zoom=cn,on.Scale=dn,on.Attribution=fn,rn.layers=ln,rn.zoom=un,rn.scale=hn,rn.attribution=mn;var gn=E.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var vn={Events:T},yn=Oe.touch?"touchstart mousedown":"mousedown",_n=M.extend({options:{clickTolerance:3},initialize:function(e,t,n,s){p(this,s),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Rt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),Vt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!yt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)_n._dragging===this&&this.finishDrag();else if(!(_n._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(_n._dragging=this,this._preventOutline&&Mt(this._element),Tt(),st(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=At(this._element);this._startPoint=new I(t.clientX,t.clientY),this._startPos=Et(this._element),this._parentScale=zt(n);var s="mousedown"===e.type;Rt(document,s?"mousemove":"touchmove",this._onMove,this),Rt(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new I(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,qt(e),this._moved||(this.fire("dragstart"),this._moved=!0,_t(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_t(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ct(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){bt(document.body,"leaflet-dragging"),this._lastTarget&&(bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Vt(document,"mousemove touchmove",this._onMove,this),Vt(document,"mouseup touchend touchcancel",this._onUp,this),Lt(),ot();var t=this._moved&&this._moving;this._moving=!1,_n._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function bn(e,t,n){var s,o,i,r,a,l,c,u,d,h=[1,4,2,8];for(o=0,c=e.length;o<c;o++)e[o]._code=In(e[o],t);for(r=0;r<4;r++){for(u=h[r],s=[],o=0,i=(c=e.length)-1;o<c;i=o++)a=e[o],l=e[i],a._code&u?l._code&u||((d=Mn(l,a,u,t,n))._code=In(d,t),s.push(d)):(l._code&u&&((d=Mn(l,a,u,t,n))._code=In(d,t),s.push(d)),s.push(a));e=s}return e}function xn(e,t){var n,s,o,i,r,a,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");On(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var d=$([0,0]),h=V(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(d=wn(e));var p=e.length,f=[];for(n=0;n<p;n++){var m=$(e[n]);f.push(t.project($([m.lat-d.lat,m.lng-d.lng])))}for(a=l=c=0,n=0,s=p-1;n<p;s=n++)o=f[n],i=f[s],r=o.y*i.x-i.y*o.x,l+=(o.x+i.x)*r,c+=(o.y+i.y)*r,a+=3*r;u=0===a?f[0]:[l/a,c/a];var g=t.unproject(z(u));return $([g.lat+d.lat,g.lng+d.lng])}function wn(e){for(var t=0,n=0,s=0,o=0;o<e.length;o++){var i=$(e[o]);t+=i.lat,n+=i.lng,s++}return $([t/s,n/s])}var jn,Sn={__proto__:null,clipPolygon:bn,polygonCenter:xn,centroid:wn};function kn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=En(e=Tn(e,n),n)}function Nn(e,t,n){return Math.sqrt(zn(e,t,n,!0))}function Cn(e,t,n){return zn(e,t,n)}function En(e,t){var n=e.length,s=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);s[0]=s[n-1]=1,Pn(e,s,t,0,n-1);var o,i=[];for(o=0;o<n;o++)s[o]&&i.push(e[o]);return i}function Pn(e,t,n,s,o){var i,r,a,l=0;for(r=s+1;r<=o-1;r++)(a=zn(e[r],e[s],e[o],!0))>l&&(i=r,l=a);l>n&&(t[i]=1,Pn(e,t,n,s,i),Pn(e,t,n,i,o))}function Tn(e,t){for(var n=[e[0]],s=1,o=0,i=e.length;s<i;s++)An(e[s],e[o])>t&&(n.push(e[s]),o=s);return o<i-1&&n.push(e[i-1]),n}function Ln(e,t,n,s,o){var i,r,a,l=s?jn:In(e,n),c=In(t,n);for(jn=c;;){if(!(l|c))return[e,t];if(l&c)return!1;a=In(r=Mn(e,t,i=l||c,n,o),n),i===l?(e=r,l=a):(t=r,c=a)}}function Mn(e,t,n,s,o){var i,r,a=t.x-e.x,l=t.y-e.y,c=s.min,u=s.max;return 8&n?(i=e.x+a*(u.y-e.y)/l,r=u.y):4&n?(i=e.x+a*(c.y-e.y)/l,r=c.y):2&n?(i=u.x,r=e.y+l*(u.x-e.x)/a):1&n&&(i=c.x,r=e.y+l*(c.x-e.x)/a),new I(i,r,o)}function In(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function An(e,t){var n=t.x-e.x,s=t.y-e.y;return n*n+s*s}function zn(e,t,n,s){var o,i=t.x,r=t.y,a=n.x-i,l=n.y-r,c=a*a+l*l;return c>0&&((o=((e.x-i)*a+(e.y-r)*l)/c)>1?(i=n.x,r=n.y):o>0&&(i+=a*o,r+=l*o)),a=e.x-i,l=e.y-r,s?a*a+l*l:new I(i,r)}function On(e){return!v(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function Rn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),On(e)}function Dn(e,t){var n,s,o,i,r,a,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");On(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=$([0,0]),d=V(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(u=wn(e));var h=e.length,p=[];for(n=0;n<h;n++){var f=$(e[n]);p.push(t.project($([f.lat-u.lat,f.lng-u.lng])))}for(n=0,s=0;n<h-1;n++)s+=p[n].distanceTo(p[n+1])/2;if(0===s)c=p[0];else for(n=0,i=0;n<h-1;n++)if(r=p[n],a=p[n+1],(i+=o=r.distanceTo(a))>s){l=(i-s)/o,c=[a.x-l*(a.x-r.x),a.y-l*(a.y-r.y)];break}var m=t.unproject(z(c));return $([m.lat+u.lat,m.lng+u.lng])}var Vn={__proto__:null,simplify:kn,pointToSegmentDistance:Nn,closestPointOnSegment:Cn,clipSegment:Ln,_getEdgeIntersection:Mn,_getBitCode:In,_sqClosestPointOnSegment:zn,isFlat:On,_flat:Rn,polylineCenter:Dn},Bn={project:function(e){return new I(e.lng,e.lat)},unproject:function(e){return new B(e.y,e.x)},bounds:new O([-180,-90],[180,90])},$n={R:6378137,R_MINOR:6356752.314245179,bounds:new O([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,s=e.lat*t,o=this.R_MINOR/n,i=Math.sqrt(1-o*o),r=i*Math.sin(s),a=Math.tan(Math.PI/4-s/2)/Math.pow((1-r)/(1+r),i/2);return s=-n*Math.log(Math.max(a,1e-10)),new I(e.lng*t*n,s)},unproject:function(e){for(var t,n=180/Math.PI,s=this.R,o=this.R_MINOR/s,i=Math.sqrt(1-o*o),r=Math.exp(-e.y/s),a=Math.PI/2-2*Math.atan(r),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=i*Math.sin(a),t=Math.pow((1-t)/(1+t),i/2),a+=c=Math.PI/2-2*Math.atan(r*t)-a;return new B(a*n,e.x*n/s)}},Fn={__proto__:null,LonLat:Bn,Mercator:$n,SphericalMercator:W},Un=n({},U,{code:"EPSG:3395",projection:$n,transformation:function(){var e=.5/(Math.PI*$n.R);return q(e,.5,-e,.5)}()}),Hn=n({},U,{code:"EPSG:4326",projection:Bn,transformation:q(1/180,1,-1/180,.5)}),Wn=n({},F,{projection:Bn,transformation:q(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,s=t.lat-e.lat;return Math.sqrt(n*n+s*s)},infinite:!0});F.Earth=U,F.EPSG3395=Un,F.EPSG3857=K,F.EPSG900913=J,F.EPSG4326=Hn,F.Simple=Wn;var Zn=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[r(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[r(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=r(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=r(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return r(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?v(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[r(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=r(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var s in this._zoomBoundLayers){var o=this._zoomBoundLayers[s].options;e=void 0===o.minZoom?e:Math.min(e,o.minZoom),t=void 0===o.maxZoom?t:Math.max(t,o.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qn=Zn.extend({initialize:function(e,t){var n,s;if(p(this,t),this._layers={},e)for(n=0,s=e.length;n<s;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,s=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,s);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return r(e)}}),Kn=function(e,t){return new qn(e,t)},Jn=qn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),qn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),qn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new D;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Yn=function(e,t){return new Jn(e,t)},Xn=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(s,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(s.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),s},_setIconStyles:function(e,t){var n=this.options,s=n[t+"Size"];"number"===typeof s&&(s=[s,s]);var o=z(s),i=z("shadow"===t&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),i&&(e.style.marginLeft=-i.x+"px",e.style.marginTop=-i.y+"px"),o&&(e.style.width=o.x+"px",e.style.height=o.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Oe.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Gn(e){return new Xn(e)}var Qn=Xn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof Qn.imagePath&&(Qn.imagePath=this._detectIconPath()),(this.options.imagePath||Qn.imagePath)+Xn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var s=t.exec(e);return s&&s[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=pt("div","leaflet-default-icon-path",document.body),t=ht(e,"background-image")||ht(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),es=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new _n(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_t(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,s=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,i=Et(t._icon),r=n.getPixelBounds(),a=n.getPixelOrigin(),l=R(r.min._subtract(a).add(o),r.max._subtract(a).subtract(o));if(!l.contains(i)){var c=z((Math.max(l.max.x,i.x)-l.max.x)/(r.max.x-l.max.x)-(Math.min(l.min.x,i.x)-l.min.x)/(r.min.x-l.min.x),(Math.max(l.max.y,i.y)-l.max.y)/(r.max.y-l.max.y)-(Math.min(l.min.y,i.y)-l.min.y)/(r.min.y-l.min.y)).multiplyBy(s);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Ct(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=k(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,s=Et(t._icon),o=t._map.layerPointToLatLng(s);n&&Ct(n,s),t._latlng=o,e.latlng=o,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ts=Zn.extend({options:{icon:new Qn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=$(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=$(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),s=!1;n!==this._icon&&(this._icon&&this._removeIcon(),s=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),_t(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Rt(n,"focus",this._panOnFocus,this);var o=e.icon.createShadow(this._shadow),i=!1;o!==this._shadow&&(this._removeShadow(),i=!0),o&&(_t(o,t),o.alt=""),this._shadow=o,e.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&i&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Vt(this._icon,"focus",this._panOnFocus,this),ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ft(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ct(this._icon,e),this._shadow&&Ct(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(_t(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),es)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new es(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&jt(this._icon,e),this._shadow&&jt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?z(t.iconSize):z(0,0),s=t.iconAnchor?z(t.iconAnchor):z(0,0);e.panInside(this._latlng,{paddingTopLeft:s,paddingBottomRight:n.subtract(s)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ns(e,t){return new ts(e,t)}var ss=Zn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),os=ss.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=$(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=$(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return ss.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),s=[e+n,t+n];this._pxBounds=new O(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function is(e,t){return new os(e,t)}var rs=os.extend({initialize:function(e,t,s){if("number"===typeof t&&(t=n({},s,{radius:t})),p(this,t),this._latlng=$(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:ss.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,s=n.options.crs;if(s.distance===U.distance){var o=Math.PI/180,i=this._mRadius/U.R/o,r=n.project([t+i,e]),a=n.project([t-i,e]),l=r.add(a).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(i*o)-Math.sin(t*o)*Math.sin(c*o))/(Math.cos(t*o)*Math.cos(c*o)))/o;(isNaN(u)||0===u)&&(u=i/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,e-u]).x,this._radiusY=l.y-r.y}else{var d=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}});function as(e,t,n){return new rs(e,t,n)}var ls=ss.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,s=1/0,o=null,i=zn,r=0,a=this._parts.length;r<a;r++)for(var l=this._parts[r],c=1,u=l.length;c<u;c++){var d=i(e,t=l[c-1],n=l[c],!0);d<s&&(s=d,o=i(e,t,n))}return o&&(o.distance=Math.sqrt(s)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=$(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new D,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return On(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=On(e),s=0,o=e.length;s<o;s++)n?(t[s]=$(e[s]),this._bounds.extend(t[s])):t[s]=this._convertLatLngs(e[s]);return t},_project:function(){var e=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new I(e,e);this._rawPxBounds&&(this._pxBounds=new O([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var s,o,i=e[0]instanceof B,r=e.length;if(i){for(o=[],s=0;s<r;s++)o[s]=this._map.latLngToLayerPoint(e[s]),n.extend(o[s]);t.push(o)}else for(s=0;s<r;s++)this._projectLatlngs(e[s],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,s,o,i,r,a,l=this._parts;for(t=0,s=0,o=this._rings.length;t<o;t++)for(n=0,i=(a=this._rings[t]).length;n<i-1;n++)(r=Ln(a[n],a[n+1],e,n,!0))&&(l[s]=l[s]||[],l[s].push(r[0]),r[1]===a[n+1]&&n!==i-2||(l[s].push(r[1]),s++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,s=e.length;n<s;n++)e[n]=kn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,s,o,i,r,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,i=this._parts.length;n<i;n++)for(s=0,o=(r=(a=this._parts[n]).length)-1;s<r;o=s++)if((t||0!==s)&&Nn(e,a[o],a[s])<=l)return!0;return!1}});function cs(e,t){return new ls(e,t)}ls._flat=Rn;var us=ls.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=ls.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof B&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){ls.prototype._setLatLngs.call(this,e),On(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return On(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new I(t,t);if(e=new O(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var s,o=0,i=this._rings.length;o<i;o++)(s=bn(this._rings[o],e,!0)).length&&this._parts.push(s)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,s,o,i,r,a,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(o=0,a=this._parts.length;o<a;o++)for(i=0,r=(l=(t=this._parts[o]).length)-1;i<l;r=i++)n=t[i],s=t[r],n.y>e.y!==s.y>e.y&&e.x<(s.x-n.x)*(e.y-n.y)/(s.y-n.y)+n.x&&(c=!c);return c||ls.prototype._containsPoint.call(this,e,!0)}});function ds(e,t){return new us(e,t)}var hs=Jn.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,s,o=v(e)?e:e.features;if(o){for(t=0,n=o.length;t<n;t++)((s=o[t]).geometries||s.geometry||s.features||s.coordinates)&&this.addData(s);return this}var i=this.options;if(i.filter&&!i.filter(e))return this;var r=ps(e,i);return r?(r.feature=bs(e),r.defaultOptions=r.options,this.resetStyle(r),i.onEachFeature&&i.onEachFeature(e,r),this.addLayer(r)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function ps(e,t){var n,s,o,i,r="Feature"===e.type?e.geometry:e,a=r?r.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||ms;if(!a&&!r)return null;switch(r.type){case"Point":return fs(c,e,n=u(a),t);case"MultiPoint":for(o=0,i=a.length;o<i;o++)n=u(a[o]),l.push(fs(c,e,n,t));return new Jn(l);case"LineString":case"MultiLineString":return s=gs(a,"LineString"===r.type?0:1,u),new ls(s,t);case"Polygon":case"MultiPolygon":return s=gs(a,"Polygon"===r.type?1:2,u),new us(s,t);case"GeometryCollection":for(o=0,i=r.geometries.length;o<i;o++){var d=ps({geometry:r.geometries[o],type:"Feature",properties:e.properties},t);d&&l.push(d)}return new Jn(l);case"FeatureCollection":for(o=0,i=r.features.length;o<i;o++){var h=ps(r.features[o],t);h&&l.push(h)}return new Jn(l);default:throw new Error("Invalid GeoJSON object.")}}function fs(e,t,n,s){return e?e(t,n):new ts(n,s&&s.markersInheritOptions&&s)}function ms(e){return new B(e[1],e[0],e[2])}function gs(e,t,n){for(var s,o=[],i=0,r=e.length;i<r;i++)s=t?gs(e[i],t-1,n):(n||ms)(e[i]),o.push(s);return o}function vs(e,t){return void 0!==(e=$(e)).alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function ys(e,t,n,s){for(var o=[],i=0,r=e.length;i<r;i++)o.push(t?ys(e[i],On(e[i])?0:t-1,n,s):vs(e[i],s));return!t&&n&&o.length>0&&o.push(o[0].slice()),o}function _s(e,t){return e.feature?n({},e.feature,{geometry:t}):bs(t)}function bs(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var xs={toGeoJSON:function(e){return _s(this,{type:"Point",coordinates:vs(this.getLatLng(),e)})}};function ws(e,t){return new hs(e,t)}ts.include(xs),rs.include(xs),os.include(xs),ls.include({toGeoJSON:function(e){var t=!On(this._latlngs);return _s(this,{type:(t?"Multi":"")+"LineString",coordinates:ys(this._latlngs,t?1:0,!1,e)})}}),us.include({toGeoJSON:function(e){var t=!On(this._latlngs),n=t&&!On(this._latlngs[0]),s=ys(this._latlngs,n?2:t?1:0,!0,e);return t||(s=[s]),_s(this,{type:(n?"Multi":"")+"Polygon",coordinates:s})}}),qn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),_s(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,s=[];return this.eachLayer(function(t){if(t.toGeoJSON){var o=t.toGeoJSON(e);if(n)s.push(o.geometry);else{var i=bs(o);"FeatureCollection"===i.type?s.push.apply(s,i.features):s.push(i)}}}),n?_s(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});var js=ws,Ss=Zn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=V(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_t(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&vt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=V(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:pt("img");_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=o(this.fire,this,"load"),t.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Nt(this._image,n,t)},_reset:function(){var e=this._image,t=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Ct(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){jt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),ks=function(e,t,n){return new Ss(e,t,n)},Ns=Ss.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:pt("video");if(_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=o(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),s=[],i=0;i<n.length;i++)s.push(n[i].src);this._url=n.length>0?s:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var r=0;r<this._url.length;r++){var a=pt("source");a.src=this._url[r],t.appendChild(a)}}}});function Cs(e,t,n){return new Ns(e,t,n)}var Es=Ss.extend({_initImage:function(){var e=this._image=this._url;_t(e,"leaflet-image-layer"),this._zoomAnimated&&_t(e,"leaflet-zoom-animated"),this.options.className&&_t(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Ps(e,t,n){return new Es(e,t,n)}var Ts=Zn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof B||v(e))?(this._latlng=$(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&jt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&jt(this._container,1),this.bringToFront(),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(jt(this._container,0),this._removeTimeout=setTimeout(o(ft,void 0,this._container),200)):ft(this._container),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=$(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&vt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Jn){t=null;var n=this._source._layers;for(var s in n)if(n[s]._map){t=n[s];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=z(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ct(this._container,e.add(n)):t=t.add(e).add(n);var s=this._containerBottom=-t.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=s+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,s){var o=t;return o instanceof e||(o=new e(s).setContent(t)),n&&o.setLatLng(n),o}}),Zn.include({_initOverlay:function(e,t,n,s){var o=n;return o instanceof e?(p(o,s),o._source=this):(o=t&&!s?t:new e(s,this)).setContent(n),o}});var Ls=Ts.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Ts.prototype.openOn.call(this,e)},onAdd:function(e){Ts.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ss||this._source.on("preclick",Ht))},onRemove:function(e){Ts.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ss||this._source.off("preclick",Ht))},getEvents:function(){var e=Ts.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=pt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=pt("div",e+"-content-wrapper",t);if(this._contentNode=pt("div",e+"-content",n),Zt(t),Wt(this._contentNode),Rt(t,"contextmenu",Ht),this._tipContainer=pt("div",e+"-tip-container",t),this._tip=pt("div",e+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=pt("a",e+"-close-button",t);s.setAttribute("role","button"),s.setAttribute("aria-label","Close popup"),s.href="#close",s.innerHTML='<span aria-hidden="true">&#215;</span>',Rt(s,"click",function(e){qt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var s=e.offsetHeight,o=this.options.maxHeight,i="leaflet-popup-scrolled";o&&s>o?(t.height=o+"px",_t(e,i)):bt(e,i),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Ct(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ht(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,s=this._containerWidth,o=new I(this._containerLeft,-n-this._containerBottom);o._add(Et(this._container));var i=e.layerPointToContainerPoint(o),r=z(this.options.autoPanPadding),a=z(this.options.autoPanPaddingTopLeft||r),l=z(this.options.autoPanPaddingBottomRight||r),c=e.getSize(),u=0,d=0;i.x+s+l.x>c.x&&(u=i.x+s-c.x+l.x),i.x-u-a.x<0&&(u=i.x-a.x),i.y+n+l.y>c.y&&(d=i.y+n-c.y+l.y),i.y-d-a.y<0&&(d=i.y-a.y),(u||d)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,d]))}},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ms=function(e,t){return new Ls(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Ls,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Zn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Ls,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Jn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Kt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof ss?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Is=Ts.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Ts.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Ts.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Ts.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+r(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,s=this._map,o=this._container,i=s.latLngToContainerPoint(s.getCenter()),r=s.layerPointToContainerPoint(e),a=this.options.direction,l=o.offsetWidth,c=o.offsetHeight,u=z(this.options.offset),d=this._getAnchor();"top"===a?(t=l/2,n=c):"bottom"===a?(t=l/2,n=0):"center"===a?(t=l/2,n=c/2):"right"===a?(t=0,n=c/2):"left"===a?(t=l,n=c/2):r.x<i.x?(a="right",t=0,n=c/2):(a="left",t=l+2*(u.x+d.x),n=c/2),e=e.subtract(z(t,n,!0)).add(u).add(d),bt(o,"leaflet-tooltip-right"),bt(o,"leaflet-tooltip-left"),bt(o,"leaflet-tooltip-top"),bt(o,"leaflet-tooltip-bottom"),_t(o,"leaflet-tooltip-"+a),Ct(o,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&jt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),As=function(e,t){return new Is(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Is,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Zn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Is,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Jn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(Rt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Rt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,s=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),s=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(s)}});var zs=Xn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(mt(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var s=z(n.bgPos);t.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Os(e){return new zs(e)}Xn.Default=Qn;var Rs=Zn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),ft(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof I?e:new I(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,s=-e(-1/0,1/0),o=0,i=n.length;o<i;o++)t=n[o].style.zIndex,n[o]!==this._container&&t&&(s=e(s,+t));isFinite(s)&&(this.options.zIndex=s+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Oe.ielt9){jt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var s in this._tiles){var o=this._tiles[s];if(o.current&&o.loaded){var i=Math.min(1,(e-o.loaded)/200);jt(o.el,i),i<1?t=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(N(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(ft(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var s=this._levels[e],o=this._map;return s||((s=this._levels[e]={}).el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=t,s.origin=o.project(o.unproject(o.getPixelOrigin()),e).round(),s.zoom=e,this._setZoomTransform(s,o.getCenter(),o.getZoom()),c(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var s=t.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)ft(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,s){var o=Math.floor(e/2),i=Math.floor(t/2),r=n-1,a=new I(+o,+i);a.z=+r;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),r>s&&this._retainParent(o,i,r,s))},_retainChildren:function(e,t,n,s){for(var o=2*e;o<2*e+2;o++)for(var i=2*t;i<2*t+2;i++){var r=new I(o,i);r.z=n+1;var a=this._tileCoordsToKey(r),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<s&&this._retainChildren(o,i,n+1,s))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,s){var o=Math.round(t);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var i=this.options.updateWhenZooming&&o!==this._tileZoom;s&&!i||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var s=this._map.getZoomScale(n,e.zoom),o=e.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(t,n)).round();Oe.any3d?Nt(e.el,o,s):Ct(e.el,o)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),s=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],s).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],s).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],s).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],s).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),s=t.getZoomScale(n,this._tileZoom),o=t.project(e,this._tileZoom).floor(),i=t.getSize().divideBy(2*s);return new O(o.subtract(i),o.add(i))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var s=this._getTiledPixelBounds(e),o=this._pxBoundsToTileRange(s),i=o.getCenter(),r=[],a=this.options.keepBuffer,l=new O(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new I(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var d=o.min.y;d<=o.max.y;d++)for(var h=o.min.x;h<=o.max.x;h++){var p=new I(h,d);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:r.push(p)}}if(r.sort(function(e,t){return e.distanceTo(i)-t.distanceTo(i)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(h=0;h<r.length;h++)this._addTile(r[h],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(e);return V(this.options.bounds).overlaps(s)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),s=e.scaleBy(n),o=s.add(n);return[t.unproject(s,e.z),t.unproject(o,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new D(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new I(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(ft(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){_t(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Oe.ielt9&&this.options.opacity<1&&jt(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),s=this._tileCoordsToKey(e),i=this.createTile(this._wrapCoords(e),o(this._tileReady,this,e));this._initTile(i),this.createTile.length<2&&k(o(this._tileReady,this,e,null,i)),Ct(i,n),this._tiles[s]={el:i,coords:e,current:!0},t.appendChild(i),this.fire("tileloadstart",{tile:i,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var s=this._tileCoordsToKey(e);(n=this._tiles[s])&&(n.loaded=+new Date,this._map._fadeAnimated?(jt(n.el,0),N(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(_t(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Oe.ielt9||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new I(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new O(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Ds(e){return new Rs(e)}var Vs=Rs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&Oe.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Rt(n,"load",o(this._tileOnLoad,this,t,n)),Rt(n,"error",o(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Oe.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var s=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=s),t["-y"]=s}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Oe.ielt9?setTimeout(o(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var s=this.options.errorTileUrl;s&&t.getAttribute("src")!==s&&(t.src=s),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=_;var n=this._tiles[e].coords;ft(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",_),Rs.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==_))return Rs.prototype._tileReady.call(this,e,t,n)}});function Bs(e,t){return new Vs(e,t)}var $s=Vs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var s=n({},this.defaultWmsParams);for(var o in t)o in this.options||(s[o]=t[o]);var i=(t=p(this,t)).detectRetina&&Oe.retina?2:1,r=this.getTileSize();s.width=r.x*i,s.height=r.y*i,this.wmsParams=s},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Vs.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,s=R(n.project(t[0]),n.project(t[1])),o=s.min,i=s.max,r=(this._wmsVersion>=1.3&&this._crs===Hn?[o.y,o.x,i.y,i.x]:[o.x,o.y,i.x,i.y]).join(","),a=Vs.prototype.getTileUrl.call(this,e);return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Fs(e,t){return new $s(e,t)}Vs.WMS=$s,Bs.wms=Fs;var Us=Zn.extend({options:{padding:.1},initialize:function(e){p(this,e),r(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_t(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),i=s.multiplyBy(-n).add(o).subtract(this._map._getNewPixelOrigin(e,t));Oe.any3d?Nt(this._container,i,n):Ct(this._container,i)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new O(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Hs=Us.extend({options:{tolerance:0},getEvents:function(){var e=Us.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Us.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Rt(e,"mousemove",this._onMouseMove,this),Rt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Rt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,ft(this._container),Vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Us.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),s=Oe.retina?2:1;Ct(t,e.min),t.width=s*n.x,t.height=s*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Us.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[r(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,s=t.prev;n?n.prev=s:this._drawLast=s,s?s.next=n:this._drawFirst=n,delete e._order,delete this._layers[r(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,s=e.options.dashArray.split(/[, ]+/),o=[];for(n=0;n<s.length;n++){if(t=Number(s[n]),isNaN(t))return;o.push(t)}e.options._dashArray=o}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)e=s.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,s,o,i,r=e._parts,a=r.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(s=0,o=r[n].length;s<o;s++)i=r[n][s],l[s?"lineTo":"moveTo"](i.x,i.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,s=Math.max(Math.round(e._radius),1),o=(Math.max(Math.round(e._radiusY),1)||s)/s;1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(t.x,t.y/o,s,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,s=this._map.mouseEventToLayerPoint(e),o=this._drawFirst;o;o=o.next)(t=o.layer).options.interactive&&t._containsPoint(s)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(bt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,s,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(t)&&(s=n);s!==this._hoveredLayer&&(this._handleMouseOut(e),s&&(_t(this._container,"leaflet-interactive"),this._fireEvent([s],e,"mouseover"),this._hoveredLayer=s)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,s=t.prev;n&&(n.prev=s,s?s.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,s=t.prev;s&&(s.next=n,n?n.prev=s:s&&(this._drawLast=s),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Ws(e){return Oe.canvas?new Hs(e):null}var Zs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qs={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Us.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Zs("shape");_t(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Zs("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[r(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;ft(t),e.removeInteractiveTarget(t),delete this._layers[r(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,s=e.options,o=e._container;o.stroked=!!s.stroke,o.filled=!!s.fill,s.stroke?(t||(t=e._stroke=Zs("stroke")),o.appendChild(t),t.weight=s.weight+"px",t.color=s.color,t.opacity=s.opacity,s.dashArray?t.dashStyle=v(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=s.lineCap.replace("butt","flat"),t.joinstyle=s.lineJoin):t&&(o.removeChild(t),e._stroke=null),s.fill?(n||(n=e._fill=Zs("fill")),o.appendChild(n),n.color=s.fillColor||s.color,n.opacity=s.fillOpacity):n&&(o.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),s=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+s+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){vt(e._container)}},Ks=Oe.vml?Zs:Y,Js=Us.extend({_initContainer:function(){this._container=Ks("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ks("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ft(this._container),Vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Us.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Ct(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Ks("path");e.options.className&&_t(t,e.options.className),e.options.interactive&&_t(t,"leaflet-interactive"),this._updateStyle(e),this._layers[r(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){ft(e._path),e.removeInteractiveTarget(e._path),delete this._layers[r(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,X(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),s="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",o=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+s+2*n+",0 "+s+2*-n+",0 ";this._setPath(e,o)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){vt(e._path)}});function Ys(e){return Oe.svg||Oe.vml?new Js(e):null}Oe.vml&&Js.include(qs),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Ws(e)||Ys(e)}});var Xs=us.extend({initialize:function(e,t){us.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=V(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Gs(e,t){return new Xs(e,t)}Js.create=Ks,Js.pointsToPath=X,hs.geometryToLayer=ps,hs.coordsToLatLng=ms,hs.coordsToLatLngs=gs,hs.latLngToCoords=vs,hs.latLngsToCoords=ys,hs.getFeature=_s,hs.asFeature=bs,nn.mergeOptions({boxZoom:!0});var Qs=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Rt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),st(),Tt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Rt(document,{contextmenu:Kt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),_t(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new O(this._point,this._startPoint),n=t.getSize();Ct(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ft(this._box),bt(this._container,"leaflet-crosshair")),ot(),Lt(),Vt(document,{contextmenu:Kt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var t=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",Qs),nn.mergeOptions({doubleClickZoom:!0});var eo=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),s=t.options.zoomDelta,o=e.originalEvent.shiftKey?n-s:n+s;"center"===t.options.doubleClickZoom?t.setZoom(o):t.setZoomAround(e.containerPoint,o)}});nn.addInitHook("addHandler","doubleClickZoom",eo),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var to=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new _n(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}_t(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){bt(this._map._container,"leaflet-grab"),bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=V(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,s=this._draggable._newPos.x,o=(s-t+n)%e+t-n,i=(s+t+n)%e-t-n,r=Math.abs(o+n)<Math.abs(i+n)?o:i;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(e){var t=this._map,n=t.options,s=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),s)t.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),i=(this._lastTime-this._times[0])/1e3,r=n.easeLinearity,a=o.multiplyBy(r/i),l=a.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=a.multiplyBy(c/l),d=c/(n.inertiaDeceleration*r),h=u.multiplyBy(-d/2).round();h.x||h.y?(h=t._limitOffset(h,t.options.maxBounds),k(function(){t.panBy(h,{duration:d,easeLinearity:r,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",to),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var no=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Rt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,s=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(s,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,s=this._panKeys={},o=this.keyCodes;for(t=0,n=o.left.length;t<n;t++)s[o.left[t]]=[-1*e,0];for(t=0,n=o.right.length;t<n;t++)s[o.right[t]]=[e,0];for(t=0,n=o.down.length;t<n;t++)s[o.down[t]]=[0,e];for(t=0,n=o.up.length;t<n;t++)s[o.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,s=this._zoomKeys={},o=this.keyCodes;for(t=0,n=o.zoomIn.length;t<n;t++)s[o.zoomIn[t]]=e;for(t=0,n=o.zoomOut.length;t<n;t++)s[o.zoomOut[t]]=-e},_addHooks:function(){Rt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,s=this._map;if(n in this._panKeys){if(!s._panAnim||!s._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=z(t).multiplyBy(3)),s.options.maxBounds&&(t=s._limitOffset(z(t),s.options.maxBounds)),s.options.worldCopyJump){var o=s.wrapLatLng(s.unproject(s.project(s.getCenter()).add(t)));s.panTo(o)}else s.panBy(t)}else if(n in this._zoomKeys)s.setZoom(s.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!s._popup||!s._popup.options.closeOnEscapeKey)return;s.closePopup()}Kt(e)}}});nn.addInitHook("addHandler","keyboard",no),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var so=gn.extend({addHooks:function(){Rt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Gt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var s=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),s),Kt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var s=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,i=n?Math.ceil(o/n)*n:o,r=e._limitZoom(t+(this._delta>0?i:-i))-t;this._delta=0,this._startTime=null,r&&("center"===e.options.scrollWheelZoom?e.setZoom(t+r):e.setZoomAround(this._lastMousePos,t+r))}});nn.addInitHook("addHandler","scrollWheelZoom",so);var oo=600;nn.mergeOptions({tapHold:Oe.touchNative&&Oe.safari&&Oe.mobile,tapTolerance:15});var io=gn.extend({addHooks:function(){Rt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new I(t.clientX,t.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Rt(document,"touchend",qt),Rt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),oo),Rt(document,"touchend touchcancel contextmenu",this._cancel,this),Rt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Vt(document,"touchend",qt),Vt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Vt(document,"touchend touchcancel contextmenu",this._cancel,this),Vt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new I(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",io),nn.mergeOptions({touchZoom:Oe.touch,bounceAtZoomLimits:!0});var ro=gn.extend({addHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),Rt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),Vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),s=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(s)._divideBy(2))),this._startDist=n.distanceTo(s),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Rt(document,"touchmove",this._onTouchMove,this),Rt(document,"touchend touchcancel",this._onTouchEnd,this),qt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),s=t.mouseEventToContainerPoint(e.touches[1]),i=n.distanceTo(s)/this._startDist;if(this._zoom=t.getScaleZoom(i,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&i<1||this._zoom>t.getMaxZoom()&&i>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===i)return}else{var r=n._add(s)._divideBy(2)._subtract(this._centerPoint);if(1===i&&0===r.x&&0===r.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var a=o(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=k(a,this,!0),qt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,N(this._animRequest),Vt(document,"touchmove",this._onTouchMove,this),Vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",ro),nn.BoxZoom=Qs,nn.DoubleClickZoom=eo,nn.Drag=to,nn.Keyboard=no,nn.ScrollWheelZoom=so,nn.TapHold=io,nn.TouchZoom=ro,e.Bounds=O,e.Browser=Oe,e.CRS=F,e.Canvas=Hs,e.Circle=rs,e.CircleMarker=os,e.Class=E,e.Control=on,e.DivIcon=zs,e.DivOverlay=Ts,e.DomEvent=en,e.DomUtil=Ot,e.Draggable=_n,e.Evented=M,e.FeatureGroup=Jn,e.GeoJSON=hs,e.GridLayer=Rs,e.Handler=gn,e.Icon=Xn,e.ImageOverlay=Ss,e.LatLng=B,e.LatLngBounds=D,e.Layer=Zn,e.LayerGroup=qn,e.LineUtil=Vn,e.Map=nn,e.Marker=ts,e.Mixin=vn,e.Path=ss,e.Point=I,e.PolyUtil=Sn,e.Polygon=us,e.Polyline=ls,e.Popup=Ls,e.PosAnimation=tn,e.Projection=Fn,e.Rectangle=Xs,e.Renderer=Us,e.SVG=Js,e.SVGOverlay=Es,e.TileLayer=Vs,e.Tooltip=Is,e.Transformation=Z,e.Util=C,e.VideoOverlay=Ns,e.bind=o,e.bounds=R,e.canvas=Ws,e.circle=as,e.circleMarker=is,e.control=rn,e.divIcon=Os,e.extend=n,e.featureGroup=Yn,e.geoJSON=ws,e.geoJson=js,e.gridLayer=Ds,e.icon=Gn,e.imageOverlay=ks,e.latLng=$,e.latLngBounds=V,e.layerGroup=Kn,e.map=sn,e.marker=ns,e.point=z,e.polygon=ds,e.polyline=cs,e.popup=Ms,e.rectangle=Gs,e.setOptions=p,e.stamp=r,e.svg=Ys,e.svgOverlay=Ps,e.tileLayer=Bs,e.tooltip=As,e.transformation=q,e.version=t,e.videoOverlay=Cs;var ao=window.L;e.noConflict=function(){return window.L=ao,this},window.L=e}(t)},249:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg=="},285:e=>{var t,n,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"===typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var a,l=[],c=!1,u=-1;function d(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=r(d);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||r(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},391:(e,t,n)=>{"use strict";var s=n(950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},392:(e,t,n)=>{"use strict";var s=n(218),o=n(496);function i(e){var t=0,n=0,s=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),s=10*t,o=10*n,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(s=e.deltaX),(s||o)&&e.deltaMode&&(1==e.deltaMode?(s*=40,o*=40):(s*=800,o*=800)),s&&!t&&(t=s<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:s,pixelY:o}}i.getEventType=function(){return s.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},e.exports=i},496:(e,t,n)=>{"use strict";var s,o=n(989);o.canUseDOM&&(s=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var r=document.createElement("div");r.setAttribute(n,"return;"),i="function"===typeof r[n]}return!i&&s&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}},579:(e,t,n)=>{"use strict";e.exports=n(153)},612:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,o=e[s];if(!(0<i(o,t)))break e;e[s]=t,e[n]=o,n=s}}function s(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,o=e.length,r=o>>>1;s<r;){var a=2*(s+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[s]=u,e[c]=n,s=c):(e[s]=l,e[a]=n,s=a);else{if(!(c<o&&0>i(u,n)))break e;e[s]=u,e[c]=n,s=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=s(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=s(u)}}function x(e){if(g=!1,b(e),!m)if(null!==s(c))m=!0,I(w);else{var t=s(u);null!==t&&A(x,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(N),N=-1),f=!0;var i=p;try{for(b(n),h=s(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var r=h.callback;if("function"===typeof r){h.callback=null,p=h.priorityLevel;var a=r(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===s(c)&&o(c),b(n)}else o(c);h=s(c)}if(null!==h)var l=!0;else{var d=s(u);null!==d&&A(x,d.startTime-n),l=!1}return l}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,S=!1,k=null,N=-1,C=5,E=-1;function P(){return!(t.unstable_now()-E<C)}function T(){if(null!==k){var e=t.unstable_now();E=e;var n=!0;try{n=k(!0,e)}finally{n?j():(S=!1,k=null)}}else S=!1}if("function"===typeof _)j=function(){_(T)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,M=L.port2;L.port1.onmessage=T,j=function(){M.postMessage(null)}}else j=function(){v(T,0)};function I(e){k=e,S||(S=!0,j())}function A(e,n){N=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var r=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?r+i:r:i=r,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>r?(e.sortIndex=i,n(u,e),null===s(c)&&e===s(u)&&(g?(y(N),N=-1):g=!0,A(x,i-r))):(e.sortIndex=a,n(c,e),m||f||(m=!0,I(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},730:(e,t,n)=>{"use strict";var s=n(43),o=n(67);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)r.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,s,o,i,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=r}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,s){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,s){if(null===t||"undefined"===typeof t||function(e,t,n,s){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,s)&&(n=null),s||null===o?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,s=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var O,R=Object.assign;function D(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var V=!1;function B(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=s.stack.split("\n"),r=o.length-1,a=i.length-1;1<=r&&0<=a&&o[r]!==i[a];)a--;for(;1<=r&&0<=a;r--,a--)if(o[r]!==i[a]){if(1!==r||1!==a)do{if(r--,0>--a||o[r]!==i[a]){var l="\n"+o[r].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=r&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function $(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function F(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case w:return"Portal";case k:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:F(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return F(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Z(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){s=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=W(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function G(e,t){X(e,t);var n=H(t.value),s=t.type;if(null!=n)"number"===s?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,s){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&s&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(s&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),s=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=s&&(e.defaultValue=""+s)}function re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var s=0===n.indexOf("--"),o=me(n,t[n],s);"float"===n&&(n="cssFloat"),s?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,je=null,Se=null;function ke(e){if(e=bo(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=wo(t),we(e.stateNode,e.type,t))}}function Ne(e){je?Se?Se.push(e):Se=[e]:je=e}function Ce(){if(je){var e=je,t=Se;if(Se=je=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Te=!1;function Le(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ee(e,t,n)}finally{Te=!1,(null!==je||null!==Se)&&(Pe(),Ce())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var s=wo(n);if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ie=!1;if(u)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ue){Ie=!1}function ze(e,t,n,s,o,i,r,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Re=null,De=!1,Ve=null,Be={onError:function(e){Oe=!0,Re=e}};function $e(e,t,n,s,o,i,r,a,l){Oe=!1,Re=null,ze.apply(Be,arguments)}function Fe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Fe(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Fe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,s=t;;){var o=n.return;if(null===o)break;var r=o.alternate;if(null===r){if(null!==(s=o.return)){n=s;continue}break}if(o.child===r.child){for(r=o.child;r;){if(r===n)return He(o),e;if(r===s)return He(o),t;r=r.sibling}throw Error(i(188))}if(n.return!==s.return)n=o,s=r;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,s=r;break}if(l===s){a=!0,s=o,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,s=o;break}if(l===s){a=!0,s=r,n=o;break}l=l.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==s)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ze(e):null}function Ze(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ze(e);if(null!==t)return t;e=e.sibling}return null}var qe=o.unstable_scheduleCallback,Ke=o.unstable_cancelCallback,Je=o.unstable_shouldYield,Ye=o.unstable_requestPaint,Xe=o.unstable_now,Ge=o.unstable_getCurrentPriorityLevel,Qe=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,st=o.unstable_IdlePriority,ot=null,it=null;var rt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var s=0,o=e.suspendedLanes,i=e.pingedLanes,r=268435455&n;if(0!==r){var a=r&~o;0!==a?s=dt(a):0!==(i&=r)&&(s=dt(i))}else 0!==(r=n&~o)?s=dt(r):0!==i&&(s=dt(i));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&o)&&((o=s&-s)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&s)&&(s|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)o=1<<(n=31-rt(t)),s|=e[n],t&=~o;return s}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-rt(n),o=1<<s;o&t|e[s]&t&&(e[s]|=t),n&=~o}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,jt,St,kt,Nt=!1,Ct=[],Et=null,Pt=null,Tt=null,Lt=new Map,Mt=new Map,It=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Ot(e,t,n,s,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&wt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Rt(e){var t=_o(e.target);if(null!==t){var n=Fe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void kt(e.priority,function(){jt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&wt(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);be=s,n.target.dispatchEvent(s),be=null,t.shift()}return!0}function Vt(e,t,n){Dt(e)&&n.delete(t)}function Bt(){Nt=!1,null!==Et&&Dt(Et)&&(Et=null),null!==Pt&&Dt(Pt)&&(Pt=null),null!==Tt&&Dt(Tt)&&(Tt=null),Lt.forEach(Vt),Mt.forEach(Vt)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function Ft(e){function t(t){return $t(t,e)}if(0<Ct.length){$t(Ct[0],e);for(var n=1;n<Ct.length;n++){var s=Ct[n];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==Et&&$t(Et,e),null!==Pt&&$t(Pt,e),null!==Tt&&$t(Tt,e),Lt.forEach(t),Mt.forEach(t),n=0;n<It.length;n++)(s=It[n]).blockedOn===e&&(s.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Rt(n),null===n.blockedOn&&It.shift()}var Ut=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,s){var o=_t,i=Ut.transition;Ut.transition=null;try{_t=1,qt(e,t,n,s)}finally{_t=o,Ut.transition=i}}function Zt(e,t,n,s){var o=_t,i=Ut.transition;Ut.transition=null;try{_t=4,qt(e,t,n,s)}finally{_t=o,Ut.transition=i}}function qt(e,t,n,s){if(Ht){var o=Jt(e,t,n,s);if(null===o)Hs(e,t,s,Kt,n),zt(e,s);else if(function(e,t,n,s,o){switch(t){case"focusin":return Et=Ot(Et,e,t,n,s,o),!0;case"dragenter":return Pt=Ot(Pt,e,t,n,s,o),!0;case"mouseover":return Tt=Ot(Tt,e,t,n,s,o),!0;case"pointerover":var i=o.pointerId;return Lt.set(i,Ot(Lt.get(i)||null,e,t,n,s,o)),!0;case"gotpointercapture":return i=o.pointerId,Mt.set(i,Ot(Mt.get(i)||null,e,t,n,s,o)),!0}return!1}(o,e,t,n,s))s.stopPropagation();else if(zt(e,s),4&t&&-1<At.indexOf(e)){for(;null!==o;){var i=bo(o);if(null!==i&&xt(i),null===(i=Jt(e,t,n,s))&&Hs(e,t,s,Kt,n),i===o)break;o=i}null!==o&&s.stopPropagation()}else Hs(e,t,s,null,n)}}var Kt=null;function Jt(e,t,n,s){if(Kt=null,null!==(e=_o(e=xe(s))))if(null===(t=Fe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ge()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Xt=null,Gt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Gt,s=n.length,o="value"in Xt?Xt.value:Xt.textContent,i=o.length;for(e=0;e<s&&n[e]===o[e];e++);var r=s-e;for(t=1;t<=r&&n[s-t]===o[i-t];t++);return Qt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function on(e){function t(t,n,s,o,i){for(var r in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(o):o[r]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var rn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=R({},cn,{view:0,detail:0}),hn=on(dn),pn=R({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(rn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=rn=0,ln=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(R({},pn,{dataTransfer:0})),gn=on(R({},dn,{relatedTarget:0})),vn=on(R({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=R({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=on(yn),bn=on(R({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function kn(){return Sn}var Nn=R({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Nn),En=on(R({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(R({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Tn=on(R({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=R({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=on(Ln),In=[9,13,27,32],An=u&&"CompositionEvent"in window,zn=null;u&&"documentMode"in document&&(zn=document.documentMode);var On=u&&"TextEvent"in window&&!zn,Rn=u&&(!An||zn&&8<zn&&11>=zn),Dn=String.fromCharCode(32),Vn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Wn(e,t,n,s){Ne(s),0<(t=Zs(t,"onChange")).length&&(n=new un("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Zn=null,qn=null;function Kn(e){Ds(e,0)}function Jn(e){if(q(xo(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Gn;if(u){var Qn="oninput"in document;if(!Qn){var es=document.createElement("div");es.setAttribute("oninput","return;"),Qn="function"===typeof es.oninput}Gn=Qn}else Gn=!1;Xn=Gn&&(!document.documentMode||9<document.documentMode)}function ts(){Zn&&(Zn.detachEvent("onpropertychange",ns),qn=Zn=null)}function ns(e){if("value"===e.propertyName&&Jn(qn)){var t=[];Wn(t,qn,e,xe(e)),Le(Kn,t)}}function ss(e,t,n){"focusin"===e?(ts(),qn=n,(Zn=t).attachEvent("onpropertychange",ns)):"focusout"===e&&ts()}function os(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(qn)}function is(e,t){if("click"===e)return Jn(t)}function rs(e,t){if("input"===e||"change"===e)return Jn(t)}var as="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ls(e,t){if(as(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!d.call(t,o)||!as(e[o],t[o]))return!1}return!0}function cs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function us(e,t){var n,s=cs(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cs(s)}}function ds(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ds(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hs(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function ps(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fs(e){var t=hs(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ds(n.ownerDocument.documentElement,n)){if(null!==s&&ps(n))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(s.start,o);s=void 0===s.end?i:Math.min(s.end,o),!e.extend&&i>s&&(o=s,s=i,i=o),o=us(n,i);var r=us(n,s);o&&r&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ms=u&&"documentMode"in document&&11>=document.documentMode,gs=null,vs=null,ys=null,_s=!1;function bs(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_s||null==gs||gs!==K(s)||("selectionStart"in(s=gs)&&ps(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},ys&&ls(ys,s)||(ys=s,0<(s=Zs(vs,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=gs)))}function xs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ws={animationend:xs("Animation","AnimationEnd"),animationiteration:xs("Animation","AnimationIteration"),animationstart:xs("Animation","AnimationStart"),transitionend:xs("Transition","TransitionEnd")},js={},Ss={};function ks(e){if(js[e])return js[e];if(!ws[e])return e;var t,n=ws[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ss)return js[e]=n[t];return e}u&&(Ss=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);var Ns=ks("animationend"),Cs=ks("animationiteration"),Es=ks("animationstart"),Ps=ks("transitionend"),Ts=new Map,Ls="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(e,t){Ts.set(e,t),l(t,[e])}for(var Is=0;Is<Ls.length;Is++){var As=Ls[Is];Ms(As.toLowerCase(),"on"+(As[0].toUpperCase()+As.slice(1)))}Ms(Ns,"onAnimationEnd"),Ms(Cs,"onAnimationIteration"),Ms(Es,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(Ps,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Os=new Set("cancel close invalid load scroll toggle".split(" ").concat(zs));function Rs(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,s,o,r,a,l,c){if($e.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var u=Re;Oe=!1,Re=null,De||(De=!0,Ve=u)}}(s,t,void 0,e),e.currentTarget=null}function Ds(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],o=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var r=s.length-1;0<=r;r--){var a=s[r],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;Rs(o,a,c),i=l}else for(r=0;r<s.length;r++){if(l=(a=s[r]).instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;Rs(o,a,c),i=l}}}if(De)throw e=Ve,De=!1,Ve=null,e}function Vs(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var s=e+"__bubble";n.has(s)||(Us(t,e,2,!1),n.add(s))}function Bs(e,t,n){var s=0;t&&(s|=4),Us(n,e,s,t)}var $s="_reactListening"+Math.random().toString(36).slice(2);function Fs(e){if(!e[$s]){e[$s]=!0,r.forEach(function(t){"selectionchange"!==t&&(Os.has(t)||Bs(t,!1,e),Bs(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$s]||(t[$s]=!0,Bs("selectionchange",!1,t))}}function Us(e,t,n,s){switch(Yt(t)){case 1:var o=Wt;break;case 4:o=Zt;break;default:o=qt}n=o.bind(null,t,n,e),o=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),s?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hs(e,t,n,s,o){var i=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var r=s.tag;if(3===r||4===r){var a=s.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===r)for(r=s.return;null!==r;){var l=r.tag;if((3===l||4===l)&&((l=r.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;r=r.return}for(;null!==a;){if(null===(r=_o(a)))return;if(5===(l=r.tag)||6===l){s=i=r;continue e}a=a.parentNode}}s=s.return}Le(function(){var s=i,o=xe(n),r=[];e:{var a=Ts.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Ns:case Cs:case Es:l=vn;break;case Ps:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=s;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Me(f,h))&&u.push(Ws(f,m,p)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,o),r.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!_o(c)&&!c[mo])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=s,null!==(c=(c=n.relatedTarget||n.toElement)?_o(c):null)&&(c!==(d=Fe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:xo(l),p=null==c?a:xo(c),(a=new u(m,f+"leave",l,n,o)).target=d,a.relatedTarget=p,m=null,_o(o)===s&&((u=new u(h,f+"enter",c,n,o)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=qs(p))f++;for(p=0,m=h;m;m=qs(m))p++;for(;0<f-p;)u=qs(u),f--;for(;0<p-f;)h=qs(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=qs(u),h=qs(h)}u=null}else u=null;null!==l&&Ks(r,a,l,u,!1),null!==c&&null!==d&&Ks(r,d,c,u,!0)}if("select"===(l=(a=s?xo(s):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Hn(a))if(Xn)g=rs;else{g=os;var v=ss}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=is);switch(g&&(g=g(e,s))?Wn(r,g,n,o):(v&&v(e,a,s),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=s?xo(s):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gs=v,vs=s,ys=null);break;case"focusout":ys=vs=gs=null;break;case"mousedown":_s=!0;break;case"contextmenu":case"mouseup":case"dragend":_s=!1,bs(r,n,o);break;case"selectionchange":if(ms)break;case"keydown":case"keyup":bs(r,n,o)}var y;if(An)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Fn?Bn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Rn&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Fn&&(y=en()):(Gt="value"in(Xt=o)?Xt.value:Xt.textContent,Fn=!0)),0<(v=Zs(s,_)).length&&(_=new bn(_,e,null,n,o),r.push({event:_,listeners:v}),y?_.data=y:null!==(y=$n(n))&&(_.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Vn=!0,Dn);case"textInput":return(e=t.data)===Dn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!An&&Bn(e,t)?(e=en(),Qt=Gt=Xt=null,Fn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(s=Zs(s,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),r.push({event:o,listeners:s}),o.data=y))}Ds(r,t)})}function Ws(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zs(e,t){for(var n=t+"Capture",s=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Me(e,n))&&s.unshift(Ws(e,i,o)),null!=(i=Me(e,t))&&s.push(Ws(e,i,o))),e=e.return}return s}function qs(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ks(e,t,n,s,o){for(var i=t._reactName,r=[];null!==n&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===s)break;5===a.tag&&null!==c&&(a=c,o?null!=(l=Me(n,i))&&r.unshift(Ws(n,l,a)):o||null!=(l=Me(n,i))&&r.push(Ws(n,l,a))),n=n.return}0!==r.length&&e.push({event:t,listeners:r})}var Js=/\r\n?/g,Ys=/\u0000|\uFFFD/g;function Xs(e){return("string"===typeof e?e:""+e).replace(Js,"\n").replace(Ys,"")}function Gs(e,t,n){if(t=Xs(t),Xs(e)!==t&&n)throw Error(i(425))}function Qs(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var so="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ro="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(ao)}:so;function ao(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,s=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===s)return e.removeChild(o),void Ft(t);s--}else"$"!==n&&"$?"!==n&&"$!"!==n||s++;n=o}while(n);Ft(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),po="__reactFiber$"+ho,fo="__reactProps$"+ho,mo="__reactContainer$"+ho,go="__reactEvents$"+ho,vo="__reactListeners$"+ho,yo="__reactHandles$"+ho;function _o(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[po])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[po]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wo(e){return e[fo]||null}var jo=[],So=-1;function ko(e){return{current:e}}function No(e){0>So||(e.current=jo[So],jo[So]=null,So--)}function Co(e,t){So++,jo[So]=e.current,e.current=t}var Eo={},Po=ko(Eo),To=ko(!1),Lo=Eo;function Mo(e,t){var n=e.type.contextTypes;if(!n)return Eo;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Io(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ao(){No(To),No(Po)}function zo(e,t,n){if(Po.current!==Eo)throw Error(i(168));Co(Po,t),Co(To,n)}function Oo(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return n;for(var o in s=s.getChildContext())if(!(o in t))throw Error(i(108,U(e)||"Unknown",o));return R({},n,s)}function Ro(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Eo,Lo=Po.current,Co(Po,e),Co(To,To.current),!0}function Do(e,t,n){var s=e.stateNode;if(!s)throw Error(i(169));n?(e=Oo(e,t,Lo),s.__reactInternalMemoizedMergedChildContext=e,No(To),No(Po),Co(Po,e)):No(To),Co(To,n)}var Vo=null,Bo=!1,$o=!1;function Fo(e){null===Vo?Vo=[e]:Vo.push(e)}function Uo(){if(!$o&&null!==Vo){$o=!0;var e=0,t=_t;try{var n=Vo;for(_t=1;e<n.length;e++){var s=n[e];do{s=s(!0)}while(null!==s)}Vo=null,Bo=!1}catch(o){throw null!==Vo&&(Vo=Vo.slice(e+1)),qe(Qe,Uo),o}finally{_t=t,$o=!1}}return null}var Ho=[],Wo=0,Zo=null,qo=0,Ko=[],Jo=0,Yo=null,Xo=1,Go="";function Qo(e,t){Ho[Wo++]=qo,Ho[Wo++]=Zo,Zo=e,qo=t}function ei(e,t,n){Ko[Jo++]=Xo,Ko[Jo++]=Go,Ko[Jo++]=Yo,Yo=e;var s=Xo;e=Go;var o=32-rt(s)-1;s&=~(1<<o),n+=1;var i=32-rt(t)+o;if(30<i){var r=o-o%5;i=(s&(1<<r)-1).toString(32),s>>=r,o-=r,Xo=1<<32-rt(t)+o|n<<o|s,Go=i+e}else Xo=1<<i|n<<o|s,Go=e}function ti(e){null!==e.return&&(Qo(e,1),ei(e,1,0))}function ni(e){for(;e===Zo;)Zo=Ho[--Wo],Ho[Wo]=null,qo=Ho[--Wo],Ho[Wo]=null;for(;e===Yo;)Yo=Ko[--Jo],Ko[Jo]=null,Go=Ko[--Jo],Ko[Jo]=null,Xo=Ko[--Jo],Ko[Jo]=null}var si=null,oi=null,ii=!1,ri=null;function ai(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,si=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,si=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yo?{id:Xo,overflow:Go}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,si=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var s=si;t&&li(e,t)?ai(s,n):(e.flags=-4097&e.flags|2,ii=!1,si=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,si=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;si=e}function hi(e){if(e!==si)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw pi(),Error(i(418));for(;t;)ai(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=si?co(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=oi;e;)e=co(e.nextSibling)}function fi(){oi=si=null,ii=!1}function mi(e){null===ri?ri=[e]:ri.push(e)}var gi=b.ReactCurrentBatchConfig;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var s=n.stateNode}if(!s)throw Error(i(147,e));var o=s,r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=o.refs;null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _i(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function r(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=2,n):s:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Rc(n,e.mode,s)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,s){var i=n.type;return i===j?d(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&_i(i)===t.type)?((s=o(t,n.props)).ref=vi(e,t,n),s.return=e,s):((s=Ac(n.type,n.key,n.props,null,e.mode,s)).ref=vi(e,t,n),s.return=e,s)}function u(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dc(n,e.mode,s)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,s,i){return null===t||7!==t.tag?((t=zc(n,e.mode,s,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Rc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ac(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case w:return(t=Dc(t,e.mode,n)).return=e,t;case M:return h(e,(0,t._init)(t._payload),n)}if(te(t)||z(t))return(t=zc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function p(e,t,n,s){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===o?c(e,t,n,s):null;case w:return n.key===o?u(e,t,n,s):null;case M:return p(e,t,(o=n._init)(n._payload),s)}if(te(n)||z(n))return null!==o?null:d(e,t,n,s,null);yi(e,n)}return null}function f(e,t,n,s,o){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(n)||null,""+s,o);if("object"===typeof s&&null!==s){switch(s.$$typeof){case x:return c(t,e=e.get(null===s.key?n:s.key)||null,s,o);case w:return u(t,e=e.get(null===s.key?n:s.key)||null,s,o);case M:return f(e,t,n,(0,s._init)(s._payload),o)}if(te(s)||z(s))return d(t,e=e.get(n)||null,s,o,null);yi(t,s)}return null}function m(o,i,a,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(o,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(o,d),i=r(v,i,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(o,d),ii&&Qo(o,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(o,a[m],l))&&(i=r(d,i,m),null===u?c=d:u.sibling=d,u=d);return ii&&Qo(o,m),c}for(d=s(o,d);m<a.length;m++)null!==(g=f(d,o,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=r(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(o,e)}),ii&&Qo(o,m),c}function g(o,a,l,c){var u=z(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=p(o,m,y.value,c);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(o,m),a=r(_,a,g),null===d?u=_:d.sibling=_,d=_,m=v}if(y.done)return n(o,m),ii&&Qo(o,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(o,y.value,c))&&(a=r(y,a,g),null===d?u=y:d.sibling=y,d=y);return ii&&Qo(o,g),u}for(m=s(o,m);!y.done;g++,y=l.next())null!==(y=f(m,o,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=r(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(o,e)}),ii&&Qo(o,g),u}return function e(s,i,r,l){if("object"===typeof r&&null!==r&&r.type===j&&null===r.key&&(r=r.props.children),"object"===typeof r&&null!==r){switch(r.$$typeof){case x:e:{for(var c=r.key,u=i;null!==u;){if(u.key===c){if((c=r.type)===j){if(7===u.tag){n(s,u.sibling),(i=o(u,r.props.children)).return=s,s=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&_i(c)===u.type){n(s,u.sibling),(i=o(u,r.props)).ref=vi(s,u,r),i.return=s,s=i;break e}n(s,u);break}t(s,u),u=u.sibling}r.type===j?((i=zc(r.props.children,s.mode,l,r.key)).return=s,s=i):((l=Ac(r.type,r.key,r.props,null,s.mode,l)).ref=vi(s,i,r),l.return=s,s=l)}return a(s);case w:e:{for(u=r.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===r.containerInfo&&i.stateNode.implementation===r.implementation){n(s,i.sibling),(i=o(i,r.children||[])).return=s,s=i;break e}n(s,i);break}t(s,i),i=i.sibling}(i=Dc(r,s.mode,l)).return=s,s=i}return a(s);case M:return e(s,i,(u=r._init)(r._payload),l)}if(te(r))return m(s,i,r,l);if(z(r))return g(s,i,r,l);yi(s,r)}return"string"===typeof r&&""!==r||"number"===typeof r?(r=""+r,null!==i&&6===i.tag?(n(s,i.sibling),(i=o(i,r)).return=s,s=i):(n(s,i),(i=Rc(r,s.mode,l)).return=s,s=i),a(s)):n(s,i)}}var xi=bi(!0),wi=bi(!1),ji=ko(null),Si=null,ki=null,Ni=null;function Ci(){Ni=ki=Si=null}function Ei(e){var t=ji.current;No(ji),e._currentValue=t}function Pi(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){Si=e,Ni=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Li(e){var t=e._currentValue;if(Ni!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===Si)throw Error(i(308));ki=e,Si.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Mi=null;function Ii(e){null===Mi?Mi=[e]:Mi.push(e)}function Ai(e,t,n,s){var o=t.interleaved;return null===o?(n.next=n,Ii(t)):(n.next=o.next,o.next=n),t.interleaved=n,zi(e,s)}function zi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oi=!1;function Ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bi(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&El)){var o=s.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),s.pending=t,zi(e,n)}return null===(o=s.interleaved)?(t.next=t,Ii(s)):(t.next=o.next,o.next=t),s.interleaved=t,zi(e,n)}function $i(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fi(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var r={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=r:i=i.next=r,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:s.shared,effects:s.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ui(e,t,n,s){var o=e.updateQueue;Oi=!1;var i=o.firstBaseUpdate,r=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var l=a,c=l.next;l.next=null,null===r?i=c:r.next=c,r=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==r&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(r=0,u=c=l=null,a=i;;){var h=a.lane,p=a.eventTime;if((s&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=R({},d,h);break e;case 2:Oi=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,r|=h;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(h=a).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{r|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Ol|=r,e.lanes=r,e.memoizedState=d}}function Hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(null!==o){if(s.callback=null,s=n,"function"!==typeof o)throw Error(i(191,o));o.call(s)}}}var Wi={},Zi=ko(Wi),qi=ko(Wi),Ki=ko(Wi);function Ji(e){if(e===Wi)throw Error(i(174));return e}function Yi(e,t){switch(Co(Ki,t),Co(qi,e),Co(Zi,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}No(Zi),Co(Zi,t)}function Xi(){No(Zi),No(qi),No(Ki)}function Gi(e){Ji(Ki.current);var t=Ji(Zi.current),n=le(t,e.type);t!==n&&(Co(qi,e),Co(Zi,n))}function Qi(e){qi.current===e&&(No(Zi),No(qi))}var er=ko(0);function tr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var nr=[];function sr(){for(var e=0;e<nr.length;e++)nr[e]._workInProgressVersionPrimary=null;nr.length=0}var or=b.ReactCurrentDispatcher,ir=b.ReactCurrentBatchConfig,rr=0,ar=null,lr=null,cr=null,ur=!1,dr=!1,hr=0,pr=0;function fr(){throw Error(i(321))}function mr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!as(e[n],t[n]))return!1;return!0}function gr(e,t,n,s,o,r){if(rr=r,ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,or.current=null===e||null===e.memoizedState?Qr:ea,e=n(s,o),dr){r=0;do{if(dr=!1,hr=0,25<=r)throw Error(i(301));r+=1,cr=lr=null,t.updateQueue=null,or.current=ta,e=n(s,o)}while(dr)}if(or.current=Gr,t=null!==lr&&null!==lr.next,rr=0,cr=lr=ar=null,ur=!1,t)throw Error(i(300));return e}function vr(){var e=0!==hr;return hr=0,e}function yr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cr?ar.memoizedState=cr=e:cr=cr.next=e,cr}function _r(){if(null===lr){var e=ar.alternate;e=null!==e?e.memoizedState:null}else e=lr.next;var t=null===cr?ar.memoizedState:cr.next;if(null!==t)cr=t,lr=e;else{if(null===e)throw Error(i(310));e={memoizedState:(lr=e).memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},null===cr?ar.memoizedState=cr=e:cr=cr.next=e}return cr}function br(e,t){return"function"===typeof t?t(e):t}function xr(e){var t=_r(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var s=lr,o=s.baseQueue,r=n.pending;if(null!==r){if(null!==o){var a=o.next;o.next=r.next,r.next=a}s.baseQueue=o=r,n.pending=null}if(null!==o){r=o.next,s=s.baseState;var l=a=null,c=null,u=r;do{var d=u.lane;if((rr&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=s):c=c.next=h,ar.lanes|=d,Ol|=d}u=u.next}while(null!==u&&u!==r);null===c?a=s:c.next=l,as(s,t.memoizedState)||(_a=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,n.lastRenderedState=s}if(null!==(e=n.interleaved)){o=e;do{r=o.lane,ar.lanes|=r,Ol|=r,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wr(e){var t=_r(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var s=n.dispatch,o=n.pending,r=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do{r=e(r,a.action),a=a.next}while(a!==o);as(r,t.memoizedState)||(_a=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,s]}function jr(){}function Sr(e,t){var n=ar,s=_r(),o=t(),r=!as(s.memoizedState,o);if(r&&(s.memoizedState=o,_a=!0),s=s.queue,Or(Cr.bind(null,n,s,e),[e]),s.getSnapshot!==t||r||null!==cr&&1&cr.memoizedState.tag){if(n.flags|=2048,Lr(9,Nr.bind(null,n,s,o,t),void 0,null),null===Pl)throw Error(i(349));0!==(30&rr)||kr(n,t,o)}return o}function kr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ar.updateQueue)?(t={lastEffect:null,stores:null},ar.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Nr(e,t,n,s){t.value=n,t.getSnapshot=s,Er(t)&&Pr(e)}function Cr(e,t,n){return n(function(){Er(t)&&Pr(e)})}function Er(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!as(e,n)}catch(s){return!0}}function Pr(e){var t=zi(e,1);null!==t&&nc(t,e,1,-1)}function Tr(e){var t=yr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:e},t.queue=e,e=e.dispatch=Kr.bind(null,ar,e),[t.memoizedState,e]}function Lr(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},null===(t=ar.updateQueue)?(t={lastEffect:null,stores:null},ar.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Mr(){return _r().memoizedState}function Ir(e,t,n,s){var o=yr();ar.flags|=e,o.memoizedState=Lr(1|t,n,void 0,void 0===s?null:s)}function Ar(e,t,n,s){var o=_r();s=void 0===s?null:s;var i=void 0;if(null!==lr){var r=lr.memoizedState;if(i=r.destroy,null!==s&&mr(s,r.deps))return void(o.memoizedState=Lr(t,n,i,s))}ar.flags|=e,o.memoizedState=Lr(1|t,n,i,s)}function zr(e,t){return Ir(8390656,8,e,t)}function Or(e,t){return Ar(2048,8,e,t)}function Rr(e,t){return Ar(4,2,e,t)}function Dr(e,t){return Ar(4,4,e,t)}function Vr(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Br(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ar(4,4,Vr.bind(null,t,e),n)}function $r(){}function Fr(e,t){var n=_r();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&mr(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Ur(e,t){var n=_r();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&mr(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Hr(e,t,n){return 0===(21&rr)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(as(n,t)||(n=mt(),ar.lanes|=n,Ol|=n,e.baseState=!0),t)}function Wr(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var s=ir.transition;ir.transition={};try{e(!1),t()}finally{_t=n,ir.transition=s}}function Zr(){return _r().memoizedState}function qr(e,t,n){var s=tc(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Jr(e))Yr(t,n);else if(null!==(n=Ai(e,t,n,s))){nc(n,e,s,ec()),Xr(n,t,s)}}function Kr(e,t,n){var s=tc(e),o={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jr(e))Yr(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var r=t.lastRenderedState,a=i(r,n);if(o.hasEagerState=!0,o.eagerState=a,as(a,r)){var l=t.interleaved;return null===l?(o.next=o,Ii(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Ai(e,t,o,s))&&(nc(n,e,s,o=ec()),Xr(n,t,s))}}function Jr(e){var t=e.alternate;return e===ar||null!==t&&t===ar}function Yr(e,t){dr=ur=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xr(e,t,n){if(0!==(4194240&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Gr={readContext:Li,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useInsertionEffect:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useSyncExternalStore:fr,useId:fr,unstable_isNewReconciler:!1},Qr={readContext:Li,useCallback:function(e,t){return yr().memoizedState=[e,void 0===t?null:t],e},useContext:Li,useEffect:zr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ir(4194308,4,Vr.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ir(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ir(4,2,e,t)},useMemo:function(e,t){var n=yr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=yr();return t=void 0!==n?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=qr.bind(null,ar,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},yr().memoizedState=e},useState:Tr,useDebugValue:$r,useDeferredValue:function(e){return yr().memoizedState=e},useTransition:function(){var e=Tr(!1),t=e[0];return e=Wr.bind(null,e[1]),yr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=ar,o=yr();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Pl)throw Error(i(349));0!==(30&rr)||kr(s,t,n)}o.memoizedState=n;var r={value:n,getSnapshot:t};return o.queue=r,zr(Cr.bind(null,s,r,e),[e]),s.flags|=2048,Lr(9,Nr.bind(null,s,r,n,t),void 0,null),n},useId:function(){var e=yr(),t=Pl.identifierPrefix;if(ii){var n=Go;t=":"+t+"R"+(n=(Xo&~(1<<32-rt(Xo)-1)).toString(32)+n),0<(n=hr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Li,useCallback:Fr,useContext:Li,useEffect:Or,useImperativeHandle:Br,useInsertionEffect:Rr,useLayoutEffect:Dr,useMemo:Ur,useReducer:xr,useRef:Mr,useState:function(){return xr(br)},useDebugValue:$r,useDeferredValue:function(e){return Hr(_r(),lr.memoizedState,e)},useTransition:function(){return[xr(br)[0],_r().memoizedState]},useMutableSource:jr,useSyncExternalStore:Sr,useId:Zr,unstable_isNewReconciler:!1},ta={readContext:Li,useCallback:Fr,useContext:Li,useEffect:Or,useImperativeHandle:Br,useInsertionEffect:Rr,useLayoutEffect:Dr,useMemo:Ur,useReducer:wr,useRef:Mr,useState:function(){return wr(br)},useDebugValue:$r,useDeferredValue:function(e){var t=_r();return null===lr?t.memoizedState=e:Hr(t,lr.memoizedState,e)},useTransition:function(){return[wr(br)[0],_r().memoizedState]},useMutableSource:jr,useSyncExternalStore:Sr,useId:Zr,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function sa(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var oa={isMounted:function(e){return!!(e=e._reactInternals)&&Fe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ec(),o=tc(e),i=Vi(s,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Bi(e,i,o))&&(nc(t,e,o,s),$i(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ec(),o=tc(e),i=Vi(s,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Bi(e,i,o))&&(nc(t,e,o,s),$i(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),s=tc(e),o=Vi(n,s);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Bi(e,o,s))&&(nc(t,e,s,n),$i(t,e,s))}};function ia(e,t,n,s,o,i,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,i,r):!t.prototype||!t.prototype.isPureReactComponent||(!ls(n,s)||!ls(o,i))}function ra(e,t,n){var s=!1,o=Eo,i=t.contextType;return"object"===typeof i&&null!==i?i=Li(i):(o=Io(t)?Lo:Po.current,i=(s=null!==(s=t.contextTypes)&&void 0!==s)?Mo(e,o):Eo),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oa,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function aa(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&oa.enqueueReplaceState(t,t.state,null)}function la(e,t,n,s){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ri(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Li(i):(i=Io(t)?Lo:Po.current,o.context=Mo(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(sa(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&oa.enqueueReplaceState(o,o.state,null),Ui(e,n,o,s),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",s=t;do{n+=$(s),s=s.return}while(s);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Vi(-1,n)).tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=s),da(0,t)},n}function fa(e,t,n){(n=Vi(-1,n)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var o=t.value;n.payload=function(){return s(o)},n.callback=function(){da(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof s&&(null===Zl?Zl=new Set([this]):Zl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new ha;var o=new Set;s.set(t,o)}else void 0===(o=s.get(t))&&(o=new Set,s.set(t,o));o.has(n)||(o.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,s,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vi(-1,1)).tag=2,Bi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ya=b.ReactCurrentOwner,_a=!1;function ba(e,t,n,s){t.child=null===e?wi(t,null,n,s):xi(t,e.child,n,s)}function xa(e,t,n,s,o){n=n.render;var i=t.ref;return Ti(t,o),s=gr(e,t,n,s,i,o),n=vr(),null===e||_a?(ii&&n&&ti(t),t.flags|=1,ba(e,t,s,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ha(e,t,o))}function wa(e,t,n,s,o){if(null===e){var i=n.type;return"function"!==typeof i||Mc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ac(n.type,null,s,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ja(e,t,i,s,o))}if(i=e.child,0===(e.lanes&o)){var r=i.memoizedProps;if((n=null!==(n=n.compare)?n:ls)(r,s)&&e.ref===t.ref)return Ha(e,t,o)}return t.flags|=1,(e=Ic(i,s)).ref=t.ref,e.return=t,t.child=e}function ja(e,t,n,s,o){if(null!==e){var i=e.memoizedProps;if(ls(i,s)&&e.ref===t.ref){if(_a=!1,t.pendingProps=s=i,0===(e.lanes&o))return t.lanes=e.lanes,Ha(e,t,o);0!==(131072&e.flags)&&(_a=!0)}}return Na(e,t,n,s,o)}function Sa(e,t,n){var s=t.pendingProps,o=s.children,i=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Co(Il,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Co(Il,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==i?i.baseLanes:n,Co(Il,Ml),Ml|=s}else null!==i?(s=i.baseLanes|n,t.memoizedState=null):s=n,Co(Il,Ml),Ml|=s;return ba(e,t,o,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,n,s,o){var i=Io(n)?Lo:Po.current;return i=Mo(t,i),Ti(t,o),n=gr(e,t,n,s,i,o),s=vr(),null===e||_a?(ii&&s&&ti(t),t.flags|=1,ba(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ha(e,t,o))}function Ca(e,t,n,s,o){if(Io(n)){var i=!0;Ro(t)}else i=!1;if(Ti(t,o),null===t.stateNode)Ua(e,t),ra(t,n,s),la(t,n,s,o),s=!0;else if(null===e){var r=t.stateNode,a=t.memoizedProps;r.props=a;var l=r.context,c=n.contextType;"object"===typeof c&&null!==c?c=Li(c):c=Mo(t,c=Io(n)?Lo:Po.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate;d||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==s||l!==c)&&aa(t,r,s,c),Oi=!1;var h=t.memoizedState;r.state=h,Ui(t,s,r,o),l=t.memoizedState,a!==s||h!==l||To.current||Oi?("function"===typeof u&&(sa(t,n,u,s),l=t.memoizedState),(a=Oi||ia(t,n,a,s,h,l,c))?(d||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),r.props=s,r.state=l,r.context=c,s=a):("function"===typeof r.componentDidMount&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,Di(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),r.props=c,d=t.pendingProps,h=r.context,"object"===typeof(l=n.contextType)&&null!==l?l=Li(l):l=Mo(t,l=Io(n)?Lo:Po.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,r,s,l),Oi=!1,h=t.memoizedState,r.state=h,Ui(t,s,r,o);var f=t.memoizedState;a!==d||h!==f||To.current||Oi?("function"===typeof p&&(sa(t,n,p,s),f=t.memoizedState),(c=Oi||ia(t,n,c,s,h,f,l)||!1)?(u||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(s,f,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(s,f,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=f),r.props=s,r.state=f,r.context=l,s=c):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Ea(e,t,n,s,i,o)}function Ea(e,t,n,s,o,i){ka(e,t);var r=0!==(128&t.flags);if(!s&&!r)return o&&Do(t,n,!1),Ha(e,t,i);s=t.stateNode,ya.current=t;var a=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&r?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,a,i)):ba(e,t,a,i),t.memoizedState=s.state,o&&Do(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?zo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&zo(0,t.context,!1),Yi(e,t.containerInfo)}function Ta(e,t,n,s,o){return fi(),mi(o),t.flags|=256,ba(e,t,n,s),t.child}var La,Ma,Ia,Aa,za={dehydrated:null,treeContext:null,retryLane:0};function Oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ra(e,t,n){var s,o=t.pendingProps,r=er.current,a=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&r)),s?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(r|=1),Co(er,1&r),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,a?(o=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Oc(l,o,0,null),e=zc(e,o,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Oa(n),t.memoizedState=za,e):Da(t,l));if(null!==(r=e.memoizedState)&&null!==(s=r.dehydrated))return function(e,t,n,s,o,r,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,s=ua(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(r=s.fallback,o=t.mode,s=Oc({mode:"visible",children:s.children},o,0,null),(r=zc(r,o,a,null)).flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,0!==(1&t.mode)&&xi(t,e.child,null,a),t.child.memoizedState=Oa(a),t.memoizedState=za,r);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===o.data){if(s=o.nextSibling&&o.nextSibling.dataset)var l=s.dgst;return s=l,Va(e,t,a,s=ua(r=Error(i(419)),s,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(s=Pl)){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(s.suspendedLanes|a))?0:o)&&o!==r.retryLane&&(r.retryLane=o,zi(e,o),nc(s,e,o,-1))}return mc(),Va(e,t,a,s=ua(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),o._reactRetry=t,null):(e=r.treeContext,oi=co(o.nextSibling),si=t,ii=!0,ri=null,null!==e&&(Ko[Jo++]=Xo,Ko[Jo++]=Go,Ko[Jo++]=Yo,Xo=e.id,Go=e.overflow,Yo=t),t=Da(t,s.children),t.flags|=4096,t)}(e,t,l,o,s,r,n);if(a){a=o.fallback,l=t.mode,s=(r=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==r?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Ic(r,c)).subtreeFlags=14680064&r.subtreeFlags,null!==s?a=Ic(s,a):(a=zc(a,l,n,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,l=null===(l=e.child.memoizedState)?Oa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=za,o}return e=(a=e.child).sibling,o=Ic(a,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Da(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,s){return null!==s&&mi(s),xi(t,e.child,null,n),(e=Da(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Pi(e.return,t,n)}function $a(e,t,n,s,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=o)}function Fa(e,t,n){var s=t.pendingProps,o=s.revealOrder,i=s.tail;if(ba(e,t,s.children,n),0!==(2&(s=er.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Co(er,s),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===tr(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),$a(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===tr(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}$a(t,!0,n,null,i);break;case"together":$a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ua(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Za(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,s|=14680064&o.subtreeFlags,s|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function qa(e,t,n){var s=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Za(t),null;case 1:case 17:return Io(t.type)&&Ao(),Za(t),null;case 3:return s=t.stateNode,Xi(),No(To),No(Po),sr(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ri&&(rc(ri),ri=null))),Ma(e,t),Za(t),null;case 5:Qi(t);var o=Ji(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Ia(e,t,n,s,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(i(166));return Za(t),null}if(e=Ji(Zi.current),hi(t)){s=t.stateNode,n=t.type;var r=t.memoizedProps;switch(s[po]=t,s[fo]=r,e=0!==(1&t.mode),n){case"dialog":Vs("cancel",s),Vs("close",s);break;case"iframe":case"object":case"embed":Vs("load",s);break;case"video":case"audio":for(o=0;o<zs.length;o++)Vs(zs[o],s);break;case"source":Vs("error",s);break;case"img":case"image":case"link":Vs("error",s),Vs("load",s);break;case"details":Vs("toggle",s);break;case"input":Y(s,r),Vs("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Vs("invalid",s);break;case"textarea":oe(s,r),Vs("invalid",s)}for(var l in ye(n,r),o=null,r)if(r.hasOwnProperty(l)){var c=r[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==r.suppressHydrationWarning&&Gs(s.textContent,c,e),o=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==r.suppressHydrationWarning&&Gs(s.textContent,c,e),o=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vs("scroll",s)}switch(n){case"input":Z(s),Q(s,r,!0);break;case"textarea":Z(s),re(s);break;case"select":case"option":break;default:"function"===typeof r.onClick&&(s.onclick=Qs)}s=o,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),"select"===n&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[po]=t,e[fo]=s,La(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,s),n){case"dialog":Vs("cancel",e),Vs("close",e),o=s;break;case"iframe":case"object":case"embed":Vs("load",e),o=s;break;case"video":case"audio":for(o=0;o<zs.length;o++)Vs(zs[o],e);o=s;break;case"source":Vs("error",e),o=s;break;case"img":case"image":case"link":Vs("error",e),Vs("load",e),o=s;break;case"details":Vs("toggle",e),o=s;break;case"input":Y(e,s),o=J(e,s),Vs("invalid",e);break;case"option":default:o=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},o=R({},s,{value:void 0}),Vs("invalid",e);break;case"textarea":oe(e,s),o=se(e,s),Vs("invalid",e)}for(r in ye(n,o),c=o)if(c.hasOwnProperty(r)){var u=c[r];"style"===r?ge(e,u):"dangerouslySetInnerHTML"===r?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===r?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(a.hasOwnProperty(r)?null!=u&&"onScroll"===r&&Vs("scroll",e):null!=u&&_(e,r,u,l))}switch(n){case"input":Z(e),Q(e,s,!1);break;case"textarea":Z(e),re(e);break;case"option":null!=s.value&&e.setAttribute("value",""+H(s.value));break;case"select":e.multiple=!!s.multiple,null!=(r=s.value)?ne(e,!!s.multiple,r,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Qs)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Za(t),null;case 6:if(e&&null!=t.stateNode)Aa(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(i(166));if(n=Ji(Ki.current),Ji(Zi.current),hi(t)){if(s=t.stateNode,n=t.memoizedProps,s[po]=t,(r=s.nodeValue!==n)&&null!==(e=si))switch(e.tag){case 3:Gs(s.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Gs(s.nodeValue,n,0!==(1&e.mode))}r&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[po]=t,t.stateNode=s}return Za(t),null;case 13:if(No(er),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))pi(),fi(),t.flags|=98560,r=!1;else if(r=hi(t),null!==s&&null!==s.dehydrated){if(null===e){if(!r)throw Error(i(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(i(317));r[po]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Za(t),r=!1}else null!==ri&&(rc(ri),ri=null),r=!0;if(!r)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&er.current)?0===Al&&(Al=3):mc())),null!==t.updateQueue&&(t.flags|=4),Za(t),null);case 4:return Xi(),Ma(e,t),null===e&&Fs(t.stateNode.containerInfo),Za(t),null;case 10:return Ei(t.type._context),Za(t),null;case 19:if(No(er),null===(r=t.memoizedState))return Za(t),null;if(s=0!==(128&t.flags),null===(l=r.rendering))if(s)Wa(r,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=tr(e))){for(t.flags|=128,Wa(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(r=n).flags&=14680066,null===(l=r.alternate)?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,e=l.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Co(er,1&er.current|2),t.child}e=e.sibling}null!==r.tail&&Xe()>Fl&&(t.flags|=128,s=!0,Wa(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=tr(l))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!ii)return Za(t),null}else 2*Xe()-r.renderingStartTime>Fl&&1073741824!==n&&(t.flags|=128,s=!0,Wa(r,!1),t.lanes=4194304);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Xe(),t.sibling=null,n=er.current,Co(er,s?1&n|2:1&n),t):(Za(t),null);case 22:case 23:return dc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Za(t),6&t.subtreeFlags&&(t.flags|=8192)):Za(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ka(e,t){switch(ni(t),t.tag){case 1:return Io(t.type)&&Ao(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),No(To),No(Po),sr(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qi(t),null;case 13:if(No(er),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return No(er),null;case 4:return Xi(),null;case 10:return Ei(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}La=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},Ia=function(e,t,n,s){var o=e.memoizedProps;if(o!==s){e=t.stateNode,Ji(Zi.current);var i,r=null;switch(n){case"input":o=J(e,o),s=J(e,s),r=[];break;case"select":o=R({},o,{value:void 0}),s=R({},s,{value:void 0}),r=[];break;case"textarea":o=se(e,o),s=se(e,s),r=[];break;default:"function"!==typeof o.onClick&&"function"===typeof s.onClick&&(e.onclick=Qs)}for(u in ye(n,s),n=null,o)if(!s.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var c=s[u];if(l=null!=o?o[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(r||(r=[]),r.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(r=r||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(r=r||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vs("scroll",e),r||l===c||(r=[])):(r=r||[]).push(u,c))}n&&(r=r||[]).push("style",n);var u=r;(t.updateQueue=u)&&(t.flags|=4)}},Aa=function(e,t,n,s){n!==s&&(t.flags|=4)};var Ja=!1,Ya=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ga=null;function Qa(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(s){Sc(e,t,s)}else n.current=null}function el(e,t,n){try{n()}catch(s){Sc(e,t,s)}}var tl=!1;function nl(e,t,n){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var o=s=s.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&el(t,n,i)}o=o.next}while(o!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[fo],delete t[go],delete t[vo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(a){}switch(n.tag){case 5:Ya||Qa(n,t);case 6:var s=ul,o=dl;ul=null,hl(e,t,n),dl=o,null!==(ul=s)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Ft(e)):lo(ul,n.stateNode));break;case 4:s=ul,o=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=s,dl=o;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(s=n.updateQueue)&&null!==(s=s.lastEffect))){o=s=s.next;do{var i=o,r=i.destroy;i=i.tag,void 0!==r&&(0!==(2&i)||0!==(4&i))&&el(n,t,r),o=o.next}while(o!==s)}hl(e,t,n);break;case 1:if(!Ya&&(Qa(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Sc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ya=(s=Ya)||null!==n.memoizedState,hl(e,t,n),Ya=s):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach(function(t){var s=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var o=n[s];try{var r=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));pl(r,a,o),ul=null,dl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){Sc(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&s){try{nl(3,e,e.return),sl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&s&&null!==n&&Qa(n,n.return);break;case 5:if(ml(t,e),vl(e),512&s&&null!==n&&Qa(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){Sc(e,e.return,g)}}if(4&s&&null!=(o=e.stateNode)){var r=e.memoizedProps,a=null!==n?n.memoizedProps:r,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===r.type&&null!=r.name&&X(o,r),_e(l,a);var u=_e(l,r);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):_(o,d,h,u)}switch(l){case"input":G(o,r);break;case"textarea":ie(o,r);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!r.multiple;var f=r.value;null!=f?ne(o,!!r.multiple,f,!1):p!==!!r.multiple&&(null!=r.defaultValue?ne(o,!!r.multiple,r.defaultValue,!0):ne(o,!!r.multiple,r.multiple?[]:"",!1))}o[fo]=r}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&s){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,r=e.memoizedProps;try{o.nodeValue=r}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Ft(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(o=e.child).flags&&(r=null!==o.memoizedState,o.stateNode.isHidden=r,!r||null!==o.alternate&&null!==o.alternate.memoizedState||($l=Xe())),4&s&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||d,ml(t,e),Ya=u):ml(t,e),vl(e),8192&s){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Ga=e,d=e.child;null!==d;){for(h=Ga=d;null!==Ga;){switch(f=(p=Ga).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Qa(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){s=p,n=p.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(s,n,g)}}break;case 5:Qa(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Ga=f):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(r=o.style).setProperty?r.setProperty("display","none","important"):r.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&s&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rl(n)){var s=n;break e}n=n.return}throw Error(i(160))}switch(s.tag){case 5:var o=s.stateNode;32&s.flags&&(he(o,""),s.flags&=-33),cl(e,al(e),o);break;case 3:case 4:var r=s.stateNode.containerInfo;ll(e,al(e),r);break;default:throw Error(i(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Ga=e,_l(e,t,n)}function _l(e,t,n){for(var s=0!==(1&e.mode);null!==Ga;){var o=Ga,i=o.child;if(22===o.tag&&s){var r=null!==o.memoizedState||Ja;if(!r){var a=o.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Ja;var c=Ya;if(Ja=r,(Ya=l)&&!c)for(Ga=o;null!==Ga;)l=(r=Ga).child,22===r.tag&&null!==r.memoizedState?wl(o):null!==l?(l.return=r,Ga=l):wl(o);for(;null!==i;)Ga=i,_l(i,t,n),i=i.sibling;Ga=o,Ja=a,Ya=c}bl(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Ga=i):bl(e)}}function bl(e){for(;null!==Ga;){var t=Ga;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Ya)if(null===n)s.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);s.componentDidUpdate(o,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;null!==r&&Hi(t,r,s);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hi(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ft(h)}}}break;default:throw Error(i(163))}Ya||512&t.flags&&ol(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Ga=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ga=n;break}Ga=t.return}}function xl(e){for(;null!==Ga;){var t=Ga;if(t===e){Ga=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ga=n;break}Ga=t.return}}function wl(e){for(;null!==Ga;){var t=Ga;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var o=t.return;try{s.componentDidMount()}catch(l){Sc(t,o,l)}}var i=t.return;try{ol(t)}catch(l){Sc(t,i,l)}break;case 5:var r=t.return;try{ol(t)}catch(l){Sc(t,r,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Ga=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ga=a;break}Ga=t.return}}var jl,Sl=Math.ceil,kl=b.ReactCurrentDispatcher,Nl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,El=0,Pl=null,Tl=null,Ll=0,Ml=0,Il=ko(0),Al=0,zl=null,Ol=0,Rl=0,Dl=0,Vl=null,Bl=null,$l=0,Fl=1/0,Ul=null,Hl=!1,Wl=null,Zl=null,ql=!1,Kl=null,Jl=0,Yl=0,Xl=null,Gl=-1,Ql=0;function ec(){return 0!==(6&El)?Xe():-1!==Gl?Gl:Gl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Ll?Ll&-Ll:null!==gi.transition?(0===Ql&&(Ql=mt()),Ql):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,s){if(50<Yl)throw Yl=0,Xl=null,Error(i(185));vt(e,n,s),0!==(2&El)&&e===Pl||(e===Pl&&(0===(2&El)&&(Rl|=n),4===Al&&ac(e,Ll)),sc(e,s),1===n&&0===El&&0===(1&t.mode)&&(Fl=Xe()+500,Bo&&Uo()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var r=31-rt(i),a=1<<r,l=o[r];-1===l?0!==(a&n)&&0===(a&s)||(o[r]=pt(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var s=ht(e,e===Pl?Ll:0);if(0===s)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Bo=!0,Fo(e)}(lc.bind(null,e)):Fo(lc.bind(null,e)),ro(function(){0===(6&El)&&Uo()}),n=null;else{switch(bt(s)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=st}n=Pc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Gl=-1,Ql=0,0!==(6&El))throw Error(i(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var s=ht(e,e===Pl?Ll:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=gc(e,s);else{t=s;var o=El;El|=2;var r=fc();for(Pl===e&&Ll===t||(Ul=null,Fl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Ci(),kl.current=r,El=o,null!==Tl?t=0:(Pl=null,Ll=0,t=Al)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(s=o,t=ic(e,o))),1===t)throw n=zl,hc(e,0),ac(e,s),sc(e,Xe()),n;if(6===t)ac(e,s);else{if(o=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var o=n[s],i=o.getSnapshot;o=o.value;try{if(!as(i(),o))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,s))&&(0!==(r=ft(e))&&(s=r,t=ic(e,r))),1===t))throw n=zl,hc(e,0),ac(e,s),sc(e,Xe()),n;switch(e.finishedWork=o,e.finishedLanes=s,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Bl,Ul);break;case 3:if(ac(e,s),(130023424&s)===s&&10<(t=$l+500-Xe())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=so(xc.bind(null,e,Bl,Ul),t);break}xc(e,Bl,Ul);break;case 4:if(ac(e,s),(4194240&s)===s)break;for(t=e.eventTimes,o=-1;0<s;){var a=31-rt(s);r=1<<a,(a=t[a])>o&&(o=a),s&=~r}if(s=o,10<(s=(120>(s=Xe()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Sl(s/1960))-s)){e.timeoutHandle=so(xc.bind(null,e,Bl,Ul),s);break}xc(e,Bl,Ul);break;default:throw Error(i(329))}}}return sc(e,Xe()),e.callbackNode===n?oc.bind(null,e):null}function ic(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&rc(t)),e}function rc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function ac(e,t){for(t&=~Dl,t&=~Rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),s=1<<n;e[n]=-1,t&=~s}}function lc(e){if(0!==(6&El))throw Error(i(327));wc();var t=ht(e,0);if(0===(1&t))return sc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var s=ft(e);0!==s&&(t=s,n=ic(e,s))}if(1===n)throw n=zl,hc(e,0),ac(e,t),sc(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,Ul),sc(e,Xe()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Fl=Xe()+500,Bo&&Uo())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&El)&&wc();var t=El;El|=1;var n=Cl.transition,s=_t;try{if(Cl.transition=null,_t=1,e)return e()}finally{_t=s,Cl.transition=n,0===(6&(El=t))&&Uo()}}function dc(){Ml=Il.current,No(Il)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Tl)for(n=Tl.return;null!==n;){var s=n;switch(ni(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Ao();break;case 3:Xi(),No(To),No(Po),sr();break;case 5:Qi(s);break;case 4:Xi();break;case 13:case 19:No(er);break;case 10:Ei(s.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Tl=e=Ic(e.current,null),Ll=Ml=t,Al=0,zl=null,Dl=Rl=Ol=0,Bl=Vl=null,null!==Mi){for(t=0;t<Mi.length;t++)if(null!==(s=(n=Mi[t]).interleaved)){n.interleaved=null;var o=s.next,i=n.pending;if(null!==i){var r=i.next;i.next=o,s.next=r}n.pending=s}Mi=null}return e}function pc(e,t){for(;;){var n=Tl;try{if(Ci(),or.current=Gr,ur){for(var s=ar.memoizedState;null!==s;){var o=s.queue;null!==o&&(o.pending=null),s=s.next}ur=!1}if(rr=0,cr=lr=ar=null,dr=!1,hr=0,Nl.current=null,null===n||null===n.return){Al=1,zl=t,Tl=null;break}e:{var r=e,a=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ma(r,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(r,u,t),mc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),mi(ca(c,l));break e}}r=c=ca(c,l),4!==Al&&(Al=2),null===Vl?Vl=[r]:Vl.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t,Fi(r,pa(0,c,t));break e;case 1:l=c;var y=r.type,_=r.stateNode;if(0===(128&r.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Zl||!Zl.has(_)))){r.flags|=65536,t&=-t,r.lanes|=t,Fi(r,fa(r,l,t));break e}}r=r.return}while(null!==r)}bc(n)}catch(b){t=b,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function fc(){var e=kl.current;return kl.current=Gr,null===e?Gr:e}function mc(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Pl||0===(268435455&Ol)&&0===(268435455&Rl)||ac(Pl,Ll)}function gc(e,t){var n=El;El|=2;var s=fc();for(Pl===e&&Ll===t||(Ul=null,hc(e,t));;)try{vc();break}catch(o){pc(e,o)}if(Ci(),El=n,kl.current=s,null!==Tl)throw Error(i(261));return Pl=null,Ll=0,Al}function vc(){for(;null!==Tl;)_c(Tl)}function yc(){for(;null!==Tl&&!Je();)_c(Tl)}function _c(e){var t=jl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Nl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qa(n,t,Ml)))return void(Tl=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Al=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Al&&(Al=5)}function xc(e,t,n){var s=_t,o=Cl.transition;try{Cl.transition=null,_t=1,function(e,t,n,s){do{wc()}while(null!==Kl);if(0!==(6&El))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-rt(n),i=1<<o;t[o]=0,s[o]=-1,e[o]=-1,n&=~i}}(e,r),e===Pl&&(Tl=Pl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Pc(tt,function(){return wc(),null})),r=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||r){r=Cl.transition,Cl.transition=null;var a=_t;_t=1;var l=El;El|=4,Nl.current=null,function(e,t){if(eo=Ht,ps(e=hs())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var o=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==o&&3!==h.nodeType||(l=a+o),h!==r||0!==s&&3!==h.nodeType||(c=a+s),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===o&&(l=a),p===r&&++d===s&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ht=!1,Ga=t;null!==Ga;)if(e=(t=Ga).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ga=e;else for(;null!==Ga;){t=Ga;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ga=e;break}Ga=t.return}m=tl,tl=!1}(e,n),gl(n,e),fs(to),Ht=!!eo,to=eo=null,e.current=n,yl(n,e,o),Ye(),El=l,_t=a,Cl.transition=r}else e.current=n;if(ql&&(ql=!1,Kl=e,Jl=o),r=e.pendingLanes,0===r&&(Zl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Xe()),null!==t)for(s=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],s(o.value,{componentStack:o.stack,digest:o.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Jl)&&0!==e.tag&&wc(),r=e.pendingLanes,0!==(1&r)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,Uo()}(e,t,n,s)}finally{Cl.transition=o,_t=s}return null}function wc(){if(null!==Kl){var e=bt(Jl),t=Cl.transition,n=_t;try{if(Cl.transition=null,_t=16>e?16:e,null===Kl)var s=!1;else{if(e=Kl,Kl=null,Jl=0,0!==(6&El))throw Error(i(331));var o=El;for(El|=4,Ga=e.current;null!==Ga;){var r=Ga,a=r.child;if(0!==(16&Ga.flags)){var l=r.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ga=u;null!==Ga;){var d=Ga;switch(d.tag){case 0:case 11:case 15:nl(8,d,r)}var h=d.child;if(null!==h)h.return=d,Ga=h;else for(;null!==Ga;){var p=(d=Ga).sibling,f=d.return;if(il(d),d===u){Ga=null;break}if(null!==p){p.return=f,Ga=p;break}Ga=f}}}var m=r.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ga=r}}if(0!==(2064&r.subtreeFlags)&&null!==a)a.return=r,Ga=a;else e:for(;null!==Ga;){if(0!==(2048&(r=Ga).flags))switch(r.tag){case 0:case 11:case 15:nl(9,r,r.return)}var y=r.sibling;if(null!==y){y.return=r.return,Ga=y;break e}Ga=r.return}}var _=e.current;for(Ga=_;null!==Ga;){var b=(a=Ga).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Ga=b;else e:for(a=_;null!==Ga;){if(0!==(2048&(l=Ga).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(w){Sc(l,l.return,w)}if(l===a){Ga=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Ga=x;break e}Ga=l.return}}if(El=o,Uo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(w){}s=!0}return s}finally{_t=n,Cl.transition=t}}return!1}function jc(e,t,n){e=Bi(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),sc(e,t))}function Sc(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Zl||!Zl.has(s))){t=Bi(t,e=fa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),sc(t,e));break}}t=t.return}}function kc(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ll&n)===n&&(4===Al||3===Al&&(130023424&Ll)===Ll&&500>Xe()-$l?hc(e,0):Dl|=n),sc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=zi(e,t))&&(vt(e,t,n),sc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(i(314))}null!==s&&s.delete(t),Nc(e,n)}function Pc(e,t){return qe(e,t)}function Tc(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,s){return new Tc(e,t,n,s)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,n,s,o,r){var a=2;if(s=e,"function"===typeof e)Mc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case j:return zc(n.children,o,r,t);case S:a=8,o|=8;break;case k:return(e=Lc(12,n,t,2|o)).elementType=k,e.lanes=r,e;case P:return(e=Lc(13,n,t,o)).elementType=P,e.lanes=r,e;case T:return(e=Lc(19,n,t,o)).elementType=T,e.lanes=r,e;case I:return Oc(n,o,r,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case C:a=9;break e;case E:a=11;break e;case L:a=14;break e;case M:a=16,s=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Lc(a,n,t,o)).elementType=e,t.type=s,t.lanes=r,t}function zc(e,t,n,s){return(e=Lc(7,e,s,t)).lanes=n,e}function Oc(e,t,n,s){return(e=Lc(22,e,s,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Rc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Dc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,s,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,s,o,i,r,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Lc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ri(i),e}function $c(e){if(!e)return Eo;e:{if(Fe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Io(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Io(n))return Oo(e,n,t)}return t}function Fc(e,t,n,s,o,i,r,a,l){return(e=Bc(n,s,!0,e,0,i,0,a,l)).context=$c(null),n=e.current,(i=Vi(s=ec(),o=tc(n))).callback=void 0!==t&&null!==t?t:null,Bi(n,i,o),e.current.lanes=o,vt(e,o,s),sc(e,s),e}function Uc(e,t,n,s){var o=t.current,i=ec(),r=tc(o);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vi(i,r)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Bi(o,t,r))&&(nc(e,o,r,i),$i(e,o,r)),r}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Zc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||To.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),fi();break;case 5:Gi(t);break;case 1:Io(t.type)&&Ro(t);break;case 4:Yi(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,o=t.memoizedProps.value;Co(ji,s._currentValue),s._currentValue=o;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Co(er,1&er.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ra(e,t,n):(Co(er,1&er.current),null!==(e=Ha(e,t,n))?e.sibling:null);Co(er,1&er.current);break;case 19:if(s=0!==(n&t.childLanes),0!==(128&e.flags)){if(s)return Fa(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Co(er,er.current),s)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Ha(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,ii&&0!==(1048576&t.flags)&&ei(t,qo,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ua(e,t),e=t.pendingProps;var o=Mo(t,Po.current);Ti(t,n),o=gr(null,t,s,e,o,n);var r=vr();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Io(s)?(r=!0,Ro(t)):r=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ri(t),o.updater=oa,t.stateNode=o,o._reactInternals=t,la(t,s,e,n),t=Ea(null,t,s,!0,r,n)):(t.tag=0,ii&&r&&ti(t),ba(null,t,o,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Ua(e,t),e=t.pendingProps,s=(o=s._init)(s._payload),t.type=s,o=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===L)return 14}return 2}(s),e=na(s,e),o){case 0:t=Na(null,t,s,e,n);break e;case 1:t=Ca(null,t,s,e,n);break e;case 11:t=xa(null,t,s,e,n);break e;case 14:t=wa(null,t,s,na(s.type,e),n);break e}throw Error(i(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,Na(e,t,s,o=t.elementType===s?o:na(s,o),n);case 1:return s=t.type,o=t.pendingProps,Ca(e,t,s,o=t.elementType===s?o:na(s,o),n);case 3:e:{if(Pa(t),null===e)throw Error(i(387));s=t.pendingProps,o=(r=t.memoizedState).element,Di(e,t),Ui(t,s,null,n);var a=t.memoizedState;if(s=a.element,r.isDehydrated){if(r={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Ta(e,t,s,n,o=ca(Error(i(423)),t));break e}if(s!==o){t=Ta(e,t,s,n,o=ca(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),si=t,ii=!0,ri=null,n=wi(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),s===o){t=Ha(e,t,n);break e}ba(e,t,s,n)}t=t.child}return t;case 5:return Gi(t),null===e&&ui(t),s=t.type,o=t.pendingProps,r=null!==e?e.memoizedProps:null,a=o.children,no(s,o)?a=null:null!==r&&no(s,r)&&(t.flags|=32),ka(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Ra(e,t,n);case 4:return Yi(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=xi(t,null,s,n):ba(e,t,s,n),t.child;case 11:return s=t.type,o=t.pendingProps,xa(e,t,s,o=t.elementType===s?o:na(s,o),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,r=t.memoizedProps,a=o.value,Co(ji,s._currentValue),s._currentValue=a,null!==r)if(as(r.value,a)){if(r.children===o.children&&!To.current){t=Ha(e,t,n);break e}}else for(null!==(r=t.child)&&(r.return=t);null!==r;){var l=r.dependencies;if(null!==l){a=r.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===r.tag){(c=Vi(-1,n&-n)).tag=2;var u=r.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}r.lanes|=n,null!==(c=r.alternate)&&(c.lanes|=n),Pi(r.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===r.tag)a=r.type===t.type?null:r.child;else if(18===r.tag){if(null===(a=r.return))throw Error(i(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Pi(a,n,t),a=r.sibling}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===t){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}ba(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,Ti(t,n),s=s(o=Li(o)),t.flags|=1,ba(e,t,s,n),t.child;case 14:return o=na(s=t.type,t.pendingProps),wa(e,t,s,o=na(s.type,o),n);case 15:return ja(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:na(s,o),Ua(e,t),t.tag=1,Io(s)?(e=!0,Ro(t)):e=!1,Ti(t,n),ra(t,s,o),la(t,s,o,n),Ea(null,t,s,!0,e,n);case 19:return Fa(e,t,n);case 22:return Sa(e,t,n)}throw Error(i(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Gc(){}function Qc(e,t,n,s,o){var i=n._reactRootContainer;if(i){var r=i;if("function"===typeof o){var a=o;o=function(){var e=Hc(r);a.call(e)}}Uc(t,r,e,o)}else r=function(e,t,n,s,o){if(o){if("function"===typeof s){var i=s;s=function(){var e=Hc(r);i.call(e)}}var r=Fc(t,s,e,0,null,!1,0,"",Gc);return e._reactRootContainer=r,e[mo]=r.current,Fs(8===e.nodeType?e.parentNode:e),uc(),r}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof s){var a=s;s=function(){var e=Hc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Gc);return e._reactRootContainer=l,e[mo]=l.current,Fs(8===e.nodeType?e.parentNode:e),uc(function(){Uc(t,l,n,s)}),l}(n,t,e,o,s);return Hc(r)}Jc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Uc(e,t,null,null)},Jc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Uc(null,e,null,null)}),t[mo]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Rt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),sc(t,Xe()),0===(6&El)&&(Fl=Xe()+500,Uo()))}break;case 13:uc(function(){var t=zi(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Zc(e,1)}},wt=function(e){if(13===e.tag){var t=zi(e,134217728);if(null!==t)nc(t,e,134217728,ec());Zc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),n=zi(e,t);if(null!==n)nc(n,e,t,ec());Zc(e,t)}},St=function(){return _t},kt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(G(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var o=wo(s);if(!o)throw Error(i(90));q(s),G(s,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Pe=uc;var eu={usingClientEntryPoint:!1,Events:[bo,xo,wo,Ne,Ce,cc]},tu={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{ot=su.inject(nu),it=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,s="",o=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,s,o),e[mo]=t.current,Fs(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(i(200));return Qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var s=null!=n&&n.hydratedSources||null,o=!1,r="",a=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Fc(t,null,e,1,null!=n?n:null,o,0,r,a),e[mo]=t.current,Fs(e),s)for(e=0;e<s.length;e++)o=(o=(n=s[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(i(200));return Qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Qc(null,null,e,!1,function(){e._reactRootContainer=null,e[mo]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Xc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Qc(e,t,n,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},844:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},989:e=>{"use strict";var t=!("undefined"===typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=n}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(s,o){if(1&o&&(s=this(s)),8&o)return s;if("object"===typeof s&&s){if(4&o&&s.__esModule)return s;if(16&o&&"function"===typeof s.then)return s}var i=Object.create(null);n.r(i);var r={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&s;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>r[e]=()=>s[e]);return r.default=()=>s,n.d(i,r),i}})(),n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,s)=>(n.f[s](e,t),t),[])),n.u=e=>"static/js/"+e+".d9f41489.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="clothingstorewebappfront:";n.l=(s,o,i,r)=>{if(e[s])e[s].push(o);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+i),a.src=s),e[s]=[o];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var o=e[s];if(delete e[s],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,s)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)s.push(o[2]);else{var i=new Promise((n,s)=>o=e[t]=[n,s]);s.push(o[2]=i);var r=n.p+n.u(t),a=new Error;n.l(r,s=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",a.name="ChunkLoadError",a.type=i,a.request=r,o[1](a)}},"chunk-"+t,t)}};var t=(t,s)=>{var o,i,r=s[0],a=s[1],l=s[2],c=0;if(r.some(t=>0!==e[t])){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)l(n)}for(t&&t(s);c<r.length;c++)i=r[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},s=self.webpackChunkclothingstorewebappfront=self.webpackChunkclothingstorewebappfront||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{"use strict";var e=n(43),t=n.t(e,2),s=n(391);const o=e=>"string"===typeof e,i=()=>{let e,t;const n=new Promise((n,s)=>{e=n,t=s});return n.resolve=e,n.reject=t,n},r=e=>null==e?"":""+e,a=/###/g,l=e=>e&&e.indexOf("###")>-1?e.replace(a,"."):e,c=e=>!e||o(e),u=(e,t,n)=>{const s=o(t)?t.split("."):t;let i=0;for(;i<s.length-1;){if(c(e))return{};const t=l(s[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return c(e)?{}:{obj:e,k:l(s[i])}},d=(e,t,n)=>{const{obj:s,k:o}=u(e,t,Object);if(void 0!==s||1===t.length)return void(s[o]=n);let i=t[t.length-1],r=t.slice(0,t.length-1),a=u(e,r,Object);for(;void 0===a.obj&&r.length;)i=`${r[r.length-1]}.${i}`,r=r.slice(0,r.length-1),a=u(e,r,Object),a?.obj&&"undefined"!==typeof a.obj[`${a.k}.${i}`]&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},h=(e,t)=>{const{obj:n,k:s}=u(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},p=(e,t,n)=>{for(const s in t)"__proto__"!==s&&"constructor"!==s&&(s in e?o(e[s])||e[s]instanceof String||o(t[s])||t[s]instanceof String?n&&(e[s]=t[s]):p(e[s],t[s],n):e[s]=t[s]);return e},f=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const g=e=>o(e)?e.replace(/[&<>"'\/]/g,e=>m[e]):e;const v=[" ",",","?","!",";"],y=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),_=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const s=t.split(n);let o=e;for(let i=0;i<s.length;){if(!o||"object"!==typeof o)return;let e,t="";for(let r=i;r<s.length;++r)if(r!==i&&(t+=n),t+=s[r],e=o[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&r<s.length-1)continue;i+=r-i+1;break}o=e}return o},b=e=>e?.replace("_","-"),x={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class w{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||x,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(o(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new w(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new w(this.logger,e)}}var j=new w;class S{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(e=>{let[t,s]=e;for(let o=0;o<s;o++)t(...n)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(t=>{let[s,o]=t;for(let i=0;i<o;i++)s.apply(s,[e,...n])})}}}class k extends S{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,r=void 0!==s.ignoreJSONStructure?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],n&&(Array.isArray(n)?a.push(...n):o(n)&&i?a.push(...n.split(i)):a.push(n)));const l=h(this.data,a);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=a[0],t=a[1],n=a.slice(2).join(".")),!l&&r&&o(n)?_(this.data?.[e]?.[t],n,i):l}addResource(e,t,n,s){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const i=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator;let r=[e,t];n&&(r=r.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(r=e.split("."),s=t,t=r[1]),this.addNamespaces(t),d(this.data,r,s),o.silent||this.emit("added",e,t,n,s)}addResources(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const i in n)(o(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},r=[e,t];e.indexOf(".")>-1&&(r=e.split("."),s=n,n=t,t=r[1]),this.addNamespaces(t);let a=h(this.data,r)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?p(a,n,o):a={...a,...n},d(this.data,r,a),i.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var N={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,s,o){return e.forEach(e=>{t=this.processors[e]?.process(t,n,s,o)??t}),t}};const C=Symbol("i18next/PATH_KEY");function E(e,t){const{[C]:n}=e(function(){const e=[],t=Object.create(null);let n;return t.get=(s,o)=>(n?.revoke?.(),o===C?e:(e.push(o),n=Proxy.revocable(s,t),n.proxy)),Proxy.revocable(Object.create(null),t).proxy}());return n.join(t?.keySeparator??".")}const P={},T=e=>!o(e)&&"boolean"!==typeof e&&"number"!==typeof e;class L extends S{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=j.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){const t={...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}};if(null==e)return!1;const n=this.resolve(e,t);return void 0!==n?.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const r=n&&e.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const s=v.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===s.length)return!0;const o=y.getRegExp(`(${s.map(e=>"?"===e?"\\?":e).join("|")})`);let i=!o.test(e);if(!i){const t=e.indexOf(n);t>0&&!o.test(e.substring(0,t))&&(i=!0)}return i})(e,n,s);if(r&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:o(i)?[i]:i};const r=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(r[0])>-1)&&(i=r.shift()),e=r.join(s)}return{key:e,namespaces:o(i)?[i]:i}}translate(e,t,n){let s="object"===typeof t?{...t}:t;if("object"!==typeof s&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof s&&(s={...s}),s||(s={}),null==e)return"";"function"===typeof e&&(e=E(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const i=void 0!==s.returnDetails?s.returnDetails:this.options.returnDetails,r=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],s),c=l[l.length-1];let u=void 0!==s.nsSeparator?s.nsSeparator:this.options.nsSeparator;void 0===u&&(u=":");const d=s.lng||this.language,h=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===d?.toLowerCase())return h?i?{res:`${c}${u}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:`${c}${u}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:a;const p=this.resolve(e,s);let f=p?.res;const m=p?.usedKey||a,g=p?.exactUsedKey||a,v=void 0!==s.joinArrays?s.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,_=void 0!==s.count&&!o(s.count),b=L.hasDefaultValue(s),x=_?this.pluralResolver.getSuffix(d,s.count,s):"",w=s.ordinal&&_?this.pluralResolver.getSuffix(d,s.count,{ordinal:!1}):"",j=_&&!s.ordinal&&0===s.count,S=j&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${x}`]||s[`defaultValue${w}`]||s.defaultValue;let k=f;y&&!f&&b&&(k=S);const N=T(k),C=Object.prototype.toString.apply(k);if(!(y&&k&&N&&["[object Number]","[object Function]","[object RegExp]"].indexOf(C)<0)||o(v)&&Array.isArray(k))if(y&&o(v)&&Array.isArray(f))f=f.join(v),f&&(f=this.extendTranslation(f,e,s,n));else{let t=!1,o=!1;!this.isValidLookup(f)&&b&&(t=!0,f=S),this.isValidLookup(f)||(o=!0,f=a);const i=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&o?void 0:f,l=b&&S!==f&&this.options.updateMissing;if(o||t||l){if(this.logger.log(l?"updateKey":"missingKey",d,c,a,l?S:f),r){const e=this.resolve(a,{...s,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let s=0;s<t.length;s++)e.push(t[s]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(s.lng||this.language):e.push(s.lng||this.language);const n=(e,t,n)=>{const o=b&&n!==f?n:i;this.options.missingKeyHandler?this.options.missingKeyHandler(e,c,t,o,l,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,c,t,o,l,s),this.emit("missingKey",e,c,t,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&_?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,s);j&&s[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{n([e],a+t,s[`defaultValue${t}`]||S)})}):n(e,a,S))}f=this.extendTranslation(f,e,s,p,n),o&&f===a&&this.options.appendNamespaceToMissingKey&&(f=`${c}${u}${a}`),(o||t)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${u}${a}`:a,t?f:void 0,s))}else{if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,k,{...s,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(p.res=e,p.usedParams=this.getUsedParamsDetails(s),p):e}if(r){const e=Array.isArray(k),t=e?[]:{},n=e?g:m;for(const o in k)if(Object.prototype.hasOwnProperty.call(k,o)){const e=`${n}${r}${o}`;t[o]=b&&!f?this.translate(e,{...s,defaultValue:T(S)?S[o]:void 0,joinArrays:!1,ns:l}):this.translate(e,{...s,joinArrays:!1,ns:l}),t[o]===e&&(t[o]=k[o])}f=t}}return i?(p.res=f,p.usedParams=this.getUsedParamsDetails(s),p):f}extendTranslation(e,t,n,s,i){var r=this;if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const a=o(e)&&(void 0!==n?.interpolation?.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(a){const t=e.match(this.interpolator.nestingRegexp);l=t&&t.length}let c=n.replace&&!o(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),e=this.interpolator.interpolate(e,c,n.lng||this.language||s.usedLng,n),a){const t=e.match(this.interpolator.nestingRegexp);l<(t&&t.length)&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return i?.[0]!==s[0]||n.context?r.translate(...s,t):(r.logger.warn(`It seems you are nesting recursively key: ${s[0]} in key: ${t[0]}`),null)},n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,l=o(a)?[a]:a;return null!=e&&l?.length&&!1!==n.applyPostProcessor&&(e=N.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,s,i,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(t))return;const l=this.extractFromKey(e,a),c=l.key;n=c;let u=l.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const d=void 0!==a.count&&!o(a.count),h=d&&!a.ordinal&&0===a.count,p=void 0!==a.context&&(o(a.context)||"number"===typeof a.context)&&""!==a.context,f=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);u.forEach(e=>{this.isValidLookup(t)||(r=e,P[`${f[0]}-${e}`]||!this.utils?.hasLoadedNamespace||this.utils?.hasLoadedNamespace(r)||(P[`${f[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${f.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach(n=>{if(this.isValidLookup(t))return;i=n;const o=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(o,c,n,e,a);else{let e;d&&(e=this.pluralResolver.getSuffix(n,a.count,a));const t=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(a.ordinal&&0===e.indexOf(s)&&o.push(c+e.replace(s,this.options.pluralSeparator)),o.push(c+e),h&&o.push(c+t)),p){const n=`${c}${this.options.contextSeparator||"_"}${a.context}`;o.push(n),d&&(a.ordinal&&0===e.indexOf(s)&&o.push(n+e.replace(s,this.options.pluralSeparator)),o.push(n+e),h&&o.push(n+t))}}let r;for(;r=o.pop();)this.isValidLookup(t)||(s=r,t=this.getResource(n,e,r,a))}))})}),{res:t,usedKey:n,exactUsedKey:s,usedLng:i,usedNS:r}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!o(e.replace);let s=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const e of t)delete s[e]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class M{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=j.create("languageUtils")}getScriptPartFromCode(e){if(!(e=b(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=b(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(o(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch(t){}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const s=this.getLanguagePartFromCode(e);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(e=>e===s?e:e.indexOf("-")<0&&s.indexOf("-")<0?void 0:e.indexOf("-")>0&&s.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===s||0===e.indexOf(s)&&s.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),o(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),s=[],i=e=>{e&&(this.isSupportedCode(e)?s.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return o(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):o(e)&&i(this.formatLanguageCode(e)),n.forEach(e=>{s.indexOf(e)<0&&i(this.formatLanguageCode(e))}),s}}const I={zero:0,one:1,two:2,few:3,many:4,other:5},A={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class z{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=j.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=b("dev"===e?"en":e),s=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let i;try{i=new Intl.PluralRules(n,{type:s})}catch(Xl){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),A;if(!e.match(/-|_/))return A;const s=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(s,t)}return this.pluralRulesCache[o]=i,i}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((e,t)=>I[e]-I[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const O=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=((e,t,n)=>{const s=h(e,n);return void 0!==s?s:h(t,n)})(e,t,n);return!r&&i&&o(n)&&(r=_(e,n,s),void 0===r&&(r=_(t,n,s))),r},R=e=>e.replace(/\$/g,"$$$$");class D{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=j.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:i,suffix:r,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:v,maxReplaces:y,alwaysFormat:_}=e.interpolation;this.escape=void 0!==t?t:g,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==s&&s,this.prefix=o?f(o):i||"{{",this.suffix=r?f(r):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?f(d):h||f("$t("),this.nestingSuffix=p?f(p):m||f(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=y||1e3,this.alwaysFormat=void 0!==_&&_,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let i,a,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=e=>{if(e.indexOf(this.formatSeparator)<0){const o=O(t,c,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(o,void 0,n,{...s,...t,interpolationkey:e}):o}const o=e.split(this.formatSeparator),i=o.shift().trim(),r=o.join(this.formatSeparator).trim();return this.format(O(t,c,i,this.options.keySeparator,this.options.ignoreJSONStructure),r,n,{...s,...t,interpolationkey:i})};this.resetRegExp();const d=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=void 0!==s?.interpolation?.skipOnVariables?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>R(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?R(this.escape(e)):R(e)}].forEach(t=>{for(l=0;i=t.regex.exec(e);){const n=i[1].trim();if(a=u(n),void 0===a)if("function"===typeof d){const t=d(e,i,s);a=o(t)?t:""}else if(s&&Object.prototype.hasOwnProperty.call(s,n))a="";else{if(h){a=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),a=""}else o(a)||this.useRawValueToEscape||(a=r(a));const c=t.safeValue(a);if(e=e.replace(i[0],c),h?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t){let n,s,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const s=e.split(new RegExp(`${n}[ ]*{`));let o=`{${s[1]}`;e=s[0],o=this.interpolate(o,i);const r=o.match(/'/g),a=o.match(/"/g);((r?.length??0)%2===0&&!a||a.length%2!==0)&&(o=o.replace(/'/g,'"'));try{i=JSON.parse(o),t&&(i={...t,...i})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,l),`${e}${n}${o}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let c=[];i={...a},i=i.replace&&!o(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;const u=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(-1!==u&&(c=n[1].slice(u).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),n[1]=n[1].slice(0,u)),s=t(l.call(this,n[1].trim(),i),i),s&&n[0]===e&&!o(s))return s;o(s)||(s=r(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),s=""),c.length&&(s=c.reduce((e,t)=>this.format(e,t,a.lng,{...a,interpolationkey:n[1].trim()}),s.trim())),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}const V=e=>{const t={};return(n,s,o)=>{let i=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(i={...i,[o.interpolationkey]:void 0});const r=s+JSON.stringify(i);let a=t[r];return a||(a=e(b(s),o),t[r]=a),a(n)}},B=e=>(t,n,s)=>e(b(n),s)(t);class ${constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=j.create("formatter"),this.options=e,this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?V:B;this.formats={number:n((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:n((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)}),datetime:n((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:n((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=V(t)}format(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(e=>e.indexOf(")")>-1)){const e=o.findIndex(e=>e.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,e)].join(this.formatSeparator)}return o.reduce((e,t)=>{const{formatName:o,formatOptions:i}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const o=s[1].substring(0,s[1].length-1);"currency"===t&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):"relativetime"===t&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(e=>{if(e){const[t,...s]=e.split(":"),o=s.join(":").trim().replace(/^'+|'+$/g,""),i=t.trim();n[i]||(n[i]=o),"false"===o&&(n[i]=!1),"true"===o&&(n[i]=!0),isNaN(o)||(n[i]=parseInt(o,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[o]){let t=e;try{const r=s?.formatParams?.[s.interpolationkey]||{},a=r.locale||r.lng||s.locale||s.lng||n;t=this.formats[o](e,a,{...i,...s,...r})}catch(r){this.logger.warn(r)}return t}return this.logger.warn(`there was no format function for ${o}`),e},e)}}class F extends S{constructor(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=j.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,s.backend,s)}queueLoad(e,t,n,s){const o={},i={},r={},a={};return e.forEach(e=>{let s=!0;t.forEach(t=>{const r=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[r]=2:this.state[r]<0||(1===this.state[r]?void 0===i[r]&&(i[r]=!0):(this.state[r]=1,s=!1,void 0===i[r]&&(i[r]=!0),void 0===o[r]&&(o[r]=!0),void 0===a[t]&&(a[t]=!0)))}),s||(r[e]=!0)}),(Object.keys(o).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(i),toLoadLanguages:Object.keys(r),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const s=e.split("|"),o=s[0],i=s[1];t&&this.emit("failedLoading",o,i,t),!t&&n&&this.store.addResourceBundle(o,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const r={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:s,k:o}=u(e,t,Object);s[o]=s[o]||[],s[o].push(n)})(n.loaded,[o],i),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{r[e]||(r[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===r[e][t]&&(r[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",r),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:o,callback:i});this.readingCalls++;const r=(r,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}r&&a&&s<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,s+1,2*o,i)},o):i(r,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,r);try{const n=a(e,t);n&&"function"===typeof n.then?n.then(e=>r(null,e)).catch(r):r(null,n)}catch(Xl){r(Xl)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();o(e)&&(e=this.languageUtils.toResolveHierarchy(e)),o(t)&&(t=[t]);const i=this.queueLoad(e,t,n,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(n,i)=>{n&&this.logger.warn(`${t}loading namespace ${o} for language ${s} failed`,n),!n&&i&&this.logger.log(`${t}loaded namespace ${o} for language ${s}`,i),this.loaded(e,n,i)})}saveMissing(e,t,n,s,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(!this.services?.utils?.hasLoadedNamespace||this.services?.utils?.hasLoadedNamespace(t)){if(void 0!==n&&null!==n&&""!==n){if(this.backend?.create){const a={...i,isUpdate:o},l=this.backend.create.bind(this.backend);if(l.length<6)try{let o;o=5===l.length?l(e,t,n,s,a):l(e,t,n,s),o&&"function"===typeof o.then?o.then(e=>r(null,e)).catch(r):r(null,o)}catch(Xl){r(Xl)}else l(e,t,n,s,r,a)}e&&e[0]&&this.store.addResource(e[0],t,n,s)}}else this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const U=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),o(e[1])&&(t.defaultValue=e[1]),o(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),H=e=>(o(e.ns)&&(e.ns=[e.ns]),o(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),o(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"===typeof e.initImmediate&&(e.initAsync=e.initImmediate),e),W=()=>{};class Z extends S{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=H(e),this.services={},this.logger=j,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),null==t.defaultNS&&t.ns&&(o(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=U();this.options={...s,...this.options,...H(t)},this.options.interpolation={...s.interpolation,...this.options.interpolation},void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const r=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?j.init(r(this.modules.logger),this.options):j.init(null,this.options),t=this.modules.formatter?this.modules.formatter:$;const n=new M(this.options);this.store=new k(this.options.resources,this.options);const o=this.services;o.logger=j,o.resourceStore=this.store,o.languageUtils=n,o.pluralResolver=new z(n,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!t||this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format||(o.formatter=r(t),o.formatter.init&&o.formatter.init(o,this.options),this.options.interpolation.format=o.formatter.format.bind(o.formatter)),o.interpolator=new D(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new F(r(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];e.emit(t,...s)}),this.modules.languageDetector&&(o.languageDetector=r(this.modules.languageDetector),o.languageDetector.init&&o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=r(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new L(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];e.emit(t,...s)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,n||(n=W),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const a=i(),l=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(t),n(e,t)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;const n=o(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===n?.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],s=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(n)s(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>s(e))}this.options.preload?.forEach?.(e=>s(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)})}else t(null)}reloadResources(e,t,n){const s=i();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=W),this.services.backendConnector.reload(e,t,e=>{s.resolve(),n(e)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&N.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const s=i();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},a=(o,i)=>{i?this.isLanguageChangingTo===e&&(r(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,s.resolve(function(){return n.t(...arguments)}),t&&t(o,function(){return n.t(...arguments)})},l=t=>{e||t||!this.services.languageDetector||(t=[]);const n=o(t)?t:t&&t[0],s=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(o(t)?[t]:t);s&&(this.language||r(s),this.translator.language||this.translator.changeLanguage(s),this.services.languageDetector?.cacheUserLanguage?.(s)),this.loadResources(s,e=>{a(e,s)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e):l(this.services.languageDetector.detect()),s}getFixedT(e,t,n){var s=this;const i=function(e,t){let o;if("object"!==typeof t){for(var r=arguments.length,a=new Array(r>2?r-2:0),l=2;l<r;l++)a[l-2]=arguments[l];o=s.options.overloadTranslationOptionHandler([e,t].concat(a))}else o={...t};o.lng=o.lng||i.lng,o.lngs=o.lngs||i.lngs,o.ns=o.ns||i.ns,""!==o.keyPrefix&&(o.keyPrefix=o.keyPrefix||n||i.keyPrefix);const c=s.options.keySeparator||".";let u;return o.keyPrefix&&Array.isArray(e)?u=e.map(e=>("function"===typeof e&&(e=E(e,{...s.options,...t})),`${o.keyPrefix}${c}${e}`)):("function"===typeof e&&(e=E(e,{...s.options,...t})),u=o.keyPrefix?`${o.keyPrefix}${c}${e}`:e),s.t(u,o)};return o(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.translator?.translate(...t)}exists(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.translator?.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,i);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!i(n,e)||s&&!i(o,e)))}loadNamespaces(e,t){const n=i();return this.options.ns?(o(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=i();o(e)&&(e=[e]);const s=this.options.preload||[],r=e.filter(e=>s.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return r.length?(this.options.preload=s.concat(r),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(n){}const t=this.services?.languageUtils||new M(U());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new Z(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Z(s);void 0===e.debug&&void 0===e.prefix||(o.logger=o.logger.clone(e));if(["store","services","language"].forEach(e=>{o[e]=this[e]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((n,s)=>(n[s]={...e[t][s]},n),e[t]),e),{});o.store=new k(e,s),o.services.resourceStore=o.store}return o.translator=new L(o.services,s),o.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];o.emit(e,...n)}),o.init(s,t),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const q=Z.createInstance();q.createInstance=Z.createInstance;q.createInstance,q.dir,q.init,q.loadResources,q.reloadResources,q.use,q.changeLanguage,q.getFixedT,q.t,q.exists,q.setDefaultNamespace,q.hasLoadedNamespace,q.loadNamespaces,q.loadLanguages;var K=n(844),J=n.n(K),Y=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function X(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(J()[n[1]]||"/"===e.charAt(e.length-2))&&(t.voidElement=!0),t.name.startsWith("!--"))){var s=e.indexOf("--\x3e");return{type:"comment",comment:-1!==s?e.slice(4,s):""}}for(var o=new RegExp(Y),i=null;null!==(i=o.exec(e));)if(i[0].trim())if(i[1]){var r=i[1].trim(),a=[r,""];r.indexOf("=")>-1&&(a=r.split("=")),t.attrs[a[0]]=a[1],o.lastIndex--}else i[2]&&(t.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return t}var G=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Q=/^\s*$/,ee=Object.create(null);function te(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(te,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var ne={parse:function(e,t){t||(t={}),t.components||(t.components=ee);var n,s=[],o=[],i=-1,r=!1;if(0!==e.indexOf("<")){var a=e.indexOf("<");s.push({type:"text",content:-1===a?e:e.substring(0,a)})}return e.replace(G,function(a,l){if(r){if(a!=="</"+n.name+">")return;r=!1}var c,u="/"!==a.charAt(1),d=a.startsWith("\x3c!--"),h=l+a.length,p=e.charAt(h);if(d){var f=X(a);return i<0?(s.push(f),s):((c=o[i]).children.push(f),s)}if(u&&(i++,"tag"===(n=X(a)).type&&t.components[n.name]&&(n.type="component",r=!0),n.voidElement||r||!p||"<"===p||n.children.push({type:"text",content:e.slice(h,e.indexOf("<",h))}),0===i&&s.push(n),(c=o[i-1])&&c.children.push(n),o[i]=n),(!u||n.voidElement)&&(i>-1&&(n.voidElement||n.name===a.slice(2,-1))&&(i--,n=-1===i?s:o[i]),!r&&"<"!==p&&p)){c=-1===i?s:o[i].children;var m=e.indexOf("<",h),g=e.slice(h,-1===m?void 0:m);Q.test(g)&&(g=" "),(m>-1&&i+c.length>=0||" "!==g)&&c.push({type:"text",content:g})}}),s},stringify:function(e){return e.reduce(function(e,t){return e+te("",t)},"")}};const se=ne,oe=(e,t,n,s)=>{const o=[n,{code:t,...s||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);ue(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...o):console?.warn&&console.warn(...o)},ie={},re=(e,t,n,s)=>{ue(n)&&ie[n]||(ue(n)&&(ie[n]=new Date),oe(e,t,n,s))},ae=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},le=(e,t,n)=>{e.loadNamespaces(t,ae(e,n))},ce=(e,t,n,s)=>{if(ue(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return le(e,n,s);n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,ae(e,s))},ue=e=>"string"===typeof e,de=e=>"object"===typeof e&&null!==e,he=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,pe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},fe=e=>pe[e];let me={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(he,fe)};const ge=()=>me;let ve;const ye=()=>ve,_e=(e,t)=>{if(!e)return!1;const n=e.props?.children??e.children;return t?n.length>0:!!n},be=e=>{if(!e)return[];const t=e.props?.children??e.children;return e.props?.i18nIsDynamicList?xe(t):t},xe=e=>Array.isArray(e)?e:[e],we=(t,n,s,o)=>{if(!t)return"";let i="";const r=xe(t),a=n?.transSupportBasicHtmlNodes?n.transKeepBasicHtmlNodesFor??[]:[];return r.forEach((t,r)=>{if(ue(t))i+=`${t}`;else{if((0,e.isValidElement)(t)){const{props:e,type:l}=t,c=Object.keys(e).length,u=a.indexOf(l)>-1,d=e.children;if(!d&&u&&!c)return void(i+=`<${l}/>`);if(!d&&(!u||c)||e.i18nIsDynamicList)return void(i+=`<${r}></${r}>`);if(u&&1===c&&ue(d))return void(i+=`<${l}>${d}</${l}>`);const h=we(d,n,s,o);return void(i+=`<${r}>${h}</${r}>`)}if(null!==t){if(de(t)){const{format:e,...n}=t,r=Object.keys(n);if(1===r.length){const t=e?`${r[0]}, ${e}`:r[0];return void(i+=`{{${t}}}`)}return void oe(s,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:o,child:t})}oe(s,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:o,child:t})}else oe(s,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:o})}}),i},je=(t,n,s,o,i,r,a)=>{if(""===s)return[];const l=i.transKeepBasicHtmlNodesFor||[],c=s&&new RegExp(l.map(e=>`<${e}`).join("|")).test(s);if(!t&&!n&&!c&&!a)return[s];const u=n??{},d=t=>{xe(t).forEach(t=>{ue(t)||(_e(t)?d(be(t)):de(t)&&!(0,e.isValidElement)(t)&&Object.assign(u,t))})};d(t);const h=se.parse(`<0>${s}</0>`),p={...u,...r},f=(t,n,s)=>{const o=be(t),i=g(o,n.children,s);return(t=>Array.isArray(t)&&t.every(e.isValidElement))(o)&&0===i.length||t.props?.i18nIsDynamicList?o:i},m=(t,n,s,o,i)=>{t.dummy?(t.children=n,s.push((0,e.cloneElement)(t,{key:o},i?void 0:n))):s.push(...e.Children.map([t],t=>{const s={...t.props};return delete s.i18nIsDynamicList,(0,e.createElement)(t.type,{...s,key:o,ref:t.props.ref??t.ref},i?null:n)}))},g=(t,s,r)=>{const u=xe(t);return xe(s).reduce((t,s,d)=>{const h=s.children?.[0]?.content&&o.services.interpolator.interpolate(s.children[0].content,p,o.language);if("tag"===s.type){let a=u[parseInt(s.name,10)];!a&&n&&(a=n[s.name]),1!==r.length||a||(a=r[0][s.name]),a||(a={});const v=0!==Object.keys(s.attrs).length?((e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n})({props:s.attrs},a):a,y=(0,e.isValidElement)(v),_=y&&_e(s,!0)&&!s.voidElement,b=c&&de(v)&&v.dummy&&!y,x=de(n)&&Object.hasOwnProperty.call(n,s.name);if(ue(v)){const e=o.services.interpolator.interpolate(v,p,o.language);t.push(e)}else if(_e(v)||_){const e=f(v,s,r);m(v,e,t,d)}else if(b){const e=g(u,s.children,r);m(v,e,t,d)}else if(Number.isNaN(parseFloat(s.name)))if(x){const e=f(v,s,r);m(v,e,t,d,s.voidElement)}else if(i.transSupportBasicHtmlNodes&&l.indexOf(s.name)>-1)if(s.voidElement)t.push((0,e.createElement)(s.name,{key:`${s.name}-${d}`}));else{const n=g(u,s.children,r);t.push((0,e.createElement)(s.name,{key:`${s.name}-${d}`},n))}else if(s.voidElement)t.push(`<${s.name} />`);else{const e=g(u,s.children,r);t.push(`<${s.name}>${e}</${s.name}>`)}else if(de(v)&&!y){const e=s.children[0]?h:null;e&&t.push(e)}else m(v,h,t,d,1!==s.children.length||!h)}else if("text"===s.type){const n=i.transWrapTextNodes,r=a?i.unescape(o.services.interpolator.interpolate(s.content,p,o.language)):o.services.interpolator.interpolate(s.content,p,o.language);n?t.push((0,e.createElement)(n,{key:`${s.name}-${d}`},r)):t.push(r)}return t},[])},v=g([{dummy:!0,children:t||[]}],h,xe(t||[]));return be(v[0])},Se=(t,n,s)=>{const o=t.key||n,i=(0,e.cloneElement)(t,{key:o});if(!i.props||!i.props.children||s.indexOf(`${n}/>`)<0&&s.indexOf(`${n} />`)<0)return i;return(0,e.createElement)(function(){return(0,e.createElement)(e.Fragment,null,i)},{key:o})},ke=(e,t,n,s)=>e?Array.isArray(e)?((e,t)=>e.map((e,n)=>Se(e,n,t)))(e,t):de(e)?((e,t)=>{const n={};return Object.keys(e).forEach(s=>{Object.assign(n,{[s]:Se(e[s],s,t)})}),n})(e,t):(re(n,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:s}),null):null;function Ne(t){let{children:n,count:s,parent:o,i18nKey:i,context:r,tOptions:a={},values:l,defaults:c,components:u,ns:d,i18n:h,t:p,shouldUnescape:f,...m}=t;const g=h||ye();if(!g)return re(g,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const v=p||g.t.bind(g)||(e=>e),y={...ge(),...g.options?.react};let _=d||v.ns||g.options?.defaultNS;_=ue(_)?[_]:_||["translation"];const b=we(n,y,g,i),x=c||b||y.transEmptyNodeValue||i,{hashTransKey:w}=y,j=i||(w?w(b||x):b||x);g.options?.interpolation?.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...g.options.interpolation.defaultVariables}:{...g.options.interpolation.defaultVariables});const S=l||void 0!==s&&!g.options?.interpolation?.alwaysFormat||!n?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},k={...a,context:r||a.context,count:s,...l,...S,defaultValue:x,ns:_},N=j?v(j,k):x,C=ke(u,N,g,i);let E=C||n,P=null;var T;de(T=C)&&!Array.isArray(T)&&Object.keys(T).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0)&&(P=C,E=n);const L=je(E,P,N,g,y,k,f),M=o??y.defaultTransParent;return M?(0,e.createElement)(M,m,L):L}const Ce={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};me={...me,...e}}(e.options.react),(e=>{ve=e})(e)}},Ee=(0,e.createContext)();class Pe{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function Te(t){let{children:n,count:s,parent:o,i18nKey:i,context:r,tOptions:a={},values:l,defaults:c,components:u,ns:d,i18n:h,t:p,shouldUnescape:f,...m}=t;const{i18n:g,defaultNS:v}=(0,e.useContext)(Ee)||{},y=h||g||ye(),_=p||y?.t.bind(y);return Ne({children:n,count:s,parent:o,i18nKey:i,context:r,tOptions:a,values:l,defaults:c,components:u,ns:d||_?.ns||v||y?.options?.defaultNS,i18n:y,t:p,shouldUnescape:f,...m})}const Le=(e,t,n,s)=>e.getFixedT(t,n,s),Me=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:s}=n,{i18n:o,defaultNS:i}=(0,e.useContext)(Ee)||{},r=s||o||ye();if(r&&!r.reportNamespaces&&(r.reportNamespaces=new Pe),!r){re(r,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>ue(t)?t:de(t)&&ue(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}r.options.react?.wait&&re(r,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...ge(),...r.options.react,...n},{useSuspense:l,keyPrefix:c}=a;let u=t||i||r.options?.defaultNS;u=ue(u)?[u]:u||["translation"],r.reportNamespaces.addUsedNamespaces?.(u);const d=(r.isInitialized||r.initializedStoreOnce)&&u.every(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!s(t.isLanguageChangingTo,e))return!1}}):(re(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0)}(e,r,a)),h=((t,n,s,o)=>(0,e.useCallback)(Le(t,n,s,o),[t,n,s,o]))(r,n.lng||null,"fallback"===a.nsMode?u:u[0],c),p=()=>h,f=()=>Le(r,n.lng||null,"fallback"===a.nsMode?u:u[0],c),[m,g]=(0,e.useState)(p);let v=u.join();n.lng&&(v=`${n.lng}${v}`);const y=((t,n)=>{const s=(0,e.useRef)();return(0,e.useEffect)(()=>{s.current=n?s.current:t},[t,n]),s.current})(v),_=(0,e.useRef)(!0);(0,e.useEffect)(()=>{const{bindI18n:e,bindI18nStore:t}=a;_.current=!0,d||l||(n.lng?ce(r,n.lng,u,()=>{_.current&&g(f)}):le(r,u,()=>{_.current&&g(f)})),d&&y&&y!==v&&_.current&&g(f);const s=()=>{_.current&&g(f)};return e&&r?.on(e,s),t&&r?.store.on(t,s),()=>{_.current=!1,r&&e&&e?.split(" ").forEach(e=>r.off(e,s)),t&&r&&t.split(" ").forEach(e=>r.store.off(e,s))}},[r,v]),(0,e.useEffect)(()=>{_.current&&d&&g(p)},[r,c,d]);const b=[m,r,d];if(b.t=m,b.i18n=r,b.ready=d,d)return b;if(!d&&!l)return b;throw new Promise(e=>{n.lng?ce(r,n.lng,u,()=>e()):le(r,u,()=>e())})};function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Ae(){return"function"===typeof XMLHttpRequest||"object"===("undefined"===typeof XMLHttpRequest?"undefined":Ie(XMLHttpRequest))}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach(function(t){Re(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Re(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=De(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=De(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==De(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}var Ve,Be,$e="function"===typeof fetch?fetch:void 0;if("undefined"!==typeof global&&global.fetch?$e=global.fetch:"undefined"!==typeof window&&window.fetch&&($e=window.fetch),Ae()&&("undefined"!==typeof global&&global.XMLHttpRequest?Ve=global.XMLHttpRequest:"undefined"!==typeof window&&window.XMLHttpRequest&&(Ve=window.XMLHttpRequest)),"function"===typeof ActiveXObject&&("undefined"!==typeof global&&global.ActiveXObject?Be=global.ActiveXObject:"undefined"!==typeof window&&window.ActiveXObject&&(Be=window.ActiveXObject)),"function"!==typeof $e&&($e=void 0),!$e&&!Ve&&!Be)try{n.e(38).then(n.t.bind(n,38,19)).then(function(e){$e=e.default}).catch(function(){})}catch(Uc){}var Fe=function(e,t){if(t&&"object"===De(t)){var n="";for(var s in t)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t[s]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e},Ue=function(e,t,n,s){var o=function(e){if(!e.ok)return n(e.statusText||"Error",{status:e.status});e.text().then(function(t){n(null,{status:e.status,data:t})}).catch(n)};if(s){var i=s(e,t);if(i instanceof Promise)return void i.then(o).catch(n)}"function"===typeof fetch?fetch(e,t).then(o).catch(n):$e(e,t).then(o).catch(n)},He=!1;const We=function(e,t,n,s){return"function"===typeof n&&(s=n,n=void 0),s=s||function(){},$e&&0!==t.indexOf("file:")?function(e,t,n,s){e.queryStringParams&&(t=Fe(t,e.queryStringParams));var o=Oe({},"function"===typeof e.customHeaders?e.customHeaders():e.customHeaders);"undefined"===typeof window&&"undefined"!==typeof global&&"undefined"!==typeof global.process&&global.process.versions&&global.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),n&&(o["Content-Type"]="application/json");var i="function"===typeof e.requestOptions?e.requestOptions(n):e.requestOptions,r=Oe({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:o},He?{}:i),a="function"===typeof e.alternateFetch&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{Ue(t,r,s,a)}catch(Uc){if(!i||0===Object.keys(i).length||!Uc.message||Uc.message.indexOf("not implemented")<0)return s(Uc);try{Object.keys(i).forEach(function(e){delete r[e]}),Ue(t,r,s,a),He=!0}catch(Xl){s(Xl)}}}(e,t,n,s):Ae()||"function"===typeof ActiveXObject?function(e,t,n,s){n&&"object"===De(n)&&(n=Fe("",n).slice(1)),e.queryStringParams&&(t=Fe(t,e.queryStringParams));try{var o=Ve?new Ve:new Be("MSXML2.XMLHTTP.3.0");o.open(n?"POST":"GET",t,1),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!e.withCredentials,n&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var i=e.customHeaders;if(i="function"===typeof i?i():i)for(var r in i)o.setRequestHeader(r,i[r]);o.onreadystatechange=function(){o.readyState>3&&s(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(n)}catch(Uc){console&&console.log(Uc)}}(e,t,n,s):void s(new Error("No fetch and no xhr implementation found!"))};function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach(function(t){Ye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Je(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Xe(s.key),s)}}function Ye(e,t,n){return(t=Xe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=Ze(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ze(t)?t:t+""}var Ge=function(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services=t,this.options=n,this.allOptions=s,this.type="backend",this.init(t,n,s)},[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.services=e,this.options=Ke(Ke(Ke({},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,n){return Ye({},t,n||"")},parseLoadPayload:function(e,t){},request:We,reloadInterval:"undefined"===typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.options||{}),n),this.allOptions=s,this.services&&this.options.reloadInterval){var o=setInterval(function(){return t.reload()},this.options.reloadInterval);"object"===Ze(o)&&"function"===typeof o.unref&&o.unref()}}},{key:"readMulti",value:function(e,t,n){this._readAny(e,e,t,t,n)}},{key:"read",value:function(e,t,n){this._readAny([e],e,[t],t,n)}},{key:"_readAny",value:function(e,t,n,s,o){var i,r=this,a=this.options.loadPath;"function"===typeof this.options.loadPath&&(a=this.options.loadPath(e,n)),(a=function(e){return!!e&&"function"===typeof e.then}(i=a)?i:Promise.resolve(i)).then(function(i){if(!i)return o(null,{});var a=r.services.interpolator.interpolate(i,{lng:e.join("+"),ns:n.join("+")});r.loadUrl(a,o,t,s)})}},{key:"loadUrl",value:function(e,t,n,s){var o=this,i="string"===typeof n?[n]:n,r="string"===typeof s?[s]:s,a=this.options.parseLoadPayload(i,r);this.options.request(this.options,e,a,function(i,r){if(r&&(r.status>=500&&r.status<600||!r.status))return t("failed loading "+e+"; status code: "+r.status,!0);if(r&&r.status>=400&&r.status<500)return t("failed loading "+e+"; status code: "+r.status,!1);if(!r&&i&&i.message){var a=i.message.toLowerCase();if(["failed","fetch","network","load"].find(function(e){return a.indexOf(e)>-1}))return t("failed loading "+e+": "+i.message,!0)}if(i)return t(i,!1);var l,c;try{l="string"===typeof r.data?o.options.parse(r.data,n,s):r.data}catch(Uc){c="failed parsing "+e+" to json"}if(c)return t(c,!1);t(null,l)})}},{key:"create",value:function(e,t,n,s,o){var i=this;if(this.options.addPath){"string"===typeof e&&(e=[e]);var r=this.options.parsePayload(t,n,s),a=0,l=[],c=[];e.forEach(function(n){var s=i.options.addPath;"function"===typeof i.options.addPath&&(s=i.options.addPath(n,t));var u=i.services.interpolator.interpolate(s,{lng:n,ns:t});i.options.request(i.options,u,r,function(t,n){a+=1,l.push(t),c.push(n),a===e.length&&"function"===typeof o&&o(l,c)})})}}},{key:"reload",value:function(){var e=this,t=this.services,n=t.backendConnector,s=t.languageUtils,o=t.logger,i=n.language;if(!i||"cimode"!==i.toLowerCase()){var r=[],a=function(e){s.toResolveHierarchy(e).forEach(function(e){r.indexOf(e)<0&&r.push(e)})};a(i),this.allOptions.preload&&this.allOptions.preload.forEach(function(e){return a(e)}),r.forEach(function(t){e.allOptions.ns.forEach(function(e){n.read(t,e,"read",null,null,function(s,i){s&&o.warn("loading namespace ".concat(e," for language ").concat(t," failed"),s),!s&&i&&o.log("loaded namespace ".concat(e," for language ").concat(t),i),n.loaded("".concat(t,"|").concat(e),s,i)})})})}}}]);Ge.type="backend";const Qe=Ge,{slice:et,forEach:tt}=[];const nt=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,st={create(e,t,n,s){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+60*n*1e3)),s&&(o.domain=s),document.cookie=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};let s=`${e}=${encodeURIComponent(t)}`;if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(e)}`}if(n.domain){if(!nt.test(n.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${n.domain}`}if(n.path){if(!nt.test(n.path))throw new TypeError("option path is invalid");s+=`; Path=${n.path}`}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");s+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(s+="; Partitioned"),s}(e,t,o)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let e=n[s];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var ot={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!==typeof document)return st.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:s,cookieDomain:o,cookieOptions:i}=t;n&&"undefined"!==typeof document&&st.create(n,e,s,o,i)}},it={name:"querystring",lookup(e){let t,{lookupQuerystring:n}=e;if("undefined"!==typeof window){let{search:e}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const s=e.substring(1).split("&");for(let o=0;o<s.length;o++){const e=s[o].indexOf("=");if(e>0){s[o].substring(0,e)===n&&(t=s[o].substring(e+1))}}}return t}},rt={name:"hash",lookup(e){let t,{lookupHash:n,lookupFromHashIndex:s}=e;if("undefined"!==typeof window){const{hash:e}=window.location;if(e&&e.length>2){const o=e.substring(1);if(n){const e=o.split("&");for(let s=0;s<e.length;s++){const o=e[s].indexOf("=");if(o>0){e[s].substring(0,o)===n&&(t=e[s].substring(o+1))}}}if(t)return t;if(!t&&s>-1){const t=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(t))return;const n="number"===typeof s?s:0;return t[n]?.replace("/","")}}}return t}};let at=null;const lt=()=>{if(null!==at)return at;try{if(at="undefined"!==typeof window&&null!==window.localStorage,!at)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(Uc){at=!1}return at};var ct={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&lt())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&lt()&&window.localStorage.setItem(n,e)}};let ut=null;const dt=()=>{if(null!==ut)return ut;try{if(ut="undefined"!==typeof window&&null!==window.sessionStorage,!ut)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(Uc){ut=!1}return ut};var ht={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&dt())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&dt()&&window.sessionStorage.setItem(n,e)}},pt={name:"navigator",lookup(e){const t=[];if("undefined"!==typeof navigator){const{languages:e,userLanguage:n,language:s}=navigator;if(e)for(let o=0;o<e.length;o++)t.push(e[o]);n&&t.push(n),s&&t.push(s)}return t.length>0?t:void 0}},ft={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const s=n||("undefined"!==typeof document?document.documentElement:null);return s&&"function"===typeof s.getAttribute&&(t=s.getAttribute("lang")),t}},mt={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if("undefined"===typeof window)return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(n))return;const s="number"===typeof t?t:0;return n[s]?.replace("/","")}},gt={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const n="number"===typeof t?t+1:1,s="undefined"!==typeof window&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[n]}};let vt=!1;try{document.cookie,vt=!0}catch(Uc){}const yt=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];vt||yt.splice(1,1);class _t{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return tt.call(et.call(arguments,1),t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])}),e}(t,this.options||{},{order:yt,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"===typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(ot),this.addDetector(it),this.addDetector(ct),this.addDetector(ht),this.addDetector(pt),this.addDetector(ft),this.addDetector(mt),this.addDetector(gt),this.addDetector(rt)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"===typeof n&&(n=[n]),n&&(t=t.concat(n))}}),t=t.filter(e=>{return void 0!==e&&null!==e&&!("string"===typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(e=>e.test(t)));var t}).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}if(_t.type="languageDetector",q.isInitialized||q.use(Qe).use(_t).use(Ce).init({supportedLngs:["en","sq"],nonExplicitSupportedLngs:!0,fallbackLng:"en",ns:["common","navbar","login","register","shoplist","profile","shopdetails","productdetail","footer","notifications","about","terms","privacy","settings","businessinfo","productpanel","sales","categories","photos","employees","changes","reservations","myshops","deletebusiness","becomeOwner","searchbar","forgotpassword","resetpassword"],defaultNS:"common",load:"languageOnly",lowerCaseLng:!0,cleanCode:!0,initImmediate:!1,backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},detection:{order:["localStorage","cookie","querystring","navigator","htmlTag"],caches:["localStorage","cookie"],lookupQuerystring:"lng"},interpolation:{escapeValue:!1},react:{useSuspense:!1},returnEmptyString:!1,debug:!1}),"undefined"!==typeof document){const e=()=>document.documentElement.lang=(q.resolvedLanguage||q.language||"en").toLowerCase();q.isInitialized&&e(),q.on("initialized",e),q.on("languageChanged",e)}const bt=(0,e.createContext)(null);function xt(t){let{clientId:n,nonce:s,onScriptLoadSuccess:o,onScriptLoadError:i,children:r}=t;const a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{nonce:n,onScriptLoadSuccess:s,onScriptLoadError:o}=t,[i,r]=(0,e.useState)(!1),a=(0,e.useRef)(s);a.current=s;const l=(0,e.useRef)(o);return l.current=o,(0,e.useEffect)(()=>{const e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=n,e.onload=()=>{var e;r(!0),null===(e=a.current)||void 0===e||e.call(a)},e.onerror=()=>{var e;r(!1),null===(e=l.current)||void 0===e||e.call(l)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[n]),i}({nonce:s,onScriptLoadSuccess:o,onScriptLoadError:i}),l=(0,e.useMemo)(()=>({clientId:n,scriptLoadedSuccessfully:a}),[n,a]);return e.createElement(bt.Provider,{value:l},r)}var wt,jt=n(950),St=n.t(jt,2);function kt(){return kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kt.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(wt||(wt={}));const Nt="popstate";function Ct(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Et(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Uc){}}}function Pt(e,t){return{usr:e.state,key:e.key,idx:t}}function Tt(e,t,n,s){return void 0===n&&(n=null),kt({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Mt(t):t,{state:n,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function Lt(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function Mt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function It(e,t,n,s){void 0===s&&(s={});let{window:o=document.defaultView,v5Compat:i=!1}=s,r=o.history,a=wt.Pop,l=null,c=u();function u(){return(r.state||{idx:null}).idx}function d(){a=wt.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:p.location,delta:t})}function h(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:Lt(e);return n=n.replace(/ $/,"%20"),Ct(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,r.replaceState(kt({},r.state,{idx:c}),""));let p={get action(){return a},get location(){return e(o,r)},listen(e){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(Nt,d),l=e,()=>{o.removeEventListener(Nt,d),l=null}},createHref:e=>t(o,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=wt.Push;let s=Tt(p.location,e,t);n&&n(s,e),c=u()+1;let d=Pt(s,c),h=p.createHref(s);try{r.pushState(d,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;o.location.assign(h)}i&&l&&l({action:a,location:p.location,delta:1})},replace:function(e,t){a=wt.Replace;let s=Tt(p.location,e,t);n&&n(s,e),c=u();let o=Pt(s,c),d=p.createHref(s);r.replaceState(o,"",d),i&&l&&l({action:a,location:p.location,delta:0})},go:e=>r.go(e)};return p}var At;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(At||(At={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function zt(e,t,n){return void 0===n&&(n="/"),Ot(e,t,n,!1)}function Ot(e,t,n,s){let o=Yt(("string"===typeof t?Mt(t):t).pathname||"/",n);if(null==o)return null;let i=Rt(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let r=null;for(let a=0;null==r&&a<i.length;++a){let e=Jt(o);r=qt(i[a],e,s)}return r}function Rt(e,t,n,s){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===s&&(s="");let o=(e,o,i)=>{let r={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};r.relativePath.startsWith("/")&&(Ct(r.relativePath.startsWith(s),'Absolute route path "'+r.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),r.relativePath=r.relativePath.slice(s.length));let a=tn([s,r.relativePath]),l=n.concat(r);e.children&&e.children.length>0&&(Ct(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),Rt(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:Zt(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let s of Dt(e.path))o(e,t,s);else o(e,t)}),t}function Dt(e){let t=e.split("/");if(0===t.length)return[];let[n,...s]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===s.length)return o?[i,""]:[i];let r=Dt(s.join("/")),a=[];return a.push(...r.map(e=>""===e?i:[i,e].join("/"))),o&&a.push(...r),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const Vt=/^:[\w-]+$/,Bt=3,$t=2,Ft=1,Ut=10,Ht=-2,Wt=e=>"*"===e;function Zt(e,t){let n=e.split("/"),s=n.length;return n.some(Wt)&&(s+=Ht),t&&(s+=$t),n.filter(e=>!Wt(e)).reduce((e,t)=>e+(Vt.test(t)?Bt:""===t?Ft:Ut),s)}function qt(e,t,n){void 0===n&&(n=!1);let{routesMeta:s}=e,o={},i="/",r=[];for(let a=0;a<s.length;++a){let e=s[a],l=a===s.length-1,c="/"===i?t:t.slice(i.length)||"/",u=Kt({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!s[s.length-1].route.index&&(u=Kt({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),r.push({params:o,pathname:tn([i,u.pathname]),pathnameBase:nn(tn([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=tn([i,u.pathnameBase]))}return r}function Kt(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Et("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(s.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(s.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,s]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],r=i.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:s.reduce((e,t,n)=>{let{paramName:s,isOptional:o}=t;if("*"===s){let e=a[n]||"";r=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[s]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:r,pattern:e}}function Jt(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return Et(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Yt(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&"/"!==s?null:e.slice(n)||"/"}function Xt(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Gt(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Qt(e,t){let n=Gt(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function en(e,t,n,s){let o;void 0===s&&(s=!1),"string"===typeof e?o=Mt(e):(o=kt({},e),Ct(!o.pathname||!o.pathname.includes("?"),Xt("?","pathname","search",o)),Ct(!o.pathname||!o.pathname.includes("#"),Xt("#","pathname","hash",o)),Ct(!o.search||!o.search.includes("#"),Xt("#","search","hash",o)));let i,r=""===e||""===o.pathname,a=r?"/":o.pathname;if(null==a)i=n;else{let e=t.length-1;if(!s&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:s="",hash:o=""}="string"===typeof e?Mt(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:sn(s),hash:on(o)}}(o,i),c=a&&"/"!==a&&a.endsWith("/"),u=(r||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const tn=e=>e.join("/").replace(/\/\/+/g,"/"),nn=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sn=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",on=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function rn(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const an=["post","put","patch","delete"],ln=(new Set(an),["get",...an]);new Set(ln),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function cn(){return cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cn.apply(this,arguments)}const un=e.createContext(null);const dn=e.createContext(null);const hn=e.createContext(null);const pn=e.createContext(null);const fn=e.createContext({outlet:null,matches:[],isDataRoute:!1});const mn=e.createContext(null);function gn(){return null!=e.useContext(pn)}function vn(){return gn()||Ct(!1),e.useContext(pn).location}function yn(t){e.useContext(hn).static||e.useLayoutEffect(t)}function _n(){let{isDataRoute:t}=e.useContext(fn);return t?function(){let{router:t}=Tn(En.UseNavigateStable),n=Mn(Pn.UseNavigateStable),s=e.useRef(!1);return yn(()=>{s.current=!0}),e.useCallback(function(e,o){void 0===o&&(o={}),s.current&&("number"===typeof e?t.navigate(e):t.navigate(e,cn({fromRouteId:n},o)))},[t,n])}():function(){gn()||Ct(!1);let t=e.useContext(un),{basename:n,future:s,navigator:o}=e.useContext(hn),{matches:i}=e.useContext(fn),{pathname:r}=vn(),a=JSON.stringify(Qt(i,s.v7_relativeSplatPath)),l=e.useRef(!1);yn(()=>{l.current=!0});let c=e.useCallback(function(e,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof e)return void o.go(e);let i=en(e,JSON.parse(a),r,"path"===s.relative);null==t&&"/"!==n&&(i.pathname="/"===i.pathname?n:tn([n,i.pathname])),(s.replace?o.replace:o.push)(i,s.state,s)},[n,o,a,r,t]);return c}()}function bn(){let{matches:t}=e.useContext(fn),n=t[t.length-1];return n?n.params:{}}function xn(t,n){let{relative:s}=void 0===n?{}:n,{future:o}=e.useContext(hn),{matches:i}=e.useContext(fn),{pathname:r}=vn(),a=JSON.stringify(Qt(i,o.v7_relativeSplatPath));return e.useMemo(()=>en(t,JSON.parse(a),r,"path"===s),[t,a,r,s])}function wn(t,n,s,o){gn()||Ct(!1);let{navigator:i}=e.useContext(hn),{matches:r}=e.useContext(fn),a=r[r.length-1],l=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,d=vn();if(n){var h;let e="string"===typeof n?Mt(n):n;"/"===c||(null==(h=e.pathname)?void 0:h.startsWith(c))||Ct(!1),u=e}else u=d;let p=u.pathname||"/",f=p;if("/"!==c){let e=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=zt(t,{pathname:f});let g=Cn(m&&m.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:tn([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:tn([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),r,s,o);return n&&g?e.createElement(pn.Provider,{value:{location:cn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:wt.Pop}},g):g}function jn(){let t=function(){var t;let n=e.useContext(mn),s=Ln(Pn.UseRouteError),o=Mn(Pn.UseRouteError);if(void 0!==n)return n;return null==(t=s.errors)?void 0:t[o]}(),n=rn(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:o};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),s?e.createElement("pre",{style:i},s):null,null)}const Sn=e.createElement(jn,null);class kn extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(fn.Provider,{value:this.props.routeContext},e.createElement(mn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nn(t){let{routeContext:n,match:s,children:o}=t,i=e.useContext(un);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),e.createElement(fn.Provider,{value:n},o)}function Cn(t,n,s,o){var i;if(void 0===n&&(n=[]),void 0===s&&(s=null),void 0===o&&(o=null),null==t){var r;if(!s)return null;if(s.errors)t=s.matches;else{if(!(null!=(r=o)&&r.v7_partialHydration&&0===n.length&&!s.initialized&&s.matches.length>0))return null;t=s.matches}}let a=t,l=null==(i=s)?void 0:i.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||Ct(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(s&&o&&o.v7_partialHydration)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:n}=s,o=t.route.loader&&void 0===e[t.route.id]&&(!n||void 0===n[t.route.id]);if(t.route.lazy||o){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight((t,o,i)=>{let r,d=!1,h=null,p=null;var f;s&&(r=l&&o.route.id?l[o.route.id]:void 0,h=o.route.errorElement||Sn,c&&(u<0&&0===i?(f="route-fallback",!1||In[f]||(In[f]=!0),d=!0,p=null):u===i&&(d=!0,p=o.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,i+1)),g=()=>{let n;return n=r?h:d?p:o.route.Component?e.createElement(o.route.Component,null):o.route.element?o.route.element:t,e.createElement(Nn,{match:o,routeContext:{outlet:t,matches:m,isDataRoute:null!=s},children:n})};return s&&(o.route.ErrorBoundary||o.route.errorElement||0===i)?e.createElement(kn,{location:s.location,revalidation:s.revalidation,component:h,error:r,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var En=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(En||{}),Pn=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Pn||{});function Tn(t){let n=e.useContext(un);return n||Ct(!1),n}function Ln(t){let n=e.useContext(dn);return n||Ct(!1),n}function Mn(t){let n=function(){let t=e.useContext(fn);return t||Ct(!1),t}(),s=n.matches[n.matches.length-1];return s.route.id||Ct(!1),s.route.id}const In={};function An(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}t.startTransition;function zn(t){let{to:n,replace:s,state:o,relative:i}=t;gn()||Ct(!1);let{future:r,static:a}=e.useContext(hn),{matches:l}=e.useContext(fn),{pathname:c}=vn(),u=_n(),d=en(n,Qt(l,r.v7_relativeSplatPath),c,"path"===i),h=JSON.stringify(d);return e.useEffect(()=>u(JSON.parse(h),{replace:s,state:o,relative:i}),[u,h,i,s,o]),null}function On(e){Ct(!1)}function Rn(t){let{basename:n="/",children:s=null,location:o,navigationType:i=wt.Pop,navigator:r,static:a=!1,future:l}=t;gn()&&Ct(!1);let c=n.replace(/^\/*/,"/"),u=e.useMemo(()=>({basename:c,navigator:r,static:a,future:cn({v7_relativeSplatPath:!1},l)}),[c,l,r,a]);"string"===typeof o&&(o=Mt(o));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:m="default"}=o,g=e.useMemo(()=>{let e=Yt(d,c);return null==e?null:{location:{pathname:e,search:h,hash:p,state:f,key:m},navigationType:i}},[c,d,h,p,f,m,i]);return null==g?null:e.createElement(hn.Provider,{value:u},e.createElement(pn.Provider,{children:s,value:g}))}function Dn(e){let{children:t,location:n}=e;return wn(Vn(t),n)}new Promise(()=>{});e.Component;function Vn(t,n){void 0===n&&(n=[]);let s=[];return e.Children.forEach(t,(t,o)=>{if(!e.isValidElement(t))return;let i=[...n,o];if(t.type===e.Fragment)return void s.push.apply(s,Vn(t.props.children,i));t.type!==On&&Ct(!1),t.props.index&&t.props.children&&Ct(!1);let r={id:t.props.id||i.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(r.children=Vn(t.props.children,i)),s.push(r)}),s}function Bn(){return Bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Bn.apply(this,arguments)}function $n(e,t){if(null==e)return{};var n,s,o={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(o[n]=e[n]);return o}function Fn(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(e=>[n,e]):[[n,s]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Un=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Uc){}new Map;const Hn=t.startTransition;St.flushSync,t.useId;function Wn(t){let{basename:n,children:s,future:o,window:i}=t,r=e.useRef();var a;null==r.current&&(r.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),It(function(e,t){let{pathname:n,search:s,hash:o}=e.location;return Tt("",{pathname:n,search:s,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:Lt(t)},null,a)));let l=r.current,[c,u]=e.useState({action:l.action,location:l.location}),{v7_startTransition:d}=o||{},h=e.useCallback(e=>{d&&Hn?Hn(()=>u(e)):u(e)},[u,d]);return e.useLayoutEffect(()=>l.listen(h),[l,h]),e.useEffect(()=>An(o),[o]),e.createElement(Rn,{basename:n,children:s,location:c.location,navigationType:c.action,navigator:l,future:o})}const Zn="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,qn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kn=e.forwardRef(function(t,n){let s,{onClick:o,relative:i,reloadDocument:r,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,p=$n(t,Un),{basename:f}=e.useContext(hn),m=!1;if("string"===typeof u&&qn.test(u)&&(s=u,Zn))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=Yt(t.pathname,f);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(Uc){}let g=function(t,n){let{relative:s}=void 0===n?{}:n;gn()||Ct(!1);let{basename:o,navigator:i}=e.useContext(hn),{hash:r,pathname:a,search:l}=xn(t,{relative:s}),c=a;return"/"!==o&&(c="/"===a?o:tn([o,a])),i.createHref({pathname:c,search:l,hash:r})}(u,{relative:i}),v=function(t,n){let{target:s,replace:o,state:i,preventScrollReset:r,relative:a,viewTransition:l}=void 0===n?{}:n,c=_n(),u=vn(),d=xn(t,{relative:a});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,s)){e.preventDefault();let n=void 0!==o?o:Lt(u)===Lt(d);c(t,{replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:l})}},[u,c,d,o,i,s,t,r,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:h});return e.createElement("a",Bn({},p,{href:s||g,onClick:m||r?o:function(e){o&&o(e),e.defaultPrevented||v(e)},ref:n,target:c}))});var Jn,Yn;function Xn(t){let n=e.useRef(Fn(t)),s=e.useRef(!1),o=vn(),i=e.useMemo(()=>function(e,t){let n=Fn(e);return t&&t.forEach((e,s)=>{n.has(s)||t.getAll(s).forEach(e=>{n.append(s,e)})}),n}(o.search,s.current?null:n.current),[o.search]),r=_n(),a=e.useCallback((e,t)=>{const n=Fn("function"===typeof e?e(i):e);s.current=!0,r("?"+n,t)},[r,i]);return[i,a]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Jn||(Jn={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Yn||(Yn={}));class Gn extends Error{}function Qn(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,(e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(t)}catch(Xl){return atob(t)}}function es(e,t){if("string"!==typeof e)throw new Gn("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,s=e.split(".")[n];if("string"!==typeof s)throw new Gn(`Invalid token specified: missing part #${n+1}`);let o;try{o=Qn(s)}catch(Uc){throw new Gn(`Invalid token specified: invalid base64 for part #${n+1} (${Uc.message})`)}try{return JSON.parse(o)}catch(Uc){throw new Gn(`Invalid token specified: invalid json for part #${n+1} (${Uc.message})`)}}Gn.prototype.name="InvalidTokenError";var ts=n(579);const ns="http://77.242.26.150:8000/api",ss=e=>"string"===typeof e&&3===e.split(".").length,os=e=>{if(!e)return null;if("string"===typeof e&&ss(e))return e;const t=["token","accessToken","jwt","bearer","value"];for(const n of t){const t=null===e||void 0===e?void 0:e[n];if(ss(t))return t;if("string"===typeof t&&t.trim())return t}return null};async function is(e,t){const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(t)}),s=await n.text();let o=null;try{o=s?JSON.parse(s):null}catch{}return{ok:n.ok,status:n.status,data:o,text:s}}const rs=function(){const{t:t}=Me("login"),[n,s]=(0,e.useState)(""),[o,i]=(0,e.useState)(""),[r,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(!1),[h,p]=(0,e.useState)(null);return(0,ts.jsx)("div",{className:"login-page",children:(0,ts.jsxs)("div",{className:"login-container",children:[(0,ts.jsxs)("div",{className:"login-header",children:[(0,ts.jsx)("a",{href:"/",className:"logo-link","aria-label":t("aria.go_home",{defaultValue:"Go to homepage"}),children:(0,ts.jsx)("img",{src:"/Assets/triwears.png",className:"login-logo",alt:t("aria.logo_alt",{defaultValue:"Logo"})})}),(0,ts.jsx)("h1",{className:"login-title",children:t("title",{defaultValue:"Welcome Back"})}),(0,ts.jsx)("p",{className:"login-subtitle",children:t("subtitle",{defaultValue:"Log in to see our fullest extent!"})})]}),h&&(0,ts.jsxs)("div",{className:"status-message error",role:"alert","aria-live":"assertive",children:[(0,ts.jsx)("span",{className:"status-icon",children:"\u26a0\ufe0f"}),(0,ts.jsx)("span",{className:"status-text",children:h})]}),(0,ts.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0),p(null);const s=n.trim();try{const e=[{url:`${ns}/login`,body:{username:s,password:o}},{url:`${ns}/login`,body:{email:s,password:o}},{url:`${ns}/Login`,body:{username:s,password:o}},{url:`${ns}/Login`,body:{email:s,password:o}}];let n=null;for(const s of e)try{const{ok:e,status:o,data:i,text:r}=await is(s.url,s.body);if(!e){n=r||i&&(i.message||i.error)||`HTTP ${o}`;continue}const a=os(i)||(ss(r)?r:null);if(!a){n=t("errors.no_token",{defaultValue:"No token returned from server."});continue}try{console.log("Decoded JWT payload:",es(a))}catch{}return localStorage.setItem("token",a),l?localStorage.setItem("rememberMe","1"):localStorage.removeItem("rememberMe"),void(window.location.href="/")}catch(i){n=(null===i||void 0===i?void 0:i.message)||t("errors.login_failed",{defaultValue:"Login failed"});continue}throw new Error(n||t("errors.login_failed",{defaultValue:"Login failed"}))}catch(Xl){p((null===Xl||void 0===Xl?void 0:Xl.message)||t("errors.unknown",{defaultValue:"Something went wrong."})),d(!1)}},className:"login-form",noValidate:!0,children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"credential",className:"form-label",children:t("fields.email_or_username_label",{defaultValue:"Email or Username"})}),(0,ts.jsx)("input",{id:"credential",type:"text",className:"form-input",placeholder:t("fields.email_or_username_placeholder",{defaultValue:"Enter email or username"}),required:!0,autoComplete:"username email",value:n,onChange:e=>s(e.target.value),disabled:u})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"password",className:"form-label",children:t("fields.password_label",{defaultValue:"Password"})}),(0,ts.jsxs)("div",{className:"password-input-container",children:[(0,ts.jsx)("input",{id:"password",type:r?"text":"password",className:"form-input",placeholder:t("fields.password_placeholder",{defaultValue:"Enter your password"}),required:!0,autoComplete:"current-password",value:o,onChange:e=>i(e.target.value),disabled:u}),(0,ts.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>a(e=>!e),disabled:u,"aria-label":r?t("fields.hide_password",{defaultValue:"Hide password"}):t("fields.show_password",{defaultValue:"Show password"}),title:r?t("fields.hide_password",{defaultValue:"Hide password"}):t("fields.show_password",{defaultValue:"Show password"}),children:r?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]})]}),(0,ts.jsxs)("div",{className:"form-options",children:[(0,ts.jsxs)("div",{className:"remember-me",children:[(0,ts.jsx)("input",{type:"checkbox",id:"rememberMe",checked:l,onChange:()=>c(e=>!e),disabled:u}),(0,ts.jsx)("label",{htmlFor:"rememberMe",children:t("options.remember_me",{defaultValue:"Remember Me"})})]}),(0,ts.jsx)("a",{href:"/forgot-password",className:"forgot-password-link",children:t("options.forgot_password",{defaultValue:"Forgot Password?"})})]}),(0,ts.jsxs)("button",{type:"submit",className:"submit-button",disabled:u,children:[u&&(0,ts.jsx)("div",{className:"loading-spinner","aria-hidden":"true"}),(0,ts.jsx)("span",{children:u?t("cta.logging_in",{defaultValue:"Logging in..."}):t("cta.sign_in",{defaultValue:"Sign In"})})]})]}),(0,ts.jsx)("div",{className:"divider"}),(0,ts.jsx)("div",{className:"login-footer",children:(0,ts.jsxs)("p",{className:"signup-prompt",children:[t("footer.no_account",{defaultValue:"Don't have an account?"})," ",(0,ts.jsx)("a",{href:"/register",className:"signup-link",children:t("footer.sign_up",{defaultValue:"Sign up"})})]})})]})})};function as(){return(0,ts.jsx)(ts.Fragment,{children:(0,ts.jsx)(rs,{})})}const ls="http://77.242.26.150:8000/api";const cs=function(){const{t:t}=Me("register"),[n,s]=(0,e.useState)({firstName:"",lastName:"",dateOfBirth:"",username:"",phoneNumber:"",email:"",createPassword:"",confirmPassword:"",profilePictureUrl:"",role:"2"}),[o,i]=(0,e.useState)(!1),[r,a]=(0,e.useState)(null),[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(!1),[h,p]=(0,e.useState)(!1),[f,m]=(0,e.useState)({score:0,text:"weak",checks:{}}),[g,v]=(0,e.useState)(!0);(0,e.useEffect)(()=>{n.createPassword?m((e=>{let t=0;const n={length:e.length>=8,lowercase:/[a-z]/.test(e),uppercase:/[A-Z]/.test(e),numbers:/\d/.test(e),special:/[!@#$%^&*(),.?":{}|<>]/.test(e)};return t=Object.values(n).filter(Boolean).length,t<=2?{score:25*t,text:"weak",checks:n}:3===t?{score:50,text:"fair",checks:n}:4===t?{score:75,text:"good",checks:n}:{score:100,text:"strong",checks:n}})(n.createPassword)):m({score:0,text:"weak",checks:{}})},[n.createPassword]),(0,e.useEffect)(()=>{n.confirmPassword?v(n.createPassword===n.confirmPassword):v(!0)},[n.createPassword,n.confirmPassword]);const y=e=>{s(t=>({...t,[e.target.name]:e.target.value}))},_=e=>{"password"===e?d(e=>!e):p(e=>!e)},b=`strength.${f.text}`;return(0,ts.jsx)("div",{className:"register-page",children:(0,ts.jsxs)("div",{className:"register-container",children:[(0,ts.jsxs)("div",{className:"register-header",children:[(0,ts.jsx)("a",{href:"/",className:"logo-link","aria-label":t("aria.go_home",{defaultValue:"Go to homepage"}),children:(0,ts.jsx)("img",{src:"/Assets/triwears.png",alt:t("aria.logo_alt",{defaultValue:"Logo"}),className:"register-logo"})}),(0,ts.jsx)("h1",{className:"register-title",children:t("title",{defaultValue:"Create Your Account"})}),(0,ts.jsx)("p",{className:"register-subtitle",children:t("subtitle",{defaultValue:"Join our community and start your journey"})})]}),r&&(0,ts.jsxs)("div",{className:"status-message error",role:"alert","aria-live":"assertive",children:[(0,ts.jsx)("span",{className:"status-icon",children:"\u26a0\ufe0f"}),(0,ts.jsx)("span",{className:"status-text",children:r})]}),l&&(0,ts.jsxs)("div",{className:"status-message success",role:"status","aria-live":"polite",children:[(0,ts.jsx)("span",{className:"status-icon",children:"\u2705"}),(0,ts.jsx)("span",{className:"status-text",children:l})]}),(0,ts.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0),a(null),c(null);const o=["firstName","lastName","dateOfBirth","username","phoneNumber","email","createPassword","confirmPassword"];for(const s of o)if(!n[s])return a(t("errors.missing_field",{field:s,defaultValue:"Please fill in all fields. Missing: {{field}}"})),void i(!1);if(n.createPassword!==n.confirmPassword)return a(t("errors.passwords_mismatch",{defaultValue:"Passwords do not match."})),void i(!1);if(f.score<50)return a(t("errors.password_too_weak",{defaultValue:"Password is too weak. Please choose a stronger password."})),void i(!1);const r={name:`${n.firstName} ${n.lastName}`,username:n.username,email:n.email,password:n.createPassword,role:{0:0,1:1,2:2}[n.role],telephoneNumber:n.phoneNumber,profilePictureUrl:n.profilePictureUrl};try{const e=await fetch(`${ls}/Register`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!e.ok){let n;try{n=await e.json()}catch{n={}}throw new Error(n.message||t("errors.register_failed",{defaultValue:"An error occurred while registering."}))}const o=await fetch(`${ls}/Auth/send-confirmation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.email})});if(!o.ok){const e=await o.text();console.warn("Email confirmation request failed:",e)}c(t("success.registered",{defaultValue:"Successfully Registered. Check your email to verify your account!"})),s({firstName:"",lastName:"",dateOfBirth:"",username:"",phoneNumber:"",email:"",createPassword:"",confirmPassword:"",profilePictureUrl:"",role:"2"}),setTimeout(()=>{window.location.href="/login"},2e3)}catch(Xl){a(Xl.message||t("errors.register_failed",{defaultValue:"An error occurred while registering."})),i(!1)}},className:"register-form",noValidate:!0,children:[(0,ts.jsxs)("div",{className:"form-row",children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",htmlFor:"firstName",children:t("fields.first_name",{defaultValue:"First Name"})}),(0,ts.jsx)("input",{id:"firstName",type:"text",name:"firstName",className:"form-input",placeholder:t("placeholders.first_name",{defaultValue:"Enter your first name"}),required:!0,value:n.firstName,onChange:y,disabled:o,autoComplete:"given-name"})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",htmlFor:"lastName",children:t("fields.last_name",{defaultValue:"Last Name"})}),(0,ts.jsx)("input",{id:"lastName",type:"text",name:"lastName",className:"form-input",placeholder:t("placeholders.last_name",{defaultValue:"Enter your last name"}),required:!0,value:n.lastName,onChange:y,disabled:o,autoComplete:"family-name"})]})]}),(0,ts.jsxs)("div",{className:"form-row",children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",htmlFor:"dateOfBirth",children:t("fields.dob",{defaultValue:"Date of Birth"})}),(0,ts.jsx)("input",{id:"dateOfBirth",type:"date",name:"dateOfBirth",className:"form-input",required:!0,value:n.dateOfBirth,onChange:y,disabled:o,autoComplete:"bday"})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",htmlFor:"username",children:t("fields.username",{defaultValue:"Username"})}),(0,ts.jsx)("input",{id:"username",type:"text",name:"username",className:"form-input",placeholder:t("placeholders.username",{defaultValue:"Choose a username"}),required:!0,value:n.username,onChange:y,disabled:o,autoComplete:"username"})]})]}),(0,ts.jsxs)("div",{className:"form-row",children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",htmlFor:"phoneNumber",children:t("fields.phone",{defaultValue:"Phone Number"})}),(0,ts.jsx)("input",{id:"phoneNumber",type:"tel",name:"phoneNumber",className:"form-input",placeholder:t("placeholders.phone",{defaultValue:"0691234567"}),pattern:"^\\d{10}$",required:!0,value:n.phoneNumber,onChange:y,disabled:o,autoComplete:"tel"})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",htmlFor:"email",children:t("fields.email",{defaultValue:"Email Address"})}),(0,ts.jsx)("input",{id:"email",type:"email",name:"email",className:"form-input",placeholder:t("placeholders.email",{defaultValue:"your@email.com"}),required:!0,value:n.email,onChange:y,disabled:o,autoComplete:"email"})]})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",htmlFor:"createPassword",children:t("fields.create_password",{defaultValue:"Create Password"})}),(0,ts.jsxs)("div",{className:"password-input-container",children:[(0,ts.jsx)("input",{id:"createPassword",type:u?"text":"password",name:"createPassword",className:"form-input",placeholder:t("placeholders.create_password",{defaultValue:"Create a strong password"}),required:!0,value:n.createPassword,onChange:y,disabled:o,autoComplete:"new-password"}),(0,ts.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>_("password"),disabled:o,"aria-label":u?t("aria.hide_password",{defaultValue:"Hide password"}):t("aria.show_password",{defaultValue:"Show password"}),children:u?"\ud83d\ude48":"\ud83d\udc41\ufe0f"})]}),n.createPassword&&(0,ts.jsxs)("div",{className:"password-strength","aria-live":"polite",children:[(0,ts.jsx)("div",{className:"strength-bar",children:(0,ts.jsx)("div",{className:`strength-fill ${f.text}`,style:{width:`${f.score}%`}})}),(0,ts.jsx)("span",{className:`strength-text ${f.text}`,children:t(b,{defaultValue:f.text})})]}),n.createPassword&&f.checks&&(0,ts.jsxs)("div",{className:"password-requirements",children:[(0,ts.jsxs)("div",{className:"requirement "+(f.checks.length?"met":""),children:[(0,ts.jsx)("span",{className:"requirement-icon",children:f.checks.length?"\u2713":"\u25cb"}),t("requirements.at_least",{defaultValue:"At least 8 characters"})]}),(0,ts.jsxs)("div",{className:"requirement "+(f.checks.lowercase?"met":""),children:[(0,ts.jsx)("span",{className:"requirement-icon",children:f.checks.lowercase?"\u2713":"\u25cb"}),t("requirements.lowercase",{defaultValue:"One lowercase letter"})]}),(0,ts.jsxs)("div",{className:"requirement "+(f.checks.uppercase?"met":""),children:[(0,ts.jsx)("span",{className:"requirement-icon",children:f.checks.uppercase?"\u2713":"\u25cb"}),t("requirements.uppercase",{defaultValue:"One uppercase letter"})]}),(0,ts.jsxs)("div",{className:"requirement "+(f.checks.numbers?"met":""),children:[(0,ts.jsx)("span",{className:"requirement-icon",children:f.checks.numbers?"\u2713":"\u25cb"}),t("requirements.number",{defaultValue:"One number"})]}),(0,ts.jsxs)("div",{className:"requirement "+(f.checks.special?"met":""),children:[(0,ts.jsx)("span",{className:"requirement-icon",children:f.checks.special?"\u2713":"\u25cb"}),t("requirements.special",{defaultValue:"One special character"})]})]})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",htmlFor:"confirmPassword",children:t("fields.confirm_password",{defaultValue:"Confirm Password"})}),(0,ts.jsxs)("div",{className:"password-input-container",children:[(0,ts.jsx)("input",{id:"confirmPassword",type:h?"text":"password",name:"confirmPassword",className:"form-input",placeholder:t("placeholders.confirm_password",{defaultValue:"Confirm your password"}),required:!0,value:n.confirmPassword,onChange:y,disabled:o,autoComplete:"new-password"}),(0,ts.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>_("confirm"),disabled:o,"aria-label":h?t("aria.hide_password",{defaultValue:"Hide password"}):t("aria.show_password",{defaultValue:"Show password"}),children:h?"\ud83d\ude48":"\ud83d\udc41\ufe0f"})]}),n.confirmPassword&&!g&&(0,ts.jsxs)("div",{className:"password-mismatch",children:[(0,ts.jsx)("span",{className:"mismatch-icon",children:"\u26a0\ufe0f"}),t("errors.passwords_mismatch",{defaultValue:"Passwords do not match"})]}),n.confirmPassword&&g&&n.createPassword&&(0,ts.jsxs)("div",{className:"password-match",children:[(0,ts.jsx)("span",{className:"match-icon",children:"\u2713"}),t("info.passwords_match",{defaultValue:"Passwords match"})]})]}),(0,ts.jsx)("button",{type:"submit",className:"submit-button",disabled:o||!g||f.score<50,children:o?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("div",{className:"loading-spinner","aria-hidden":"true"}),t("cta.creating_account",{defaultValue:"Creating Account..."})]}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("span",{children:t("cta.create_account",{defaultValue:"Create Account"})}),(0,ts.jsx)("span",{className:"button-icon",children:"\u2192"})]})})]}),(0,ts.jsx)("div",{className:"register-footer",children:(0,ts.jsxs)("p",{className:"login-link",children:[t("footer.have_account",{defaultValue:"Already have an account?"})," ",(0,ts.jsx)("a",{href:"/login",className:"link",children:t("footer.sign_in_here",{defaultValue:"Sign in here"})})]})})]})})};function us(){return(0,ts.jsx)(ts.Fragment,{children:(0,ts.jsx)(cs,{})})}const ds=()=>{const{t:e}=Me("footer");return(0,ts.jsxs)("footer",{className:"custom-footer",children:[(0,ts.jsxs)("div",{className:"footer-content",children:[(0,ts.jsxs)("div",{className:"footer-logo-section",children:[(0,ts.jsx)("img",{src:"/Assets/triwears.png",alt:e("footer.logo_alt",{defaultValue:"Triwears Logo"}),className:"footer-logo"}),(0,ts.jsx)("p",{className:"footer-slogan",children:e("footer.slogan",{defaultValue:"Triwears \u2014 Albania\u2019s First Real-Time Online Shopping Mall. Connecting real shops with real people."})})]}),(0,ts.jsxs)("div",{className:"footer-links",children:[(0,ts.jsxs)("div",{className:"footer-column",children:[(0,ts.jsx)("h4",{children:e("footer.company",{defaultValue:"Company"})}),(0,ts.jsx)(Kn,{to:"/about",children:e("footer.links.about",{defaultValue:"About Us"})}),(0,ts.jsx)(Kn,{to:"/terms",children:e("footer.links.terms",{defaultValue:"Terms & Conditions"})}),(0,ts.jsx)(Kn,{to:"/privacy",children:e("footer.links.privacy",{defaultValue:"Privacy Policy"})})]}),(0,ts.jsxs)("div",{className:"footer-column",children:[(0,ts.jsx)("h4",{children:e("footer.explore",{defaultValue:"Explore"})}),(0,ts.jsx)(Kn,{to:"/allshops",children:e("footer.links.find_shops",{defaultValue:"Find Shops"})}),(0,ts.jsx)(Kn,{to:"/user-search",children:e("footer.links.find_users",{defaultValue:"Find Users"})}),(0,ts.jsx)(Kn,{to:"/map",children:e("footer.links.map",{defaultValue:"Map"})})]}),(0,ts.jsxs)("div",{className:"footer-column",children:[(0,ts.jsx)("h4",{children:e("footer.contact",{defaultValue:"Contact"})}),(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[e("footer.contact_labels.email",{defaultValue:"Email"}),":"]})," ","edjcms2025@gmail.com"]}),(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[e("footer.contact_labels.phone",{defaultValue:"Phone"}),":"]})," ","+355 69 480 6600"]}),(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[e("footer.contact_labels.location",{defaultValue:"Location"}),":"]})," ","Tirana, Albania"]})]})]})]}),(0,ts.jsx)("div",{className:"footer-bottom",children:(0,ts.jsx)("p",{children:e("footer.copyright",{year:(new Date).getFullYear(),defaultValue:`\xa9 ${(new Date).getFullYear()} Triwears. All rights reserved.`})})})]})};var hs={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ps=e.createContext&&e.createContext(hs),fs=["attr","size","title"];function ms(e,t){if(null==e)return{};var n,s,o=function(e,t){if(null==e)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gs.apply(this,arguments)}function vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(n),!0).forEach(function(t){_s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _s(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bs(t){return t&&t.map((t,n)=>e.createElement(t.tag,ys({key:n},t.attr),bs(t.child)))}function xs(t){return n=>e.createElement(ws,gs({attr:ys({},t.attr)},n),bs(t.child))}function ws(t){var n=n=>{var s,{attr:o,size:i,title:r}=t,a=ms(t,fs),l=i||n.size||"1em";return n.className&&(s=n.className),t.className&&(s=(s?s+" ":"")+t.className),e.createElement("svg",gs({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,a,{className:s,style:ys(ys({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),r&&e.createElement("title",null,r),t.children)};return void 0!==ps?e.createElement(ps.Consumer,null,e=>n(e)):n(hs)}function js(e){return xs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(e)}function Ss(e){return xs({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"},child:[]}]})(e)}function ks(e){return xs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function Ns(e){return xs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(e)}function Cs(e){return xs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function Es(e){return xs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(e)}function Ps(e){return xs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function Ts(e){return xs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}const Ls=[0,2e3,1e4,3e4,null];class Ms{constructor(e){this._retryDelays=void 0!==e?[...e,null]:Ls}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class Is{}Is.Authorization="Authorization",Is.Cookie="Cookie";class As{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}class zs{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}class Os extends zs{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const n=await this._innerClient.send(e);return t&&401===n.statusCode&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):n}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[Is.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[Is.Authorization]&&delete e.headers[Is.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}class Rs extends Error{constructor(e,t){const n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}}class Ds extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A timeout occurred.";const t=new.target.prototype;super(e),this.__proto__=t}}class Vs extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An abort occurred.";const t=new.target.prototype;super(e),this.__proto__=t}}class Bs extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}}class $s extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}}class Fs extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}}class Us extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class Hs extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}}var Ws;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(Ws||(Ws={}));class Zs{constructor(){}log(e,t){}}Zs.instance=new Zs;var qs=n(285);class Ks{static isRequired(e,t){if(null===e||void 0===e)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw new Error(`Unknown ${n} value: ${e}.`)}}class Js{static get isBrowser(){return!Js.isNode&&"object"===typeof window&&"object"===typeof window.document}static get isWebWorker(){return!Js.isNode&&"object"===typeof self&&"importScripts"in self}static get isReactNative(){return!Js.isNode&&"object"===typeof window&&"undefined"===typeof window.document}static get isNode(){return"undefined"!==typeof qs&&qs.release&&"node"===qs.release.name}}function Ys(e,t){let n="";return Xs(e)?(n=`Binary data of length ${e.byteLength}`,t&&(n+=`. Content: '${function(e){const t=new Uint8Array(e);let n="";return t.forEach(e=>{n+=`0x${e<16?"0":""}${e.toString(16)} `}),n.substr(0,n.length-1)}(e)}'`)):"string"===typeof e&&(n=`String data of length ${e.length}`,t&&(n+=`. Content: '${e}'`)),n}function Xs(e){return e&&"undefined"!==typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}async function Gs(e,t,n,s,o,i){const r={},[a,l]=to();r[a]=l,e.log(Ws.Trace,`(${t} transport) sending data. ${Ys(o,i.logMessageContent)}.`);const c=Xs(o)?"arraybuffer":"text",u=await n.post(s,{content:o,headers:{...r,...i.headers},responseType:c,timeout:i.timeout,withCredentials:i.withCredentials});e.log(Ws.Trace,`(${t} transport) request complete. Response status: ${u.statusCode}.`)}class Qs{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(e=>{})}}class eo{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const n=`[${(new Date).toISOString()}] ${Ws[e]}: ${t}`;switch(e){case Ws.Critical:case Ws.Error:this.out.error(n);break;case Ws.Warning:this.out.warn(n);break;case Ws.Information:this.out.info(n);break;default:this.out.log(n)}}}}function to(){let e="X-SignalR-User-Agent";return Js.isNode&&(e="User-Agent"),[e,no("8.0.17",so(),io(),oo())]}function no(e,t,n,s){let o="Microsoft SignalR/";const i=e.split(".");return o+=`${i[0]}.${i[1]}`,o+=` (${e}; `,o+=t&&""!==t?`${t}; `:"Unknown OS; ",o+=`${n}`,o+=s?`; ${s}`:"; Unknown Runtime Version",o+=")",o}function so(){if(!Js.isNode)return"";switch(qs.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return qs.platform}}function oo(){if(Js.isNode)return qs.versions.node}function io(){return Js.isNode?"NodeJS":"Browser"}function ro(e){return e.stack?e.stack:e.message?e.message:`${e}`}class ao extends zs{constructor(e){if(super(),this._logger=e,"undefined"===typeof fetch||Js.isNode){const e=require;this._jar=new(e("tough-cookie").CookieJar),"undefined"===typeof fetch?this._fetchType=e("node-fetch"):this._fetchType=fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("could not find global")}());if("undefined"===typeof AbortController){const e=require;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new Vs;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let n;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),n=new Vs});let s,o=null;if(e.timeout){const s=e.timeout;o=setTimeout(()=>{t.abort(),this._logger.log(Ws.Warning,"Timeout from HTTP request."),n=new Ds},s)}""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},Xs(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");try{s=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(Uc){if(n)throw n;throw this._logger.log(Ws.Warning,`Error from HTTP request. ${Uc}.`),Uc}finally{o&&clearTimeout(o),e.abortSignal&&(e.abortSignal.onabort=null)}if(!s.ok){const e=await lo(s,"text");throw new Rs(e||s.statusText,s.status)}const i=lo(s,e.responseType),r=await i;return new As(s.status,s.statusText,r)}getCookieString(e){let t="";return Js.isNode&&this._jar&&this._jar.getCookies(e,(e,n)=>t=n.join("; ")),t}}function lo(e,t){let n;switch(t){case"arraybuffer":n=e.arrayBuffer();break;case"text":default:n=e.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`)}return n}class co extends zs{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Vs):e.method?e.url?new Promise((t,n)=>{const s=new XMLHttpRequest;s.open(e.method,e.url,!0),s.withCredentials=void 0===e.withCredentials||e.withCredentials,s.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===e.content&&(e.content=void 0),e.content&&(Xs(e.content)?s.setRequestHeader("Content-Type","application/octet-stream"):s.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const o=e.headers;o&&Object.keys(o).forEach(e=>{s.setRequestHeader(e,o[e])}),e.responseType&&(s.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{s.abort(),n(new Vs)}),e.timeout&&(s.timeout=e.timeout),s.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),s.status>=200&&s.status<300?t(new As(s.status,s.statusText,s.response||s.responseText)):n(new Rs(s.response||s.responseText||s.statusText,s.status))},s.onerror=()=>{this._logger.log(Ws.Warning,`Error from HTTP request. ${s.status}: ${s.statusText}.`),n(new Rs(s.statusText,s.status))},s.ontimeout=()=>{this._logger.log(Ws.Warning,"Timeout from HTTP request."),n(new Ds)},s.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class uo extends zs{constructor(e){if(super(),"undefined"!==typeof fetch||Js.isNode)this._httpClient=new ao(e);else{if("undefined"===typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");this._httpClient=new co(e)}}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Vs):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}var ho,po;!function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}(ho||(ho={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(po||(po={}));class fo{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}class mo{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new fo,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,t){if(Ks.isRequired(e,"url"),Ks.isRequired(t,"transferFormat"),Ks.isIn(t,po,"transferFormat"),this._url=e,this._logger.log(Ws.Trace,"(LongPolling transport) Connecting."),t===po.Binary&&"undefined"!==typeof XMLHttpRequest&&"string"!==typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,s]=to(),o={[n]:s,...this._options.headers},i={abortSignal:this._pollAbort.signal,headers:o,timeout:1e5,withCredentials:this._options.withCredentials};t===po.Binary&&(i.responseType="arraybuffer");const r=`${e}&_=${Date.now()}`;this._logger.log(Ws.Trace,`(LongPolling transport) polling: ${r}.`);const a=await this._httpClient.get(r,i);200!==a.statusCode?(this._logger.log(Ws.Error,`(LongPolling transport) Unexpected response code: ${a.statusCode}.`),this._closeError=new Rs(a.statusText||"",a.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,i)}async _poll(e,t){try{for(;this._running;)try{const n=`${e}&_=${Date.now()}`;this._logger.log(Ws.Trace,`(LongPolling transport) polling: ${n}.`);const s=await this._httpClient.get(n,t);204===s.statusCode?(this._logger.log(Ws.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==s.statusCode?(this._logger.log(Ws.Error,`(LongPolling transport) Unexpected response code: ${s.statusCode}.`),this._closeError=new Rs(s.statusText||"",s.statusCode),this._running=!1):s.content?(this._logger.log(Ws.Trace,`(LongPolling transport) data received. ${Ys(s.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(s.content)):this._logger.log(Ws.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(Uc){this._running?Uc instanceof Ds?this._logger.log(Ws.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=Uc,this._running=!1):this._logger.log(Ws.Trace,`(LongPolling transport) Poll errored after shutdown: ${Uc.message}`)}}finally{this._logger.log(Ws.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?Gs(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Ws.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Ws.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,n]=to();e[t]=n;const s={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let o;try{await this._httpClient.delete(this._url,s)}catch(Xl){o=Xl}o?o instanceof Rs&&(404===o.statusCode?this._logger.log(Ws.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Ws.Trace,`(LongPolling transport) Error sending a DELETE request: ${o}`)):this._logger.log(Ws.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Ws.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(Ws.Trace,e),this.onclose(this._closeError)}}}class go{constructor(e,t,n,s){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=s,this.onreceive=null,this.onclose=null}async connect(e,t){return Ks.isRequired(e,"url"),Ks.isRequired(t,"transferFormat"),Ks.isIn(t,po,"transferFormat"),this._logger.log(Ws.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((n,s)=>{let o,i=!1;if(t===po.Text){if(Js.isBrowser||Js.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const t=this._httpClient.getCookieString(e),n={};n.Cookie=t;const[s,i]=to();n[s]=i,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...n,...this._options.headers}})}try{o.onmessage=e=>{if(this.onreceive)try{this._logger.log(Ws.Trace,`(SSE transport) data received. ${Ys(e.data,this._options.logMessageContent)}.`),this.onreceive(e.data)}catch(t){return void this._close(t)}},o.onerror=e=>{i?this._close():s(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(Ws.Information,`SSE connected to ${this._url}`),this._eventSource=o,i=!0,n()}}catch(Uc){return void s(Uc)}}else s(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})}async send(e){return this._eventSource?Gs(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class vo{constructor(e,t,n,s,o,i){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=s,this._webSocketConstructor=o,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=i}async connect(e,t){let n;return Ks.isRequired(e,"url"),Ks.isRequired(t,"transferFormat"),Ks.isIn(t,po,"transferFormat"),this._logger.log(Ws.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise((s,o)=>{let i;e=e.replace(/^http/,"ws");const r=this._httpClient.getCookieString(e);let a=!1;if(Js.isNode||Js.isReactNative){const t={},[s,o]=to();t[s]=o,n&&(t[Is.Authorization]=`Bearer ${n}`),r&&(t[Is.Cookie]=r),i=new this._webSocketConstructor(e,void 0,{headers:{...t,...this._headers}})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);i||(i=new this._webSocketConstructor(e)),t===po.Binary&&(i.binaryType="arraybuffer"),i.onopen=t=>{this._logger.log(Ws.Information,`WebSocket connected to ${e}.`),this._webSocket=i,a=!0,s()},i.onerror=e=>{let t=null;t="undefined"!==typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"There was an error with the transport",this._logger.log(Ws.Information,`(WebSockets transport) ${t}.`)},i.onmessage=e=>{if(this._logger.log(Ws.Trace,`(WebSockets transport) data received. ${Ys(e.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(e.data)}catch(t){return void this._close(t)}},i.onclose=e=>{if(a)this._close(e);else{let t=null;t="undefined"!==typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(t))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Ws.Trace,`(WebSockets transport) sending data. ${Ys(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Ws.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(e)||!1!==e.wasClean&&1e3===e.code?e instanceof Error?this.onclose(e):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)))}_isCloseEvent(e){return e&&"boolean"===typeof e.wasClean&&"number"===typeof e.code}}class yo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Ks.isRequired(e,"url"),this._logger=void 0===(n=t.logger)?new eo(Ws.Information):null===n?Zs.instance:void 0!==n.log?n:new eo(n),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=void 0!==t.logMessageContent&&t.logMessageContent,"boolean"!==typeof t.withCredentials&&void 0!==t.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.withCredentials=void 0===t.withCredentials||t.withCredentials,t.timeout=void 0===t.timeout?1e5:t.timeout;let s=null,o=null;if(Js.isNode){const e=require;s=e("ws"),o=e("eventsource")}Js.isNode||"undefined"===typeof WebSocket||t.WebSocket?Js.isNode&&!t.WebSocket&&s&&(t.WebSocket=s):t.WebSocket=WebSocket,Js.isNode||"undefined"===typeof EventSource||t.EventSource?Js.isNode&&!t.EventSource&&"undefined"!==typeof o&&(t.EventSource=o):t.EventSource=EventSource,this._httpClient=new Os(t.httpClient||new uo(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||po.Binary,Ks.isIn(e,po,"transferFormat"),this._logger.log(Ws.Debug,`Starting connection with transfer format '${po[e]}'.`),"Disconnected"!==this._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,"Disconnecting"===this._connectionState){const e="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Ws.Error,e),await this._stopPromise,Promise.reject(new Vs(e))}if("Connected"!==this._connectionState){const e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Ws.Error,e),Promise.reject(new Vs(e))}this._connectionStarted=!0}send(e){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new _o(this.transport)),this._sendQueue.send(e))}async stop(e){return"Disconnected"===this._connectionState?(this._logger.log(Ws.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===this._connectionState?(this._logger.log(Ws.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState="Disconnecting",this._stopPromise=new Promise(e=>{this._stopPromiseResolver=e}),await this._stopInternal(e),void await this._stopPromise)}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch(Uc){}if(this.transport){try{await this.transport.stop()}catch(Uc){this._logger.log(Ws.Error,`HttpConnection.transport.stop() threw error '${Uc}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Ws.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport!==ho.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this._constructTransport(ho.WebSockets),await this._startTransport(t,e)}else{let n=null,s=0;do{if(n=await this._getNegotiationResponse(t),"Disconnecting"===this._connectionState||"Disconnected"===this._connectionState)throw new Vs("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){const e=n.accessToken;this._accessTokenFactory=()=>e,this._httpClient._accessToken=e,this._httpClient._accessTokenFactory=void 0}s++}while(n.url&&s<100);if(100===s&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,n,e)}this.transport instanceof mo&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(Ws.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(Uc){return this._logger.log(Ws.Error,"Failed to start the connection: "+Uc),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(Uc)}}async _getNegotiationResponse(e){const t={},[n,s]=to();t[n]=s;const o=this._resolveNegotiateUrl(e);this._logger.log(Ws.Debug,`Sending negotiation request: ${o}.`);try{const e=await this._httpClient.post(o,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(200!==e.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${e.statusCode}'`));const n=JSON.parse(e.content);return(!n.negotiateVersion||n.negotiateVersion<1)&&(n.connectionToken=n.connectionId),n.useStatefulReconnect&&!0!==this._options._useStatefulReconnect?Promise.reject(new Us("Client didn't negotiate Stateful Reconnect but the server did.")):n}catch(Uc){let t="Failed to complete negotiation with the server: "+Uc;return Uc instanceof Rs&&404===Uc.statusCode&&(t+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Ws.Error,t),Promise.reject(new Us(t))}}_createConnectUrl(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+`id=${t}`:e}async _createTransport(e,t,n,s){let o=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t))return this._logger.log(Ws.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(o,s),void(this.connectionId=n.connectionId);const i=[],r=n.availableTransports||[];let a=n;for(const c of r){const n=this._resolveTransportOrError(c,t,s,!0===(null===a||void 0===a?void 0:a.useStatefulReconnect));if(n instanceof Error)i.push(`${c.transport} failed:`),i.push(n);else if(this._isITransport(n)){if(this.transport=n,!a){try{a=await this._getNegotiationResponse(e)}catch(l){return Promise.reject(l)}o=this._createConnectUrl(e,a.connectionToken)}try{return await this._startTransport(o,s),void(this.connectionId=a.connectionId)}catch(l){if(this._logger.log(Ws.Error,`Failed to start the transport '${c.transport}': ${l}`),a=void 0,i.push(new Fs(`${c.transport} failed: ${l}`,ho[c.transport])),"Connecting"!==this._connectionState){const e="Failed to select transport before stop() was called.";return this._logger.log(Ws.Debug,e),Promise.reject(new Vs(e))}}}}return i.length>0?Promise.reject(new Hs(`Unable to connect to the server with any of the available transports. ${i.join(" ")}`,i)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case ho.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new vo(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case ho.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new go(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case ho.LongPolling:return new mo(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async n=>{let s=!1;if(this.features.reconnect){try{this.features.disconnected(),await this.transport.connect(e,t),await this.features.resend()}catch{s=!0}s&&this._stopConnection(n)}else this._stopConnection(n)}:this.transport.onclose=e=>this._stopConnection(e),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n,s){const o=ho[e.transport];if(null===o||void 0===o)return this._logger.log(Ws.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(!function(e,t){return!e||0!==(t&e)}(t,o))return this._logger.log(Ws.Debug,`Skipping transport '${ho[o]}' because it was disabled by the client.`),new $s(`'${ho[o]}' is disabled by the client.`,o);{const t=e.transferFormats.map(e=>po[e]);if(!(t.indexOf(n)>=0))return this._logger.log(Ws.Debug,`Skipping transport '${ho[o]}' because it does not support the requested transfer format '${po[n]}'.`),new Error(`'${ho[o]}' does not support ${po[n]}.`);if(o===ho.WebSockets&&!this._options.WebSocket||o===ho.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Ws.Debug,`Skipping transport '${ho[o]}' because it is not supported in your environment.'`),new Bs(`'${ho[o]}' is not supported in your environment.`,o);this._logger.log(Ws.Debug,`Selecting transport '${ho[o]}'.`);try{return this.features.reconnect=o===ho.WebSockets?s:void 0,this._constructTransport(o)}catch(i){return i}}}_isITransport(e){return e&&"object"===typeof e&&"connect"in e}_stopConnection(e){if(this._logger.log(Ws.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(Ws.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),e?this._logger.log(Ws.Error,`Connection disconnected with error '${e}'.`):this._logger.log(Ws.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(e=>{this._logger.log(Ws.Error,`TransportSendQueue.stop() threw error '${e}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(Uc){this._logger.log(Ws.Error,`HttpConnection.onclose(${e}) threw error '${Uc}'.`)}}}else this._logger.log(Ws.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!Js.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(Ws.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";const n=new URLSearchParams(t.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?"true"===n.get("useStatefulReconnect")&&(this._options._useStatefulReconnect=!0):!0===this._options._useStatefulReconnect&&n.append("useStatefulReconnect","true"),t.search=n.toString(),t.toString()}}class _o{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new bo,this._transportResult=new bo,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new bo),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!==typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new bo;const t=this._transportResult;this._transportResult=void 0;const n="string"===typeof this._buffer[0]?this._buffer.join(""):_o._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(n),t.resolve()}catch(e){t.reject(e)}}}static _concatBuffers(e){const t=e.map(e=>e.byteLength).reduce((e,t)=>e+t),n=new Uint8Array(t);let s=0;for(const o of e)n.set(new Uint8Array(o),s),s+=o.byteLength;return n.buffer}}class bo{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}class xo{static write(e){return`${e}${xo.RecordSeparator}`}static parse(e){if(e[e.length-1]!==xo.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(xo.RecordSeparator);return t.pop(),t}}xo.RecordSeparatorCode=30,xo.RecordSeparator=String.fromCharCode(xo.RecordSeparatorCode);class wo{writeHandshakeRequest(e){return xo.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(Xs(e)){const s=new Uint8Array(e),o=s.indexOf(xo.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");const i=o+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(s.slice(0,i))),n=s.byteLength>i?s.slice(i).buffer:null}else{const s=e,o=s.indexOf(xo.RecordSeparator);if(-1===o)throw new Error("Message is incomplete.");const i=o+1;t=s.substring(0,i),n=s.length>i?s.substring(i):null}const s=xo.parse(t),o=JSON.parse(s[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[n,o]}}var jo;!function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close",e[e.Ack=8]="Ack",e[e.Sequence=9]="Sequence"}(jo||(jo={}));class So{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new Qs(this,e)}}class ko{constructor(e,t,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=n}async _send(e){const t=this._protocol.writeMessage(e);let n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let e=()=>{},s=()=>{};Xs(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise((t,n)=>{e=t,s=n})),this._messages.push(new No(t,this._totalMessageCount,e,s))}try{this._reconnectInProgress||await this._connection.send(t)}catch{this._disconnected()}await n}_ack(e){let t=-1;for(let n=0;n<this._messages.length;n++){const s=this._messages[n];if(s._id<=e.sequenceId)t=n,Xs(s._message)?this._bufferedByteCount-=s._message.byteLength:this._bufferedByteCount-=s._message.length,s._resolver();else{if(!(this._bufferedByteCount<this._bufferSize))break;s._resolver()}}-1!==t&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type===jo.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){e.sequenceId>this._nextReceivingSequenceId?this._connection.stop(new Error("Sequence ID greater than amount of messages we've received.")):this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=0!==this._messages.length?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:jo.Sequence,sequenceId:e}));const t=this._messages;for(const n of t)await this._connection.send(n._message);this._reconnectInProgress=!1}_dispose(e){null!==e&&void 0!==e||(e=new Error("Unable to reconnect to server."));for(const t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case jo.Invocation:case jo.StreamItem:case jo.Completion:case jo.StreamInvocation:case jo.CancelInvocation:return!0;case jo.Close:case jo.Sequence:case jo.Ping:case jo.Ack:return!1}}_ackTimer(){void 0===this._ackTimerHandle&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:jo.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class No{constructor(e,t,n,s){this._message=e,this._id=t,this._resolver=n,this._rejector=s}}var Co;!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(Co||(Co={}));class Eo{static create(e,t,n,s,o,i,r){return new Eo(e,t,n,s,o,i,r)}constructor(e,t,n,s,o,i,r){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Ws.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Ks.isRequired(e,"connection"),Ks.isRequired(t,"logger"),Ks.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=null!==o&&void 0!==o?o:3e4,this.keepAliveIntervalInMilliseconds=null!==i&&void 0!==i?i:15e3,this._statefulReconnectBufferSize=null!==r&&void 0!==r?r:1e5,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=s,this._handshakeProtocol=new wo,this.connection.onreceive=e=>this._processIncomingData(e),this.connection.onclose=e=>this._connectionClosed(e),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Co.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:jo.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==Co.Disconnected&&this._connectionState!==Co.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Co.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Co.Connecting,this._logger.log(Ws.Debug,"Starting HubConnection.");try{await this._startInternal(),Js.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Co.Connected,this._connectionStarted=!0,this._logger.log(Ws.Debug,"HubConnection connected successfully.")}catch(Uc){return this._connectionState=Co.Disconnected,this._logger.log(Ws.Debug,`HubConnection failed to start successfully because of error '${Uc}'.`),Promise.reject(Uc)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((e,t)=>{this._handshakeResolver=e,this._handshakeRejecter=t});await this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);const n={protocol:this._protocol.name,version:t};if(this._logger.log(Ws.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(Ws.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new ko(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(Uc){throw this._logger.log(Ws.Debug,`Hub handshake failed with error '${Uc}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(Uc),Uc}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch(Uc){}}_stopInternal(e){if(this._connectionState===Co.Disconnected)return this._logger.log(Ws.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===Co.Disconnecting)return this._logger.log(Ws.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const t=this._connectionState;return this._connectionState=Co.Disconnecting,this._logger.log(Ws.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Ws.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===Co.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Vs("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const[o,i]=this._replaceStreamingParams(n),r=this._createStreamInvocation(e,n,i);let a;const l=new So;return l.cancelCallback=()=>{const e=this._createCancelInvocation(r.invocationId);return delete this._callbacks[r.invocationId],a.then(()=>this._sendWithProtocol(e))},this._callbacks[r.invocationId]=(e,t)=>{t?l.error(t):e&&(e.type===jo.Completion?e.error?l.error(new Error(e.error)):l.complete():l.next(e.item))},a=this._sendWithProtocol(r).catch(e=>{l.error(e),delete this._callbacks[r.invocationId]}),this._launchStreams(o,a),l}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const[o,i]=this._replaceStreamingParams(n),r=this._sendWithProtocol(this._createInvocation(e,n,!0,i));return this._launchStreams(o,r),r}invoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const[o,i]=this._replaceStreamingParams(n),r=this._createInvocation(e,n,!1,i);return new Promise((e,t)=>{this._callbacks[r.invocationId]=(n,s)=>{s?t(s):n&&(n.type===jo.Completion?n.error?t(new Error(n.error)):e(n.result):t(new Error(`Unexpected message type: ${n.type}`)))};const n=this._sendWithProtocol(r).catch(e=>{t(e),delete this._callbacks[r.invocationId]});this._launchStreams(o,n)})}on(e,t){e&&t&&(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),-1===this._methods[e].indexOf(t)&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const n=this._methods[e];if(n)if(t){const s=n.indexOf(t);-1!==s&&(n.splice(s,1),0===n.length&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const e of t)if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(e))switch(e.type){case jo.Invocation:this._invokeClientMethod(e).catch(e=>{this._logger.log(Ws.Error,`Invoke client method threw error: ${ro(e)}`)});break;case jo.StreamItem:case jo.Completion:{const t=this._callbacks[e.invocationId];if(t){e.type===jo.Completion&&delete this._callbacks[e.invocationId];try{t(e)}catch(Uc){this._logger.log(Ws.Error,`Stream callback threw error: ${ro(Uc)}`)}}break}case jo.Ping:break;case jo.Close:{this._logger.log(Ws.Information,"Close message received from server.");const t=e.error?new Error("Server returned an error on close: "+e.error):void 0;!0===e.allowReconnect?this.connection.stop(t):this._stopPromise=this._stopInternal(t);break}case jo.Ack:this._messageBuffer&&this._messageBuffer._ack(e);break;case jo.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(e);break;default:this._logger.log(Ws.Warning,`Invalid message type: ${e.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(Uc){const t="Error parsing handshake response: "+Uc;this._logger.log(Ws.Error,t);const n=new Error(t);throw this._handshakeRejecter(n),n}if(t.error){const e="Server returned handshake error: "+t.error;this._logger.log(Ws.Error,e);const n=new Error(e);throw this._handshakeRejecter(n),n}return this._logger.log(Ws.Debug,"Server handshake complete."),this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),void 0===this._pingServerHandle)){let e=this._nextKeepAlive-(new Date).getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Co.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),n=this._methods[t];if(!n)return this._logger.log(Ws.Warning,`No client method with the name '${t}' found.`),void(e.invocationId&&(this._logger.log(Ws.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null))));const s=n.slice(),o=!!e.invocationId;let i,r,a;for(const l of s)try{const n=i;i=await l.apply(this,e.arguments),o&&i&&n&&(this._logger.log(Ws.Error,`Multiple results provided for '${t}'. Sending error to server.`),a=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),r=void 0}catch(Uc){r=Uc,this._logger.log(Ws.Error,`A callback for the method '${t}' threw error '${Uc}'.`)}a?await this._sendWithProtocol(a):o?(r?a=this._createCompletionMessage(e.invocationId,`${r}`,null):void 0!==i?a=this._createCompletionMessage(e.invocationId,null,i):(this._logger.log(Ws.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),a=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(a)):i&&this._logger.log(Ws.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(Ws.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Vs("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Co.Disconnecting?this._completeClose(e):this._connectionState===Co.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===Co.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=Co.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(null!==e&&void 0!==e?e:new Error("Connection closed.")),this._messageBuffer=void 0),Js.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(Uc){this._logger.log(Ws.Error,`An onclose callback called with error '${e}' threw error '${Uc}'.`)}}}async _reconnect(e){const t=Date.now();let n=0,s=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),o=this._getNextRetryDelay(n++,0,s);if(null===o)return this._logger.log(Ws.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(e);if(this._connectionState=Co.Reconnecting,e?this._logger.log(Ws.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(Ws.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length){try{this._reconnectingCallbacks.forEach(t=>t.apply(this,[e]))}catch(Uc){this._logger.log(Ws.Error,`An onreconnecting callback called with error '${e}' threw error '${Uc}'.`)}if(this._connectionState!==Co.Reconnecting)return void this._logger.log(Ws.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==o;){if(this._logger.log(Ws.Information,`Reconnect attempt number ${n} will start in ${o} ms.`),await new Promise(e=>{this._reconnectDelayHandle=setTimeout(e,o)}),this._reconnectDelayHandle=void 0,this._connectionState!==Co.Reconnecting)return void this._logger.log(Ws.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this._startInternal(),this._connectionState=Co.Connected,this._logger.log(Ws.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach(e=>e.apply(this,[this.connection.connectionId]))}catch(Uc){this._logger.log(Ws.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${Uc}'.`)}return}catch(Uc){if(this._logger.log(Ws.Information,`Reconnect attempt failed because of error '${Uc}'.`),this._connectionState!==Co.Reconnecting)return this._logger.log(Ws.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(this._connectionState===Co.Disconnecting&&this._completeClose());s=Uc instanceof Error?Uc:new Error(Uc.toString()),o=this._getNextRetryDelay(n++,Date.now()-t,s)}}this._logger.log(Ws.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(Uc){return this._logger.log(Ws.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${Uc}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach(n=>{const s=t[n];try{s(null,e)}catch(Uc){this._logger.log(Ws.Error,`Stream 'error' callback called with '${e}' threw error: ${ro(Uc)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,s){if(n)return 0!==s.length?{arguments:t,streamIds:s,target:e,type:jo.Invocation}:{arguments:t,target:e,type:jo.Invocation};{const n=this._invocationId;return this._invocationId++,0!==s.length?{arguments:t,invocationId:n.toString(),streamIds:s,target:e,type:jo.Invocation}:{arguments:t,invocationId:n.toString(),target:e,type:jo.Invocation}}}_launchStreams(e,t){if(0!==e.length){t||(t=Promise.resolve());for(const n in e)e[n].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n)))},error:e=>{let s;s=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n,s)))},next:e=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(n,e)))}})}}_replaceStreamingParams(e){const t=[],n=[];for(let s=0;s<e.length;s++){const o=e[s];if(this._isObservable(o)){const i=this._invocationId;this._invocationId++,t[i]=o,n.push(i.toString()),e.splice(s,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&"function"===typeof e.subscribe}_createStreamInvocation(e,t,n){const s=this._invocationId;return this._invocationId++,0!==n.length?{arguments:t,invocationId:s.toString(),streamIds:n,target:e,type:jo.StreamInvocation}:{arguments:t,invocationId:s.toString(),target:e,type:jo.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:jo.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:jo.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:jo.Completion}:{invocationId:e,result:n,type:jo.Completion}}_createCloseMessage(){return{type:jo.Close}}}class Po{constructor(){this.name="json",this.version=2,this.transferFormat=po.Text}parseMessages(e,t){if("string"!==typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=Zs.instance);const n=xo.parse(e),s=[];for(const o of n){const e=JSON.parse(o);if("number"!==typeof e.type)throw new Error("Invalid payload.");switch(e.type){case jo.Invocation:this._isInvocationMessage(e);break;case jo.StreamItem:this._isStreamItemMessage(e);break;case jo.Completion:this._isCompletionMessage(e);break;case jo.Ping:case jo.Close:break;case jo.Ack:this._isAckMessage(e);break;case jo.Sequence:this._isSequenceMessage(e);break;default:t.log(Ws.Information,"Unknown message type '"+e.type+"' ignored.");continue}s.push(e)}return s}writeMessage(e){return xo.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if("number"!==typeof e.sequenceId)throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if("number"!==typeof e.sequenceId)throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if("string"!==typeof e||""===e)throw new Error(t)}}const To={trace:Ws.Trace,debug:Ws.Debug,info:Ws.Information,information:Ws.Information,warn:Ws.Warning,warning:Ws.Warning,error:Ws.Error,critical:Ws.Critical,none:Ws.None};class Lo{configureLogging(e){if(Ks.isRequired(e,"logging"),void 0!==e.log)this.logger=e;else if("string"===typeof e){const t=function(e){const t=To[e.toLowerCase()];if("undefined"!==typeof t)return t;throw new Error(`Unknown log level: ${e}`)}(e);this.logger=new eo(t)}else this.logger=new eo(e);return this}withUrl(e,t){return Ks.isRequired(e,"url"),Ks.isNotEmpty(e,"url"),this.url=e,this.httpConnectionOptions="object"===typeof t?{...this.httpConnectionOptions,...t}:{...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return Ks.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Ms(e):this.reconnectPolicy=e:this.reconnectPolicy=new Ms,this}withServerTimeout(e){return Ks.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return Ks.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=null===e||void 0===e?void 0:e.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new yo(this.url,e);return Eo.create(t,this.logger||Zs.instance,this.protocol||new Po,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}const Mo="http://77.242.26.150:8000",Io=()=>{const e=localStorage.getItem("token")||localStorage.getItem("authToken");if(!e||""===e.trim())return null;try{const t=JSON.parse(e);return t.token||t}catch{return e.replace(/^"|"$/g,"")}},Ao=()=>{const e=Io(),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t};function zo(){const{t:t}=Me("notifications"),[n,s]=(0,e.useState)([]),[o,i]=(0,e.useState)([]),[r,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)("Connecting"),[u,d]=(0,e.useState)(!1),h=(0,e.useRef)(null),p=(0,e.useRef)(null),f=(0,e.useCallback)(async()=>{if(Io()){d(!0);try{const[e,n]=await Promise.all([fetch(`${Mo}/api/Business/employees/pending`,{headers:Ao()}),fetch(`${Mo}/api/Notification`,{headers:Ao()})]);if(e.ok){const n=await e.json();s((Array.isArray(n)?n:[]).map(e=>{var n,s,o,i,r,a,l;return{businessId:null!==(n=e.businessId)&&void 0!==n?n:e.BusinessId,businessName:null!==(s=null!==(o=null!==(i=e.businessName)&&void 0!==i?i:e.name)&&void 0!==o?o:e.Name)&&void 0!==s?s:t("unknown_business"),invitedAt:null!==(r=null!==(a=null!==(l=e.invitedAt)&&void 0!==l?l:e.requestedAt)&&void 0!==a?a:e.RequestedAt)&&void 0!==r?r:(new Date).toISOString()}}))}else console.warn("Failed to load invites:",e.status);if(n.ok){const e=await n.json();i((Array.isArray(e)?e:[]).map(e=>{var t,n,s,o,i,r,a;const l=null!==(t=null!==(n=e.isRead)&&void 0!==n?n:e.IsRead)&&void 0!==t&&t;return{id:null!==(s=e.id)&&void 0!==s?s:e.Id,message:null!==(o=null!==(i=e.message)&&void 0!==i?i:e.Message)&&void 0!==o?o:"",createdAt:null!==(r=null!==(a=e.createdAt)&&void 0!==a?a:e.CreatedAt)&&void 0!==r?r:(new Date).toISOString(),seen:!!l}}))}else console.warn("Failed to load notifications:",n.status)}catch(Xl){console.error("Error loading initial data:",Xl)}finally{d(!1)}}else c("No Token")},[t]),m=(0,e.useCallback)(async()=>{if(!Io())return void c("No Token");if(c("Connecting"),p.current){try{await p.current.stop()}catch(Uc){console.error("Error stopping existing connection:",Uc)}p.current=null}const e=(new Lo).withUrl(`${Mo}/notificationHub`,{accessTokenFactory:()=>Io()||""}).configureLogging(Ws.Information).withAutomaticReconnect([0,2e3,1e4,3e4]).build();p.current=e,e.onreconnecting(()=>c("Reconnecting")),e.onreconnected(()=>c("Connected")),e.onclose(()=>c("Disconnected")),e.on("ReceiveEmployeeInvitation",e=>{var n,o;(s(n=>{var s,o,i,r,a;const l=null!==(s=e.businessId)&&void 0!==s?s:e.BusinessId;if(l&&n.some(e=>e.businessId===l))return n;const c={businessId:l,businessName:null!==(o=null!==(i=e.businessName)&&void 0!==i?i:e.name)&&void 0!==o?o:t("unknown_business"),invitedAt:null!==(r=null!==(a=e.invitedAt)&&void 0!==a?a:e.requestedAt)&&void 0!==r?r:(new Date).toISOString()};return[...n,c]}),"undefined"!==typeof Notification&&"granted"===Notification.permission)&&new Notification(t("notify_titles.new_invite"),{body:t("notify_bodies.invite_from",{name:null!==(n=null!==(o=e.businessName)&&void 0!==o?o:e.name)&&void 0!==n?n:t("unknown_business")}),icon:"/favicon.ico"})}),e.on("ReceiveNotification",e=>{var n,s;(i(t=>{var n,s,o,i,r,a,l,c;const u=null!==(n=null!==(s=e.id)&&void 0!==s?s:e.Id)&&void 0!==n?n:Date.now();if(t.some(e=>e.id===u))return t;const d=null!==(o=null!==(i=e.isRead)&&void 0!==i?i:e.IsRead)&&void 0!==o&&o;return[{id:u,message:null!==(r=null!==(a=e.message)&&void 0!==a?a:e.Message)&&void 0!==r?r:"",createdAt:null!==(l=null!==(c=e.createdAt)&&void 0!==c?c:e.CreatedAt)&&void 0!==l?l:(new Date).toISOString(),seen:!!d},...t]}),"undefined"!==typeof Notification&&"granted"===Notification.permission)&&new Notification(t("notify_titles.new_notification"),{body:null!==(n=null!==(s=e.message)&&void 0!==s?s:e.Message)&&void 0!==n?n:"",icon:"/favicon.ico"})});try{await e.start(),c("Connected")}catch(Xl){console.error("SignalR start failed:",Xl),c("Failed"),setTimeout(()=>{m()},5e3)}},[t]),g=(0,e.useCallback)(async()=>{if("undefined"!==typeof Notification&&"default"===Notification.permission)try{await Notification.requestPermission()}catch{}},[]),v=(0,e.useCallback)(async e=>{const n=o.find(t=>t.id===e);if(n&&!n.seen){i(t=>t.map(t=>t.id===e?{...t,seen:!0}:t));try{let n=await fetch(`${Mo}/api/Notification/${e}/read`,{method:"PUT",headers:Ao()});if(n.ok||(n=await fetch(`${Mo}/api/Notification/${e}/seen`,{method:"PUT",headers:Ao()})),!n.ok){i(t=>t.map(t=>t.id===e?{...t,seen:!1}:t));const s=await n.text().catch(()=>"");console.error("Mark seen failed:",n.status,s),alert(t("errors.mark_seen_failed"))}}catch(Xl){i(t=>t.map(t=>t.id===e?{...t,seen:!1}:t)),console.error("Network error marking seen:",Xl),alert(t("errors.network_mark_seen"))}}},[o,t]),y=(0,e.useCallback)(async(e,n)=>{try{const o=await fetch(`${Mo}/api/Business/employees/respond/${e}?approve=${n}`,{method:"PUT",headers:Ao()});if(o.ok)s(t=>t.filter(t=>t.businessId!==e)),"undefined"!==typeof Notification&&"granted"===Notification.permission&&new Notification(t(n?"toast.invite_accepted":"toast.invite_declined"),{body:t(n?"toast.invite_accepted_body":"toast.invite_declined_body"),icon:"/favicon.ico"});else{const e=await o.text().catch(()=>"");console.error("Failed to respond:",o.status,e),alert(t("errors.invite_respond_failed",{action:t(n?"common.accept":"common.decline"),message:e}))}}catch(Xl){console.error(Xl),alert(t("errors.invite_respond_network",{action:t(n?"common.accept":"common.decline")}))}},[t]),_=(0,e.useCallback)(async()=>{d(!0);try{const e=await fetch(`${Mo}/api/Notification`,{method:"DELETE",headers:Ao()});if(!e.ok)throw new Error(await e.text());i([])}catch(Xl){console.error("Clear failed:",Xl),alert(t("errors.clear_failed"))}finally{d(!1)}},[t]);(0,e.useEffect)(()=>(f(),g(),m(),()=>{p.current&&(p.current.stop().catch(e=>console.error("Error stopping on unmount:",e)),p.current=null)}),[f,g,m]),(0,e.useEffect)(()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const b=n.length+o.filter(e=>!e.seen).length;return(0,ts.jsxs)("div",{ref:h,className:"notification-wrapper",children:[(0,ts.jsxs)("div",{className:"notification-bell-container",onClick:()=>a(e=>!e),children:[(0,ts.jsx)(js,{className:"notification-bell "+("Connected"===l?"connected":""),"aria-expanded":r,"aria-controls":"notifications-panel",title:t("bell.title",{count:b})}),b>0&&(0,ts.jsx)("span",{className:"notification-badge","aria-live":"polite","aria-atomic":"true",children:b>99?"99+":b}),"Connected"===l&&(0,ts.jsx)("div",{className:"connection-pulse"})]}),(0,ts.jsxs)("div",{id:"notifications-panel",className:`notifications-panel ${r?"open":""} ${u?"loading":""}`,role:"menu",children:[(0,ts.jsxs)("div",{className:"panel-header",children:[(0,ts.jsxs)("h3",{className:"panel-title",children:[(0,ts.jsx)("span",{className:"title-icon",children:"\ud83d\udd14"}),t("panel.title")]}),o.length>0&&(0,ts.jsx)("button",{onClick:_,className:"clear-all-btn",disabled:u,children:t(u?"panel.clearing":"panel.clear_all")})]}),(0,ts.jsxs)("div",{className:"panel-content",children:[n.length>0&&(0,ts.jsxs)("div",{className:"section invitations-section",children:[(0,ts.jsxs)("div",{className:"section-header",children:[(0,ts.jsx)("span",{className:"section-icon",children:"\ud83d\udce7"}),(0,ts.jsx)("span",{className:"section-title",children:t("sections.invitations")}),(0,ts.jsx)("span",{className:"section-count",children:n.length})]}),(0,ts.jsx)("div",{className:"section-items",children:n.map(e=>(0,ts.jsxs)("div",{className:"notification-item invitation-item",children:[(0,ts.jsxs)("div",{className:"item-content",children:[(0,ts.jsx)("div",{className:"item-title",children:t("invite.from",{name:e.businessName})}),(0,ts.jsx)("div",{className:"item-time",children:new Date(e.invitedAt).toLocaleString()})]}),(0,ts.jsxs)("div",{className:"item-actions",children:[(0,ts.jsx)("button",{onClick:()=>y(e.businessId,!0),className:"action-btn accept-btn",children:t("common.accept")}),(0,ts.jsx)("button",{onClick:()=>y(e.businessId,!1),className:"action-btn decline-btn",children:t("common.decline")})]})]},e.businessId))})]}),o.length>0&&(0,ts.jsx)("div",{className:"section notifications-section",children:(0,ts.jsx)("div",{className:"section-items",children:o.map(e=>(0,ts.jsx)("div",{className:"notification-item "+(e.seen?"seen":""),role:"button",tabIndex:0,onClick:()=>v(e.id),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),v(e.id))},title:e.seen?t("note.seen"):t("note.mark_seen"),"aria-pressed":e.seen,children:(0,ts.jsxs)("div",{className:"item-content",children:[(0,ts.jsx)("div",{className:"item-message",children:e.message}),(0,ts.jsx)("div",{className:"item-time",children:new Date(e.createdAt).toLocaleString()})]})},e.id))})}),0===n.length&&0===o.length&&(0,ts.jsxs)("div",{className:"empty-state",children:[(0,ts.jsx)("div",{className:"empty-icon",children:"\ud83d\udd15"}),(0,ts.jsx)("div",{className:"empty-title",children:t("empty.title")}),(0,ts.jsx)("div",{className:"empty-message",children:t("empty.message")})]})]}),u&&(0,ts.jsx)("div",{className:"loading-overlay",children:(0,ts.jsx)("div",{className:"loading-spinner"})})]})]})}function Oo(){const e=localStorage.getItem("token")||localStorage.getItem("authToken");if(!e)return null;try{var t;const n=JSON.parse(e);return"string"===typeof n?n:null!==(t=null===n||void 0===n?void 0:n.token)&&void 0!==t?t:null}catch{return e}}function Ro(){let{json:e=!0,bearer:t=!0,extra:n={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s={};if(e&&(s["Content-Type"]="application/json"),t){const e=Oo();e&&(s.Authorization=`Bearer ${e}`)}return{...s,...n}}function Do(e){let t=(e||"").replace(/-/g,"+").replace(/_/g,"/");const n=t.length%4;return n&&(t+="=".repeat(4-n)),t}function Vo(){const e=Oo();if(!e||"string"!==typeof e)return null;const t=e.split(".");if(t.length<2)return null;const n=t[1];try{return JSON.parse(atob(Do(n)))}catch{try{const e=atob(Do(n)),t=decodeURIComponent(Array.prototype.map.call(e,e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(t)}catch{return null}}}function Bo(e){return e?Array.isArray(e)?e:"string"===typeof e?[e]:[]:[]}const $o=e=>function(){const e=Vo();if(!e)return[];const t=["role","roles","Role","Roles","permissions","http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];let n=[];for(const s of t)n=n.concat(Bo(e[s]));return n.flatMap(e=>"string"===typeof e?e.split(","):e).map(e=>String(e).trim()).filter(Boolean)}().some(t=>t.toLowerCase()===String(e).toLowerCase()),Fo=()=>$o("admin"),Uo="http://77.242.26.150:8000",Ho=()=>{const e=localStorage.getItem("token")||localStorage.getItem("authToken");if(!e||""===e.trim())return null;try{const t=JSON.parse(e);return t.token||t}catch{return e}},Wo=()=>{const e=Ho(),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t},Zo=()=>{var t,n,s,o;const{t:i,i18n:r}=Me("navbar"),[a,l]=(0,e.useState)(null),[c,u]=(0,e.useState)([]),[d,h]=(0,e.useState)(!1),[p,f]=(0,e.useState)(!1),[m,g]=(0,e.useState)(!1),[v,y]=(0,e.useState)(!1),[_,b]=(0,e.useState)(!1),x=(0,e.useRef)(null),w=e=>{const t=async()=>{try{await r.changeLanguage(e),localStorage.setItem("i18nextLng",e),document.documentElement.lang=e}catch(Uc){console.error("changeLanguage failed:",Uc)}};if(r.isInitialized)t();else{const e=()=>{t(),r.off("initialized",e)};r.on("initialized",e)}};(0,e.useEffect)(()=>{const e=(localStorage.getItem("i18nextLng")||"").toLowerCase(),t=()=>{const t=(r.language||"en").toLowerCase();e&&e!==t&&w(e),document.documentElement.lang=(r.language||e||"en").toLowerCase()};if(!r.isInitialized)return r.on("initialized",t),()=>r.off("initialized",t);t()},[r]),(0,e.useEffect)(()=>{const e=()=>y(window.scrollY>10);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,e.useEffect)(()=>{const e=Ho();if(e)try{const t=es(e);l(t)}catch{localStorage.removeItem("token")}},[]),(0,e.useEffect)(()=>{Ho()&&(async()=>{try{const e=await fetch(`${Uo}/api/auth/me`,{headers:Wo()});if(!e.ok)return void b(!1);const t=await e.json(),n=((null===t||void 0===t?void 0:t.roles)||[]).map(e=>String(e).toLowerCase()),s=!0===(null===t||void 0===t?void 0:t.founder)||n.includes("founder")||n.includes("support")||n.includes("admin");b(s)}catch{b(!1)}})()},[a]),(0,e.useEffect)(()=>{(async()=>{if(Ho())try{const e=await fetch(`${Uo}/api/Business/my/businesses`,{headers:Wo()});if(!e.ok)return;u(await e.json())}catch(Xl){console.error("Failed to load user businesses:",Xl)}})()},[]);const j=a&&("owner"===(null===(t=a.role)||void 0===t?void 0:t.toLowerCase())||"owner"===(null===(n=a["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"])||void 0===n?void 0:n.toLowerCase())),S=a&&("admin"===(null===(s=a.role)||void 0===s?void 0:s.toLowerCase())||"admin"===(null===(o=a["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"])||void 0===o?void 0:o.toLowerCase())),k=()=>{localStorage.removeItem("token"),window.location.href="/"};(0,e.useEffect)(()=>{const e=e=>{x.current&&!x.current.contains(e.target)&&(h(!1),f(!1))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,e.useEffect)(()=>{const e=Ho();if(!e)return;let t=36e5;try{const{exp:n}=es(e);n&&(t=1e3*n-Date.now())}catch{}if(!(t<=0)){const e=setTimeout(()=>{alert(i("session_expired",{defaultValue:"Session expired. Please log in again."})),k()},t);return()=>clearTimeout(e)}k()},[a,i]);const N=_||Fo(),C=(r.language||"en").toLowerCase().startsWith("sq")?"sq":"en",E="sq"===C?"en":"sq",P="sq"===C?i("switchToEnglish",{defaultValue:"ENG"}):i("switchToAlbanian",{defaultValue:"ALB"});return(0,ts.jsx)("div",{className:"navbar_container "+(v?"scrolled":""),children:(0,ts.jsxs)("nav",{className:"navbar",role:"navigation","aria-label":i("aria_main_nav",{defaultValue:"Main navigation"}),children:[(0,ts.jsxs)("div",{className:"logo-container",children:[(0,ts.jsx)(Kn,{to:"/","aria-label":i("aria_go_home",{defaultValue:"Go to homepage"}),children:(0,ts.jsx)("img",{src:"/Assets/triwears.png",alt:i("alt_logo",{defaultValue:"Triwears Logo"})})}),(0,ts.jsx)("h3",{children:i("brand_name",{defaultValue:"Triwears"})})]}),(0,ts.jsxs)("button",{className:"hamburger "+(m?"is-active":""),onClick:()=>g(e=>!e),"aria-label":i("aria_toggle_menu",{defaultValue:"Toggle navigation menu"}),"aria-expanded":m,children:[(0,ts.jsx)("span",{}),(0,ts.jsx)("span",{}),(0,ts.jsx)("span",{})]}),(0,ts.jsxs)("ul",{className:"nav-links "+(m?"open":""),role:"menubar",children:[(0,ts.jsx)("li",{role:"none",children:(0,ts.jsxs)(Kn,{to:"/map",role:"menuitem",children:[(0,ts.jsx)("span",{children:"\ud83d\uddfa\ufe0f"})," ",i("map",{defaultValue:"Map"})]})}),a?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("li",{className:"notification-container",role:"none",children:(0,ts.jsx)(zo,{})}),(0,ts.jsxs)("li",{className:"user-menu-container",ref:x,role:"none",children:[(0,ts.jsxs)("button",{className:"user-menu-button",onClick:e=>{e.stopPropagation(),h(e=>!e),f(!1)},"aria-expanded":d,"aria-haspopup":"true","aria-label":i("aria_user_menu",{defaultValue:"User account menu"}),role:"menuitem",children:[(0,ts.jsx)(Ts,{className:"user-icon"}),(0,ts.jsx)("span",{children:a.sub}),(0,ts.jsx)(Ss,{className:"caret-icon "+(d?"rotate":"")})]}),d&&(0,ts.jsxs)("div",{className:"dropdown-menu open",role:"menu",children:[(0,ts.jsxs)("div",{className:"dropdown-submenu",children:[(0,ts.jsxs)("button",{className:"dropdown-item-dropdown-toggle",onClick:e=>{e.stopPropagation(),f(e=>!e)},"aria-expanded":p,"aria-haspopup":"true",role:"menuitem",children:[(0,ts.jsx)("span",{className:"dropdown-icon-myprofile",children:"\ud83d\udc64"}),i("my_profile",{defaultValue:"My Profile"}),(0,ts.jsx)(Ss,{className:"submenu-caret "+(p?"rotate":"")})]}),p&&(0,ts.jsxs)("div",{className:"dropdown-submenu-content open",role:"menu",children:[(0,ts.jsx)(Kn,{to:"/my-profile",className:"dropdown-item",role:"menuitem",children:i("view_profile",{defaultValue:"\u2013 View Profile"})}),j&&(0,ts.jsx)(Kn,{to:"/owner-guide",className:"dropdown-item",role:"menuitem",children:i("owners_guide",{defaultValue:"\u2013 Owners Guide"})}),N&&(0,ts.jsx)(Kn,{to:"/panel",className:"dropdown-item",role:"menuitem",children:i("control_panel",{defaultValue:"\u2013 Control Panel"})})]})]}),!j&&!S&&(0,ts.jsx)(Kn,{to:"/become-owner",className:"dropdown-item",role:"menuitem",children:i("create_your_shop",{defaultValue:"\ud83c\udfec Create Your Shop"})}),j&&(0,ts.jsx)(Kn,{to:"/become-owner",className:"dropdown-item",role:"menuitem",children:i("create_another_shop",{defaultValue:"\ud83c\udfec Create Another Shop"})}),(j||c.length>0)&&(0,ts.jsx)(Kn,{to:"/settings",className:"dropdown-item",role:"menuitem",children:i("business_settings",{defaultValue:"\u2699\ufe0f Business Settings"})}),(0,ts.jsx)("button",{onClick:k,className:"dropdown-item logout-button",role:"menuitem",children:i("logout",{defaultValue:"\ud83d\udeaa Logout"})})]})]})]}):(0,ts.jsxs)("div",{className:"auth-buttons",children:[(0,ts.jsxs)("button",{onClick:()=>window.location.href="/login",className:"login-button","aria-label":i("aria_sign_in",{defaultValue:"Sign in to your account"}),children:[(0,ts.jsx)("span",{children:"\ud83d\udc64"})," ",i("login",{defaultValue:"Login"})]}),(0,ts.jsxs)("button",{onClick:()=>window.location.href="/register",className:"register-button","aria-label":i("aria_register",{defaultValue:"Create new account"}),children:[(0,ts.jsx)("span",{children:"\u2728"})," ",i("register",{defaultValue:"Register"})]})]})," \u2022",(0,ts.jsx)("li",{role:"none",children:(0,ts.jsx)("button",{className:"lang-toggle-button",onClick:()=>w(E),"aria-label":i("toggle_language",{defaultValue:"Change language"}),role:"menuitem",title:"Choose your language",children:P})})]})]})})},qo="http://77.242.26.150:8000",Ko=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],Jo=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Yo=["Mo","Tu","We","Th","Fr","Sa","Su"],Xo=e=>{if("string"!==typeof e)return"00:00";const[t,n]=e.split(":"),s=Math.max(0,Math.min(23,parseInt(t,10)||0)),o=Math.max(0,Math.min(59,parseInt(null!==n&&void 0!==n?n:"0",10)||0));return`${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`},Go=e=>Xo(e),Qo=e=>{const t={monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};try{for(const i of Ko){var n,s,o;const r=null!==(n=null===e||void 0===e?void 0:e[i])&&void 0!==n?n:{};t[i]={open:Xo(null!==(s=r.open)&&void 0!==s?s:t[i].open),close:Xo(null!==(o=r.close)&&void 0!==o?o:t[i].close),closed:Boolean(r.closed)}}}catch{return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}}}return t},ei=e=>{if(!e)return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};if("object"===typeof e)return Qo(e);if("string"===typeof e){const t=e.trim();if(!t)return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};if(t.startsWith("{"))try{const e=JSON.parse(t);if(e&&"object"===typeof e)return Qo(e)}catch{}return(e=>{const t={monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};for(const l of Ko)t[l].closed=!0;const n=String(e||"").trim();if(!n)return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};if("closed"===n.toLowerCase())return t;const s=n.match(/^\s*Daily\s+(\d{1,2}(?::\d{2})?)\s*-\s*(\d{1,2}(?::\d{2})?)\s*$/i);if(s){const e=Xo(s[1]),n=Xo(s[2]);for(const s of Ko)t[s]={open:e,close:n,closed:!1};return t}const o=e=>{const t=Jo.findIndex(t=>t.toLowerCase()===e.toLowerCase());if(-1!==t)return t;const n=Yo.findIndex(t=>t.toLowerCase()===e.toLowerCase());return n},i=/((?:Mo|Tu|We|Th|Fr|Sa|Su|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)(?:\s*-\s*(?:Mo|Tu|We|Th|Fr|Sa|Su|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday))?)\s+(Closed|closed|(\d{1,2}(?::\d{2})?)\s*-\s*(\d{1,2}(?::\d{2})?))/g;let r,a=!1;for(;null!==(r=i.exec(n));){a=!0;const e=r[1],n="closed"===String(r[2]).toLowerCase();let s=null,i=null;n||(s=Xo(r[3]),i=Xo(r[4]));const l=(e,o)=>{for(let r=e;r<=o;r++)t[Ko[r]]=n?{...t[Ko[r]],closed:!0}:{open:s,close:i,closed:!1}};if(e.includes("-")){const[t,n]=e.split("-").map(e=>e.trim()),s=o(t),i=o(n);-1!==s&&-1!==i&&s<=i&&l(s,i)}else{const t=o(e.trim());-1!==t&&l(t,t)}}return a?t:{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}}})(t)}return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}}};const ti=e=>({"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}});function ni(t){let{profile:n,token:s}=t;const o=_n(),{t:i}=Me("profile"),[r,a]=(0,e.useState)(0),[l,c]=(0,e.useState)({shops:0,hours:0,days:0,age:0});(0,e.useEffect)(()=>{if(null===n||void 0===n||!n.userId)return;const e=`firstVisit_${n.userId}`;let t=localStorage.getItem(e);t||(t=Date.now().toString(),localStorage.setItem(e,t));const s=(Date.now()-parseInt(t,10))/36e5;a(Math.floor(s))},[null===n||void 0===n?void 0:n.userId]);let u=null;if(s)try{const e=es(s);null!==e&&void 0!==e&&e.iat&&(u=new Date(1e3*e.iat))}catch{}let d=null;if(null!==n&&void 0!==n&&n.dateOfBirth){const e=new Date(n.dateOfBirth),t=Date.now()-e.getTime();d=Math.floor(t/31536e6)}const h={shops:Array.isArray(null===n||void 0===n?void 0:n.businesses)?n.businesses.length:0,hours:r,days:u?Math.floor((Date.now()-u.getTime())/864e5):0,age:d||0};(0,e.useEffect)(()=>{const e=[];return["shops","hours","days","age"].forEach(t=>{const n=h[t]||0;if(n<=0)return void c(e=>({...e,[t]:0}));let s=0;const o=Math.max(1,Math.ceil(n/50)),i=setInterval(()=>{s+=o,s>=n&&(s=n,clearInterval(i)),c(e=>({...e,[t]:s}))},30);e.push(i)}),()=>{e.forEach(clearInterval)}},[h.shops,h.hours,h.days,h.age]);const p=[{key:"profilePictureUrl",label:i("activity.tasks.upload_picture",{defaultValue:"Upload profile picture"}),done:!(null===n||void 0===n||!n.profilePictureUrl),action:()=>o("/settings/profile")},{key:"dateOfBirth",label:i("activity.tasks.add_dob",{defaultValue:"Add date of birth"}),done:!(null===n||void 0===n||!n.dateOfBirth),action:()=>o("/settings/profile")},{key:"telephoneNumber",label:i("activity.tasks.add_phone",{defaultValue:"Add phone number"}),done:!(null===n||void 0===n||!n.telephoneNumber),action:()=>o("/settings/profile")}],f=p.filter(e=>e.done).length,m=Math.round(f/p.length*100),g=Array.isArray(null===n||void 0===n?void 0:n.businesses)&&n.businesses.length>0,v=g?100:0,y=Math.round((m+v)/2),_=p.filter(e=>!e.done);return(0,ts.jsxs)("div",{className:"enhanced-card activity-card",children:[(0,ts.jsxs)("div",{className:"card-header",children:[(0,ts.jsx)("div",{className:"card-icon",children:"\ud83d\udcca"}),(0,ts.jsxs)("div",{children:[(0,ts.jsx)("h3",{className:"card-title",children:i("activity.title",{defaultValue:"Activity Overview"})}),(0,ts.jsx)("p",{className:"card-subtitle",children:i("activity.subtitle",{defaultValue:"Your current engagement score. Complete the suggested tasks below to reach 100% and increase visibility."})})]})]}),(0,ts.jsxs)("div",{className:"card-content",children:[(0,ts.jsx)("div",{className:"stats-grid",children:["shops","hours","days","age"].filter(e=>"age"!==e||null!==d).map(e=>(0,ts.jsxs)("div",{className:"stat-item",children:[(0,ts.jsxs)("div",{className:"stat-circle",children:[(0,ts.jsx)("div",{className:"stat-value",children:l[e]}),(0,ts.jsxs)("svg",{viewBox:"0 0 36 36",className:"circular-chart","aria-hidden":"true",children:[(0,ts.jsx)("path",{className:"circle-bg",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,ts.jsx)("path",{className:`circle ${e}`,strokeDasharray:`${Math.min("shops"===e?25*l.shops:"hours"===e?l.hours/2:"days"===e?l.days/5:l.age,100)}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]})]}),(0,ts.jsx)("div",{className:"stat-label",children:"shops"===e?i("activity.stats.shops",{defaultValue:"Shops"}):"hours"===e?i("activity.stats.hours",{defaultValue:"Hours"}):"days"===e?i("activity.stats.days",{defaultValue:"Days"}):i("activity.stats.years_old",{defaultValue:"Years Old"})})]},e))}),(0,ts.jsxs)("div",{className:"completion-guidance",children:[(0,ts.jsxs)("div",{className:"completion-summary",children:[(0,ts.jsxs)("div",{className:"completion-bar-wrapper",children:[(0,ts.jsxs)("div",{className:"completion-label",children:[(0,ts.jsx)("strong",{children:i("activity.profile_completion",{defaultValue:"Profile Completion:"})})," ",m,"%"]}),(0,ts.jsx)("div",{className:"progress-bar",children:(0,ts.jsx)("div",{className:"progress-fill",style:{width:`${m}%`},"aria-label":i("activity.profile_completion",{defaultValue:"Profile Completion:"})})})]}),(0,ts.jsxs)("div",{className:"completion-bar-wrapper",children:[(0,ts.jsxs)("div",{className:"completion-label",children:[(0,ts.jsx)("strong",{children:i("activity.shop_setup",{defaultValue:"Shop Setup:"})})," ",g?i("activity.shop_setup_done",{defaultValue:"Done"}):i("activity.shop_setup_incomplete",{defaultValue:"Incomplete"})]}),(0,ts.jsx)("div",{className:"progress-bar",children:(0,ts.jsx)("div",{className:"progress-fill",style:{width:`${v}%`},"aria-label":i("activity.shop_setup",{defaultValue:"Shop Setup:"})})})]}),(0,ts.jsxs)("div",{className:"completion-bar-wrapper overall",children:[(0,ts.jsxs)("div",{className:"completion-label",children:[(0,ts.jsx)("strong",{children:i("activity.overall_score",{defaultValue:"Overall Activity Score:"})})," ",y,"%"]}),(0,ts.jsx)("div",{className:"progress-bar",children:(0,ts.jsx)("div",{className:"progress-fill",style:{width:`${y}%`},"aria-label":i("activity.overall_score",{defaultValue:"Overall Activity Score:"})})})]})]}),y<100&&(0,ts.jsxs)("div",{className:"next-steps",children:[(0,ts.jsx)("h4",{children:i("activity.next_steps_title",{defaultValue:"How to reach 100%"})}),(0,ts.jsxs)("ul",{children:[_.map(e=>(0,ts.jsx)("li",{children:(0,ts.jsxs)("button",{className:"inline-action",onClick:t=>{t.preventDefault(),e.action()},children:["\u2795 ",e.label]})},e.key)),!g&&(0,ts.jsx)("li",{children:(0,ts.jsxs)("button",{className:"inline-action",onClick:e=>{e.preventDefault(),o("/become-owner")},children:["\u2795 ",i("activity.tasks.create_first_shop",{defaultValue:"Create your first shop"})]})})]}),(0,ts.jsx)("p",{className:"guidance-text",children:i("activity.guidance_text",{defaultValue:"Completing these tasks increases your activity score and unlocks more visibility and credibility on the platform."})})]}),100===y&&(0,ts.jsxs)("div",{className:"congrats",children:["\ud83c\udf89 ",i("activity.congrats",{defaultValue:"You've reached 100% activity! Keep engaging to maintain momentum."})]})]})]})]})}function si(t){let{businesses:n=[]}=t;const s=_n(),o=function(){const[t,n]=(0,e.useState)(()=>"undefined"!==typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return(0,e.useEffect)(()=>{var e;if(!window.matchMedia)return;const t=window.matchMedia("(prefers-color-scheme: dark)"),s=e=>n(e.matches);return t.addEventListener?t.addEventListener("change",s):null===(e=t.addListener)||void 0===e||e.call(t,s),()=>{var e;t.removeEventListener?t.removeEventListener("change",s):null===(e=t.removeListener)||void 0===e||e.call(t,s)}},[]),t}(),{t:i}=Me("profile"),r=o?"/Assets/default-shop-logo-dark.png":"/Assets/default-shop-logo-light.png";return(0,ts.jsxs)("div",{className:"enhanced-card shops-card",children:[(0,ts.jsxs)("div",{className:"card-header",children:[(0,ts.jsx)("div",{className:"card-icon",children:"\ud83c\udfea"}),(0,ts.jsxs)("h3",{className:"card-title",children:[i("shops.title",{defaultValue:"My Shops"})," (",n.length,")"]}),(0,ts.jsxs)(Kn,{to:"/become-owner",className:"add-shop-btn",children:[(0,ts.jsx)("span",{children:"+"})," ",i("shops.add_shop",{defaultValue:"Add Shop"})]})]}),(0,ts.jsx)("div",{className:"card-content",children:n.length>0?(0,ts.jsx)("div",{className:"shops-list",children:n.map((e,t)=>{const n=ei(e.openingHours),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;const n=(t.getDay()+6)%7,s=e[Ko[n]];if(!s||s.closed)return!1;const[o,i]=s.open.split(":").map(Number),[r,a]=s.close.split(":").map(Number),l=new Date(t);l.setHours(o,i,0,0);const c=new Date(t);return c.setHours(r,a,0,0),t>=l&&t<=c}(n),a="boolean"===typeof e.isManuallyOpen?e.isManuallyOpen:o,l=e.slug?`/shop/${encodeURIComponent(e.slug)}`:"/",c=e.profilePictureUrl||r,u=(e=>{const t=[];let n=0;for(;n<7;){const s=e[Ko[n]],o=n;let i=n;for(;i+1<7;){const t=e[Ko[i+1]];if(!t||t.closed!==s.closed||!(t.closed||s.closed||t.open===s.open&&t.close===s.close))break;i++}t.push({start:o,end:i,data:s}),n=i+1}const s=t.map(e=>{const t=e.start===e.end?Jo[e.start]:`${Jo[e.start]} - ${Jo[e.end]}`;return e.data.closed?`${t} Closed`:`${t} ${Go(e.data.open)} - ${Go(e.data.close)}`});return Ko.every(t=>!e[t].closed)&&Ko.every(t=>e[t].open===e.monday.open&&e[t].close===e.monday.close)?`Daily ${Go(e.monday.open)} - ${Go(e.monday.close)}`:s.join(" | ")})(n);return(0,ts.jsxs)(Kn,{to:l,className:"shop-item",style:{animationDelay:.1*t+"s"},children:[(0,ts.jsxs)("div",{className:"shop-avatar",children:[(0,ts.jsx)("img",{src:c,alt:`${e.name||e.slug} logo`,className:"shop-logo"}),(0,ts.jsx)("div",{className:"status-indicator "+(a?"online":"offline")})]}),(0,ts.jsxs)("div",{className:"shop-info",children:[(0,ts.jsx)("h4",{className:"shop-name",children:e.name||e.slug}),(0,ts.jsxs)("div",{className:"shop-meta",children:[(0,ts.jsx)("span",{className:"status-badge "+(a?"open":"closed"),children:a?`\ud83d\udfe2 ${i("shops.badge_open",{defaultValue:"Open"})}`:`\ud83d\udd34 ${i("shops.badge_closed",{defaultValue:"Closed"})}`}),(0,ts.jsxs)("span",{className:"hours",children:["\ud83d\udd52 ",u]})]})]}),(0,ts.jsx)("div",{className:"shop-actions",children:(0,ts.jsx)("button",{className:"action-btn edit-btn",title:i("shops.edit_shop",{defaultValue:"Edit Shop"}),onClick:e=>{e.preventDefault(),e.stopPropagation(),s("/settings")},children:"\u270f\ufe0f"})})]},e.slug||t)})}):(0,ts.jsxs)("div",{className:"empty-state",children:[(0,ts.jsx)("div",{className:"empty-icon",children:"\ud83c\udfea"}),(0,ts.jsx)("h4",{children:i("shops.empty_title",{defaultValue:"No shops yet"})}),(0,ts.jsx)("p",{children:i("shops.empty_desc",{defaultValue:"Start your entrepreneurial journey by creating your first shop"})}),(0,ts.jsxs)(Kn,{to:"/become-owner",className:"create-shop-btn",children:["\u2728 ",i("shops.create_first",{defaultValue:"Create Your First Shop"})]})]})})]})}function oi(t){let{bookings:n=[],loading:s,error:o}=t;const i=_n(),{t:r}=Me("profile"),a=(Array.isArray(n)?n:[]).filter(e=>["confirmed","pending"].includes(String(e.status||"").toLowerCase())),[l,c]=(0,e.useState)(1),u=Math.max(1,Math.ceil(a.length/6)),d=a.slice(6*(l-1),6*l),h=e=>{const t=String(e||"").toLowerCase();return"confirmed"===t?"\u2705":"pending"===t?"\u23f3":"\ud83d\udce6"},p=e=>{const t=String(e||"").toLowerCase();return"confirmed"===t?"confirmed":"pending"===t?"pending":"default"};return(0,ts.jsxs)("div",{className:"enhanced-card bookings-card",children:[(0,ts.jsxs)("div",{className:"card-header",children:[(0,ts.jsx)("div",{className:"card-icon",children:"\ud83d\udecd\ufe0f"}),(0,ts.jsxs)("h3",{className:"card-title",children:[r("bookings.title",{defaultValue:"My Bookings"})," (",a.length,")"]})]}),(0,ts.jsxs)("div",{className:"card-content",children:[s&&(0,ts.jsxs)("div",{className:"loading-state",children:[(0,ts.jsx)("div",{className:"loading-spinner"}),(0,ts.jsx)("p",{children:r("bookings.loading",{defaultValue:"Loading your bookings..."})})]}),o&&(0,ts.jsx)("div",{className:"error-state",children:(0,ts.jsxs)("span",{children:["\u26a0\ufe0f ",o]})}),!s&&0===d.length&&!o&&(0,ts.jsxs)("div",{className:"empty-state",children:[(0,ts.jsx)("div",{className:"empty-icon",children:"\ud83d\udecd\ufe0f"}),(0,ts.jsx)("h4",{children:r("bookings.empty_title",{defaultValue:"No bookings yet"})}),(0,ts.jsx)("p",{children:r("bookings.empty_desc",{defaultValue:"Your booked products will appear here"})})]}),!s&&d.length>0&&!o&&(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("div",{className:"bookings-list",children:d.map(e=>{var t,n,s;return(0,ts.jsxs)("div",{className:"booking-item",children:[(0,ts.jsx)("div",{className:"booking-image",children:null!==(t=e.clothingItem)&&void 0!==t&&null!==(n=t.pictureUrls)&&void 0!==n&&n[0]?(0,ts.jsx)("img",{src:e.clothingItem.pictureUrls[0],alt:e.clothingItem.name,className:"product-image"}):(0,ts.jsx)("div",{className:"placeholder-image",children:"\ud83d\udce6"})}),(0,ts.jsxs)("div",{className:"booking-details",children:[(0,ts.jsxs)("h4",{className:"product-name",children:[null===(s=e.clothingItem)||void 0===s?void 0:s.name," \u2013 ",e.shopName]}),(0,ts.jsxs)("div",{className:"booking-meta",children:[(0,ts.jsxs)("span",{className:`status-badge ${p(e.status)}`,children:[h(e.status)," ",e.status]}),(0,ts.jsx)("span",{className:"booking-date",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():""})]})]}),(0,ts.jsx)("button",{className:"view-details-btn",onClick:()=>{e.clothingItemId&&i(`/product/${e.clothingItemId}`)},children:r("bookings.view",{defaultValue:"View"})})]},e.reservationId)})}),(0,ts.jsxs)("div",{className:"pagination-controls",children:[(0,ts.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===l,children:r("bookings.prev",{defaultValue:"Previous"})}),(0,ts.jsx)("span",{children:r("bookings.page_of",{current:l,total:u,defaultValue:"Page {{current}} of {{total}}"})}),(0,ts.jsx)("button",{onClick:()=>c(e=>Math.min(u,e+1)),disabled:l===u,children:r("bookings.next",{defaultValue:"Next"})})]})]})]})]})}function ii(){const{userId:t}=bn(),{t:n}=Me("profile"),s=_n(),o=(()=>{const e=localStorage.getItem("token");if(!e)return null;try{const t=JSON.parse(e);return t.token||t}catch{return e}})(),[i,r]=(0,e.useState)(null),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(!0),[d,h]=(0,e.useState)(navigator.onLine),[p,f]=(0,e.useState)([]),[m,g]=(0,e.useState)(!0),[v,y]=(0,e.useState)("");let _=null;if(o)try{const e=es(o);_=e.UserId||e.sub||e.id}catch{}const b=t||_,x=(0,e.useCallback)(async()=>{if(!o)return y("Not authenticated."),void g(!1);g(!0),y("");try{const e=await fetch(`${qo}/api/Reservation/my-bookings`,{headers:ti(o)});if(!e.ok)throw new Error(`Error ${e.status}`);const t=await e.json(),n=Array.isArray(t)?t:[],s=await Promise.all(n.map(async e=>{try{const s=await fetch(`${qo}/api/ClothingItem/${e.clothingItemId}`,{headers:ti(o)});if(s.ok){var t,n;const o=await s.json();e.shopName=(null===(t=o.shop)||void 0===t?void 0:t.name)||(null===(n=o.business)||void 0===n?void 0:n.name)||"Unknown Shop"}else e.shopName="Unknown Shop"}catch{e.shopName="Unknown Shop"}return e}));f(s)}catch(Uc){y(Uc.message)}finally{g(!1)}},[o]);return(0,e.useEffect)(()=>{const e=()=>h(!0),t=()=>h(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,e.useEffect)(()=>{const e=e=>{"reservationUpdated"===e.key&&x()};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[x]),(0,e.useEffect)(()=>{x()},[x]),(0,e.useEffect)(()=>{if(!b)return l(n("error.invalid_user",{defaultValue:"Invalid user ID."})),void u(!1);(async()=>{try{const e=await fetch(`${qo}/api/User/${b}`,{headers:ti(o)});if(401===e.status)return void s("/login");if(!e.ok)throw new Error(`Error ${e.status}`);const t=await e.json(),n=localStorage.getItem("latestProfilePicture");n&&(t.profilePictureUrl=n),r(t)}catch(Uc){l(Uc.message)}finally{u(!1)}})()},[b,s,o,n]),c?(0,ts.jsx)("div",{className:"enhanced-profile-container",children:(0,ts.jsxs)("div",{className:"loading-container",children:[(0,ts.jsx)("div",{className:"loading-spinner large"}),(0,ts.jsx)("p",{children:n("loading",{defaultValue:"Loading your amazing profile..."})})]})}):a?(0,ts.jsx)("div",{className:"enhanced-profile-container",children:(0,ts.jsxs)("div",{className:"error-container",children:[(0,ts.jsx)("div",{className:"error-icon",children:"\ud83d\ude14"}),(0,ts.jsx)("p",{className:"error-text",children:a}),(0,ts.jsxs)("button",{className:"btn-secondary",onClick:()=>s("/"),children:["\ud83c\udfe0 ",n("error.go_home",{defaultValue:"Go Home"})]})]})}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"enhanced-profile-container",children:[!d&&(0,ts.jsxs)("div",{className:"offline-banner",children:[(0,ts.jsx)("span",{children:"\ud83d\udce1"})," ",n("offline_banner",{defaultValue:"You're currently offline. Some features may be limited."})]}),(0,ts.jsxs)("div",{className:"enhanced-hero",children:[(0,ts.jsx)("div",{className:"hero-background"}),(0,ts.jsxs)("div",{className:"hero-content",children:[(0,ts.jsx)("div",{className:"avatar-section",children:(0,ts.jsxs)("div",{className:"avatar-container",children:[(0,ts.jsx)("img",{src:(null===i||void 0===i?void 0:i.profilePictureUrl)||"/Assets/default-avatar.jpg",alt:null===i||void 0===i?void 0:i.name,className:"profile-avatar"}),(0,ts.jsx)("div",{className:"online-indicator"})]})}),(0,ts.jsxs)("div",{className:"profile-info",children:[(0,ts.jsx)("h1",{className:"profile-name",children:null===i||void 0===i?void 0:i.name}),(0,ts.jsxs)("div",{className:"contact-info",children:[(0,ts.jsxs)("div",{className:"contact-item",children:[(0,ts.jsx)("span",{className:"icon",children:"\u2709\ufe0f"}),(0,ts.jsx)("span",{children:null===i||void 0===i?void 0:i.email})]}),(null===i||void 0===i?void 0:i.telephoneNumber)&&(0,ts.jsxs)("div",{className:"contact-item",children:[(0,ts.jsx)("span",{className:"icon",children:"\ud83d\udcf1"}),(0,ts.jsx)("span",{children:i.telephoneNumber})]})]}),(0,ts.jsxs)("div",{className:"profile-badges",children:[(0,ts.jsxs)("span",{className:"badge verified",children:["\u2713 ",n("badges.verified",{defaultValue:"Verified"})]}),(0,ts.jsxs)("span",{className:"badge member",children:["\ud83d\udc51 ",n("badges.member",{defaultValue:"Member"})]})]})]}),(0,ts.jsx)("div",{className:"profile-actions",children:(0,ts.jsxs)("button",{className:"btn-primary",onClick:()=>s("/settings/profile"),children:["\u270f\ufe0f ",n("actions.edit_profile",{defaultValue:"Edit Profile"})]})})]})]}),(0,ts.jsx)("div",{className:"enhanced-dashboard",children:(0,ts.jsxs)("div",{className:"dashboard-grid",children:[(0,ts.jsx)("div",{className:"grid-item activity",children:(0,ts.jsx)(ni,{profile:i,token:o})}),(0,ts.jsx)("div",{className:"grid-item shops",children:(0,ts.jsx)(si,{businesses:(null===i||void 0===i?void 0:i.businesses)||[]})}),(0,ts.jsx)("div",{className:"grid-item bookings",children:(0,ts.jsx)(oi,{bookings:p,loading:m,error:v})})]})}),(0,ts.jsx)(ds,{})]})]})}const ri=[{key:"BusinessInfo",label:"Business Info",icon:"\ud83c\udfe2"},{key:"Products",label:"Add/Edit Products",icon:"\ud83d\udce6"},{key:"Sales",label:"Sales",icon:"\ud83d\udcc5"},{key:"Categories",label:"Categories",icon:"\ud83d\udcc2"},{key:"Photos",label:"Photos",icon:"\ud83d\udcf8"},{key:"Employees",label:"Employees",icon:"\ud83d\udc65"},{key:"PendingChanges",label:"Pending Changes",icon:"\u23f3"},{key:"Reservations",label:"Reservations",icon:"\ud83d\udcc5"},{key:"Notifications",label:"Notification History",icon:"\ud83d\udd14"},{key:"MyShops",label:"My Shops",icon:"\ud83c\udfea"},{key:"DeleteBusiness",label:"Delete Business",icon:"\ud83d\uddd1\ufe0f"}],ai=new Set(["Products","Categories","MyShops","Reservations","Sales"]),li=new Set(["owner","employee"]);function ci(t){let{businesses:n,selectedBusiness:s,onSelectBusiness:o,selectedPanel:i,onSelectPanel:r,userRole:a,ownerName:l,children:c}=t;const{t:u}=Me("settings"),d="owner"===a,h=null!=a&&!li.has(a),p=(0,e.useMemo)(()=>ri.filter(e=>d||ai.has(e.key)),[d]);(0,e.useEffect)(()=>{p.length&&(p.some(e=>e.key===i)||r(p[0].key))},[p,i,r]);const f=(0,e.useCallback)(e=>{const t=Number.parseInt(e.target.value,10);if((null===s||void 0===s?void 0:s.businessId)===t)return;const i=n.find(e=>e.businessId===t)||null;o(i)},[n,o,null===s||void 0===s?void 0:s.businessId]);return h?(0,ts.jsx)(zn,{to:"/unauthorized",replace:!0}):(0,ts.jsx)("div",{className:"settings-component",children:(0,ts.jsxs)("div",{className:"settings-layout",children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"settings-wrapper",children:[(0,ts.jsxs)("aside",{className:"settings-sidebar",children:[(0,ts.jsxs)("select",{value:(null===s||void 0===s?void 0:s.businessId)||"",onChange:f,"aria-label":u("aria.business_select",{defaultValue:"Select a business to manage"}),children:[(0,ts.jsx)("option",{value:"",disabled:!0,children:u("choose_business",{defaultValue:"-- Choose Business --"})}),n.map(e=>(0,ts.jsx)("option",{value:e.businessId,children:e.name},e.businessId))]}),(0,ts.jsx)("ul",{children:p.map(e=>(0,ts.jsxs)("li",{className:i===e.key?"active":"",onClick:()=>r(e.key),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),r(e.key))},role:"button",tabIndex:0,children:[(0,ts.jsx)("span",{className:"panel-icon",children:e.icon}),(0,ts.jsx)("span",{className:"panel-label",children:u(`panels.${e.key}`,{defaultValue:e.label})})]},e.key))})]}),(0,ts.jsx)("section",{className:"settings-content",children:s?(0,ts.jsxs)("div",{className:"panel",children:[d&&((null===s||void 0===s?void 0:s.ownerName)||l)&&(0,ts.jsx)("div",{className:"welcome-message",style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"1rem",color:"#333"},children:u("welcome",{name:(null===s||void 0===s?void 0:s.ownerName)||l,defaultValue:"Welcome, {{name}}!"})}),c]}):(0,ts.jsx)("div",{className:"panel",children:(0,ts.jsxs)("div",{className:"no-business-selected",children:[(0,ts.jsxs)("h3",{children:[(0,ts.jsx)("span",{children:"\ud83c\udfe2"}),u("no_business.title",{defaultValue:"No Business Selected"})]}),(0,ts.jsx)("p",{children:u("no_business.body",{defaultValue:"Please select a business from the dropdown above to manage its settings."})})]})})})]})]})})}var ui=n(228),di=n.n(ui);const hi=(0,e.createContext)(null);function pi(t){let{value:n,onValueChange:s,disabled:o=!1,children:i}=t;const[r,a]=(0,e.useState)(!1),l=(0,e.useMemo)(()=>({value:n,setValue:e=>{o||(null===s||void 0===s||s(e),a(!1))},open:r,setOpen:a,disabled:o}),[n,s,r,o]);return(0,ts.jsx)(hi.Provider,{value:l,children:i})}const fi=function(t){let{placeholder:n}=t;const{value:s}=(0,e.useContext)(hi);return(0,ts.jsx)("span",{children:s||n||""})},mi=e.forwardRef(function(t,n){let{className:s="",children:o,...i}=t;const{open:r,setOpen:a,disabled:l}=(0,e.useContext)(hi);return(0,ts.jsxs)("button",{type:"button",ref:n,className:"inline-flex h-9 w-full items-center justify-between rounded-lg border border-gray-300 bg-white px-3 text-sm text-gray-900 shadow-sm outline-none disabled:opacity-50 "+(s||""),"aria-haspopup":"listbox","aria-expanded":r,disabled:l,onClick:()=>!l&&a(e=>!e),...i,children:[o,(0,ts.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":!0,children:(0,ts.jsx)("path",{d:"M7 10l5 5 5-5H7z"})})]})}),gi=function(t){let{className:n="",children:s}=t;const{open:o}=(0,e.useContext)(hi);return o?(0,ts.jsx)("div",{className:"z-50 mt-1 w-full overflow-hidden rounded-lg border border-gray-200 bg-white shadow-lg "+(n||""),role:"listbox",children:(0,ts.jsx)("div",{className:"max-h-64 overflow-auto",children:s})}):null},vi=e.forwardRef(function(t,n){let{className:s="",value:o,children:i,...r}=t;const{setValue:a}=(0,e.useContext)(hi);return(0,ts.jsx)("div",{ref:n,role:"option",tabIndex:0,onClick:()=>a(o),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),a(o))},className:"relative flex w-full cursor-pointer select-none items-center py-2 px-3 text-sm text-gray-900 outline-none hover:bg-gray-50 "+(s||""),...r,children:i})}),yi=e.forwardRef(function(e,t){let{className:n="",checked:s=!1,onCheckedChange:o,disabled:i=!1,...r}=e;return(0,ts.jsx)("button",{ref:t,type:"button",role:"switch","aria-checked":s,disabled:i,onClick:()=>!i&&(null===o||void 0===o?void 0:o(!s)),className:"inline-flex h-5 w-9 items-center rounded-full transition-colors outline-none "+(s?"bg-black":"bg-gray-300")+" disabled:opacity-50 "+(n||""),...r,children:(0,ts.jsx)("span",{className:"block h-4 w-4 rounded-full bg-white shadow transition-transform "+(s?"translate-x-[18px]":"translate-x-0.5")})})}),_i={default:"bg-black text-white hover:bg-black/85 focus:ring-black/40",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-400",outline:"border border-gray-300 text-gray-900 hover:bg-gray-50 focus:ring-gray-400"},bi=(0,e.forwardRef)(function(e,t){let{className:n="",variant:s="default",...o}=e;return(0,ts.jsx)("button",{ref:t,className:`inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none h-9 px-4 ${_i[s]||_i.default} ${n}`,...o})}),xi=Array.from({length:96},(e,t)=>`${String(Math.floor(t/4)).padStart(2,"0")}:${String(t%4*15).padStart(2,"0")}`),wi=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}];const ji=function(e){let{value:t,onChange:n}=e;const s=(e,s)=>n({...t,[e]:{...t[e],...s}});return(0,ts.jsxs)("div",{className:"hours-picker",children:[(0,ts.jsxs)("div",{className:"hours-toolbar",children:[(0,ts.jsx)(bi,{type:"button",variant:"secondary",onClick:()=>{const e=t.monday,s={};for(const t of wi)s[t.key]={...e};n(s)},children:"Use Monday for all"}),(0,ts.jsx)(bi,{type:"button",variant:"outline",onClick:()=>{const e={};for(const n of wi)e[n.key]={...t[n.key],closed:!0};n(e)},children:"Mark all closed"})]}),(0,ts.jsxs)("div",{className:"hours-grid",children:[(0,ts.jsxs)("div",{className:"hours-grid-head",children:[(0,ts.jsx)("div",{children:"Day"}),(0,ts.jsx)("div",{children:"Open"}),(0,ts.jsx)("div",{children:"Close"}),(0,ts.jsx)("div",{children:"Closed"})]}),wi.map(e=>{let{key:n,label:o}=e;const i=t[n],r=!!i.closed;return(0,ts.jsxs)("div",{className:"hours-row",children:[(0,ts.jsx)("div",{className:"hours-day",children:o}),(0,ts.jsx)("div",{className:"hours-cell "+(r?"disabled":""),children:(0,ts.jsxs)(pi,{value:i.open,onValueChange:e=>s(n,{open:e}),disabled:r,children:[(0,ts.jsx)(mi,{className:"time-trigger",children:(0,ts.jsx)(fi,{placeholder:"Open"})}),(0,ts.jsx)(gi,{className:"time-content",children:xi.map(e=>(0,ts.jsx)(vi,{value:e,children:e},e))})]})}),(0,ts.jsx)("div",{className:"hours-cell "+(r?"disabled":""),children:(0,ts.jsxs)(pi,{value:i.close,onValueChange:e=>s(n,{close:e}),disabled:r,children:[(0,ts.jsx)(mi,{className:"time-trigger",children:(0,ts.jsx)(fi,{placeholder:"Close"})}),(0,ts.jsx)(gi,{className:"time-content",children:xi.map(e=>(0,ts.jsx)(vi,{value:e,children:e},e))})]})}),(0,ts.jsx)("div",{className:"hours-cell",children:(0,ts.jsx)(yi,{checked:i.closed,onCheckedChange:e=>s(n,{closed:e}),"aria-label":`Closed on ${o}`})})]},n)})]})]})};function Si(){const[t,n]=(0,e.useState)(null),[s,o]=(0,e.useState)(null),[i,r]=(0,e.useState)(null);(0,e.useEffect)(()=>{const e=localStorage.getItem("token")||localStorage.getItem("authToken");if(!e)return;let t;try{const n=JSON.parse(e);t=n.token||n}catch{t=e}if(t){n(t);try{const e=es(t),n="http://schemas.microsoft.com/ws/2008/06/identity/claims/role",s="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier",i=e.sub;o((e[n]||"").toLowerCase()||null),r(e[s]||i||null)}catch(Xl){console.error("Failed to decode JWT:",Xl),o(null),r(null)}}},[]);return{token:t,role:s,userId:i,clearAuth:(0,e.useCallback)(()=>{localStorage.removeItem("token"),localStorage.removeItem("authToken"),n(null),o(null),r(null)},[])}}const ki={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RhqsCQ4bX1950eWrsYcnD2yN71HdaO6Ju9kr4xtI9JiRWKqZlBXfu1qtFlvUToLzfTPufbRjRwMLQPGUJIG1W8u00GhLSZ2KZ",REACT_APP_CLIENT_BASE_URL:"http://77.242.26.150"}.REACT_APP_API_BASE_URL||"http://77.242.26.150:8000";function Ni(){const{token:t}=Si(),n=(0,e.useMemo)(()=>{const e={"Content-Type":"application/json"};return t&&(e.Authorization=`Bearer ${t}`),e},[t]),s=async function(e){let{method:t="GET",body:s,headers:o={},...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=`${ki}${e}`,a={method:t,headers:{...n,...o},...i};void 0!==s&&(a.body=JSON.stringify(s));const l=await fetch(r,a);let c;if(c=(l.headers.get("Content-Type")||"").includes("application/json")?await l.json():await l.text(),!l.ok){const e=new Error(l.statusText||"API request failed");throw e.status=l.status,e.data=c,e}return c};return{API_BASE:ki,get:(e,t)=>s(e,{method:"GET",...t}),post:(e,t,n)=>s(e,{method:"POST",body:t,...n}),put:(e,t,n)=>s(e,{method:"PUT",body:t,...n}),del:(e,t)=>s(e,{method:"DELETE",...t}),patch:(e,t,n)=>s(e,{method:"PATCH",body:t,...n})}}delete di().Icon.Default.prototype._getIconUrl,di().Icon.Default.mergeOptions({iconRetinaUrl:n(249),iconUrl:n(24),shadowUrl:n(71)});const Ci=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],Ei=["Mo","Tu","We","Th","Fr","Sa","Su"],Pi=e=>{if("string"!==typeof e)return"00:00";const[t,n]=e.split(":"),s=Math.max(0,Math.min(23,parseInt(t,10)||0)),o=Math.max(0,Math.min(59,parseInt(null!==n&&void 0!==n?n:"0",10)||0));return`${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`},Ti=e=>{const[t,n]=e.split(":"),s=String(Number(t));return"00"===n?s:`${s}:${n}`},Li=(e,t)=>e&&t&&e.open===t.open&&e.close===t.close&&!e.closed&&!t.closed,Mi=e=>{const t={monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};try{for(const i of Ci){var n,s,o;const r=null!==(n=null===e||void 0===e?void 0:e[i])&&void 0!==n?n:{};t[i]={open:Pi(null!==(s=r.open)&&void 0!==s?s:t[i].open),close:Pi(null!==(o=r.close)&&void 0!==o?o:t[i].close),closed:Boolean(r.closed)}}}catch{return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}}}return t},Ii=e=>{if(!e)return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};if("object"===typeof e)return Mi(e);if("string"===typeof e){const t=e.trim();if("closed"===t.toLowerCase()){const e={monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};for(const t of Ci)e[t].closed=!0;return e}try{const e=JSON.parse(t);if(e&&"object"===typeof e)return Mi(e)}catch{}return(e=>{const t={monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};for(const r of Ci)t[r].closed=!0;const n=/([A-Z][a-z]?(?:\-[A-Z][a-z]?)?)\s+(\d{1,2}(?::\d{2})?)\-(\d{1,2}(?::\d{2})?)/g,s=e=>Ei.indexOf(e);let o,i=!1;for(;null!==(o=n.exec(e));){i=!0;const e=o[1],n=Pi(o[2]),r=Pi(o[3]);if(e.includes("-")){const[o,i]=e.split("-"),a=s(o),l=s(i);if(-1!==a&&-1!==l&&a<=l)for(let e=a;e<=l;e++)t[Ci[e]]={open:n,close:r,closed:!1}}else{const o=s(e);-1!==o&&(t[Ci[o]]={open:n,close:r,closed:!1})}}return i?t:{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}}})(t)}return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}}};function Ai(t){let{business:n}=t;const{t:s}=Me("businessinfo"),{get:o,put:i}=Ni(),r=(0,e.useRef)(o),a=(0,e.useRef)(i);(0,e.useEffect)(()=>{r.current=o},[o]),(0,e.useEffect)(()=>{a.current=i},[i]);const[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)(null),[h,p]=(0,e.useState)({name:"",description:"",nipt:"",businessEmailAddress:"",location:"",openingHours:"",businessPhoneNumber:""}),[f,m]=(0,e.useState)({monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}}),[g,v]=(0,e.useState)(null),[y,_]=(0,e.useState)([]),b=(0,e.useRef)(null),x=(0,e.useRef)(null),w=(0,e.useRef)(null);(0,e.useEffect)(()=>{if(null===n||void 0===n||!n.businessId)return;let e=!1;return c(!0),r.current(`/api/Business/${n.businessId}`).then(t=>{var n;if(e)return;if(d(t),null!==(n=t.location)&&void 0!==n&&n.includes(",")){const[n,s]=t.location.split(","),o=parseFloat(n),i=parseFloat(s);isNaN(o)||isNaN(i)?p(e=>({...e,location:t.location||""})):(v([o,i]),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${o}&lon=${i}`).then(e=>e.json()).then(t=>!e&&t.display_name&&p(e=>({...e,location:t.display_name}))).catch(()=>!e&&p(e=>({...e,location:t.location}))))}else p(e=>({...e,location:t.location||""}));const s=Ii(t.openingHours);m(s),p(e=>({...e,name:t.name||"",description:t.description||"",nipt:t.nipt||"",businessEmailAddress:t.businessEmailAddress||"",openingHours:JSON.stringify(s),businessPhoneNumber:t.businessPhoneNumber||""}))}).catch(()=>{e||d(null)}).finally(()=>!e&&c(!1)),()=>{e=!0}},[null===n||void 0===n?void 0:n.businessId]),(0,e.useEffect)(()=>{p(e=>({...e,openingHours:JSON.stringify(f)}))},[f]),(0,e.useEffect)(()=>{if(l||!u)return;if(!b.current||x.current)return;const e=di().map(b.current,{center:g||[0,0],zoom:g?13:2,layers:[di().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"})]});return e.on("click",e=>{const{lat:t,lng:n}=e.latlng;v([t,n]),p(e=>({...e,location:`${t},${n}`})),_([])}),e.whenReady(()=>e.invalidateSize()),x.current=e,()=>{var t;e.remove(),x.current=null,null===(t=w.current)||void 0===t||t.remove(),w.current=null}},[l,u,g]),(0,e.useEffect)(()=>{var e;const t=x.current;if(!t)return;if(null===(e=w.current)||void 0===e||e.remove(),w.current=null,!g)return;const n=di().marker(g,{draggable:!0}).addTo(t);n.on("dragend",e=>{const{lat:t,lng:n}=e.target.getLatLng();v([t,n]),p(e=>({...e,location:`${t},${n}`}))}),w.current=n,t.setView(g,t.getZoom())},[g]);const j=(0,e.useCallback)(async e=>{const t=e.target.value;if(p(e=>({...e,location:t})),v(null),t.length<3)_([]);else try{const e=await fetch(`https://nominatim.openstreetmap.org/search?format=json&limit=5&q=${encodeURIComponent(t)}`),n=await e.json();_(n)}catch{_([])}},[]),S=(0,e.useCallback)(e=>{const t=parseFloat(e.lat),n=parseFloat(e.lon);isNaN(t)||isNaN(n)||(p(t=>({...t,location:e.display_name})),v([t,n]),_([]))},[]),k=(0,e.useCallback)(async()=>{var e,t,n,o,i,r,l,c;if(!g)return void alert(s("alerts.pick_location",{defaultValue:"Please pick a location (map or suggestion)."}));const d=Object.values(f);if(!d.every(e=>e.closed||e.open&&e.close&&e.open<e.close)||!d.some(e=>!e.closed))return void alert(s("alerts.invalid_hours",{defaultValue:"Invalid opening hours. Ensure at least one open day and Open < Close."}));const p={name:null!==(e=null===(t=h.name)||void 0===t?void 0:t.trim())&&void 0!==e?e:u.name,description:null!==(n=h.description)&&void 0!==n?n:u.description,nipt:null!==(o=h.nipt)&&void 0!==o?o:u.nipt,businessEmailAddress:null!==(i=h.businessEmailAddress)&&void 0!==i?i:u.businessEmailAddress,businessPhoneNumber:null!==(r=h.businessPhoneNumber)&&void 0!==r?r:u.businessPhoneNumber,location:`${Number(g[0]).toFixed(6)},${Number(g[1]).toFixed(6)}`,openingHours:JSON.stringify(f),coverPictureUrl:null!==(l=u.coverPictureUrl)&&void 0!==l?l:"",profilePictureUrl:null!==(c=u.profilePictureUrl)&&void 0!==c?c:""};try{await a.current(`/api/Business/${u.businessId}`,p),alert(s("alerts.updated",{defaultValue:"Business info updated!"}))}catch(Xl){try{var m,v;const t=await(null===Xl||void 0===Xl||null===(m=Xl.response)||void 0===m||null===(v=m.text)||void 0===v?void 0:v.call(m));console.error("Save failed (body):",t||Xl),alert(t||s("alerts.save_failed",{defaultValue:"Failed to save business info."}))}catch{console.error("Save failed:",Xl),alert(s("alerts.save_failed",{defaultValue:"Failed to save business info."}))}}},[g,null===u||void 0===u?void 0:u.businessId,u,h,f,s]);if(l)return(0,ts.jsx)("div",{className:"business-info-panel",children:(0,ts.jsx)("p",{children:s("state.loading",{defaultValue:"Loading\u2026"})})});if(!u)return(0,ts.jsx)("div",{className:"business-info-panel",children:(0,ts.jsx)("p",{children:s("state.error_loading",{defaultValue:"Error loading info."})})});const N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;const n=Ci.map(t=>e[t]),s=n.map(e=>!e.closed);if(s.every(e=>!e))return"Closed";const o=s.findIndex(Boolean),i=n[o];if(s.every(e=>e===s[o])&&!i.closed&&n.every(e=>Li(e,i))){const e=`Daily ${Ti(i.open)}-${Ti(i.close)}`;return e.length<=t?e:"Varies by day"}const r=[];let a=0;for(;a<7;){if(!s[a]){a++;continue}const e=a,t=n[a];for(;a+1<7&&s[a+1]&&Li(n[a+1],t);)a++;const o=a;r.push({start:e,end:o,open:Ti(t.open),close:Ti(t.close)}),a++}const l=r.map(e=>`${e.start===e.end?Ei[e.start]:`${Ei[e.start]}-${Ei[e.end]}`} ${e.open}-${e.close}`);let c="";for(const u of l){const e=c?`${c} ${u}`:u;if(!(e.length<=t))break;c=e}return c||(c=l[0]||"Varies by day"),c.length>t&&(c="Varies by day"),c}(f,24);return(0,ts.jsxs)("div",{className:"business-info-panel",children:[(0,ts.jsx)("h3",{children:s("titles.edit",{defaultValue:"Edit Business Info"})}),(0,ts.jsx)("label",{htmlFor:"biz-name",children:(0,ts.jsx)("b",{children:s("fields.name",{defaultValue:"Business Name"})})}),(0,ts.jsx)("input",{id:"biz-name",type:"text",value:h.name,onChange:e=>p(t=>({...t,name:e.target.value}))}),(0,ts.jsx)("br",{}),(0,ts.jsx)("br",{}),(0,ts.jsx)("label",{htmlFor:"biz-desc",children:(0,ts.jsx)("b",{children:s("fields.description",{defaultValue:"Description"})})}),(0,ts.jsx)("textarea",{id:"biz-desc",value:h.description,onChange:e=>p(t=>({...t,description:e.target.value}))}),(0,ts.jsx)("br",{}),(0,ts.jsx)("br",{}),(0,ts.jsx)("label",{htmlFor:"biz-nipt",children:(0,ts.jsx)("b",{children:s("fields.nipt",{defaultValue:"NIPT"})})}),(0,ts.jsx)("input",{id:"biz-nipt",type:"text",value:h.nipt,onChange:e=>p(t=>({...t,nipt:e.target.value}))}),(0,ts.jsx)("br",{}),(0,ts.jsx)("br",{}),(0,ts.jsx)("label",{htmlFor:"biz-email",children:(0,ts.jsx)("b",{children:s("fields.email",{defaultValue:"Business Email"})})}),(0,ts.jsx)("input",{id:"biz-email",type:"email",value:h.businessEmailAddress,onChange:e=>p(t=>({...t,businessEmailAddress:e.target.value}))}),(0,ts.jsx)("br",{}),(0,ts.jsx)("br",{}),(0,ts.jsx)("label",{htmlFor:"biz-location",children:(0,ts.jsx)("b",{children:s("fields.location",{defaultValue:"Location"})})}),(0,ts.jsxs)("div",{style:{position:"relative"},children:[(0,ts.jsx)("input",{id:"biz-location",type:"text",value:h.location,placeholder:s("placeholders.location",{defaultValue:"Start typing\u2026"}),onChange:j,style:{width:"100%"},"aria-autocomplete":"list","aria-controls":"location-suggestions"}),y.length>0&&(0,ts.jsx)("ul",{id:"location-suggestions",className:"suggestions-list",role:"listbox",children:y.map(e=>(0,ts.jsx)("li",{onClick:()=>S(e),role:"option",tabIndex:0,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),S(e))},children:e.display_name},e.place_id))})]}),(0,ts.jsx)("div",{ref:b,style:{height:200,width:"100%",marginTop:16},"aria-label":s("aria.map",{defaultValue:"Business location map"})}),(0,ts.jsx)("br",{}),(0,ts.jsx)("br",{}),(0,ts.jsx)("label",{children:(0,ts.jsx)("b",{children:s("fields.opening_hours",{defaultValue:"Opening Hours"})})}),(0,ts.jsx)(ji,{value:f,onChange:m}),(0,ts.jsxs)("div",{className:"oh-compact-preview",style:{marginTop:8,color:"#555"},children:[s("opening_preview",{defaultValue:"Preview:"})," ",N]}),(0,ts.jsx)("br",{}),(0,ts.jsx)("br",{}),(0,ts.jsx)("label",{htmlFor:"biz-phone",children:(0,ts.jsx)("b",{children:s("fields.phone",{defaultValue:"Business Phone Number"})})}),(0,ts.jsx)("input",{id:"biz-phone",type:"tel",value:h.businessPhoneNumber,onChange:e=>p(t=>({...t,businessPhoneNumber:e.target.value}))}),(0,ts.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",marginTop:20},children:(0,ts.jsx)("button",{type:"button",onClick:k,style:{padding:10},children:s("actions.save",{defaultValue:"Save Changes"})})})]})}const zi=e=>{let{page:t,pageSize:n,totalCount:s,onPageChange:o,maxButtons:i=5}=e;const r=Math.ceil(s/n);if(r<2)return null;const a=Math.floor(i/2);let l=Math.max(1,t-a),c=Math.min(r,t+a);t<=a?(l=1,c=Math.min(r,i)):t+a>r&&(c=r,l=Math.max(1,r-i+1));const u=[];for(let d=l;d<=c;d++)u.push(d);return(0,ts.jsxs)("nav",{"aria-label":"Pagination",className:"flex space-x-2 my-4",children:[(0,ts.jsx)("button",{onClick:()=>o(t-1),disabled:1===t,"aria-label":"Previous page",className:"px-3 py-1 border rounded",children:"Prev"}),l>1&&(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("button",{onClick:()=>o(1),className:"px-3 py-1 border rounded",children:"1"}),l>2&&(0,ts.jsx)("span",{className:"px-2",children:"\u2026"})]}),u.map(e=>(0,ts.jsx)("button",{onClick:()=>o(e),"aria-current":e===t?"page":void 0,className:"px-3 py-1 border rounded "+(e===t?"bg-gray-200":""),children:e},e)),c<r&&(0,ts.jsxs)(ts.Fragment,{children:[c<r-1&&(0,ts.jsx)("span",{className:"px-2",children:"\u2026"}),(0,ts.jsx)("button",{onClick:()=>o(r),className:"px-3 py-1 border rounded",children:r})]}),(0,ts.jsx)("button",{onClick:()=>o(t+1),disabled:t===r,"aria-label":"Next page",className:"px-3 py-1 border rounded",children:"Next"})]})};function Oi(t){let{business:n}=t;const{t:s}=Me("productpanel"),{get:o,post:i,put:r,del:a}=Ni(),{role:l,userInfo:c}=Si(),u=(0,e.useRef)(null),d=(0,e.useRef)(o);(0,e.useEffect)(()=>{d.current=o},[o]);const[h,p]=(0,e.useState)([]),[f,m]=(0,e.useState)([]),[g,v]=(0,e.useState)(null),[y,_]=(0,e.useState)(""),[b,x]=(0,e.useState)(1),[w,j]=(0,e.useState)(!1),[S,k]=(0,e.useState)(!1),[N,C]=(0,e.useState)(null),[E,P]=(0,e.useState)(null),[T,L]=(0,e.useState)({name:"",description:"",price:"",quantity:"",categoryId:"",brand:"",model:"",photos:[],colors:"",size:"",material:""}),[M,I]=(0,e.useState)(0),[A,z]=(0,e.useState)(!1),O=null===n||void 0===n?void 0:n.businessId,R=(0,e.useCallback)(()=>{const e=[];return T.name.trim()||e.push(s("products.errors.name_required",{defaultValue:"Product name is required"})),(!T.price||Number.parseFloat(T.price)<=0)&&e.push(s("products.errors.price_required",{defaultValue:"Valid price is required"})),(!T.quantity||Number.parseInt(T.quantity,10)<0)&&e.push(s("products.errors.quantity_required",{defaultValue:"Valid quantity is required"})),e},[T.name,T.price,T.quantity,s]);(0,e.useEffect)(()=>{if(!O)return;let e=!1;return(async()=>{j(!0),C(null);try{const[t,n]=await Promise.all([d.current(`/api/ClothingItem/business/${O}`),d.current(`/api/ClothingCategory/business/${O}`)]);e||(p(t||[]),m(n||[]))}catch(Xl){console.error("Load error:",Xl),e||(C(s("products.errors.load_failed",{defaultValue:"Failed to load data. Please try again."})),p([]),m([]))}finally{e||j(!1)}})(),()=>{e=!0}},[O,s]),(0,e.useEffect)(()=>{x(1)},[y,h.length]);const D=(0,e.useCallback)(async e=>{if(!e)return null;if(e.size>5242880)throw new Error(s("products.errors.file_too_large",{defaultValue:"File size must be less than 5MB"}));if(!["image/jpeg","image/png","image/webp","image/gif"].includes(e.type))throw new Error(s("products.errors.bad_filetype",{defaultValue:"Only JPEG, PNG, WebP, and GIF images are allowed"}));const t=`https://storage.googleapis.com/edcms_bucket/${`${Date.now()}-${e.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`}`,n=`${t}.txt`;return await fetch(t,{method:"PUT",headers:{"Content-Type":e.type},body:e}),await fetch(n,{method:"PUT",headers:{"Content-Type":"text/plain"},body:t}),t},[s]),V=(0,e.useCallback)(async e=>{if(e&&0!==e.length){k(!0),C(null);try{const t=Array.from(e).slice(0,10-T.photos.length),n=(await Promise.all(t.map(D))).filter(Boolean);n.length>0&&(L(e=>({...e,photos:[...e.photos,...n]})),I(e=>0===T.photos.length?0:e))}catch(Xl){console.error("Upload error:",Xl),C((null===Xl||void 0===Xl?void 0:Xl.message)||s("products.errors.upload_failed",{defaultValue:"Failed to upload images"}))}finally{k(!1),u.current&&(u.current.value="")}}},[T.photos.length,D,s]),B=(0,e.useCallback)(e=>{e.preventDefault(),z(!0)},[]),$=(0,e.useCallback)(e=>{e.preventDefault(),z(!1)},[]),F=(0,e.useCallback)(e=>{e.preventDefault(),z(!1);const t=Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("image/"));t.length>0&&V(t)},[V]),U=(0,e.useCallback)(()=>{v(null),L({name:"",description:"",price:"",quantity:"",categoryId:"",brand:"",model:"",photos:[],colors:"",size:"",material:""}),I(0),C(null)},[]),H=(0,e.useCallback)(async()=>{if(!O)return;const e=R();if(e.length>0)C(e.join(", "));else{j(!0),C(null);try{const e=T.photos.length>0?[T.photos[M],...T.photos.filter((e,t)=>t!==M)]:[],t={name:T.name.trim(),businessIds:[O],description:T.description.trim(),price:Number.parseFloat(T.price)||0,quantity:Number.parseInt(T.quantity,10)||0,clothingCategoryId:T.categoryId?+T.categoryId:null,brand:T.brand.trim(),model:T.model.trim(),pictureUrls:e,colors:T.colors.split(",").map(e=>e.trim()).filter(Boolean),sizes:(T.size||"").trim(),material:T.material.trim()};if("employee"===l)await i("/api/ProposedChanges/submit",{businessId:O,type:g?"Update":"Create",itemDto:{...t,clothingItemId:g||0}}),alert(s("products.alerts.change_proposed",{defaultValue:"Your change has been proposed and is pending approval."}));else{g?await r(`/api/ClothingItem/${g}`,t):await i("/api/ClothingItem",t);const e=await d.current(`/api/ClothingItem/business/${O}`);p(e||[]),alert(s("products.alerts.saved",{defaultValue:"Product saved successfully!"}))}U()}catch(Xl){console.error("Save error detail:",Xl),C(null!==Xl&&void 0!==Xl&&Xl.message?s("products.errors.save_failed_with_reason",{defaultValue:"Failed to save product: {{reason}}",reason:Xl.message}):s("products.errors.save_failed",{defaultValue:"Failed to save product. Please check console/network for details."}))}finally{j(!1)}}},[O,R,T,M,g,l,i,r,U,s]),W=(0,e.useCallback)(async e=>{if(!O)return;const t="employee"===l?s("products.confirms.delete_request",{defaultValue:"Submit delete request for approval?"}):s("products.confirms.delete_permanent",{defaultValue:"Permanently delete this product?"});if(window.confirm(t)){j(!0),C(null);try{if("employee"===l)await i("/api/ProposedChanges/submit",{businessId:O,type:"Delete",itemDto:{clothingItemId:e,businessIds:[O]}}),alert(s("products.alerts.delete_proposed",{defaultValue:"Delete request submitted for approval."}));else{await a(`/api/ClothingItem/${e}`);const t=await d.current(`/api/ClothingItem/business/${O}`);p(t||[]),alert(s("products.alerts.deleted",{defaultValue:"Product deleted successfully."}))}}catch(Xl){console.error("Delete error detail:",Xl),C(null!==Xl&&void 0!==Xl&&Xl.message?s("products.errors.delete_failed_with_reason",{defaultValue:"Failed to delete product: {{reason}}",reason:Xl.message}):s("products.errors.delete_failed",{defaultValue:"Failed to delete product. Please check console/network for details."}))}finally{j(!1)}}},[O,l,i,a,s]),Z=(0,e.useCallback)(e=>{var t,n,s,o;v(e.clothingItemId),L({name:e.name||"",description:e.description||"",price:(null===(t=e.price)||void 0===t?void 0:t.toString())||"",quantity:(null===(n=e.quantity)||void 0===n?void 0:n.toString())||"",categoryId:(null===(s=e.clothingCategoryId)||void 0===s?void 0:s.toString())||"",brand:e.brand||"",model:e.model||"",photos:e.pictureUrls||[],colors:Array.isArray(e.colors)?e.colors.join(", "):e.colors||"",size:Array.isArray(e.sizes)?e.sizes.join(", "):(null===(o=e.sizes)||void 0===o?void 0:o.toString())||"",material:e.material||""}),I(0),C(null)},[]),q=(0,e.useCallback)(e=>{L(t=>({...t,photos:t.photos.filter((t,n)=>n!==e)})),I(t=>e===t?0:e<t?t-1:t)},[]),K=(0,e.useCallback)(async e=>{if(!O)return void C(s("products.errors.select_business_first",{defaultValue:"Select a business first."}));const t=function(e){var t,n;return`${null!==(t=null===e||void 0===e?void 0:e.firstName)&&void 0!==t?t:""} ${null!==(n=null===e||void 0===e?void 0:e.lastName)&&void 0!==n?n:""}`.trim()||(null!==e&&void 0!==e&&e.name?e.name:null!==e&&void 0!==e&&e.email?e.email.split("@")[0]:void 0)}(c)||void 0;try{P(e.clothingItemId),await i(`/api/Sales/ClothingItem/${e.clothingItemId}/sale`,{quantity:1,businessId:Number(O),soldByName:t}),p(t=>t.map(t=>{var n;return t.clothingItemId===e.clothingItemId?{...t,quantity:Math.max((null!==(n=t.quantity)&&void 0!==n?n:0)-1,0)}:t})),window.dispatchEvent(new CustomEvent("sale-recorded",{detail:{businessId:O}}))}catch(Xl){console.error("Sale error:",Xl),C((null===Xl||void 0===Xl?void 0:Xl.message)||s("products.errors.sale_failed",{defaultValue:"Failed to record sale."}))}finally{P(null)}},[O,i,c,s]),J=(0,e.useMemo)(()=>h.filter(e=>[e.name,e.brand,e.model,e.description].join(" ").toLowerCase().includes(y.toLowerCase())),[h,y]),Y=J.length,X=(0,e.useMemo)(()=>J.slice(10*(b-1),10*b),[J,b,10]);return n?(0,ts.jsxs)(ts.Fragment,{children:[N&&(0,ts.jsx)("div",{className:"panel error",children:(0,ts.jsxs)("div",{className:"error-message",children:[(0,ts.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,ts.jsxs)("div",{children:[(0,ts.jsx)("h4",{children:s("common.error",{defaultValue:"Error"})}),(0,ts.jsx)("p",{children:N})]}),(0,ts.jsx)("button",{onClick:()=>C(null),className:"error-close","aria-label":s("common.close",{defaultValue:"Close"}),children:"\xd7"})]})}),(0,ts.jsxs)("div",{className:"panel product-form",children:[(0,ts.jsxs)("h3",{children:[(0,ts.jsx)("span",{className:"panel-icon",children:"\ud83d\udce6"}),g?s("products.titles.edit",{defaultValue:"Edit Product"}):s("products.titles.add",{defaultValue:"Add New Product"})]}),(0,ts.jsx)("div",{className:"form-group",children:(0,ts.jsxs)("div",{className:"grid two-cols",children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"product-name",children:s("products.fields.name_req",{defaultValue:"Product Name *"})}),(0,ts.jsx)("input",{id:"product-name",placeholder:s("products.placeholders.name",{defaultValue:"Enter product name"}),value:T.name,onChange:e=>L(t=>({...t,name:e.target.value})),disabled:w})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"product-brand",children:s("products.fields.brand",{defaultValue:"Brand"})}),(0,ts.jsx)("input",{id:"product-brand",placeholder:s("products.placeholders.brand",{defaultValue:"Enter brand name"}),value:T.brand,onChange:e=>L(t=>({...t,brand:e.target.value})),disabled:w})]})]})}),(0,ts.jsx)("div",{className:"form-group",children:(0,ts.jsxs)("div",{className:"grid two-cols",children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"product-model",children:s("products.fields.model",{defaultValue:"Model"})}),(0,ts.jsx)("input",{id:"product-model",placeholder:s("products.placeholders.model",{defaultValue:"Enter model"}),value:T.model,onChange:e=>L(t=>({...t,model:e.target.value})),disabled:w})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"product-price",children:s("products.fields.price_req",{defaultValue:"Price in LEK *"})}),(0,ts.jsx)("input",{id:"product-price",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:T.price,onChange:e=>L(t=>({...t,price:e.target.value})),disabled:w})]})]})}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"product-description",children:s("products.fields.description",{defaultValue:"Description"})}),(0,ts.jsx)("textarea",{id:"product-description",placeholder:s("products.placeholders.description",{defaultValue:"Enter product description"}),value:T.description,onChange:e=>L(t=>({...t,description:e.target.value})),disabled:w})]}),(0,ts.jsx)("div",{className:"form-group",children:(0,ts.jsxs)("div",{className:"grid three-cols",children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"product-quantity",children:s("products.fields.quantity_req",{defaultValue:"Quantity *"})}),(0,ts.jsx)("input",{id:"product-quantity",type:"number",min:"0",placeholder:"0",value:T.quantity,onChange:e=>L(t=>({...t,quantity:e.target.value})),disabled:w})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"product-category",children:s("products.fields.category",{defaultValue:"Category"})}),(0,ts.jsxs)("select",{id:"product-category",value:T.categoryId,onChange:e=>L(t=>({...t,categoryId:e.target.value})),disabled:w,children:[(0,ts.jsx)("option",{value:"",children:s("products.placeholders.category",{defaultValue:"Select category..."})}),f.map(e=>(0,ts.jsx)("option",{value:e.clothingCategoryId,children:e.name},e.clothingCategoryId))]})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"product-size",children:s("products.fields.size",{defaultValue:"Size"})}),(0,ts.jsx)("input",{id:"product-size",placeholder:s("products.placeholders.size",{defaultValue:"e.g. M, 32W, One-Size"}),value:T.size,onChange:e=>L(t=>({...t,size:e.target.value})),disabled:w})]})]})}),(0,ts.jsx)("div",{className:"form-group",children:(0,ts.jsxs)("div",{className:"grid two-cols",children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"product-colors",children:s("products.fields.colors",{defaultValue:"Colors"})}),(0,ts.jsx)("input",{id:"product-colors",placeholder:s("products.placeholders.colors",{defaultValue:"Red, Blue, Green (comma separated)"}),value:T.colors,onChange:e=>L(t=>({...t,colors:e.target.value})),disabled:w})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"product-material",children:s("products.fields.material",{defaultValue:"Material"})}),(0,ts.jsx)("input",{id:"product-material",placeholder:s("products.placeholders.material",{defaultValue:"Cotton, Polyester, etc."}),value:T.material,onChange:e=>L(t=>({...t,material:e.target.value})),disabled:w})]})]})}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{children:s("products.fields.photos",{defaultValue:"Product Photos"})}),(0,ts.jsxs)("label",{className:"file-btn",disabled:S||w,children:[S?s("products.upload.uploading",{defaultValue:"\u23f3 Uploading..."}):s("products.upload.button",{defaultValue:"\ud83d\udcc1 Upload Photos"}),(0,ts.jsx)("input",{ref:u,type:"file",accept:"image/*",multiple:!0,onChange:e=>V(e.target.files),disabled:S||w})]}),(0,ts.jsxs)("div",{className:"photo-row "+(A?"drag-over":""),onDragOver:B,onDragLeave:$,onDrop:F,children:[0===T.photos.length&&!S&&(0,ts.jsx)("div",{className:"empty-photos",children:s("products.upload.drop_hint",{defaultValue:"\ud83d\udcf8 Drop photos here or click upload button"})}),T.photos.map((e,t)=>(0,ts.jsxs)("div",{className:"thumb "+(t===M?"selected":""),onClick:()=>I(t),title:t===M?s("products.upload.main_photo_title",{defaultValue:"Main photo"}):s("products.upload.set_main_title",{defaultValue:"Click to set as main photo"}),children:[(0,ts.jsx)("img",{src:e||"/placeholder.svg",alt:s("products.upload.photo_alt",{defaultValue:"Product photo {{n}}",n:t+1})}),(0,ts.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),q(t)},disabled:w,title:s("products.upload.remove",{defaultValue:"Remove photo"}),children:"\xd7"}),t===M&&(0,ts.jsx)("div",{className:"main-photo-badge",children:s("products.upload.main_badge",{defaultValue:"Main"})})]},`${e}-${t}`)),S&&(0,ts.jsx)("div",{className:"upload-progress",children:(0,ts.jsx)("div",{className:"loading-spinner"})})]}),T.photos.length>0&&(0,ts.jsx)("p",{className:"photo-help",children:s("products.upload.help",{defaultValue:"Click a photo to set it as the main image. Max 10 photos."})})]}),(0,ts.jsxs)("div",{className:"actions",children:[(0,ts.jsx)("button",{onClick:H,disabled:w||S,className:"primary",children:w?s("common.saving",{defaultValue:"\u23f3 Saving..."}):g?s("products.actions.update",{defaultValue:"Update Product"}):s("products.actions.add",{defaultValue:"Add Product"})}),g&&(0,ts.jsx)("button",{onClick:U,disabled:w,className:"secondary",children:s("common.cancel",{defaultValue:"Cancel"})})]})]}),(0,ts.jsxs)("div",{className:"panel product-list",children:[(0,ts.jsxs)("h3",{children:[(0,ts.jsx)("span",{className:"panel-icon",children:"\ud83d\udccb"}),s("products.list.title_with_count",{defaultValue:"Products ({{count}})",count:Y})]}),(0,ts.jsxs)("div",{className:"product-list-content",children:[(0,ts.jsx)("div",{className:"form-group",children:(0,ts.jsx)("input",{className:"search",type:"text",placeholder:s("products.search.placeholder",{defaultValue:"Search products..."}),value:y,onChange:e=>_(e.target.value),disabled:w})}),w&&0===h.length?(0,ts.jsxs)("div",{className:"loading-state",children:[(0,ts.jsx)("div",{className:"loading-spinner"}),(0,ts.jsx)("p",{children:s("products.list.loading",{defaultValue:"Loading products..."})})]}):(0,ts.jsx)("ul",{children:X.length>0?X.map(e=>{var t;return(0,ts.jsxs)("li",{children:[(0,ts.jsxs)("div",{className:"product-name",children:[e.name,e.brand&&(0,ts.jsxs)("span",{className:"product-brand",children:[" - ",e.brand]})]}),(0,ts.jsxs)("div",{className:"product-details",children:[e.model&&(0,ts.jsxs)("span",{children:[s("products.badges.model",{defaultValue:"Model"}),": ",e.model]}),(0,ts.jsxs)("span",{className:"price",children:[s("products.badges.price",{defaultValue:"Price"}),": LEK ",e.price]}),e.sizes&&(0,ts.jsxs)("span",{children:[s("products.badges.size",{defaultValue:"Size"}),": ",e.sizes]}),(0,ts.jsxs)("span",{className:"quantity",children:[s("products.badges.qty",{defaultValue:"Qty"}),": ",e.quantity]})]}),(0,ts.jsxs)("div",{className:"btns",children:[(0,ts.jsxs)("button",{onClick:()=>Z(e),disabled:w,className:"edit",children:["\u270f\ufe0f ",s("common.edit",{defaultValue:"Edit"})]}),(0,ts.jsxs)("button",{onClick:()=>W(e.clothingItemId),disabled:w,className:"delete",children:["\ud83d\uddd1\ufe0f ",s("common.delete",{defaultValue:"Delete"})]}),(0,ts.jsx)("button",{onClick:()=>K(e),className:"sale "+(E===e.clothingItemId?"loading":""),disabled:w||E===e.clothingItemId||(null!==(t=e.quantity)&&void 0!==t?t:0)<=0,title:s("products.sale.tooltip",{defaultValue:"Record a sale (reduce stock by 1)"}),style:{backgroundColor:"#16a34a",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 12px",fontWeight:600},children:E===e.clothingItemId?s("products.sale.selling",{defaultValue:"Selling\u2026"}):s("products.sale.button",{defaultValue:"Sale"})})]})]},e.clothingItemId)}):(0,ts.jsx)("li",{className:"no-results",children:y?s("products.search.no_match",{defaultValue:"No products match your search."}):s("products.list.empty",{defaultValue:"No products found."})})}),Y>10&&(0,ts.jsx)(zi,{page:b,pageSize:10,totalCount:Y,onPageChange:x,maxButtons:5})]})]})]}):(0,ts.jsx)("div",{className:"panel",children:(0,ts.jsxs)("div",{className:"no-business-selected",children:[(0,ts.jsx)("h3",{children:s("products.empty.no_business_title",{defaultValue:"No Business Selected"})}),(0,ts.jsx)("p",{children:s("products.empty.no_business_desc",{defaultValue:"Please select a business to manage products."})})]})})}var Ri,Di;const Vi=((null===(Ri={})||void 0===Ri||null===(Di=Ri.env)||void 0===Di?void 0:Di.VITE_API_BASE_URL)||"http://77.242.26.150:8000").replace(/\/+$/,"");const Bi="Europe/Tirane";function $i(e){return new Intl.DateTimeFormat("en-CA",{timeZone:Bi,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}function Fi(t){let{business:n}=t;const{t:s,i18n:o}=Me("sales"),i=(null===o||void 0===o?void 0:o.language)||navigator.language||"en-GB",r=(0,e.useMemo)(()=>new Intl.DateTimeFormat(i,{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:Bi}),[i]),a=(0,e.useMemo)(()=>new Intl.DateTimeFormat(i,{day:"2-digit",month:"long",year:"numeric",timeZone:Bi}),[i]),l=(0,e.useMemo)(()=>new Intl.DateTimeFormat(i,{day:"numeric",month:"long",timeZone:Bi}),[i]),[c,u]=(0,e.useState)(!0),[d,h]=(0,e.useState)(null),[p,f]=(0,e.useState)(1),[m]=(0,e.useState)(20),[g,v]=(0,e.useState)(0),[y,_]=(0,e.useState)([]),[b,x]=(0,e.useState)(0);(0,e.useEffect)(()=>{const e=e=>{var t;const s=null===e||void 0===e||null===(t=e.detail)||void 0===t?void 0:t.businessId;s&&null!==n&&void 0!==n&&n.businessId&&s===n.businessId&&(f(1),x(e=>e+1))};return window.addEventListener("sale-recorded",e),()=>window.removeEventListener("sale-recorded",e)},[null===n||void 0===n?void 0:n.businessId]);const w=(0,e.useCallback)(async()=>{if(null===n||void 0===n||!n.businessId)return _([]),v(0),void u(!1);u(!0),h(null);const{from:e,to:t}=function(){const e=new Date,t=new Intl.DateTimeFormat("en-CA",{timeZone:Bi,year:"numeric",month:"2-digit",day:"2-digit"}).format(e),[n,s]=t.split("-").map(Number),o=new Date(Date.UTC(n,s-1,1,0,0,0)),i=new Date(Date.UTC(n,s-1,1,0,0,0));return i.setUTCMonth(i.getUTCMonth()+1),{from:o.toISOString(),to:i.toISOString()}}(),o=`${Vi}/api/Sales/${n.businessId}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&page=${p}&pageSize=${m}`,i=localStorage.getItem("token")||localStorage.getItem("access_token")||localStorage.getItem("authToken")||null;try{const e=await fetch(o,{method:"GET",headers:{Accept:"application/json",...i?{Authorization:`Bearer ${i}`}:{}}});if(!e.ok){const t=await e.text();if(401===e.status)throw new Error(s("sales.errors.unauthorized",{defaultValue:"Unauthorized (401): token/cookie not sent or expired."}));if(403===e.status)throw new Error(s("sales.errors.forbidden",{defaultValue:"Forbidden (403): your user lacks the required role."}));if(404===e.status)throw new Error(s("sales.errors.not_found",{defaultValue:"Not Found (404): Check API_BASE or route."}));throw new Error(`${e.status} ${e.statusText} \u2013 ${t}`)}const t=await e.json(),{list:n,total:r}=function(e){if(Array.isArray(e))return{list:e,total:e.length};if(e&&"object"===typeof e){const t=Array.isArray(e.data)?e.data:[];return{list:t,total:"number"===typeof e.total?e.total:t.length}}return{list:[],total:0}}(t);_(n),v(r)}catch(Uc){h((null===Uc||void 0===Uc?void 0:Uc.message)||s("sales.errors.load_failed",{defaultValue:"Failed to load sales."})),_([]),v(0)}finally{u(!1)}},[null===n||void 0===n?void 0:n.businessId,p,m,s]);(0,e.useEffect)(()=>{w()},[w,b]);const j=(0,e.useMemo)(()=>{if(null===y||void 0===y||!y.length)return[];const e=new Date,t=$i(e),n=$i(function(e,t){const n=$i(e),[s,o,i]=n.split("-").map(Number),r=new Date(Date.UTC(s,o-1,i));return r.setUTCDate(r.getUTCDate()+t),r}(e,-1)),s=new Map;for(const i of y){const e=$i(new Date(i.soldAt)),o=e===t?"today":e===n?"yesterday":`date:${e}`;s.has(o)||s.set(o,[]),s.get(o).push(i)}const o=Array.from(s.entries());return o.sort((e,t)=>{const n=e=>"today"===e?0:"yesterday"===e?1:2,s=n(e[0]),o=n(t[0]);if(s!==o)return s-o;if(s<2)return 0;const i=new Date(e[1][0].soldAt);return new Date(t[1][0].soldAt)-i}),o},[y]);return null!==n&&void 0!==n&&n.businessId?(0,ts.jsxs)("div",{className:"sales-panel",children:[(0,ts.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:10},children:[(0,ts.jsx)("strong",{children:s("sales.business_label",{defaultValue:"Business:"})})," ",n.name||n.businessId,(0,ts.jsx)("button",{onClick:()=>x(e=>e+1),disabled:c,children:c?s("sales.refreshing",{defaultValue:"Refreshing\u2026"}):s("sales.refresh",{defaultValue:"Refresh"})})]}),d&&(0,ts.jsx)("div",{className:"error",children:d}),c&&(0,ts.jsx)("div",{children:s("sales.loading",{defaultValue:"Loading sales\u2026"})}),!c&&!d&&!y.length&&(0,ts.jsx)("div",{children:s("sales.empty_month",{defaultValue:"No sales this month."})}),!c&&!d&&!!y.length&&(0,ts.jsxs)(ts.Fragment,{children:[j.map(e=>{let t,[n,o]=e;if("today"===n)t=s("sales.today",{defaultValue:"Today"});else if("yesterday"===n)t=s("sales.yesterday",{defaultValue:"Yesterday"});else{const e=new Date(o[0].soldAt);t=l.format(e)}return(0,ts.jsxs)("div",{className:"sales-group",children:[(0,ts.jsx)("h3",{children:t}),(0,ts.jsx)("ul",{className:"sales-list",children:o.map(e=>{var t,n;const o=new Date(e.soldAt),i=r.format(o),l=a.format(o),c=null!=e.unitPriceAtSale?Number(e.unitPriceAtSale)*(null!==(t=e.quantity)&&void 0!==t?t:1):null;return(0,ts.jsxs)("li",{className:"sales-row",children:[(0,ts.jsxs)("div",{className:"sales-left",children:[(0,ts.jsx)("div",{className:"sales-product",children:e.productName}),(0,ts.jsxs)("div",{className:"sales-sub",children:[s("sales.qty",{defaultValue:"Qty"}),": ",null!==(n=e.quantity)&&void 0!==n?n:1," \u2022 ",l," ",s("sales.at_time",{defaultValue:"at"})," ",i,e.sku?` \u2022 ${s("sales.sku",{defaultValue:"SKU"})}: ${e.sku}`:""]}),e.soldByName&&(0,ts.jsxs)("div",{className:"sales-sub",children:[s("sales.sold_by",{defaultValue:"sale made by:"})," ",(0,ts.jsx)("strong",{children:e.soldByName})]})]}),(0,ts.jsx)("div",{className:"sales-right",children:null!=c?`${c.toFixed(2)} LEK`:""})]},e.saleRecordId)})})]},n)}),g>p*m&&(0,ts.jsxs)("div",{className:"pager",style:{display:"flex",gap:8,alignItems:"center",marginTop:12},children:[(0,ts.jsx)("button",{onClick:()=>f(e=>Math.max(1,e-1)),children:s("sales.prev",{defaultValue:"Prev"})}),(0,ts.jsx)("span",{children:s("sales.page_x",{defaultValue:"Page {{page}}",page:p})}),(0,ts.jsx)("button",{onClick:()=>f(e=>e+1),children:s("sales.next",{defaultValue:"Next"})})]})]})]}):(0,ts.jsxs)("div",{className:"sales-panel",children:[(0,ts.jsx)("h3",{children:s("sales.title",{defaultValue:"Sales"})}),(0,ts.jsx)("p",{children:s("sales.select_business",{defaultValue:"Select a business to view sales."})})]})}const Ui=["Ankle Boots","Athletic Shoes","Ballet Flats","Belt","Bandana","Beanie","Bikini","Blazer","Blouse","Bodycon Dress","Bodysuit","Bomber Jacket","Boots","Boyfriend Jeans","Bra","Bucket Hat","Caftan","Cardigan","Chelsea Boots","Chinos","Cleats","Cotton Socks","Crop Top","Denim Jacket","Denim Shorts","Dress","Down Jacket","Evening Gown","Flats","Flip Flops","Gloves","Handbag","Hood","Hoodie/Sweatshirt","Jeans","Jumpsuit","Knee-High Boots","Kimono","Leggings","Loafers","Long Sleeve Blouse","Maternity Dress","Mesh Top","Mini Skirt","Moccasins","Mules","Nightshirt","Parka","Peacoat","Pencil Skirt","Polo Shirt","Poncho","Pajamas","Raincoat","Romper","Sandals","Scarf/Shawl","Shawl","Short Shorts","Short Sleeve Blouse","Shorts","Skinny Jeans","Skirt","Slippers","Soccer Jersey","Sports Socks","Sportswear","Stockings","Suspenders","Swimwear","Tank Top","Thongs","Tracksuit","Trench Coat","Trousers","T-shirt","Uniform","Anorak","Blouson Jacket","Cape","Coveralls","Duffle Coat","Flight Jacket","Motorcycle Jacket","Overcoat","Slicker","Cargo Pants","Culottes","Dungarees/Overalls","Palazzo Pants","Tuxedo Pants","Dinner Jacket","Suit","Tailcoat","Tuxedo","Fisherman Sweater","Turtleneck","Bike Shorts","Board Shorts","Compression Tights","Lounge Set","Rash Guard","Sweatpants","Boxer Briefs","Briefs","Corset","Long Johns","Nursing Bra","Sports Bra","Backpack","Bow Tie","Clutch","Cufflinks","Earrings","Fanny Pack","Messenger Bag","Necklace","Pocket Square","Ring","Satchel","Sunglasses","Tie","Tie Clip","Umbrella","Watch","Undershirt","Vest","Wide Leg Jeans","Wool Qeleshe (Traditional Hat)","Wool Socks","Harem Pants","Utility Vest","Windbreaker","Fleece Jacket","Leather Pants","Pleated Skirt","A-Line Skirt","Wrap Dress","Sheath Dress","Fishnet Tights","Leg Warmers","Thermal Underwear","Swim Trunks","Base Layer","Babydoll Dress","Boiler Suit","Capri Pants","Cargo Shorts","Chore Jacket","Cigarette Pants","Duster Coat","Halter Top","Off-the-Shoulder Top","One-Shoulder Top","Peplum Top","Pullover","Shacket","Shirt Dress","Skort","Tunic","Tunic Dress","Bandeau Top","Bolero","Crewneck Sweater","Cropped Jeans","Cropped Pants","Flare Jeans","Bootcut Jeans","Mom Jeans","Sweater Dress","T-Shirt Dress","Swing Dress","Maxi Dress","Pinafore Dress","Paperbag Waist Pants","High-Waisted Pants","Joggers","Utility Jumpsuit","Hoodie","Socks","Underwear","Panties","Coat","Jacket","Sweater","Formal Dresses","Normal Bra","Robes","Swim Suit","Heels","Hats","Caps","Bracelet","Gold","Silver","Button Up Shirts"].filter((e,t,n)=>n.indexOf(e)===t).sort((e,t)=>e.localeCompare(t,"en"));function Hi(t){let{business:n}=t;const{t:s}=Me("categories"),{get:o,post:i,put:r,del:a}=Ni(),[l,c]=(0,e.useState)([]),[u,d]=(0,e.useState)(Ui),[h,p]=(0,e.useState)(!1),[f,m]=(0,e.useState)(1),[g,v]=(0,e.useState)({name:""}),[y,_]=(0,e.useState)(null),[b,x]=(0,e.useState)("");async function w(){if(null!==n&&void 0!==n&&n.businessId)try{const e=await o(`/api/ClothingCategory/business/${n.businessId}`),t=Array.isArray(e)?e:[];c(t);const s=new Set(t.map(e=>e.name));d(Ui.filter(e=>!s.has(e))),m(1)}catch{c([]),d(Ui),m(1)}}(0,e.useEffect)(()=>{w()},[null===n||void 0===n?void 0:n.businessId]);const j=e=>s(`category_names.${(e=>(e||"").toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))(e)}`,{defaultValue:e}),S=(0,e.useMemo)(()=>l.filter(e=>(e.name||"").toLowerCase().includes(b.toLowerCase().trim())),[l,b]),k=(0,e.useMemo)(()=>u.filter(e=>e.toLowerCase().includes(b.toLowerCase().trim())),[u,b]),N=Math.ceil(k.length/10)||1,C=k.slice(10*(f-1),10*f),E=()=>{_(null),v({name:""})};return(0,ts.jsxs)("div",{className:"category-panel",children:[(0,ts.jsx)("h3",{children:s("categories.title",{defaultValue:"Category Management Panel"})}),(0,ts.jsxs)("label",{className:"toggle-premade",children:[(0,ts.jsx)("input",{type:"checkbox",checked:h,onChange:e=>{p(e.target.checked),x(""),m(1)}}),s("categories.use_premade",{defaultValue:"Use Premade Categories"})]}),(0,ts.jsxs)("div",{className:"search-box-category",children:[(0,ts.jsx)(Ps,{className:"search-icon-category"}),(0,ts.jsx)("input",{type:"text",className:"search-input-category",placeholder:s("categories.search_placeholder",{defaultValue:"Search categories\u2026"}),value:b,onChange:e=>x(e.target.value)})]}),h?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("ul",{className:"premade-list",children:C.length>0?C.map(e=>(0,ts.jsxs)("li",{children:[(0,ts.jsx)("span",{className:"category-name",children:j(e)}),(0,ts.jsx)("button",{onClick:()=>(async e=>{try{await i("/api/ClothingCategory",{businessId:n.businessId,name:e}),alert(s("categories.premade_added",{defaultValue:"'{{name}}' added!",name:j(e)})),w()}catch{alert(s("categories.premade_add_failed",{defaultValue:"Failed to add premade category."}))}})(e),children:s("common.add",{defaultValue:"Add"})})]},e)):(0,ts.jsx)("li",{className:"no-results",children:s("categories.no_premade",{defaultValue:"No premade categories found."})})}),k.length>10&&(0,ts.jsxs)("div",{className:"premade-pagination",children:[(0,ts.jsx)("button",{onClick:()=>m(e=>Math.max(e-1,1)),disabled:1===f,children:s("common.prev",{defaultValue:"Prev"})}),(0,ts.jsx)("span",{children:s("common.page_of",{defaultValue:"Page {{page}} of {{total}}",page:f,total:N})}),(0,ts.jsx)("button",{onClick:()=>m(e=>Math.min(e+1,N)),disabled:f===N,children:s("common.next",{defaultValue:"Next"})})]})]}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("ul",{className:"category-list",children:S.length>0?S.map(e=>(0,ts.jsxs)("li",{children:[(0,ts.jsx)("span",{className:"category-name",children:j(e.name)}),(0,ts.jsx)("button",{onClick:()=>(e=>{_(e),v({name:e.name})})(e),children:s("common.edit",{defaultValue:"Edit"})}),(0,ts.jsx)("button",{onClick:()=>(async e=>{if(window.confirm(s("categories.confirm_delete",{defaultValue:"Delete this category?"})))try{await a(`/api/ClothingCategory/${e}`),alert(s("categories.deleted",{defaultValue:"Category deleted!"})),w()}catch{alert(s("categories.delete_failed",{defaultValue:"Failed to delete category."}))}})(e.clothingCategoryId),children:s("common.delete",{defaultValue:"Delete"})})]},e.clothingCategoryId)):(0,ts.jsx)("li",{className:"no-results",children:s("categories.no_match",{defaultValue:"No categories match your search."})})}),(0,ts.jsxs)("div",{className:"category-form",children:[(0,ts.jsx)("h4",{children:y?s("categories.update_title",{defaultValue:"Update Your Own Category"}):s("categories.create_title",{defaultValue:"Create Your Own Category"})}),(0,ts.jsx)("input",{type:"text",value:g.name,onChange:e=>v({name:e.target.value}),placeholder:s("categories.name_placeholder",{defaultValue:"Category Name"})}),(0,ts.jsxs)("div",{className:"form-actions",children:[(0,ts.jsx)("button",{onClick:async()=>{const e={businessId:n.businessId,name:g.name.trim()};if(e.name)try{y?(await r(`/api/ClothingCategory/${y.clothingCategoryId}`,e),alert(s("categories.updated",{defaultValue:"Category updated!"}))):(await i("/api/ClothingCategory",e),alert(s("categories.added",{defaultValue:"Category added!"}))),E(),w()}catch{alert(s("categories.save_failed",{defaultValue:"Failed to save category."}))}},children:y?s("common.update",{defaultValue:"Update"}):s("common.create",{defaultValue:"Create"})}),y&&(0,ts.jsx)("button",{onClick:E,className:"cancel",children:s("common.cancel",{defaultValue:"Cancel"})})]})]})]})]})}var Wi=function(e,t){return Wi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Wi(e,t)};function Zi(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Wi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var qi=function(){return qi=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qi.apply(this,arguments)};Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Ki=n(185),Ji=n.n(Ki);function Yi(e,t,n,s,o){void 0===o&&(o=0);var i=sr(t.width,t.height,o),r=i.width,a=i.height;return{x:Xi(e.x,r,n.width,s),y:Xi(e.y,a,n.height,s)}}function Xi(e,t,n,s){var o=t*s/2-n/2;return or(e,-o,o)}function Gi(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function Qi(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function er(e,t){return Math.min(e,Math.max(0,t))}function tr(e,t){return t}function nr(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function sr(e,t,n){var s=n*Math.PI/180;return{width:Math.abs(Math.cos(s)*e)+Math.abs(Math.sin(s)*t),height:Math.abs(Math.sin(s)*e)+Math.abs(Math.cos(s)*t)}}function or(e,t,n){return Math.min(Math.max(e,t),n)}function ir(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return"string"===typeof e&&e.length>0}).join(" ").trim()}var rr=function(t){function n(){var s=null!==t&&t.apply(this,arguments)||this;return s.cropperRef=e.createRef(),s.imageRef=e.createRef(),s.videoRef=e.createRef(),s.containerPosition={x:0,y:0},s.containerRef=null,s.styleRef=null,s.containerRect=null,s.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},s.dragStartPosition={x:0,y:0},s.dragStartCrop={x:0,y:0},s.gestureZoomStart=0,s.gestureRotationStart=0,s.isTouching=!1,s.lastPinchDistance=0,s.lastPinchRotation=0,s.rafDragTimeout=null,s.rafPinchTimeout=null,s.wheelTimer=null,s.currentDoc="undefined"!==typeof document?document:null,s.currentWindow="undefined"!==typeof window?window:null,s.resizeObserver=null,s.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},s.initResizeObserver=function(){if("undefined"!==typeof window.ResizeObserver&&s.containerRef){var e=!0;s.resizeObserver=new window.ResizeObserver(function(t){e?e=!1:s.computeSizes()}),s.resizeObserver.observe(s.containerRef)}},s.preventZoomSafari=function(e){return e.preventDefault()},s.cleanEvents=function(){s.currentDoc&&(s.currentDoc.removeEventListener("mousemove",s.onMouseMove),s.currentDoc.removeEventListener("mouseup",s.onDragStopped),s.currentDoc.removeEventListener("touchmove",s.onTouchMove),s.currentDoc.removeEventListener("touchend",s.onDragStopped),s.currentDoc.removeEventListener("gesturechange",s.onGestureChange),s.currentDoc.removeEventListener("gestureend",s.onGestureEnd),s.currentDoc.removeEventListener("scroll",s.onScroll))},s.clearScrollEvent=function(){s.containerRef&&s.containerRef.removeEventListener("wheel",s.onWheel),s.wheelTimer&&clearTimeout(s.wheelTimer)},s.onMediaLoad=function(){var e=s.computeSizes();e&&(s.emitCropData(),s.setInitialCrop(e)),s.props.onMediaLoaded&&s.props.onMediaLoaded(s.mediaSize)},s.setInitialCrop=function(e){if(s.props.initialCroppedAreaPercentages){var t=function(e,t,n,s,o,i){var r=sr(t.width,t.height,n),a=or(s.width/r.width*(100/e.width),o,i);return{crop:{x:a*r.width/2-s.width/2-r.width*a*(e.x/100),y:a*r.height/2-s.height/2-r.height*a*(e.y/100)},zoom:a}}(s.props.initialCroppedAreaPercentages,s.mediaSize,s.props.rotation,e,s.props.minZoom,s.props.maxZoom),n=t.crop,o=t.zoom;s.props.onCropChange(n),s.props.onZoomChange&&s.props.onZoomChange(o)}else if(s.props.initialCroppedAreaPixels){var i=function(e,t,n,s,o,i){void 0===n&&(n=0);var r=sr(t.naturalWidth,t.naturalHeight,n),a=or(function(e,t,n){var s=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return n.height>n.width?n.height/(e.height*s):n.width/(e.width*s)}(e,t,s),o,i),l=s.height>s.width?s.height/e.height:s.width/e.width;return{crop:{x:((r.width-e.width)/2-e.x)*l,y:((r.height-e.height)/2-e.y)*l},zoom:a}}(s.props.initialCroppedAreaPixels,s.mediaSize,s.props.rotation,e,s.props.minZoom,s.props.maxZoom);n=i.crop,o=i.zoom;s.props.onCropChange(n),s.props.onZoomChange&&s.props.onZoomChange(o)}},s.computeSizes=function(){var e,t,n,o,i,r,a=s.imageRef.current||s.videoRef.current;if(a&&s.containerRef){s.containerRect=s.containerRef.getBoundingClientRect(),s.saveContainerPosition();var l=s.containerRect.width/s.containerRect.height,c=(null===(e=s.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=s.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,u=(null===(n=s.imageRef.current)||void 0===n?void 0:n.naturalHeight)||(null===(o=s.videoRef.current)||void 0===o?void 0:o.videoHeight)||0,d=c/u,h=void 0;if(a.offsetWidth<c||a.offsetHeight<u)switch(s.state.mediaObjectFit){default:case"contain":h=l>d?{width:s.containerRect.height*d,height:s.containerRect.height}:{width:s.containerRect.width,height:s.containerRect.width/d};break;case"horizontal-cover":h={width:s.containerRect.width,height:s.containerRect.width/d};break;case"vertical-cover":h={width:s.containerRect.height*d,height:s.containerRect.height}}else h={width:a.offsetWidth,height:a.offsetHeight};s.mediaSize=qi(qi({},h),{naturalWidth:c,naturalHeight:u}),s.props.setMediaSize&&s.props.setMediaSize(s.mediaSize);var p=s.props.cropSize?s.props.cropSize:function(e,t,n,s,o,i){void 0===i&&(i=0);var r=sr(e,t,i),a=r.width,l=r.height,c=Math.min(a,n),u=Math.min(l,s);return c>u*o?{width:u*o,height:u}:{width:c,height:c/o}}(s.mediaSize.width,s.mediaSize.height,s.containerRect.width,s.containerRect.height,s.props.aspect,s.props.rotation);return(null===(i=s.state.cropSize)||void 0===i?void 0:i.height)===p.height&&(null===(r=s.state.cropSize)||void 0===r?void 0:r.width)===p.width||s.props.onCropSizeChange&&s.props.onCropSizeChange(p),s.setState({cropSize:p},s.recomputeCropPosition),s.props.setCropSize&&s.props.setCropSize(p),p}},s.saveContainerPosition=function(){if(s.containerRef){var e=s.containerRef.getBoundingClientRect();s.containerPosition={x:e.left,y:e.top}}},s.onMouseDown=function(e){s.currentDoc&&(e.preventDefault(),s.currentDoc.addEventListener("mousemove",s.onMouseMove),s.currentDoc.addEventListener("mouseup",s.onDragStopped),s.saveContainerPosition(),s.onDragStart(n.getMousePoint(e)))},s.onMouseMove=function(e){return s.onDrag(n.getMousePoint(e))},s.onScroll=function(e){s.currentDoc&&(e.preventDefault(),s.saveContainerPosition())},s.onTouchStart=function(e){s.currentDoc&&(s.isTouching=!0,s.props.onTouchRequest&&!s.props.onTouchRequest(e)||(s.currentDoc.addEventListener("touchmove",s.onTouchMove,{passive:!1}),s.currentDoc.addEventListener("touchend",s.onDragStopped),s.saveContainerPosition(),2===e.touches.length?s.onPinchStart(e):1===e.touches.length&&s.onDragStart(n.getTouchPoint(e.touches[0]))))},s.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?s.onPinchMove(e):1===e.touches.length&&s.onDrag(n.getTouchPoint(e.touches[0]))},s.onGestureStart=function(e){s.currentDoc&&(e.preventDefault(),s.currentDoc.addEventListener("gesturechange",s.onGestureChange),s.currentDoc.addEventListener("gestureend",s.onGestureEnd),s.gestureZoomStart=s.props.zoom,s.gestureRotationStart=s.props.rotation)},s.onGestureChange=function(e){if(e.preventDefault(),!s.isTouching){var t=n.getMousePoint(e),o=s.gestureZoomStart-1+e.scale;if(s.setNewZoom(o,t,{shouldUpdatePosition:!0}),s.props.onRotationChange){var i=s.gestureRotationStart+e.rotation;s.props.onRotationChange(i)}}},s.onGestureEnd=function(e){s.cleanEvents()},s.onDragStart=function(e){var t,n,o=e.x,i=e.y;s.dragStartPosition={x:o,y:i},s.dragStartCrop=qi({},s.props.crop),null===(n=(t=s.props).onInteractionStart)||void 0===n||n.call(t)},s.onDrag=function(e){var t=e.x,n=e.y;s.currentWindow&&(s.rafDragTimeout&&s.currentWindow.cancelAnimationFrame(s.rafDragTimeout),s.rafDragTimeout=s.currentWindow.requestAnimationFrame(function(){if(s.state.cropSize&&void 0!==t&&void 0!==n){var e=t-s.dragStartPosition.x,o=n-s.dragStartPosition.y,i={x:s.dragStartCrop.x+e,y:s.dragStartCrop.y+o},r=s.props.restrictPosition?Yi(i,s.mediaSize,s.state.cropSize,s.props.zoom,s.props.rotation):i;s.props.onCropChange(r)}}))},s.onDragStopped=function(){var e,t;s.isTouching=!1,s.cleanEvents(),s.emitCropData(),null===(t=(e=s.props).onInteractionEnd)||void 0===t||t.call(e)},s.onWheel=function(e){if(s.currentWindow&&(!s.props.onWheelRequest||s.props.onWheelRequest(e))){e.preventDefault();var t=n.getMousePoint(e),o=Ji()(e).pixelY,i=s.props.zoom-o*s.props.zoomSpeed/200;s.setNewZoom(i,t,{shouldUpdatePosition:!0}),s.state.hasWheelJustStarted||s.setState({hasWheelJustStarted:!0},function(){var e,t;return null===(t=(e=s.props).onInteractionStart)||void 0===t?void 0:t.call(e)}),s.wheelTimer&&clearTimeout(s.wheelTimer),s.wheelTimer=s.currentWindow.setTimeout(function(){return s.setState({hasWheelJustStarted:!1},function(){var e,t;return null===(t=(e=s.props).onInteractionEnd)||void 0===t?void 0:t.call(e)})},250)}},s.getPointOnContainer=function(e,t){var n=e.x,o=e.y;if(!s.containerRect)throw new Error("The Cropper is not mounted");return{x:s.containerRect.width/2-(n-t.x),y:s.containerRect.height/2-(o-t.y)}},s.getPointOnMedia=function(e){var t=e.x,n=e.y,o=s.props,i=o.crop,r=o.zoom;return{x:(t+i.x)/r,y:(n+i.y)/r}},s.setNewZoom=function(e,t,n){var o=(void 0===n?{}:n).shouldUpdatePosition,i=void 0===o||o;if(s.state.cropSize&&s.props.onZoomChange){var r=or(e,s.props.minZoom,s.props.maxZoom);if(i){var a=s.getPointOnContainer(t,s.containerPosition),l=s.getPointOnMedia(a),c={x:l.x*r-a.x,y:l.y*r-a.y},u=s.props.restrictPosition?Yi(c,s.mediaSize,s.state.cropSize,r,s.props.rotation):c;s.props.onCropChange(u)}s.props.onZoomChange(r)}},s.getCropData=function(){return s.state.cropSize?function(e,t,n,s,o,i,r){void 0===i&&(i=0),void 0===r&&(r=!0);var a=r?er:tr,l=sr(t.width,t.height,i),c=sr(t.naturalWidth,t.naturalHeight,i),u={x:a(100,((l.width-n.width/o)/2-e.x/o)/l.width*100),y:a(100,((l.height-n.height/o)/2-e.y/o)/l.height*100),width:a(100,n.width/l.width*100/o),height:a(100,n.height/l.height*100/o)},d=Math.round(a(c.width,u.width*c.width/100)),h=Math.round(a(c.height,u.height*c.height/100)),p=c.width>=c.height*s?{width:Math.round(h*s),height:h}:{width:d,height:Math.round(d/s)};return{croppedAreaPercentages:u,croppedAreaPixels:qi(qi({},p),{x:Math.round(a(c.width-p.width,u.x*c.width/100)),y:Math.round(a(c.height-p.height,u.y*c.height/100))})}}(s.props.restrictPosition?Yi(s.props.crop,s.mediaSize,s.state.cropSize,s.props.zoom,s.props.rotation):s.props.crop,s.mediaSize,s.state.cropSize,s.getAspect(),s.props.zoom,s.props.rotation,s.props.restrictPosition):null},s.emitCropData=function(){var e=s.getCropData();if(e){var t=e.croppedAreaPercentages,n=e.croppedAreaPixels;s.props.onCropComplete&&s.props.onCropComplete(t,n),s.props.onCropAreaChange&&s.props.onCropAreaChange(t,n)}},s.emitCropAreaChange=function(){var e=s.getCropData();if(e){var t=e.croppedAreaPercentages,n=e.croppedAreaPixels;s.props.onCropAreaChange&&s.props.onCropAreaChange(t,n)}},s.recomputeCropPosition=function(){if(s.state.cropSize){var e=s.props.restrictPosition?Yi(s.props.crop,s.mediaSize,s.state.cropSize,s.props.zoom,s.props.rotation):s.props.crop;s.props.onCropChange(e),s.emitCropData()}},s.onKeyDown=function(e){var t,n,o=s.props,i=o.crop,r=o.onCropChange,a=o.keyboardStep,l=o.zoom,c=o.rotation,u=a;if(s.state.cropSize){e.shiftKey&&(u*=.2);var d=qi({},i);switch(e.key){case"ArrowUp":d.y-=u,e.preventDefault();break;case"ArrowDown":d.y+=u,e.preventDefault();break;case"ArrowLeft":d.x-=u,e.preventDefault();break;case"ArrowRight":d.x+=u,e.preventDefault();break;default:return}s.props.restrictPosition&&(d=Yi(d,s.mediaSize,s.state.cropSize,l,c)),e.repeat||null===(n=(t=s.props).onInteractionStart)||void 0===n||n.call(t),r(d)}},s.onKeyUp=function(e){var t,n;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}s.emitCropData(),null===(n=(t=s.props).onInteractionEnd)||void 0===n||n.call(t)},s}return Zi(n,t),n.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),"undefined"===typeof window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},n.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&("undefined"===typeof window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},n.prototype.componentDidUpdate=function(e){var t,n,s,o,i,r,a,l,c;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(n=this.props.cropSize)||void 0===n?void 0:n.height)||(null===(s=e.cropSize)||void 0===s?void 0:s.width)!==(null===(o=this.props.cropSize)||void 0===o?void 0:o.width)?this.computeSizes():(null===(i=e.crop)||void 0===i?void 0:i.x)===(null===(r=this.props.crop)||void 0===r?void 0:r.x)&&(null===(a=e.crop)||void 0===a?void 0:a.y)===(null===(l=this.props.crop)||void 0===l?void 0:l.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(c=this.videoRef.current)||void 0===c||c.load());var u=this.getObjectFit();u!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:u},this.computeSizes)},n.prototype.getAspect=function(){var e=this.props,t=e.cropSize,n=e.aspect;return t?t.width/t.height:n},n.prototype.getObjectFit=function(){var e,t,n,s;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var o=this.containerRect.width/this.containerRect.height;return((null===(e=this.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=this.videoRef.current)||void 0===t?void 0:t.videoWidth)||0)/((null===(n=this.imageRef.current)||void 0===n?void 0:n.naturalHeight)||(null===(s=this.videoRef.current)||void 0===s?void 0:s.videoHeight)||0)<o?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},n.prototype.onPinchStart=function(e){var t=n.getTouchPoint(e.touches[0]),s=n.getTouchPoint(e.touches[1]);this.lastPinchDistance=Gi(t,s),this.lastPinchRotation=Qi(t,s),this.onDragStart(nr(t,s))},n.prototype.onPinchMove=function(e){var t=this;if(this.currentDoc&&this.currentWindow){var s=n.getTouchPoint(e.touches[0]),o=n.getTouchPoint(e.touches[1]),i=nr(s,o);this.onDrag(i),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var e=Gi(s,o),n=t.props.zoom*(e/t.lastPinchDistance);t.setNewZoom(n,i,{shouldUpdatePosition:!1}),t.lastPinchDistance=e;var r=Qi(s,o),a=t.props.rotation+(r-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(a),t.lastPinchRotation=r})}},n.prototype.render=function(){var t,n=this,s=this.props,o=s.image,i=s.video,r=s.mediaProps,a=s.cropperProps,l=s.transform,c=s.crop,u=c.x,d=c.y,h=s.rotation,p=s.zoom,f=s.cropShape,m=s.showGrid,g=s.roundCropAreaPixels,v=s.style,y=v.containerStyle,_=v.cropAreaStyle,b=v.mediaStyle,x=s.classes,w=x.containerClassName,j=x.cropAreaClassName,S=x.mediaClassName,k=null!==(t=this.state.mediaObjectFit)&&void 0!==t?t:this.getObjectFit();return e.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return n.containerRef=e},"data-testid":"container",style:y,className:ir("reactEasyCrop_Container",w)},o?e.createElement("img",qi({alt:"",className:ir("reactEasyCrop_Image","contain"===k&&"reactEasyCrop_Contain","horizontal-cover"===k&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===k&&"reactEasyCrop_Cover_Vertical",S)},r,{src:o,ref:this.imageRef,style:qi(qi({},b),{transform:l||"translate(".concat(u,"px, ").concat(d,"px) rotate(").concat(h,"deg) scale(").concat(p,")")}),onLoad:this.onMediaLoad})):i&&e.createElement("video",qi({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:ir("reactEasyCrop_Video","contain"===k&&"reactEasyCrop_Contain","horizontal-cover"===k&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===k&&"reactEasyCrop_Cover_Vertical",S)},r,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:qi(qi({},b),{transform:l||"translate(".concat(u,"px, ").concat(d,"px) rotate(").concat(h,"deg) scale(").concat(p,")")}),controls:!1}),(Array.isArray(i)?i:[{src:i}]).map(function(t){return e.createElement("source",qi({key:t.src},t))})),this.state.cropSize&&e.createElement("div",qi({ref:this.cropperRef,style:qi(qi({},_),{width:g?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:g?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:ir("reactEasyCrop_CropArea","round"===f&&"reactEasyCrop_CropAreaRound",m&&"reactEasyCrop_CropAreaGrid",j)},a)))},n.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},n.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},n.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},n}(e.Component);async function ar(e,t){const n=await(s=e,new Promise((e,t)=>{const n=new Image;n.addEventListener("load",()=>e(n)),n.addEventListener("error",e=>t(e)),n.src=s}));var s;const o=document.createElement("canvas");o.width=t.width,o.height=t.height;return o.getContext("2d").drawImage(n,t.x,t.y,t.width,t.height,0,0,t.width,t.height),new Promise(e=>{o.toBlob(t=>e(t),"image/jpeg")})}function lr(t){let{business:n}=t;const{t:s}=Me("photos"),{get:o,put:i}=Ni(),r=(0,e.useRef)(o),a=(0,e.useRef)(i);(0,e.useEffect)(()=>{r.current=o},[o]),(0,e.useEffect)(()=>{a.current=i},[i]);const[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(!0),[h,p]=(0,e.useState)(""),[f,m]=(0,e.useState)(""),[g,v]=(0,e.useState)(!1),[y,_]=(0,e.useState)(!1),[b,x]=(0,e.useState)(null),[w,j]=(0,e.useState)(null),[S,k]=(0,e.useState)({x:0,y:0}),[N,C]=(0,e.useState)(1),[E,P]=(0,e.useState)(null);(0,e.useEffect)(()=>{if(null===n||void 0===n||!n.businessId)return;let e=!1;return d(!0),r.current(`/api/Business/${n.businessId}`).then(t=>{e||(c(t),p(t.profilePictureUrl||""),m(t.coverPictureUrl||""))}).catch(e=>console.error("Failed to load business detail:",e)).finally(()=>{e||d(!1)}),()=>{e=!0}},[null===n||void 0===n?void 0:n.businessId]);const T=(e,t)=>{var n;const s=null===(n=e.target.files)||void 0===n?void 0:n[0];if(!s)return;const o=new FileReader;o.onload=()=>{x(o.result),P(()=>t),_(!0)},o.readAsDataURL(s)},L=(0,e.useCallback)((e,t)=>{j(t)},[]);return u?(0,ts.jsxs)("div",{className:"panel photo-panel",children:[(0,ts.jsx)("div",{className:"loading-spinner"}),(0,ts.jsx)("p",{style:{textAlign:"center",marginTop:16},children:s("photos.loading_business",{defaultValue:"Loading business data\u2026"})})]}):l?(0,ts.jsxs)("div",{className:"photo-panel",children:[(0,ts.jsx)("h3",{children:s("photos.title",{defaultValue:"Edit Profile & Cover Photos"})}),(0,ts.jsxs)("div",{className:"photo-panel-grid",children:[(0,ts.jsxs)("div",{className:"photo-input-group",children:[(0,ts.jsx)("label",{children:s("photos.profile_label",{defaultValue:"Profile Photo"})}),(0,ts.jsxs)("div",{className:"photo-preview-container",children:[h?(0,ts.jsx)("img",{src:h,alt:s("photos.profile_preview_alt",{defaultValue:"Profile preview"}),className:"photo-preview"}):(0,ts.jsx)("div",{className:"photo-placeholder",children:s("photos.no_profile",{defaultValue:"No profile photo"})}),(0,ts.jsxs)("button",{className:"photo-upload-button",disabled:g,"aria-label":s("photos.upload_new",{defaultValue:"Upload new profile photo"}),title:s("photos.upload_new",{defaultValue:"Upload new profile photo"}),type:"button",children:[(0,ts.jsx)("input",{type:"file",accept:"image/*",onChange:e=>T(e,p),"aria-label":s("photos.upload_input_label",{defaultValue:"Choose profile photo"})}),"+"]})]})]}),(0,ts.jsxs)("div",{className:"photo-input-group",children:[(0,ts.jsx)("label",{children:s("photos.cover_label",{defaultValue:"Cover Photo"})}),(0,ts.jsxs)("div",{className:"photo-preview-container",children:[f?(0,ts.jsx)("img",{src:f,alt:s("photos.cover_preview_alt",{defaultValue:"Cover preview"}),className:"photo-preview"}):(0,ts.jsx)("div",{className:"photo-placeholder",children:s("photos.no_cover",{defaultValue:"No cover photo"})}),(0,ts.jsxs)("button",{className:"photo-upload-button",disabled:g,"aria-label":s("photos.upload_new_cover",{defaultValue:"Upload new cover photo"}),title:s("photos.upload_new_cover",{defaultValue:"Upload new cover photo"}),type:"button",children:[(0,ts.jsx)("input",{type:"file",accept:"image/*",onChange:e=>T(e,m),"aria-label":s("photos.upload_input_label_cover",{defaultValue:"Choose cover photo"})}),"+"]})]})]})]}),(0,ts.jsx)("button",{className:"save-button",type:"button",onClick:async()=>{if(l){v(!0);try{await a.current(`/api/Business/${l.businessId}`,{...l,profilePictureUrl:h,coverPictureUrl:f}),alert(s("photos.updated",{defaultValue:"Photos updated successfully!"}))}catch(Xl){var e,t,n;console.error("Save error:",Xl);const i=(null===Xl||void 0===Xl||null===(e=Xl.data)||void 0===e||null===(t=e.errors)||void 0===t||null===(n=t.Name)||void 0===n?void 0:n[0])||(null===Xl||void 0===Xl?void 0:Xl.message)||"";alert(s("errors.save_failed",{message:i,defaultValue:i?`Save failed: ${i}`:"Save failed."}))}finally{v(!1)}}},disabled:g,children:g?s("common.saving",{defaultValue:"Saving\u2026"}):s("photos.save_button",{defaultValue:"Save Photos"})}),y&&(0,ts.jsx)("div",{className:"crop-modal-overlay",role:"dialog","aria-modal":"true",children:(0,ts.jsxs)("div",{className:"crop-modal",children:[(0,ts.jsx)(rr,{image:b,crop:S,zoom:N,aspect:E===p?1:16/9,onCropChange:k,onZoomChange:e=>C(Number(e)),onCropComplete:L}),(0,ts.jsxs)("div",{className:"crop-controls",children:[(0,ts.jsxs)("label",{children:[s("photos.zoom",{defaultValue:"Zoom"}),(0,ts.jsx)("input",{type:"range",value:N,min:1,max:3,step:.1,onChange:e=>C(Number(e.target.value)),"aria-label":s("photos.zoom",{defaultValue:"Zoom"})})]}),(0,ts.jsx)("button",{onClick:async()=>{try{const e=await ar(b,w),t=await(async e=>{if(!e)return null;const t=`https://storage.googleapis.com/edcms_bucket/${Date.now()}-${(e.name||"cropped").replace(/[^a-zA-Z0-9.-]/g,"_")}.jpg`,n=`${t}.txt`;if(!(await fetch(t,{method:"PUT",headers:{"Content-Type":"image/jpeg"},body:e})).ok)throw new Error("Image upload failed");if(!(await fetch(n,{method:"PUT",headers:{"Content-Type":"text/plain"},body:t})).ok)throw new Error("Text upload failed");return t})(e);E(t)}catch(Xl){console.error("Crop & upload error:",Xl),alert(s("errors.crop_upload_failed",{defaultValue:"Failed to crop or upload image."}))}finally{_(!1),x(null),C(1),k({x:0,y:0})}},type:"button",children:s("photos.crop_upload",{defaultValue:"Crop & Upload"})}),(0,ts.jsx)("button",{onClick:()=>_(!1),type:"button",children:s("common.cancel",{defaultValue:"Cancel"})})]})]})})]}):(0,ts.jsx)("div",{className:"panel photo-panel",children:(0,ts.jsx)("p",{style:{textAlign:"center",color:"var(--error-500)"},children:s("errors.business_load",{defaultValue:"Couldn't load business info."})})})}function cr(t){let{business:n}=t;const{t:s}=Me("employees"),{get:o,post:i,del:r}=Ni(),{token:a}=Si(),[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)([]),[h,p]=(0,e.useState)({name:"",email:""}),[f,m]=(0,e.useState)(null),[g,v]=(0,e.useState)(null);(0,e.useEffect)(()=>{if(null===n||void 0===n||!n.businessId||!a)return;let e=!1;return c(!0),o(`/api/Business/${n.businessId}/employees`).then(t=>{e||d(Array.isArray(t)?t:[])}).catch(t=>{console.error("Failed to load employees:",t),e||d([])}).finally(()=>{e||c(!1)}),()=>{e=!0}},[null===n||void 0===n?void 0:n.businessId,a]);return l?(0,ts.jsx)("div",{className:"employee-panel",children:(0,ts.jsx)("p",{children:s("employees.loading",{defaultValue:"Loading employees\u2026"})})}):(0,ts.jsxs)("div",{className:"employee-panel",children:[(0,ts.jsx)("h3",{children:s("employees.title",{defaultValue:"Employee Management"})}),(0,ts.jsxs)("div",{className:"employee-management-container",children:[(0,ts.jsxs)("div",{className:"employee-form",children:[(0,ts.jsx)("h4",{children:g?s("employees.form.edit_title",{defaultValue:"Edit Employee"}):s("employees.form.add_title",{defaultValue:"Add New Employee"})}),(0,ts.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==f&&void 0!==f&&f.userId)try{await i(`/api/Business/${n.businessId}/assign/${f.userId}`,{}),alert(s("employees.alerts.invite_sent",{defaultValue:"Invitation sent!"}));const e=await o(`/api/Business/${n.businessId}/employees`);d(Array.isArray(e)?e:[])}catch(Xl){console.error("Invite failed:",Xl),alert(s("employees.alerts.invite_failed",{defaultValue:"Failed to invite user."}))}finally{m(null),p({name:"",email:""}),v(null)}else alert(s("employees.alerts.find_user_first",{defaultValue:"Find a user by email first."}))},children:[(0,ts.jsx)("label",{children:s("employees.form.name_label",{defaultValue:"Name"})}),(0,ts.jsx)("input",{type:"text",placeholder:s("employees.form.name_placeholder",{defaultValue:"Name"}),value:h.name,onChange:e=>p(t=>({...t,name:e.target.value})),required:!0}),(0,ts.jsx)("label",{children:s("employees.form.email_label",{defaultValue:"Email"})}),(0,ts.jsx)("input",{type:"email",placeholder:s("employees.form.email_placeholder",{defaultValue:"Email"}),value:h.email,onChange:e=>p(t=>({...t,email:e.target.value})),required:!0}),(0,ts.jsxs)("div",{className:"employee-form-buttons",children:[(0,ts.jsx)("button",{type:"button",onClick:async()=>{const e=h.email.trim().toLowerCase();if(e)try{const t=await o(`/api/User/email/${encodeURIComponent(e)}`);m(t),p(e=>({...e,name:t.name||""})),alert(s("employees.alerts.user_found",{name:t.name||e,defaultValue:`User found: ${t.name||e}`}))}catch(Xl){console.error("Error searching user:",Xl),m(null),alert(404===(null===Xl||void 0===Xl?void 0:Xl.status)?s("employees.alerts.user_not_found",{defaultValue:"User not found."}):s("employees.alerts.user_search_error",{defaultValue:"Error when searching for user."}))}else alert(s("employees.alerts.enter_email",{defaultValue:"Please enter an email to search."}))},children:s("employees.form.find_user",{defaultValue:"Find User"})}),(0,ts.jsx)("button",{type:"submit",children:g?s("employees.form.submit_update",{defaultValue:"Update"}):s("employees.form.submit_add",{defaultValue:"Add"})}),g&&(0,ts.jsx)("button",{type:"button",onClick:()=>{v(null),m(null),p({name:"",email:""})},children:s("common.cancel",{defaultValue:"Cancel"})})]})]})]}),(0,ts.jsxs)("div",{className:"employee-list",children:[(0,ts.jsx)("h4",{children:s("employees.list.title",{defaultValue:"Existing Employees"})}),u.length>0?(0,ts.jsx)("ul",{children:u.map(e=>(0,ts.jsxs)("li",{children:[(0,ts.jsxs)("span",{children:[e.name," (",e.email,")"]}),(0,ts.jsx)("div",{className:"employee-actions",children:(0,ts.jsx)("button",{onClick:()=>(async e=>{if(window.confirm(s("employees.alerts.fire_confirm",{defaultValue:"Are you sure you want to fire this employee?"})))try{await r(`/api/Business/${n.businessId}/employees/${e}`),alert(s("employees.alerts.fired",{defaultValue:"Employee fired."}));const t=await o(`/api/Business/${n.businessId}/employees`);d(Array.isArray(t)?t:[])}catch(Xl){console.error("Fire Process failed:",Xl),alert(s("employees.alerts.fire_failed",{defaultValue:"Failed to fire employee."}))}})(e.userId),children:s("employees.actions.fire",{defaultValue:"Fire"})})})]},e.userId))}):(0,ts.jsx)("p",{children:s("employees.list.none",{defaultValue:"No employees found."})})]})]})]})}function ur(t){let{business:n}=t;const{t:s}=Me("changes"),{get:o,put:i}=Ni(),{token:r}=Si(),[a,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)([]),[p,f]=(0,e.useState)([]),[m,g]=(0,e.useState)([]),[v,y]=(0,e.useState)({});(0,e.useEffect)(()=>{if(null===n||void 0===n||!n.businessId||!r)return;let e=!1;return o(`/api/Business/${n.businessId}/employees`).then(t=>{e||f(t)}).catch(console.error),o(`/api/ClothingItem/business/${n.businessId}`).then(t=>{e||g(t)}).catch(console.error),()=>{e=!0}},[null===n||void 0===n?void 0:n.businessId,r]),(0,e.useEffect)(()=>{if(null===n||void 0===n||!n.businessId||!r)return;let e=!1;return l(!0),u(null),o(`/api/ProposedChanges/pending/${n.businessId}`).then(t=>{e||h(t)}).catch(t=>{console.error("Failed to load pending changes:",t),e||u(t)}).finally(()=>{e||l(!1)}),()=>{e=!0}},[null===n||void 0===n?void 0:n.businessId,r]);const _=async()=>{const e=await o(`/api/ProposedChanges/pending/${n.businessId}`);h(e)};if(a)return(0,ts.jsx)("div",{className:"pending-changes-panel",children:(0,ts.jsx)("p",{children:s("pending.loading",{defaultValue:"Loading pending changes\u2026"})})});if(c)return(0,ts.jsx)("div",{className:"pending-changes-panel",children:(0,ts.jsx)("p",{children:s("pending.error",{defaultValue:"Error loading changes."})})});if(0===d.length)return(0,ts.jsxs)("div",{className:"pending-changes-panel",children:[(0,ts.jsx)("h3",{children:s("pending.title",{defaultValue:"Pending Changes"})}),(0,ts.jsx)("p",{children:s("pending.empty",{defaultValue:"No pending changes."})})]});const b=(e,t)=>{let n={};try{n=JSON.parse(e)}catch{return(0,ts.jsx)("p",{children:s("pending.invalid_details",{defaultValue:"Invalid details"})})}const o={};Object.entries(n).forEach(e=>{let[t,n]=e;o[t.charAt(0).toLowerCase()+t.slice(1)]=n});const i=o.itemDto||o,r=m.find(e=>e.clothingItemId===t)||{},a=[{key:"name",label:s("pending.fields.name",{defaultValue:"Name"})},{key:"description",label:s("pending.fields.description",{defaultValue:"Description"})},{key:"price",label:s("pending.fields.price",{defaultValue:"Price"})},{key:"quantity",label:s("pending.fields.quantity",{defaultValue:"Quantity"})},{key:"clothingCategoryId",label:s("pending.fields.category",{defaultValue:"Category"})},{key:"brand",label:s("pending.fields.brand",{defaultValue:"Brand"})},{key:"model",label:s("pending.fields.model",{defaultValue:"Model"})},{key:"material",label:s("pending.fields.material",{defaultValue:"Material"})}].map(e=>{let{key:t,label:n}=e;const s=r[t],o=i[t];return null!=o&&String(s)!==String(o)?{label:n,oldVal:s,newVal:o}:null}).filter(Boolean);return a.length?(0,ts.jsxs)("table",{className:"diff-table",children:[(0,ts.jsx)("thead",{children:(0,ts.jsxs)("tr",{children:[(0,ts.jsx)("th",{children:s("pending.table.field",{defaultValue:"Field"})}),(0,ts.jsx)("th",{children:s("pending.table.current",{defaultValue:"Current"})}),(0,ts.jsx)("th",{children:s("pending.table.requested",{defaultValue:"Requested"})})]})}),(0,ts.jsx)("tbody",{children:a.map(e=>(0,ts.jsxs)("tr",{children:[(0,ts.jsx)("td",{children:e.label}),(0,ts.jsx)("td",{children:String(e.oldVal)}),(0,ts.jsx)("td",{children:String(e.newVal)})]},e.label))})]}):(0,ts.jsx)("p",{children:s("pending.no_field_changes",{defaultValue:"No field changes."})})};return(0,ts.jsxs)("div",{className:"pending-changes-panel",children:[(0,ts.jsx)("h3",{children:s("pending.title",{defaultValue:"Pending Changes"})}),(0,ts.jsx)("ul",{className:"pending-list",children:d.map(e=>{let t={};try{t=JSON.parse(e.changeDetails)}catch{}const n=t.itemDto||t,o=p.find(t=>t.userId===e.employeeId),r=v[e.proposedChangeId],a="approve"===r,l="reject"===r,c=a||l,u=s(`pending.operations.${e.operationType}`,{defaultValue:e.operationType});return(0,ts.jsxs)("li",{className:"pending-item",children:[(0,ts.jsx)("div",{className:"pending-item-header",children:(0,ts.jsx)("strong",{children:u})}),(0,ts.jsxs)("div",{className:"pending-item-meta",children:[(0,ts.jsxs)("small",{children:[(0,ts.jsxs)("strong",{children:[s("pending.meta.employee",{defaultValue:"Employee"}),":"]})," ",(null===o||void 0===o?void 0:o.name)||e.employeeId]}),(0,ts.jsx)("br",{}),(0,ts.jsxs)("small",{children:[(0,ts.jsxs)("strong",{children:[s("pending.meta.requested_at",{defaultValue:"Date and Time of the request"}),":"]})," ",new Date(e.createdAt).toLocaleString()]})]}),(0,ts.jsx)("div",{className:"change-details-container",children:"UpdatePhotos"===e.operationType?(0,ts.jsxs)("div",{className:"photo-update-grid",children:[n.profilePhotoUrl&&(0,ts.jsxs)("div",{className:"photo-item",children:[(0,ts.jsx)("span",{children:s("pending.photos.profile",{defaultValue:"Profile:"})}),(0,ts.jsx)("img",{src:n.profilePhotoUrl,className:"photo-preview",alt:s("pending.photos.profile_alt",{defaultValue:"Profile preview"})})]}),n.coverPhotoUrl&&(0,ts.jsxs)("div",{className:"photo-item",children:[(0,ts.jsx)("span",{children:s("pending.photos.cover",{defaultValue:"Cover:"})}),(0,ts.jsx)("img",{src:n.coverPhotoUrl,className:"photo-preview",alt:s("pending.photos.cover_alt",{defaultValue:"Cover preview"})})]})]}):b(e.changeDetails,e.clothingItemId)}),(0,ts.jsxs)("div",{className:"pending-item-actions",children:[(0,ts.jsx)("button",{onClick:()=>(async e=>{y(t=>({...t,[e]:"approve"}));try{await i(`/api/ProposedChanges/${e}?approve=true`),await _()}catch(Uc){console.error("Approve failed",Uc)}finally{y(t=>{const{[e]:n,...s}=t;return s})}})(e.proposedChangeId),disabled:c,className:a?"loading":"",children:a?s("pending.actions.approving",{defaultValue:"Approving\u2026"}):s("pending.actions.approve",{defaultValue:"Approve"})}),(0,ts.jsx)("button",{onClick:()=>(async e=>{y(t=>({...t,[e]:"reject"}));try{await i(`/api/ProposedChanges/${e}?approve=false`),await _()}catch(Uc){console.error("Reject failed",Uc)}finally{y(t=>{const{[e]:n,...s}=t;return s})}})(e.proposedChangeId),disabled:c,className:l?"loading danger":"danger",children:l?s("pending.actions.rejecting",{defaultValue:"Rejecting\u2026"}):s("pending.actions.reject",{defaultValue:"Reject"})})]})]},e.proposedChangeId)})})]})}function dr(t){let{business:n}=t;const{t:s}=Me("reservations"),{get:o,put:i}=Ni(),{token:r}=Si(),[a,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)([]),[p,f]=(0,e.useState)({id:null,type:null});(0,e.useEffect)(()=>{if(null===n||void 0===n||!n.businessId||!r)return;let e=!1;return l(!0),u(null),o(`/api/Reservation/business/${n.businessId}`).then(t=>{e||h(t)}).catch(t=>{console.error("Failed to load reservations:",t),e||u(t)}).finally(()=>{e||l(!1)}),()=>{e=!0}},[null===n||void 0===n?void 0:n.businessId,r]);const m=async()=>{const e=await o(`/api/Reservation/business/${n.businessId}`);h(e)},g=async(e,t)=>{try{f({id:e,type:"status"}),await i(`/api/Reservation/${e}/status`,{status:t}),await m()}catch(Xl){console.error("Error updating reservation status:",Xl),alert(s("reservations.alerts.status_failed",{defaultValue:"Failed to update reservation status."}))}finally{f({id:null,type:null})}};if(a)return(0,ts.jsx)("div",{className:"panel reservations-panel",children:(0,ts.jsx)("p",{children:s("reservations.loading",{defaultValue:"Loading reservations\u2026"})})});if(c)return(0,ts.jsx)("div",{className:"panel reservations-panel",children:(0,ts.jsx)("p",{children:s("reservations.error",{defaultValue:"Error loading reservations."})})});const v=d.filter(e=>"Confirmed"===e.status),y=d.filter(e=>"Pending"===e.status);return(0,ts.jsxs)("div",{className:"reservations-panel",children:[(0,ts.jsx)("h3",{children:s("reservations.title",{defaultValue:"Product Reservations"})}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h4",{children:s("reservations.sections.confirmed",{defaultValue:"Confirmed Reservations"})}),0===v.length?(0,ts.jsx)("p",{children:s("reservations.empty.approved",{defaultValue:"No approved reservations."})}):(0,ts.jsxs)("table",{className:"reservations-table",children:[(0,ts.jsx)("thead",{children:(0,ts.jsxs)("tr",{children:[(0,ts.jsx)("th",{children:s("reservations.table.id",{defaultValue:"ID"})}),(0,ts.jsx)("th",{children:s("reservations.table.product",{defaultValue:"Product"})}),(0,ts.jsx)("th",{children:s("reservations.table.customer",{defaultValue:"Customer"})}),(0,ts.jsx)("th",{children:s("reservations.table.created_at",{defaultValue:"Created At"})}),(0,ts.jsx)("th",{children:s("reservations.table.actions",{defaultValue:"Actions"})})]})}),(0,ts.jsx)("tbody",{children:v.map(e=>{const t=p.id===e.reservationId;return(0,ts.jsxs)("tr",{children:[(0,ts.jsx)("td",{children:e.reservationId}),(0,ts.jsx)("td",{children:e.productName}),(0,ts.jsx)("td",{children:e.customerName}),(0,ts.jsx)("td",{children:new Date(e.createdAt).toLocaleString()}),(0,ts.jsxs)("td",{children:[(0,ts.jsx)("button",{onClick:()=>(async e=>{try{f({id:e,type:"complete"}),await i(`/api/Reservation/${e}/complete`),await m()}catch(Xl){console.error("Error completing reservation:",Xl),alert(s("reservations.alerts.complete_failed",{defaultValue:"Failed to mark reservation completed."}))}finally{f({id:null,type:null})}})(e.reservationId),disabled:t,children:s("reservations.actions.mark_completed",{defaultValue:"Mark Completed"})})," ",(0,ts.jsx)("button",{className:"btn-no-show",onClick:()=>(async e=>{if(window.confirm(s("reservations.confirm.no_show",{defaultValue:"Mark as No Show and return 1 item to stock?"})))try{f({id:e,type:"no-show"}),await i(`/api/Reservation/${e}/no-show`),await m()}catch(Xl){console.error("Error marking reservation as no-show:",Xl),alert(s("reservations.alerts.no_show_failed",{defaultValue:"Failed to mark as No Show."}))}finally{f({id:null,type:null})}})(e.reservationId),disabled:t,title:s("reservations.actions.no_show_tooltip",{defaultValue:"Customer didn\u2019t show; return item to stock (+1)"}),children:s("reservations.actions.no_show",{defaultValue:"No Show"})})]})]},e.reservationId)})})]})]}),(0,ts.jsxs)("section",{style:{marginTop:"2rem"},children:[(0,ts.jsx)("h4",{children:s("reservations.sections.pending",{defaultValue:"Pending Reservations"})}),0===y.length?(0,ts.jsx)("p",{children:s("reservations.empty.pending",{defaultValue:"No pending reservations."})}):(0,ts.jsxs)("table",{className:"reservations-table",children:[(0,ts.jsx)("thead",{children:(0,ts.jsxs)("tr",{children:[(0,ts.jsx)("th",{children:s("reservations.table.id",{defaultValue:"ID"})}),(0,ts.jsx)("th",{children:s("reservations.table.product",{defaultValue:"Product"})}),(0,ts.jsx)("th",{children:s("reservations.table.customer",{defaultValue:"Customer"})}),(0,ts.jsx)("th",{children:s("reservations.table.created_at",{defaultValue:"Created At"})}),(0,ts.jsx)("th",{children:s("reservations.table.actions",{defaultValue:"Actions"})})]})}),(0,ts.jsx)("tbody",{children:y.map(e=>{const t=p.id===e.reservationId;return(0,ts.jsxs)("tr",{children:[(0,ts.jsx)("td",{children:e.reservationId}),(0,ts.jsx)("td",{children:e.productName}),(0,ts.jsx)("td",{children:e.customerName}),(0,ts.jsx)("td",{children:new Date(e.createdAt).toLocaleString()}),(0,ts.jsxs)("td",{children:[(0,ts.jsx)("button",{onClick:()=>g(e.reservationId,"Confirmed"),disabled:t,children:s("reservations.actions.approve",{defaultValue:"Approve"})})," ",(0,ts.jsx)("button",{onClick:()=>g(e.reservationId,"Cancelled"),disabled:t,children:s("reservations.actions.reject",{defaultValue:"Reject"})})]})]},e.reservationId)})})]})]})]})}function hr(t){let{business:n}=t;const{get:s}=Ni(),{token:o}=Si(),[i,r]=(0,e.useState)(!0),[a,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(1);if((0,e.useEffect)(()=>{if(null===n||void 0===n||!n.businessId||!o)return;let e=!1;return r(!0),u(null),s(`/api/Notification/business/${n.businessId}/history`).then(t=>{e||l(t)}).catch(t=>{console.error("Failed to load notification history:",t),e||u(t)}).finally(()=>{e||r(!1)}),()=>{e=!0}},[null===n||void 0===n?void 0:n.businessId,o]),(0,e.useEffect)(()=>{h(1)},[null===n||void 0===n?void 0:n.businessId,o]),i)return(0,ts.jsx)("div",{className:"notification-history-panel",children:(0,ts.jsx)("p",{children:"Loading notifications\u2026"})});if(c)return(0,ts.jsx)("div",{className:"notification-history-panel",children:(0,ts.jsx)("p",{children:"Error loading notifications."})});const p=a.length,f=20*(d-1),m=a.slice(f,f+20);return(0,ts.jsxs)("div",{className:"notification-history-panel",children:[(0,ts.jsx)("h3",{children:"Notification History"}),0===p?(0,ts.jsx)("p",{children:"No notifications ever sent."}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("ul",{className:"notification-list",children:m.map(e=>{var t;return(0,ts.jsxs)("li",{className:"notification-entry",children:[(0,ts.jsx)("p",{children:e.message}),(0,ts.jsx)("small",{children:new Date(e.createdAt).toLocaleString()})]},null!==(t=e.id)&&void 0!==t?t:e.notificationId)})}),(0,ts.jsx)(zi,{page:d,pageSize:20,totalCount:p,onPageChange:h,maxButtons:5})]})]})}function pr(t){let{businesses:n=[]}=t;const{t:s}=Me("myshops"),{get:o}=Ni(),[i,r]=(0,e.useState)(1),[a,l]=(0,e.useState)({}),c=(0,e.useRef)(a);(0,e.useEffect)(()=>{c.current=a},[a]);const u=Math.max(1,Math.ceil(n.length/12)),d=12*(i-1),h=n.slice(d,d+12);(0,e.useEffect)(()=>{i>u&&r(u)},[i,u]),(0,e.useEffect)(()=>{let e=!1;return h.filter(e=>void 0===c.current[e.businessId]).forEach(t=>{o(`/api/Business/${t.businessId}`).then(n=>{if(e)return;const s=n.coverPictureUrl||n.coverPhotoUrl||"";l(e=>void 0!==e[t.businessId]?e:{...e,[t.businessId]:s})}).catch(n=>{console.error(`Failed to load business ${t.businessId}:`,n),e||l(e=>void 0!==e[t.businessId]?e:{...e,[t.businessId]:""})})}),()=>{e=!0}},[h,o]);return(0,ts.jsxs)("div",{className:"my-shops-panel",children:[(0,ts.jsx)("h3",{children:s("myshops.title",{defaultValue:"My Shops"})}),0===n.length?(0,ts.jsx)("p",{className:"empty-state",children:s("myshops.empty",{defaultValue:"No shops to display."})}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("div",{className:"shop-grid",children:h.map(e=>{var t,n,o;const i=a[e.businessId]||"";return(0,ts.jsxs)(Kn,{to:`/shop/${null!==(n=e.slug)&&void 0!==n?n:e.businessId}`,className:"shop-card",children:[(0,ts.jsxs)("div",{className:"shop-card-image",children:[i?(0,ts.jsx)("img",{src:i,alt:s("myshops.alt_cover",{name:e.name,defaultValue:"{{name}} cover"})}):(0,ts.jsx)("div",{className:"shop-card-placeholder",children:s("myshops.placeholder",{defaultValue:"No Image"})}),(0,ts.jsxs)("div",{className:"shop-card-image-overlay",children:[(0,ts.jsxs)("span",{className:"fav-pill",title:s("myshops.favorites",{defaultValue:"Favorites"}),children:[(0,ts.jsx)("svg",{className:"fav-icon",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ts.jsx)("path",{d:"M12 21s-6.716-4.315-9.428-7.027A6.5 6.5 0 1 1 12 5.07a6.5 6.5 0 1 1 9.428 8.903C18.716 16.685 12 21 12 21z"})}),null!==(o=e.favoritesCount)&&void 0!==o?o:0]}),e.name]})]}),e.description&&(0,ts.jsx)("div",{className:"shop-card-content",children:(0,ts.jsx)("p",{className:"shop-card-desc",children:e.description})})]},null!==(t=e.slug)&&void 0!==t?t:e.businessId)})}),u>1&&(0,ts.jsxs)("div",{className:"pagination",children:[(0,ts.jsx)("button",{onClick:()=>r(e=>Math.max(e-1,1)),disabled:1===i,"aria-label":s("myshops.pagination.prev",{defaultValue:"Prev"}),children:s("myshops.pagination.prev",{defaultValue:"Prev"})}),Array.from({length:u},(e,t)=>(0,ts.jsx)("button",{className:i===t+1?"active":"",onClick:()=>r(t+1),"aria-current":i===t+1?"page":void 0,children:t+1},t+1)),(0,ts.jsx)("button",{onClick:()=>r(e=>Math.min(e+1,u)),disabled:i===u,"aria-label":s("myshops.pagination.next",{defaultValue:"Next"}),children:s("myshops.pagination.next",{defaultValue:"Next"})})]})]})]})}function fr(t){let{business:n}=t;const{t:s}=Me("deletebusiness"),{del:o}=Ni(),i=_n(),[r,a]=(0,e.useState)(!1),l=(0,e.useCallback)(async()=>{if(null===n||void 0===n||!n.businessId)return;if(window.confirm(s("delete.confirm",{defaultValue:"This action cannot be undone. Are you sure you want to delete this business?"})))try{a(!0),await o(`/api/Business/${n.businessId}`),alert(s("delete.success",{defaultValue:"Business deleted successfully."})),i("/")}catch(Xl){console.error("Error deleting business:",Xl),alert(s("delete.error",{defaultValue:"Failed to delete business. Please try again."}))}finally{a(!1)}},[null===n||void 0===n?void 0:n.businessId,o,i,s]);return n?(0,ts.jsxs)("div",{className:"delete-business-panel",children:[(0,ts.jsx)("h3",{children:s("delete.title",{defaultValue:"Delete Business"})}),(0,ts.jsxs)("p",{className:"warning-text",role:"alert",children:[(0,ts.jsx)("strong",{children:s("delete.warning_label",{defaultValue:"Warning:"})})," ",s("delete.warning_body",{defaultValue:"Deleting a business is permanent and cannot be undone."})]}),(0,ts.jsx)("button",{className:"delete-button",onClick:l,disabled:r,"aria-busy":r||void 0,children:r?s("delete.button_deleting",{defaultValue:"Deleting\u2026"}):s("delete.button",{defaultValue:"Delete Business"})})]}):(0,ts.jsx)("div",{className:"panel delete-business-panel",children:(0,ts.jsx)("p",{children:s("delete.no_business",{defaultValue:"Please select a business first."})})})}const mr=new Set(["owner","employee"]);function gr(){const t=_n(),{t:n}=Me("settings"),{businesses:s=[],loading:o,error:i}=function(){const{get:t}=Ni(),{token:n}=Si(),[s,o]=(0,e.useState)([]),[i,r]=(0,e.useState)(!0),[a,l]=(0,e.useState)(null);return(0,e.useEffect)(()=>{if(!n)return;let e=!0;return r(!0),t("/api/Business/my/businesses").then(t=>{e&&o(t)}).catch(t=>{console.error("Failed to load businesses:",t),e&&l(t)}).finally(()=>{e&&r(!1)}),()=>{e=!1}},[n]),{businesses:s,loading:i,error:a}}(),{role:r,userInfo:a}=Si(),l=(0,e.useMemo)(()=>Array.isArray(s)?s:[],[s]),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)("BusinessInfo");(0,e.useEffect)(()=>{null==r||mr.has(r)||t("/unauthorized",{replace:!0})},[r,t]),(0,e.useEffect)(()=>{!o&&l.length>0&&!c&&u(l[0])},[o,l,c]),(0,e.useEffect)(()=>{if(!c)return;var e;l.some(e=>(null===e||void 0===e?void 0:e.businessId)===(null===c||void 0===c?void 0:c.businessId)||(null===e||void 0===e?void 0:e.id)===(null===c||void 0===c?void 0:c.id))||u(null!==(e=l[0])&&void 0!==e?e:null)},[l,c]);const p=(0,e.useCallback)(e=>{u(e)},[]),f=(0,e.useCallback)(e=>{h(e)},[]);if(o)return(0,ts.jsxs)("div",{className:"loading-overlay","aria-live":"polite","aria-busy":"true",children:[(0,ts.jsxs)("div",{className:"dots",children:[(0,ts.jsx)("div",{className:"dot"}),(0,ts.jsx)("div",{className:"dot"}),(0,ts.jsx)("div",{className:"dot"})]}),(0,ts.jsx)("p",{className:"loading-hint",children:n("states.loading")})]});if(i)return(0,ts.jsx)("div",{className:"settings-component",children:(0,ts.jsx)("div",{className:"settings-layout",children:(0,ts.jsx)("div",{className:"settings-content",children:(0,ts.jsx)("div",{className:"panel",children:(0,ts.jsxs)("div",{className:"error-state",children:[(0,ts.jsxs)("h3",{children:[(0,ts.jsx)("span",{children:"\u26a0\ufe0f"})," ",n("states.error_title")]}),(0,ts.jsx)("p",{children:n("states.error_body")}),(0,ts.jsx)("button",{onClick:()=>window.location.reload(),children:n("actions.refresh")})]})})})})});if(!o&&0===l.length)return(0,ts.jsx)("div",{className:"settings-component",children:(0,ts.jsx)("div",{className:"settings-layout",children:(0,ts.jsx)("div",{className:"settings-content",children:(0,ts.jsx)("div",{className:"panel",children:(0,ts.jsxs)("div",{className:"empty-state",children:[(0,ts.jsxs)("h3",{children:["\ud83c\udfea ",n("states.no_business_title")]}),(0,ts.jsx)("p",{children:n("states.no_business_body")}),(0,ts.jsx)("button",{onClick:()=>t("/become-owner"),className:"btn-primary",children:n("actions.create_first_shop")}),(0,ts.jsx)("div",{style:{marginTop:8},children:(0,ts.jsx)("button",{onClick:()=>t("/"),className:"btn-secondary",children:n("actions.back_home")})})]})})})})});const m={BusinessInfo:(0,ts.jsx)(Ai,{business:c}),Products:(0,ts.jsx)(Oi,{business:c}),Sales:(0,ts.jsx)(Fi,{business:c}),Categories:(0,ts.jsx)(Hi,{business:c}),Photos:(0,ts.jsx)(lr,{business:c}),Employees:(0,ts.jsx)(cr,{business:c}),PendingChanges:(0,ts.jsx)(ur,{business:c}),Reservations:(0,ts.jsx)(dr,{business:c}),Notifications:(0,ts.jsx)(hr,{business:c}),MyShops:(0,ts.jsx)(pr,{businesses:l}),DeleteBusiness:(0,ts.jsx)(fr,{business:c})};return(0,ts.jsx)(ci,{businesses:l,selectedBusiness:c,onSelectBusiness:p,selectedPanel:d,onSelectPanel:f,userRole:r,ownerName:null===a||void 0===a?void 0:a.firstName,children:m[d]})}function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach(function(t){_r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function br(e,t){return br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},br(e,t)}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wr(e,t){for(;e;){if(e.classList&&e.classList.contains(t))return!0;e=e.parentElement}return!1}function jr(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}}function Sr(e,t,n){return"https://tile.openstreetmap.org/"+n+"/"+e+"/"+t+".png"}var kr=function(){return!0},Nr=function(e,t){return(e+180)/360*Math.pow(2,t)},Cr=function(e,t){return(1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t)};function Er(e,t){return e/Math.pow(2,t)*360-180}function Pr(e,t){var n=Math.PI-2*Math.PI*e/Math.pow(2,t);return 180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}function Tr(e,t){var n=jr(e);return[t.clientX-n.x,t.clientY-n.y]}var Lr=[Pr(Math.pow(2,10),10),Pr(0,10),Er(0,10),Er(Math.pow(2,10),10)],Mr="undefined"!==typeof window,Ir=Mr&&window.performance&&window.performance.now?function(){return window.performance.now()}:function(){var e=(new Date).getTime();return function(){return(new Date).getTime()-e}}(),Ar=function(e){return Mr?(window.requestAnimationFrame||window.setTimeout)(e):(e((new Date).getTime()),null)},zr=function(e){return!(!Mr||!e)&&(window.cancelAnimationFrame||window.clearTimeout)(e)};function Or(e,t,n,s,o){return e&&0!==e.length?e.map(function(e){return t(n,s,o,e)+(1===e?"":" "+e+"x")}).join(", "):""}var Rr=function(t){var n,s;function o(e){var n,s,o,i,r,a,l,c,u;return _r(xr(u=t.call(this,e)||this),"_containerRef",void 0),_r(xr(u),"_mousePosition",void 0),_r(xr(u),"_loadTracker",void 0),_r(xr(u),"_dragStart",null),_r(xr(u),"_mouseDown",!1),_r(xr(u),"_moveEvents",[]),_r(xr(u),"_lastClick",null),_r(xr(u),"_lastTap",null),_r(xr(u),"_lastWheel",null),_r(xr(u),"_touchStartPixel",null),_r(xr(u),"_touchStartMidPoint",null),_r(xr(u),"_touchStartDistance",null),_r(xr(u),"_secondTouchEnd",null),_r(xr(u),"_warningClearTimeout",null),_r(xr(u),"_isAnimating",!1),_r(xr(u),"_animationStart",null),_r(xr(u),"_animationEnd",null),_r(xr(u),"_zoomStart",null),_r(xr(u),"_centerTarget",null),_r(xr(u),"_zoomTarget",null),_r(xr(u),"_zoomAround",null),_r(xr(u),"_animFrame",null),_r(xr(u),"_boundsSynced",!1),_r(xr(u),"_minMaxCache",null),_r(xr(u),"_lastZoom",void 0),_r(xr(u),"_lastCenter",void 0),_r(xr(u),"_centerStart",void 0),_r(xr(u),"_resizeObserver",null),_r(xr(u),"updateWidthHeight",function(){if(u._containerRef){var e=u._containerRef.getBoundingClientRect();if(e&&e.width>0&&e.height>0)return u.setState({width:e.width,height:e.height}),!0}return!1}),_r(xr(u),"wa",function(){var e;return(e=window).addEventListener.apply(e,arguments)}),_r(xr(u),"wr",function(){var e;return(e=window).removeEventListener.apply(e,arguments)}),_r(xr(u),"bindMouseEvents",function(){u.wa("mousedown",u.handleMouseDown),u.wa("mouseup",u.handleMouseUp),u.wa("mousemove",u.handleMouseMove)}),_r(xr(u),"bindTouchEvents",function(){u.wa("touchstart",u.handleTouchStart,{passive:!1}),u.wa("touchmove",u.handleTouchMove,{passive:!1}),u.wa("touchend",u.handleTouchEnd,{passive:!1})}),_r(xr(u),"unbindMouseEvents",function(){u.wr("mousedown",u.handleMouseDown),u.wr("mouseup",u.handleMouseUp),u.wr("mousemove",u.handleMouseMove)}),_r(xr(u),"unbindTouchEvents",function(){u.wr("touchstart",u.handleTouchStart),u.wr("touchmove",u.handleTouchMove),u.wr("touchend",u.handleTouchEnd)}),_r(xr(u),"bindResizeEvent",function(){u.wa("resize",u.updateWidthHeight)}),_r(xr(u),"unbindResizeEvent",function(){u.wr("resize",u.updateWidthHeight)}),_r(xr(u),"bindWheelEvent",function(){u._containerRef&&u._containerRef.addEventListener("wheel",u.handleWheel,{passive:!1})}),_r(xr(u),"unbindWheelEvent",function(){u._containerRef&&u._containerRef.removeEventListener("wheel",u.handleWheel)}),_r(xr(u),"setCenterZoomTarget",function(e,t,n,s,o){if(void 0===n&&(n=!1),void 0===s&&(s=null),void 0===o&&(o=300),u.props.animate&&(!n||u.distanceInScreens(e,t,u.state.center,u.state.zoom)<=u.props.animateMaxScreens)){if(u._isAnimating){zr(u._animFrame);var i=u.animationStep(Ir()),r=i.centerStep,a=i.zoomStep;u._centerStart=r,u._zoomStart=a}else u._isAnimating=!0,u._centerStart=u.limitCenterAtZoom([u._lastCenter[0],u._lastCenter[1]],u._lastZoom),u._zoomStart=u._lastZoom,u.onAnimationStart();u._animationStart=Ir(),u._animationEnd=u._animationStart+o,s?(u._zoomAround=s,u._centerTarget=u.calculateZoomCenter(u._lastCenter,s,u._lastZoom,t)):(u._zoomAround=null,u._centerTarget=e),u._zoomTarget=t,u._animFrame=Ar(u.animate)}else if(u.stopAnimating(),s){var l=u.calculateZoomCenter(u._lastCenter,s,u._lastZoom,t);u.setCenterZoom(l,t,n)}else u.setCenterZoom(e||u.state.center,t,n)}),_r(xr(u),"setCenterZoomForChildren",function(e,t){u.setCenterZoomTarget(e||u.state.center,t||u.state.zoom,!0)}),_r(xr(u),"distanceInScreens",function(e,t,n,s){var o=u.state,i=o.width,r=o.height,a=u.latLngToPixel(n,n,s),l=u.latLngToPixel(e,n,s),c=u.latLngToPixel(n,n,t),d=u.latLngToPixel(e,n,t),h=(Math.abs(a[0]-l[0])+Math.abs(c[0]-d[0]))/2/i,p=(Math.abs(a[1]-l[1])+Math.abs(c[1]-d[1]))/2/r;return Math.sqrt(h*h+p*p)}),_r(xr(u),"animationStep",function(e){if(!u._animationEnd||!u._animationStart||!u._zoomTarget||!u._zoomStart||!u._centerStart||!u._centerTarget)return{centerStep:u.state.center,zoomStep:u.state.zoom};var t=u._animationEnd-u._animationStart,n=function(e){return e*(2-e)}(Math.max(e-u._animationStart,0)/t),s=(u._zoomTarget-u._zoomStart)*n,o=u._zoomStart+s;return u._zoomAround?{centerStep:u.calculateZoomCenter(u._centerStart,u._zoomAround,u._zoomStart,o),zoomStep:o}:{centerStep:[u._centerStart[0]+(u._centerTarget[0]-u._centerStart[0])*n,u._centerStart[1]+(u._centerTarget[1]-u._centerStart[1])*n],zoomStep:o}}),_r(xr(u),"animate",function(e){if(!u._animationEnd||e>=u._animationEnd)u._isAnimating=!1,u.setCenterZoom(u._centerTarget,u._zoomTarget,!0),u.onAnimationStop();else{var t=u.animationStep(e),n=t.centerStep,s=t.zoomStep;u.setCenterZoom(n,s),u._animFrame=Ar(u.animate)}}),_r(xr(u),"stopAnimating",function(){u._isAnimating&&(u._isAnimating=!1,u.onAnimationStop(),zr(u._animFrame))}),_r(xr(u),"limitCenterAtZoom",function(e,t){var n=u.getBoundsMinMax(t||u.state.zoom);return[Math.max(Math.min(!e||isNaN(e[0])?u.state.center[0]:e[0],n[1]),n[0]),Math.max(Math.min(!e||isNaN(e[1])?u.state.center[1]:e[1],n[3]),n[2])]}),_r(xr(u),"onAnimationStart",function(){u.props.onAnimationStart&&u.props.onAnimationStart()}),_r(xr(u),"onAnimationStop",function(){u.props.onAnimationStop&&u.props.onAnimationStop()}),_r(xr(u),"setCenterZoom",function(e,t,n){void 0===n&&(n=!1);var s=u.limitCenterAtZoom(e,t);if(t&&Math.round(u.state.zoom)!==Math.round(t)){var o=u.tileValues(u.state),i=u.tileValues({center:s,zoom:t,width:u.state.width,height:u.state.height}),r=u.state.oldTiles;u.setState({oldTiles:r.filter(function(e){return e.roundedZoom!==o.roundedZoom}).concat(o)},kr);for(var a={},l=i.tileMinX;l<=i.tileMaxX;l++)for(var c=i.tileMinY;c<=i.tileMaxY;c++){a[l+"-"+c+"-"+i.roundedZoom]=!1}u._loadTracker=a}u.setState({center:s,zoom:t||u.state.zoom},kr);var d=u.props.zoom?u.props.zoom:u._lastZoom,h=u.props.center?u.props.center:u._lastCenter;t&&(n||Math.abs(d-t)>.001||Math.abs(h[0]-s[0])>1e-5||Math.abs(h[1]-s[1])>1e-5)&&(u._lastZoom=t,u._lastCenter=[].concat(s),u.syncToProps(s,t))}),_r(xr(u),"getBoundsMinMax",function(e){if("center"===u.props.limitBounds)return Lr;var t=u.state,n=t.width,s=t.height;if(u._minMaxCache&&u._minMaxCache[0]===e&&u._minMaxCache[1]===n&&u._minMaxCache[2]===s)return u._minMaxCache[3];var o=256*Math.pow(2,e),i=n>o?0:Er(n/512,e),r=s>o?0:Pr(Math.pow(2,e)-s/512,e),a=n>o?0:Er(Math.pow(2,e)-n/512,e),l=[r,s>o?0:Pr(s/512,e),i,a];return u._minMaxCache=[e,n,s,l],l}),_r(xr(u),"tileLoaded",function(e){u._loadTracker&&e in u._loadTracker&&(u._loadTracker[e]=!0,0===Object.values(u._loadTracker).filter(function(e){return!e}).length&&u.setState({oldTiles:[]},kr))}),_r(xr(u),"handleTouchStart",function(e){if(u._containerRef&&(!e.target||!wr(e.target,"pigeon-drag-block")))if(1===e.touches.length){var t=e.touches[0],n=Tr(u._containerRef,t);if(u.coordsInside(n)&&(u._touchStartPixel=[n],!u.props.twoFingerDrag))if(u.stopAnimating(),u._lastTap&&Ir()-u._lastTap<300){e.preventDefault();var s=u.pixelToLatLng(u._touchStartPixel[0]);u.setCenterZoomTarget(null,Math.max(u.props.minZoom,Math.min(u.state.zoom+1,u.props.maxZoom)),!1,s)}else u._lastTap=Ir(),u.trackMoveEvents(n)}else if(2===e.touches.length&&u._touchStartPixel){e.preventDefault(),u.stopTrackingMoveEvents(),(u.state.pixelDelta||u.state.zoomDelta)&&u.sendDeltaChange();var o=Tr(u._containerRef,e.touches[0]),i=Tr(u._containerRef,e.touches[1]);u._touchStartPixel=[o,i],u._touchStartMidPoint=[(o[0]+i[0])/2,(o[1]+i[1])/2],u._touchStartDistance=Math.sqrt(Math.pow(o[0]-i[0],2)+Math.pow(o[1]-i[1],2))}}),_r(xr(u),"handleTouchMove",function(e){if(u._containerRef){if(1===e.touches.length&&u._touchStartPixel){var t=e.touches[0],n=Tr(u._containerRef,t);u.props.twoFingerDrag?u.coordsInside(n)&&u.showWarning("fingers"):(e.preventDefault(),u.trackMoveEvents(n),u.setState({pixelDelta:[n[0]-u._touchStartPixel[0][0],n[1]-u._touchStartPixel[0][1]]},kr))}else if(2===e.touches.length&&u._touchStartPixel&&u._touchStartMidPoint&&u._touchStartDistance){var s=u.state,o=s.width,i=s.height,r=s.zoom;e.preventDefault();var a=Tr(u._containerRef,e.touches[0]),l=Tr(u._containerRef,e.touches[1]),c=[(a[0]+l[0])/2,(a[1]+l[1])/2],d=[c[0]-u._touchStartMidPoint[0],c[1]-u._touchStartMidPoint[1]],h=Math.sqrt(Math.pow(a[0]-l[0],2)+Math.pow(a[1]-l[1],2)),p=Math.max(u.props.minZoom,Math.min(u.props.maxZoom,r+Math.log2(h/u._touchStartDistance)))-r,f=Math.pow(2,p),m=[(o/2-c[0])*(f-1),(i/2-c[1])*(f-1)];u.setState({zoomDelta:p,pixelDelta:[m[0]+d[0]*f,m[1]+d[1]*f]},kr)}}else u._touchStartPixel=null}),_r(xr(u),"handleTouchEnd",function(e){if(u._containerRef){if(u._touchStartPixel){var t=u.props,n=t.zoomSnap,s=t.twoFingerDrag,o=t.minZoom,i=t.maxZoom,r=u.state.zoomDelta,a=u.sendDeltaChange(),l=a.center,c=a.zoom;if(0===e.touches.length)if(s)u.clearWarning();else{var d=u._touchStartPixel[0],h=Tr(u._containerRef,e.changedTouches[0]);(Math.abs(d[0]-h[0])>2||Math.abs(d[1]-h[1])>2)&&(!u._secondTouchEnd||Ir()-u._secondTouchEnd>300)&&(e.preventDefault(),u.throwAfterMoving(h,l,c)),u._touchStartPixel=null,u._secondTouchEnd=null}else if(1===e.touches.length){e.preventDefault();var p=Tr(u._containerRef,e.touches[0]);if(u._secondTouchEnd=Ir(),u._touchStartPixel=[p],u.trackMoveEvents(p),n){var f,m=u._touchStartMidPoint?u.pixelToLatLng(u._touchStartMidPoint):u.state.center;f=s&&Math.round(u.state.zoom)===Math.round(u.state.zoom+r)?Math.round(u.state.zoom):r>0?Math.ceil(u.state.zoom):Math.floor(u.state.zoom);var g=Math.max(o,Math.min(f,i));u.setCenterZoomTarget(m,g,!1,m)}}}}else u._touchStartPixel=null}),_r(xr(u),"handleMouseDown",function(e){if(u._containerRef){var t=Tr(u._containerRef,e);if(0===e.button&&(!e.target||!wr(e.target,"pigeon-drag-block"))&&u.coordsInside(t))if(u.stopAnimating(),e.preventDefault(),u._lastClick&&Ir()-u._lastClick<300){if(!wr(e.target,"pigeon-click-block")){var n=u.pixelToLatLng(u._mousePosition||t);u.setCenterZoomTarget(null,Math.max(u.props.minZoom,Math.min(u.state.zoom+1,u.props.maxZoom)),!1,n)}}else u._lastClick=Ir(),u._mouseDown=!0,u._dragStart=t,u.trackMoveEvents(t)}}),_r(xr(u),"handleMouseMove",function(e){u._containerRef&&(u._mousePosition=Tr(u._containerRef,e),u._mouseDown&&u._dragStart&&(u.trackMoveEvents(u._mousePosition),u.setState({pixelDelta:[u._mousePosition[0]-u._dragStart[0],u._mousePosition[1]-u._dragStart[1]]},kr)))}),_r(xr(u),"handleMouseUp",function(e){if(u._containerRef){var t=u.state.pixelDelta;if(u._mouseDown){u._mouseDown=!1;var n=Tr(u._containerRef,e);if(!u.props.onClick||e.target&&wr(e.target,"pigeon-click-block")||t&&!(Math.abs(t[0])+Math.abs(t[1])<=2)){var s=u.sendDeltaChange(),o=s.center,i=s.zoom;u.throwAfterMoving(n,o,i)}else{var r=u.pixelToLatLng(n);u.props.onClick({event:e,latLng:r,pixel:n}),u.setState({pixelDelta:void 0},kr)}}}else u._mouseDown=!1}),_r(xr(u),"stopTrackingMoveEvents",function(){u._moveEvents=[]}),_r(xr(u),"trackMoveEvents",function(e){var t=Ir();(0===u._moveEvents.length||t-u._moveEvents[u._moveEvents.length-1].timestamp>40)&&(u._moveEvents.push({timestamp:t,coords:e}),u._moveEvents.length>2&&u._moveEvents.shift())}),_r(xr(u),"throwAfterMoving",function(e,t,n){var s=u.state,o=s.width,i=s.height,r=u.props.animate,a=Ir(),l=u._moveEvents.shift();if(l&&r){var c=Math.max(a-l.timestamp,1),d=[(e[0]-l.coords[0])/c*120,(e[1]-l.coords[1])/c*120],h=Math.sqrt(d[0]*d[0]+d[1]*d[1]);if(h>40){var p=1500*h/Math.sqrt(o*o+i*i),f=Er(Nr(t[1],n)-d[0]/256,n),m=Pr(Cr(t[0],n)-d[1]/256,n);u.setCenterZoomTarget([m,f],n,!1,null,p)}}u.stopTrackingMoveEvents()}),_r(xr(u),"sendDeltaChange",function(){var e=u.state,t=e.center,n=e.zoom,s=e.pixelDelta,o=e.zoomDelta,i=t[0],r=t[1];return(s||0!==o)&&(r=Er(Nr(t[1],n+o)-(s?s[0]/256:0),n+o),i=Pr(Cr(t[0],n+o)-(s?s[1]/256:0),n+o),u.setCenterZoom([i,r],n+o)),u.setState({pixelDelta:void 0,zoomDelta:0},kr),{center:u.limitCenterAtZoom([i,r],n+o),zoom:n+o}}),_r(xr(u),"getBounds",function(e,t){void 0===e&&(e=u.state.center),void 0===t&&(t=u.zoomPlusDelta());var n=u.state,s=n.width,o=n.height;return{ne:u.pixelToLatLng([s-1,0],e,t),sw:u.pixelToLatLng([0,o-1],e,t)}}),_r(xr(u),"syncToProps",function(e,t){void 0===e&&(e=u.state.center),void 0===t&&(t=u.state.zoom);var n=u.props.onBoundsChanged;n&&(n({center:e,zoom:t,bounds:u.getBounds(e,t),initial:!u._boundsSynced}),u._boundsSynced=!0)}),_r(xr(u),"handleWheel",function(e){var t=u.props,n=t.mouseEvents,s=t.metaWheelZoom,o=t.zoomSnap,i=t.animate;if(n)if(!s||e.metaKey||e.ctrlKey){e.preventDefault();var r=-e.deltaY/150;if(!o&&u._zoomTarget){var a=u._zoomTarget-u.state.zoom;u.zoomAroundMouse(r+a,e)}else i?u.zoomAroundMouse(r,e):(!u._lastWheel||Ir()-u._lastWheel>300)&&(u._lastWheel=Ir(),u.zoomAroundMouse(r,e))}else u.showWarning("wheel")}),_r(xr(u),"showWarning",function(e){u.state.showWarning&&u.state.warningType===e||u.setState({showWarning:!0,warningType:e}),u._warningClearTimeout&&window.clearTimeout(u._warningClearTimeout),u._warningClearTimeout=window.setTimeout(u.clearWarning,300)}),_r(xr(u),"clearWarning",function(){u.state.showWarning&&u.setState({showWarning:!1})}),_r(xr(u),"zoomAroundMouse",function(e,t){if(u._containerRef){var n=u.state.zoom,s=u.props,o=s.minZoom,i=s.maxZoom,r=s.zoomSnap;if(u._mousePosition=Tr(u._containerRef,t),!(!u._mousePosition||n===o&&e<0||n===i&&e>0)){var a=u.pixelToLatLng(u._mousePosition),l=n+e;r&&(l=e<0?Math.floor(l):Math.ceil(l)),l=Math.max(o,Math.min(l,i)),u.setCenterZoomTarget(null,l,!1,a)}}}),_r(xr(u),"zoomPlusDelta",function(){return u.state.zoom+u.state.zoomDelta}),_r(xr(u),"pixelToLatLng",function(e,t,n){void 0===t&&(t=u.state.center),void 0===n&&(n=u.zoomPlusDelta());var s=u.state,o=s.width,i=s.height,r=s.pixelDelta,a=[(e[0]-o/2-(r?r[0]:0))/256,(e[1]-i/2-(r?r[1]:0))/256],l=Nr(t[1],n)+a[0],c=Cr(t[0],n)+a[1];return[Math.max(Lr[0],Math.min(Lr[1],Pr(c,n))),Math.max(Lr[2],Math.min(Lr[3],Er(l,n)))]}),_r(xr(u),"latLngToPixel",function(e,t,n){void 0===t&&(t=u.state.center),void 0===n&&(n=u.zoomPlusDelta());var s=u.state,o=s.width,i=s.height,r=s.pixelDelta,a=Nr(t[1],n),l=Cr(t[0],n),c=Nr(e[1],n),d=Cr(e[0],n);return[256*(c-a)+o/2+(r?r[0]:0),256*(d-l)+i/2+(r?r[1]:0)]}),_r(xr(u),"calculateZoomCenter",function(e,t,n,s){var o=u.state,i=o.width,r=o.height,a=u.latLngToPixel(t,e,n),l=u.latLngToPixel(t,e,s),c=u.pixelToLatLng([i/2+l[0]-a[0],r/2+l[1]-a[1]],e,s);return u.limitCenterAtZoom(c,s)}),_r(xr(u),"setRef",function(e){u._containerRef=e}),u.syncToProps=function(e,t){var n;return function(){for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];var r=this;clearTimeout(n),n=setTimeout(function(){return e.apply(r,o)},t)}}(u.syncToProps,60),u._lastZoom=null!==(n=null!==(s=e.defaultZoom)&&void 0!==s?s:e.zoom)&&void 0!==n?n:14,u._lastCenter=null!==(o=null!==(i=e.defaultCenter)&&void 0!==i?i:e.center)&&void 0!==o?o:[0,0],u.state={zoom:u._lastZoom,center:u._lastCenter,width:null!==(r=null!==(a=e.width)&&void 0!==a?a:e.defaultWidth)&&void 0!==r?r:-1,height:null!==(l=null!==(c=e.height)&&void 0!==c?c:e.defaultHeight)&&void 0!==l?l:-1,zoomDelta:0,pixelDelta:void 0,oldTiles:[],showWarning:!1,warningType:void 0},u}s=t,(n=o).prototype=Object.create(s.prototype),n.prototype.constructor=n,br(n,s);var i=o.prototype;return i.componentDidMount=function(){var e=this;this.props.mouseEvents&&this.bindMouseEvents(),this.props.touchEvents&&this.bindTouchEvents(),this.props.width&&this.props.height||(this.updateWidthHeight()||Ar(this.updateWidthHeight),this.bindResizeEvent()),this.bindWheelEvent(),this.syncToProps(),"undefined"!==typeof window.ResizeObserver&&(this._resizeObserver=new window.ResizeObserver(function(){e.updateWidthHeight()}),this._resizeObserver.observe(this._containerRef))},i.componentWillUnmount=function(){this.props.mouseEvents&&this.unbindMouseEvents(),this.props.touchEvents&&this.unbindTouchEvents(),this.unbindWheelEvent(),this.props.width&&this.props.height||this.unbindResizeEvent(),this._resizeObserver&&this._resizeObserver.disconnect()},i.componentDidUpdate=function(e){var t;if(this.props.mouseEvents!==e.mouseEvents&&(this.props.mouseEvents?this.bindMouseEvents():this.unbindMouseEvents()),this.props.touchEvents!==e.touchEvents&&(this.props.touchEvents?this.bindTouchEvents():this.unbindTouchEvents()),this.props.width&&this.props.width!==e.width&&this.setState({width:this.props.width}),this.props.height&&this.props.height!==e.height&&this.setState({height:this.props.height}),(this.props.center||this.props.zoom)&&(this.props.center&&(this.props.center[0]!==(null===e||void 0===e||null===(t=e.center)||void 0===t?void 0:t[0])||this.props.center[1]!==e.center[1])||this.props.zoom!==e.zoom)){var n=this._isAnimating?this._centerTarget:this.state.center,s=this._isAnimating?this._zoomTarget:this.state.zoom;if(n&&s){var o,i,r=null!==(o=this.props.center)&&void 0!==o?o:n,a=null!==(i=this.props.zoom)&&void 0!==i?i:s;(Math.abs(a-s)>.001||Math.abs(r[0]-n[0])>1e-4||Math.abs(r[1]-n[1])>1e-4)&&this.setCenterZoomTarget(r,a,!0)}}},i.coordsInside=function(e){var t=this.state,n=t.width,s=t.height;if(e[0]<0||e[1]<0||e[0]>=n||e[1]>=s)return!1;var o=this._containerRef;if(o){var i=jr(o),r=document.elementFromPoint(e[0]+i.x,e[1]+i.y);return o===r||o.contains(r)}return!1},i.tileValues=function(e){var t=e.center,n=e.zoom,s=e.pixelDelta,o=e.zoomDelta,i=e.width,r=e.height,a=Math.round(n+(o||0)),l=n+(o||0)-a,c=Math.pow(2,l),u=i/c,d=r/c,h=Nr(t[1],a)-(s?s[0]/256/c:0),p=Cr(t[0],a)-(s?s[1]/256/c:0),f=u/2/256,m=d/2/256;return{tileMinX:Math.floor(h-f),tileMaxX:Math.floor(h+f),tileMinY:Math.floor(p-m),tileMaxY:Math.floor(p+m),tileCenterX:h,tileCenterY:p,roundedZoom:a,zoomDelta:o||0,scaleWidth:u,scaleHeight:d,scale:c}},i.renderTiles=function(){for(var t=this,n=this.state,s=n.oldTiles,o=n.width,i=n.height,r=this.props.dprs,a=this.props.provider||Sr,l=this.tileValues(this.state),c=l.tileMinX,u=l.tileMaxX,d=l.tileMinY,h=l.tileMaxY,p=l.tileCenterX,f=l.tileCenterY,m=l.roundedZoom,g=l.scaleWidth,v=l.scaleHeight,y=l.scale,_=[],b=0;b<s.length;b++){var x=s[b],w=x.roundedZoom-m;if(!(Math.abs(w)>4||0===w))for(var j=1/Math.pow(2,w),S=256*-(c-x.tileMinX*j),k=256*-(d-x.tileMinY*j),N=Math.max(x.tileMinX,0),C=Math.max(x.tileMinY,0),E=Math.min(x.tileMaxX,Math.pow(2,x.roundedZoom)-1),P=Math.min(x.tileMaxY,Math.pow(2,x.roundedZoom)-1),T=N;T<=E;T++)for(var L=C;L<=P;L++)_.push({key:T+"-"+L+"-"+x.roundedZoom,url:a(T,L,x.roundedZoom),srcSet:Or(r,a,T,L,x.roundedZoom),left:S+256*(T-x.tileMinX)*j,top:k+256*(L-x.tileMinY)*j,width:256*j,height:256*j,active:!1})}for(var M=Math.max(c,0),I=Math.max(d,0),A=Math.min(u,Math.pow(2,m)-1),z=Math.min(h,Math.pow(2,m)-1),O=M;O<=A;O++)for(var R=I;R<=z;R++)_.push({key:O+"-"+R+"-"+m,url:a(O,R,m),srcSet:Or(r,a,O,R,m),left:256*(O-c),top:256*(R-d),width:256,height:256,active:!0});var D={width:g,height:v,position:"absolute",top:"calc((100% - "+i+"px) / 2)",left:"calc((100% - "+o+"px) / 2)",overflow:"hidden",willChange:"transform",transform:"scale("+y+", "+y+")",transformOrigin:"top left"},V=this.props.boxClassname||"pigeon-tiles-box",B={position:"absolute",width:256*(u-c+1),height:256*(h-d+1),willChange:"transform",transform:"translate("+-(256*(p-c)-g/2)+"px, "+-(256*(f-d)-v/2)+"px)"},$=this.props.tileComponent;return e.createElement("div",{style:D,className:V},e.createElement("div",{className:"pigeon-tiles",style:B},_.map(function(n){return e.createElement($,{key:n.key,tile:n,tileLoaded:function(){return t.tileLoaded(n.key)}})})))},i.renderOverlays=function(){var t=this,n=this.state,s=n.width,o=n.height,i=n.center,r={bounds:this.getBounds(),zoom:this.zoomPlusDelta(),center:i,width:s,height:o},a=e.Children.map(this.props.children,function(n){if(!n)return null;if(!e.isValidElement(n))return n;var s=n.props,o=s.anchor,a=s.position,l=s.offset,c=t.latLngToPixel(o||a||i);return e.cloneElement(n,{left:c[0]-(l?l[0]:0),top:c[1]-(l?l[1]:0),latLngToPixel:t.latLngToPixel,pixelToLatLng:t.pixelToLatLng,setCenterZoom:t.setCenterZoomForChildren,mapProps:t.props,mapState:r})}),l={position:"absolute",width:s,height:o,top:"calc((100% - "+o+"px) / 2)",left:"calc((100% - "+s+"px) / 2)"};return e.createElement("div",{className:"pigeon-overlays",style:l},a)},i.renderAttribution=function(){var t=this.props,n=t.attribution,s=t.attributionPrefix;if(!1===n)return null;var o={color:"#0078A8",textDecoration:"none"};return e.createElement("div",{key:"attr",className:"pigeon-attribution",style:{position:"absolute",bottom:0,right:0,fontSize:"11px",padding:"2px 5px",background:"rgba(255, 255, 255, 0.7)",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",color:"#333"}},!1===s?null:e.createElement("span",null,s||e.createElement("a",{href:"https://pigeon-maps.js.org/",style:o,target:"_blank",rel:"noreferrer noopener"},"Pigeon")," | "),n||e.createElement("span",null," \xa9 ",e.createElement("a",{href:"https://www.openstreetmap.org/copyright",style:o,target:"_blank",rel:"noreferrer noopener"},"OpenStreetMap")," contributors"))},i.renderWarning=function(){var t=this.props,n=t.metaWheelZoom,s=t.metaWheelZoomWarning,o=t.twoFingerDrag,i=t.twoFingerDragWarning,r=t.warningZIndex,a=this.state,l=a.showWarning,c=a.warningType,u=a.width,d=a.height;if(n&&s||o&&i){var h={position:"absolute",top:0,left:0,width:u,height:d,overflow:"hidden",pointerEvents:"none",opacity:l?100:0,transition:"opacity 300ms",background:"rgba(0,0,0,0.5)",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",fontSize:22,fontFamily:'"Arial", sans-serif',textAlign:"center",zIndex:r},p="undefined"!==typeof window&&window.navigator&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?"\u2318":"ctrl",f="fingers"===c?i:s;return e.createElement("div",{className:"pigeon-overlay-warning",style:h},f.replace("META",p))}return null},i.render=function(){var t=this.props,n=t.touchEvents,s=t.twoFingerDrag,o=this.state,i=o.width,r=o.height,a={width:this.props.width?i:"100%",height:this.props.height?r:"100%",position:"relative",display:"inline-block",overflow:"hidden",background:"#dddddd",touchAction:n?s?"pan-x pan-y":"none":"auto"},l=!(!i||!r);return e.createElement("div",{style:a,ref:this.setRef,dir:"ltr"},l&&this.renderTiles(),l&&this.renderOverlays(),l&&this.renderAttribution(),l&&this.renderWarning())},o}(e.Component);function Dr(t){var n="undefined"!==typeof t.width?t.width:"undefined"!==typeof t.height?29*t.height/34:29,s="undefined"!==typeof t.height?t.height:"undefined"!==typeof t.width?34*t.width/29:34,o=(0,e.useState)(t.hover||!1),i=o[0],r=o[1],a="undefined"===typeof t.hover?i:t.hover,l=t.color||"#93C0D0",c=function(e){return{event:e,anchor:t.anchor,payload:t.payload}};return e.createElement("div",{style:yr({position:"absolute",transform:"translate("+(t.left-n/2)+"px, "+(t.top-(s-1))+"px)",filter:a?"drop-shadow(0 0 4px rgba(0, 0, 0, .3))":"",pointerEvents:"none",cursor:"pointer"},t.style||{}),className:t.className?t.className+" pigeon-click-block":"pigeon-click-block",onClick:t.onClick?function(e){return t.onClick(c(e))}:null,onContextMenu:t.onContextMenu?function(e){return t.onContextMenu(c(e))}:null,onMouseOver:function(e){t.onMouseOver&&t.onMouseOver(c(e)),r(!0)},onMouseOut:function(e){t.onMouseOut&&t.onMouseOut(c(e)),r(!1)}},t.children||e.createElement("svg",{width:n,height:s,viewBox:"0 0 61 71",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("g",{style:{pointerEvents:"auto"}},e.createElement("path",{d:"M52 31.5C52 36.8395 49.18 42.314 45.0107 47.6094C40.8672 52.872 35.619 57.678 31.1763 61.6922C30.7916 62.0398 30.2084 62.0398 29.8237 61.6922C25.381 57.678 20.1328 52.872 15.9893 47.6094C11.82 42.314 9 36.8395 9 31.5C9 18.5709 18.6801 9 30.5 9C42.3199 9 52 18.5709 52 31.5Z",fill:l,stroke:"white",strokeWidth:"4"}),e.createElement("circle",{cx:"30.5",cy:"30.5",r:"8.5",fill:"white",opacity:a?.98:.6}))))}function Vr(t){return e.createElement("div",{style:yr({position:"absolute",transform:"translate("+t.left+"px, "+t.top+"px)"},t.style||{}),className:t.className?t.className+" pigeon-click-block":"pigeon-click-block"},t.children)}_r(Rr,"defaultProps",{animate:!0,metaWheelZoom:!1,metaWheelZoomWarning:"Use META + wheel to zoom!",twoFingerDrag:!1,twoFingerDragWarning:"Use two fingers to move the map",zoomSnap:!0,mouseEvents:!0,touchEvents:!0,warningZIndex:100,animateMaxScreens:5,minZoom:1,maxZoom:18,limitBounds:"center",dprs:[],tileComponent:function(t){var n=t.tile,s=t.tileLoaded;return e.createElement("img",{src:n.url,srcSet:n.srcSet,width:n.width,height:n.height,loading:"lazy",onLoad:s,alt:"",style:{position:"absolute",left:n.left,top:n.top,willChange:"transform",transformOrigin:"top left",opacity:1}})}});const Br="http://77.242.26.150:8000/api",$r=()=>{const e=(()=>{const e=localStorage.getItem("token")||localStorage.getItem("authToken");if(!e||""===e.trim())return null;try{const t=JSON.parse(e);return t.token||t}catch{return e}})(),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t};async function Fr(){if("geolocation"in navigator&&(window.isSecureContext||"localhost"===window.location.hostname))return new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4})});const e=await fetch("https://ipapi.co/json/");if(!e.ok)throw new Error("IP lookup failed");const t=await e.json();return{coords:{latitude:t.latitude,longitude:t.longitude}}}function Ur(){const[t,n]=(0,e.useState)(null),[s,o]=(0,e.useState)([]),[i,r]=(0,e.useState)([50.879,4.6997]),[a,l]=(0,e.useState)(12),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[p,f]=(0,e.useState)(!0),[m,g]=(0,e.useState)(null),[v,y]=(0,e.useState)("requesting"),[_,b]=(0,e.useState)(""),[x,w]=(0,e.useState)("");(0,e.useEffect)(()=>{y("requesting"),Fr().then(e=>{let{coords:{latitude:t,longitude:s}}=e;n({lat:t,lng:s}),r([t,s]),l(15),h(!0),y("found"),g(null)}).catch(e=>{console.error("Location error:",e),g(e.message),y("error")})},[]),(0,e.useEffect)(()=>{(async()=>{f(!0);try{const e=await fetch(`${Br}/Business/paginated?pageNumber=1&pageSize=100`,{headers:$r()});if(!e.ok)throw new Error("Could not load shop list");const{items:t}=await e.json(),n=await Promise.all(t.map(async e=>{const t=await fetch(`${Br}/Business/${e.businessId}`,{headers:$r()});if(!t.ok)throw new Error(`Shop ${e.businessId} failed`);const n=await t.json(),[s="",o=""]=(n.location||"").split(",");return{id:n.businessId,name:n.name,slug:n.slug||(i=n.name,i.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),address:n.address||"",lat:parseFloat(s.trim()),lng:parseFloat(o.trim()),profilePictureUrl:n.profilePictureUrl};var i}));o(n.filter(e=>!isNaN(e.lat)&&!isNaN(e.lng)))}catch(Uc){console.error(Uc),g("Failed to load shop locations")}finally{f(!1)}})()},[]),(0,e.useEffect)(()=>{if(!p&&s.length>0){const e=s[0];e.address?b(e.address):Hr(e.lat,e.lng).then(b)}},[p,s]),(0,e.useEffect)(()=>{c&&(c.address?w(c.address):Hr(c.lat,c.lng).then(w))},[c]),(0,e.useEffect)(()=>{if(!d&&s.length>0&&"requesting"!==v){const{lat:e,lng:t}=s[0];r([e,t]),l(13)}},[d,s,v]);return p?(0,ts.jsxs)("div",{className:"map-container centered",children:[(0,ts.jsx)("div",{className:"loading-spinner"}),(0,ts.jsx)("p",{children:"Loading map and shops..."}),"requesting"===v&&(0,ts.jsx)("p",{className:"location-status",children:"Requesting your location..."})]}):(0,ts.jsxs)("div",{className:"map-container fullMap",children:[m&&(0,ts.jsxs)("div",{className:"location-error-banner",children:[(0,ts.jsxs)("span",{children:["\u26a0\ufe0f ",m]}),(0,ts.jsx)("button",{onClick:()=>{y("requesting"),g(null),Fr().then(e=>{let{coords:{latitude:t,longitude:s}}=e;n({lat:t,lng:s}),r([t,s]),l(15),h(!0),y("found")}).catch(e=>{console.error("Location retry error:",e),g(e.message),y("error")})},className:"retry-location-btn",children:"Try Again"})]}),(0,ts.jsxs)("div",{className:"location-on-map",children:[(0,ts.jsx)("h2",{children:"Location on Map"}),c?x||"Loading address\u2026":_||"Loading address\u2026"]}),(0,ts.jsxs)(Rr,{center:i,zoom:a,onBoundsChanged:e=>{let{center:t,zoom:n}=e;r(t),l(n)},className:"custom-map",children:[t&&(0,ts.jsx)(Dr,{width:60,anchor:[t.lat,t.lng],color:"#2563eb"}),s.map(e=>(0,ts.jsx)(Dr,{width:40,anchor:[e.lat,e.lng],color:"#dc2626",onClick:()=>(e=>u(e))(e)},e.id)),c&&(0,ts.jsx)(Vr,{anchor:[c.lat,c.lng],offset:[12,30],children:(0,ts.jsxs)("div",{className:"overlay-container",children:[(0,ts.jsx)("button",{className:"close-overlay",onClick:()=>u(null),children:"\u2715"}),c.profilePictureUrl&&(0,ts.jsx)("img",{src:c.profilePictureUrl,alt:c.name,className:"overlay-image"}),(0,ts.jsx)("h4",{children:c.name}),(0,ts.jsxs)("p",{children:[(0,ts.jsx)("strong",{children:"Address:"})," ",x||"Loading address\u2026"]}),(0,ts.jsxs)("div",{className:"overlay-actions",children:[(0,ts.jsx)(Kn,{to:`/shop/${c.slug}`,className:"overlay-button primary",children:"View Shop"}),(0,ts.jsx)("button",{className:"overlay-button secondary",onClick:()=>{return e=c.lat,t=c.lng,window.open(`https://www.google.com/maps/dir/?api=1&destination=${e},${t}`,"_blank");var e,t},children:"Get Directions"})]})]})})]}),(0,ts.jsxs)("div",{className:"map-controls",children:[t&&(0,ts.jsx)("button",{className:"control-btn location-btn",onClick:()=>{r([t.lat,t.lng]),l(16)},title:"Go to my location",children:"\ud83d\udccd"}),(0,ts.jsx)("button",{className:"control-btn zoom-in-btn",onClick:()=>l(e=>Math.min(e+1,18)),title:"Zoom in",children:"+"}),(0,ts.jsx)("button",{className:"control-btn zoom-out-btn",onClick:()=>l(e=>Math.max(e-1,1)),title:"Zoom out",children:"\u2212"})]}),(0,ts.jsxs)("div",{className:"location-info-panel",children:[(0,ts.jsxs)("div",{className:"info-item",children:[(0,ts.jsx)("span",{className:"info-label",children:"Shops:"}),(0,ts.jsx)("span",{className:"info-value",children:s.length})]}),t&&(0,ts.jsxs)("div",{className:"info-item",children:[(0,ts.jsx)("span",{className:"info-label",children:"Your Location:"}),(0,ts.jsx)("span",{className:"info-value",children:"Found \u2713"})]}),!d&&"requesting"!==v&&(0,ts.jsxs)("div",{className:"info-item",children:[(0,ts.jsx)("span",{className:"info-label",children:"Location:"}),(0,ts.jsx)("span",{className:"info-value error",children:"Not available"})]})]})]})}async function Hr(e,t){try{const n=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${e}&lon=${t}`);if(!n.ok)throw new Error("Geocode error");return(await n.json()).display_name||""}catch{return""}}function Wr(){return(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("br",{}),(0,ts.jsx)(Ur,{})]})}function Zr(e){return Array.isArray?Array.isArray(e):"[object Array]"===Qr(e)}function qr(e){return"string"===typeof e}function Kr(e){return"number"===typeof e}function Jr(e){return!0===e||!1===e||function(e){return Yr(e)&&null!==e}(e)&&"[object Boolean]"==Qr(e)}function Yr(e){return"object"===typeof e}function Xr(e){return void 0!==e&&null!==e}function Gr(e){return!e.trim().length}function Qr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ea=Object.prototype.hasOwnProperty;class ta{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let n=na(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function na(e){let t=null,n=null,s=null,o=1,i=null;if(qr(e)||Zr(e))s=e,t=sa(e),n=oa(e);else{if(!ea.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const r=e.name;if(s=r,ea.call(e,"weight")&&(o=e.weight,o<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(r));t=sa(r),n=oa(r),i=e.getFn}return{path:t,id:n,weight:o,src:s,getFn:i}}function sa(e){return Zr(e)?e:e.split(".")}function oa(e){return Zr(e)?e.join("."):e}const ia={useExtendedSearch:!1,getFn:function(e,t){let n=[],s=!1;const o=(e,t,i)=>{if(Xr(e))if(t[i]){const r=e[t[i]];if(!Xr(r))return;if(i===t.length-1&&(qr(r)||Kr(r)||Jr(r)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(r));else if(Zr(r)){s=!0;for(let e=0,n=r.length;e<n;e+=1)o(r[e],t,i+1)}else t.length&&o(r,t,i+1)}else n.push(e)};return o(e,qr(t)?t.split("."):t,0),s?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ra={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...ia};const aa=/[^ ]+/g;class la{constructor(){let{getFn:e=ra.getFn,fieldNormWeight:t=ra.fieldNormWeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=new Map,s=Math.pow(10,t);return{get(t){const o=t.match(aa).length;if(n.has(o))return n.get(o);const i=1/Math.pow(o,.5*e),r=parseFloat(Math.round(i*s)/s);return n.set(o,r),r},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,qr(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();qr(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Xr(e)||Gr(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((t,s)=>{let o=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Xr(o))if(Zr(o)){let e=[];const t=[{nestedArrIndex:-1,value:o}];for(;t.length;){const{nestedArrIndex:n,value:s}=t.pop();if(Xr(s))if(qr(s)&&!Gr(s)){let t={v:s,i:n,n:this.norm.get(s)};e.push(t)}else Zr(s)&&s.forEach((e,n)=>{t.push({nestedArrIndex:n,value:e})})}n.$[s]=e}else if(qr(o)&&!Gr(o)){let e={v:o,n:this.norm.get(o)};n.$[s]=e}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function ca(e,t){let{getFn:n=ra.getFn,fieldNormWeight:s=ra.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new la({getFn:n,fieldNormWeight:s});return o.setKeys(e.map(na)),o.setSources(t),o.create(),o}function ua(e){let{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:o=ra.distance,ignoreLocation:i=ra.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t/e.length;if(i)return r;const a=Math.abs(s-n);return o?r+a/o:a?1:r}const da=32;function ha(e,t,n){let{location:s=ra.location,distance:o=ra.distance,threshold:i=ra.threshold,findAllMatches:r=ra.findAllMatches,minMatchCharLength:a=ra.minMatchCharLength,includeMatches:l=ra.includeMatches,ignoreLocation:c=ra.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>da)throw new Error(`Pattern length exceeds max of ${da}.`);const u=t.length,d=e.length,h=Math.max(0,Math.min(s,d));let p=i,f=h;const m=a>1||l,g=m?Array(d):[];let v;for(;(v=e.indexOf(t,f))>-1;){let e=ua(t,{currentLocation:v,expectedLocation:h,distance:o,ignoreLocation:c});if(p=Math.min(e,p),f=v+u,m){let e=0;for(;e<u;)g[v+e]=1,e+=1}}f=-1;let y=[],_=1,b=u+d;const x=1<<u-1;for(let j=0;j<u;j+=1){let s=0,i=b;for(;s<i;){ua(t,{errors:j,currentLocation:h+i,expectedLocation:h,distance:o,ignoreLocation:c})<=p?s=i:b=i,i=Math.floor((b-s)/2+s)}b=i;let a=Math.max(1,h-i+1),l=r?d:Math.min(h+i,d)+u,v=Array(l+2);v[l+1]=(1<<j)-1;for(let r=l;r>=a;r-=1){let s=r-1,i=n[e.charAt(s)];if(m&&(g[s]=+!!i),v[r]=(v[r+1]<<1|1)&i,j&&(v[r]|=(y[r+1]|y[r])<<1|1|y[r+1]),v[r]&x&&(_=ua(t,{errors:j,currentLocation:s,expectedLocation:h,distance:o,ignoreLocation:c}),_<=p)){if(p=_,f=s,f<=h)break;a=Math.max(1,2*h-f)}}if(ua(t,{errors:j+1,currentLocation:h,expectedLocation:h,distance:o,ignoreLocation:c})>p)break;y=v}const w={isMatch:f>=0,score:Math.max(.001,_)};if(m){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ra.minMatchCharLength,n=[],s=-1,o=-1,i=0;for(let r=e.length;i<r;i+=1){let r=e[i];r&&-1===s?s=i:r||-1===s||(o=i-1,o-s+1>=t&&n.push([s,o]),s=-1)}return e[i-1]&&i-s>=t&&n.push([s,i-1]),n}(g,a);e.length?l&&(w.indices=e):w.isMatch=!1}return w}function pa(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<s-n-1}return t}const fa=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class ma{constructor(e){let{location:t=ra.location,threshold:n=ra.threshold,distance:s=ra.distance,includeMatches:o=ra.includeMatches,findAllMatches:i=ra.findAllMatches,minMatchCharLength:r=ra.minMatchCharLength,isCaseSensitive:a=ra.isCaseSensitive,ignoreDiacritics:l=ra.ignoreDiacritics,ignoreLocation:c=ra.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options={location:t,threshold:n,distance:s,includeMatches:o,findAllMatches:i,minMatchCharLength:r,isCaseSensitive:a,ignoreDiacritics:l,ignoreLocation:c},e=a?e:e.toLowerCase(),e=l?fa(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const u=(e,t)=>{this.chunks.push({pattern:e,alphabet:pa(e),startIndex:t})},d=this.pattern.length;if(d>da){let e=0;const t=d%da,n=d-t;for(;e<n;)u(this.pattern.substr(e,da),e),e+=da;if(t){const e=d-da;u(this.pattern.substr(e),e)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:n,includeMatches:s}=this.options;if(e=t?e:e.toLowerCase(),e=n?fa(e):e,this.pattern===e){let t={isMatch:!0,score:0};return s&&(t.indices=[[0,e.length-1]]),t}const{location:o,distance:i,threshold:r,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],d=0,h=!1;this.chunks.forEach(t=>{let{pattern:n,alphabet:p,startIndex:f}=t;const{isMatch:m,score:g,indices:v}=ha(e,n,p,{location:o+f,distance:i,threshold:r,findAllMatches:a,minMatchCharLength:l,includeMatches:s,ignoreLocation:c});m&&(h=!0),d+=g,m&&v&&(u=[...u,...v])});let p={isMatch:h,score:h?d/this.chunks.length:1};return h&&s&&(p.indices=u),p}}class ga{constructor(e){this.pattern=e}static isMultiMatch(e){return va(e,this.multiRegex)}static isSingleMatch(e){return va(e,this.singleRegex)}search(){}}function va(e,t){const n=e.match(t);return n?n[1]:null}class ya extends ga{constructor(e){let{location:t=ra.location,threshold:n=ra.threshold,distance:s=ra.distance,includeMatches:o=ra.includeMatches,findAllMatches:i=ra.findAllMatches,minMatchCharLength:r=ra.minMatchCharLength,isCaseSensitive:a=ra.isCaseSensitive,ignoreDiacritics:l=ra.ignoreDiacritics,ignoreLocation:c=ra.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._bitapSearch=new ma(e,{location:t,threshold:n,distance:s,includeMatches:o,findAllMatches:i,minMatchCharLength:r,isCaseSensitive:a,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class _a extends ga{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const s=[],o=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+o,s.push([t,n-1]);const i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}const ba=[class extends ga{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},_a,class extends ga{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends ga{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends ga{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends ga{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends ga{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},ya],xa=ba.length,wa=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const ja=new Set([ya.type,_a.type]);class Sa{constructor(e){let{isCaseSensitive:t=ra.isCaseSensitive,ignoreDiacritics:n=ra.ignoreDiacritics,includeMatches:s=ra.includeMatches,minMatchCharLength:o=ra.minMatchCharLength,ignoreLocation:i=ra.ignoreLocation,findAllMatches:r=ra.findAllMatches,location:a=ra.location,threshold:l=ra.threshold,distance:c=ra.distance}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:n,includeMatches:s,minMatchCharLength:o,findAllMatches:r,ignoreLocation:i,location:a,threshold:l,distance:c},e=t?e:e.toLowerCase(),e=n?fa(e):e,this.pattern=e,this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map(e=>{let n=e.trim().split(wa).filter(e=>e&&!!e.trim()),s=[];for(let o=0,i=n.length;o<i;o+=1){const e=n[o];let i=!1,r=-1;for(;!i&&++r<xa;){const n=ba[r];let o=n.isMultiMatch(e);o&&(s.push(new n(o,t)),i=!0)}if(!i)for(r=-1;++r<xa;){const n=ba[r];let o=n.isSingleMatch(e);if(o){s.push(new n(o,t));break}}}return s})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:s,ignoreDiacritics:o}=this.options;e=s?e:e.toLowerCase(),e=o?fa(e):e;let i=0,r=[],a=0;for(let l=0,c=t.length;l<c;l+=1){const s=t[l];r.length=0,i=0;for(let t=0,o=s.length;t<o;t+=1){const o=s[t],{isMatch:l,indices:c,score:u}=o.search(e);if(!l){a=0,i=0,r.length=0;break}if(i+=1,a+=u,n){const e=o.constructor.type;ja.has(e)?r=[...r,...c]:r.push(c)}}if(i){let e={isMatch:!0,score:a/i};return n&&(e.indices=r),e}}return{isMatch:!1,score:1}}}const ka=[];function Na(e,t){for(let n=0,s=ka.length;n<s;n+=1){let s=ka[n];if(s.condition(e,t))return new s(e,t)}return new ma(e,t)}const Ca="$and",Ea="$or",Pa="$path",Ta="$val",La=e=>!(!e[Ca]&&!e[Ea]),Ma=e=>({[Ca]:Object.keys(e).map(t=>({[t]:e[t]}))});function Ia(e,t){let{auto:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e=>{let o=Object.keys(e);const i=(e=>!!e[Pa])(e);if(!i&&o.length>1&&!La(e))return s(Ma(e));if((e=>!Zr(e)&&Yr(e)&&!La(e))(e)){const s=i?e[Pa]:o[0],r=i?e[Ta]:e[s];if(!qr(r))throw new Error((e=>`Invalid value for key ${e}`)(s));const a={keyId:oa(s),pattern:r};return n&&(a.searcher=Na(r,t)),a}let r={children:[],operator:o[0]};return o.forEach(t=>{const n=e[t];Zr(n)&&n.forEach(e=>{r.children.push(s(e))})}),r};return La(e)||(e=Ma(e)),s(e)}function Aa(e,t){const n=e.matches;t.matches=[],Xr(n)&&n.forEach(e=>{if(!Xr(e.indices)||!e.indices.length)return;const{indices:n,value:s}=e;let o={indices:n,value:s};e.key&&(o.key=e.key.src),e.idx>-1&&(o.refIndex=e.idx),t.matches.push(o)})}function za(e,t){t.score=e.score}class Oa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.options={...ra,...t},this.options.useExtendedSearch,this._keyStore=new ta(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof la))throw new Error("Incorrect 'index' type");this._myIndex=t||ca(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Xr(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const t=[];for(let n=0,s=this._docs.length;n<s;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,s-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeMatches:n,includeScore:s,shouldSort:o,sortFn:i,ignoreFieldNorm:r}=this.options;let a=qr(e)?qr(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){let{ignoreFieldNorm:n=ra.ignoreFieldNorm}=t;e.forEach(e=>{let t=1;e.matches.forEach(e=>{let{key:s,norm:o,score:i}=e;const r=s?s.weight:null;t*=Math.pow(0===i&&r?Number.EPSILON:i,(r||1)*(n?1:o))}),e.score=t})}(a,{ignoreFieldNorm:r}),o&&a.sort(i),Kr(t)&&t>-1&&(a=a.slice(0,t)),function(e,t){let{includeMatches:n=ra.includeMatches,includeScore:s=ra.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=[];return n&&o.push(Aa),s&&o.push(za),e.map(e=>{const{idx:n}=e,s={item:t[n],refIndex:n};return o.length&&o.forEach(t=>{t(e,s)}),s})}(a,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(e){const t=Na(e,this.options),{records:n}=this._myIndex,s=[];return n.forEach(e=>{let{v:n,i:o,n:i}=e;if(!Xr(n))return;const{isMatch:r,score:a,indices:l}=t.searchIn(n);r&&s.push({item:n,idx:o,matches:[{score:a,value:n,norm:i,indices:l}]})}),s}_searchLogical(e){const t=Ia(e,this.options),n=(e,t,s)=>{if(!e.children){const{keyId:n,searcher:o}=e,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:o});return i&&i.length?[{idx:s,item:t,matches:i}]:[]}const o=[];for(let i=0,r=e.children.length;i<r;i+=1){const r=e.children[i],a=n(r,t,s);if(a.length)o.push(...a);else if(e.operator===Ca)return[]}return o},s=this._myIndex.records,o={},i=[];return s.forEach(e=>{let{$:s,i:r}=e;if(Xr(s)){let e=n(t,s,r);e.length&&(o[r]||(o[r]={idx:r,item:s,matches:[]},i.push(o[r])),e.forEach(e=>{let{matches:t}=e;o[r].matches.push(...t)}))}}),i}_searchObjectList(e){const t=Na(e,this.options),{keys:n,records:s}=this._myIndex,o=[];return s.forEach(e=>{let{$:s,i:i}=e;if(!Xr(s))return;let r=[];n.forEach((e,n)=>{r.push(...this._findMatches({key:e,value:s[n],searcher:t}))}),r.length&&o.push({idx:i,item:s,matches:r})}),o}_findMatches(e){let{key:t,value:n,searcher:s}=e;if(!Xr(n))return[];let o=[];if(Zr(n))n.forEach(e=>{let{v:n,i:i,n:r}=e;if(!Xr(n))return;const{isMatch:a,score:l,indices:c}=s.searchIn(n);a&&o.push({score:l,key:t,value:n,idx:i,norm:r,indices:c})});else{const{v:e,n:i}=n,{isMatch:r,score:a,indices:l}=s.searchIn(e);r&&o.push({score:a,key:t,value:e,norm:i,indices:l})}return o}}Oa.version="7.1.0",Oa.createIndex=ca,Oa.parseIndex=function(e){let{getFn:t=ra.getFn,fieldNormWeight:n=ra.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{keys:s,records:o}=e,i=new la({getFn:t,fieldNormWeight:n});return i.setKeys(s),i.setIndexRecords(o),i},Oa.config=ra,Oa.parseQuery=Ia,function(){ka.push(...arguments)}(Sa);const Ra="http://77.242.26.150:8000/api";const Da=["XXXS","XXS","XS","S","M","L","XL","XXL","XXXL","XXXXL","4XL","5XL","6XL"],Va=e=>String(e).trim().toUpperCase().replace(/\s+/g,"");function Ba(e){if(!e)return"";const t=e.size||e.Size||e.sizeLabel||e.sizeName||e.dimension||e.Dimension;if(t&&"string"===typeof t)return t.trim();const n=e.sizes||e.Sizes||e.availableSizes||e.AvailableSizes||e.sizeOptions||e.SizeOptions;if(Array.isArray(n)){const e=n.map(String).map(e=>e.trim()).filter(Boolean);if(e.length)return e.join("/")}if("string"===typeof n){const e=n.split(/[,\|/]+/).map(e=>e.trim()).filter(Boolean);if(e.length)return e.join("/")}const s=e.sizeMap||e.availability||e.Availability||e.stockBySize||e.StockBySize;if(s&&"object"===typeof s&&!Array.isArray(s)){const e=Object.keys(s).map(e=>String(e).trim()).filter(Boolean);if(e.length)return e.join("/")}const o=e.variants||e.Variants||e.options||e.Options;if(Array.isArray(o)){const e=Array.from(new Set(o.map(e=>(null===e||void 0===e?void 0:e.size)||(null===e||void 0===e?void 0:e.Size)||(null===e||void 0===e?void 0:e.option)||(null===e||void 0===e?void 0:e.Option)).map(e=>null==e?"":String(e).trim()).filter(Boolean)));if(e.length)return e.join("/")}return""}function $a(){const{t:t}=Me("searchbar"),n=_n(),[s,o]=(0,e.useState)(""),[i,r]=(0,e.useState)([]),[a,l]=(0,e.useState)([]),[c,u]=(0,e.useState)([]),[d,h]=(0,e.useState)([]),[p,f]=(0,e.useState)(null),[m,g]=(0,e.useState)(()=>"undefined"!==typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);(0,e.useEffect)(()=>{if(!window.matchMedia)return;const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>g(e.matches);return e.addEventListener?e.addEventListener("change",t):e.addListener&&e.addListener(t),()=>{e.removeEventListener?e.removeEventListener("change",t):e.removeListener&&e.removeListener(t)}},[]);(0,e.useRef)(null);(0,e.useEffect)(()=>{(async()=>{const e=function(){const e=localStorage.getItem("token");if(!e)return null;try{var t;return null!==(t=JSON.parse(e).token)&&void 0!==t?t:e}catch{return e}}();if(!e)return;try{const t=e.split(".")[1],n=JSON.parse(window.atob(t));f(n.userId||n.id||n.sub)}catch(Xl){console.error("Failed to decode token:",Xl)}const t={Authorization:`Bearer ${e}`};try{const[e,n,s]=await Promise.all([fetch(`${Ra}/Business`,{headers:t}),fetch(`${Ra}/ClothingCategory/all`,{headers:t}),fetch(`${Ra}/User/all`,{headers:t})]),o=await e.json(),i=await n.json(),a=await s.json(),c=await Promise.all(o.map(async e=>{const n=await fetch(`${Ra}/ClothingItem/business/${e.businessId}`,{headers:t}),s=await n.json();return{id:e.businessId,slug:e.slug||(o=e.name,o.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),name:e.name,logoUrl:(e.profilePictureUrl||"").trim(),address:e.address,phoneNumber:e.businessPhoneNumber,NIPT:e.nipt,description:e.description,clothingItems:s.map(e=>{var t;const n=Ba(e),s=function(e){const t=new Set,n=e=>{const n=Va(e);n&&(Da.includes(n)||/^[0-9]{1,3}(\.[0-9])?$/.test(n))&&t.add(n)},s=Ba(e);s&&s.split(/[,\|/ ]+/).map(e=>e.trim()).filter(Boolean).forEach(n),[e.sizes,e.Sizes,e.availableSizes,e.AvailableSizes,e.sizeOptions,e.SizeOptions].filter(Boolean).forEach(e=>{Array.isArray(e)?e.forEach(n):"string"===typeof e&&e.split(/[,\|/ ]+/).forEach(n)}),[e.sizeMap,e.availability,e.Availability,e.stockBySize,e.StockBySize].filter(Boolean).forEach(e=>{e&&"object"===typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(n)});const o=e.variants||e.Variants||e.options||e.Options;return Array.isArray(o)&&o.forEach(e=>n((null===e||void 0===e?void 0:e.size)||(null===e||void 0===e?void 0:e.Size)||(null===e||void 0===e?void 0:e.option)||(null===e||void 0===e?void 0:e.Option))),Array.from(t)}(e);return{id:e.clothingItemId,name:e.name,brand:e.brand,model:e.model,price:e.price,category:e.category,description:e.description,imageUrl:(null===(t=e.pictureUrls)||void 0===t?void 0:t[0])||"/default-product.jpg",sizeLabel:n,sizeTokens:s}})};var o}));r(c),l(i);const d=a.map(e=>({userId:e.userId,name:e.name,email:e.email,imageUrl:e.profilePictureUrl||e.profileImage||"/Assets/default-avatar.jpg"}));u(d)}catch(Xl){console.error("SearchBar fetch error:",Xl)}})()},[]);const v=(0,e.useMemo)(()=>i.flatMap(e=>e.clothingItems.map(t=>({...t,shopSlug:e.slug,shopName:e.name}))),[i]),y=(0,e.useMemo)(()=>new Oa(i,{keys:["name","description","address","NIPT","phoneNumber"],threshold:.35}),[i]),_=(0,e.useMemo)(()=>({includeScore:!0,threshold:.35,keys:[{name:"name",weight:.4},{name:"brand",weight:.3},{name:"model",weight:.25},{name:"category",weight:.25},{name:"description",weight:.2},{name:"sizeLabel",weight:.6},{name:"sizeTokens",weight:.9}]}),[]),b=(0,e.useMemo)(()=>new Oa(v,_),[v,_]),x=(0,e.useMemo)(()=>new Oa(a,{keys:["name"],threshold:.3}),[a]),w=(0,e.useMemo)(()=>new Oa(c,{keys:["name","email"],threshold:.3}),[c]);(0,e.useEffect)(()=>{const e=s.trim();if(!e)return void h([]);const n=setTimeout(()=>{const{sizeTokens:n,nonSizeQuery:s}=function(e){const t=String(e).trim().split(/\s+/),n=[],s=[];return t.forEach(e=>{const t=Va(e);Da.includes(t)||/^[0-9]{1,3}(\.[0-9])?$/.test(t)?n.push(t):s.push(e)}),{sizeTokens:n,nonSizeQuery:s.join(" ").trim()}}(e),o=y.search(e).map(e=>e.item),i=x.search(e).map(e=>e.item),r=w.search(e).map(e=>e.item);let a=[];if(n.length){const e=v.filter(e=>{if(!e.sizeTokens||0===e.sizeTokens.length)return!1;const t=new Set(e.sizeTokens.map(Va));return n.every(e=>t.has(e))});if(s){a=new Oa(e,_).search(s).map(e=>e.item)}else a=e}else a=b.search(e).map(e=>e.item);const l=m?"/Assets/default-shop-logo-dark.png":"/Assets/default-shop-logo-light.png",c=o.map(e=>({type:"shop",id:e.id,slug:e.slug,name:e.name,imageUrl:e.logoUrl&&e.logoUrl.trim()?e.logoUrl:l})),u=a.map(e=>({type:"item",id:e.id,name:e.name,shopName:e.shopName||e.shopSlug,imageUrl:e.imageUrl,sizeLabel:e.sizeLabel||""})),d=i.map(e=>({type:"category",name:e.name})),p=r.map(e=>({type:"user",id:e.userId,name:e.name,email:e.email,imageUrl:e.imageUrl})),f={shops:t("groups.shops",{defaultValue:"Shops"}),items:t("groups.items",{defaultValue:"Clothing Items"}),categories:t("groups.categories",{defaultValue:"Categories"}),users:t("groups.users",{defaultValue:"Users"})},g=[];c.length&&g.push({category:f.shops,results:c}),u.length&&g.push({category:f.items,results:u}),d.length&&g.push({category:f.categories,results:d}),p.length&&g.push({category:f.users,results:p}),h(g)},250);return()=>clearTimeout(n)},[s,y,b,_,x,w,v,m,t]);const j=e=>{if(!s)return e;const t=new RegExp(`(${s})`,"gi");return e.split(t).map((e,n)=>t.test(e)?(0,ts.jsx)("span",{className:"highlight",children:e},n):(0,ts.jsx)("span",{className:"highlight-part",children:e},n))};return(0,ts.jsxs)("form",{className:"search-bar-container",onSubmit:e=>{e.preventDefault();const t=s.trim();t&&n(`/search?query=${encodeURIComponent(t)}`)},children:[(0,ts.jsxs)("div",{className:"search-input-container",children:[(0,ts.jsx)("input",{type:"text",placeholder:t("placeholder",{defaultValue:"Search shops, items, sizes (e.g., M, 42), categories, or users..."}),className:"search-input",value:s,onChange:e=>o(e.target.value)}),(0,ts.jsx)(Ps,{className:"search-icon"}),(0,ts.jsx)("button",{type:"submit",className:"search-icon-button"}),s&&(0,ts.jsx)("button",{type:"button",className:"clear-button",onClick:()=>{o(""),h([])},children:"\u2715"})]}),s&&(0,ts.jsx)("div",{className:"search-dropdown active",children:p?0===d.length?(0,ts.jsx)("div",{className:"search-category",children:(0,ts.jsx)("p",{className:"no-results",children:t("noResults",{defaultValue:"No results found"})})}):d.map(e=>(0,ts.jsxs)("div",{className:"search-category",children:[(0,ts.jsx)("h4",{children:e.category}),(0,ts.jsx)("ul",{children:e.results.map(e=>{var t;return(0,ts.jsxs)("li",{className:"search-result-item",onClick:t=>((e,t)=>{if(t.preventDefault(),p)switch(e.type){case"shop":window.location.href=`/shop/${e.slug}`;break;case"item":window.location.href=`/product/${e.id}`;break;case"category":window.location.href=`/category-filter?category=${encodeURIComponent(e.name)}`;break;case"user":window.location.href=e.id===p?"/my-profile":`/profile/${e.id}`}})(e,t),children:[e.imageUrl&&(0,ts.jsx)("img",{src:e.imageUrl,alt:e.name,className:"result-image"}),(0,ts.jsxs)("span",{children:[j(e.name),"item"===e.type&&(0,ts.jsxs)(ts.Fragment,{children:[" \u2014 ",e.shopName,e.sizeLabel?(0,ts.jsxs)(ts.Fragment,{children:[" \xb7 ",(0,ts.jsx)("b",{children:e.sizeLabel})]}):null]}),"user"===e.type&&` \u2014 ${e.email}`]})]},`${e.type}-${null!==(t=e.id)&&void 0!==t?t:e.name}-${e.name}`)})})]},e.category)):(0,ts.jsxs)("div",{className:"search-category",children:[(0,ts.jsx)("p",{className:"no-results",children:(0,ts.jsx)("b",{children:t("mustLogin.title",{defaultValue:"You must have an account to use search!"})})}),(0,ts.jsxs)("p",{children:[(0,ts.jsx)("a",{href:"/login",children:t("mustLogin.login",{defaultValue:"Log in"})})," ",t("text.or",{defaultValue:"or"})," ",(0,ts.jsx)("a",{href:"/register",children:t("mustLogin.register",{defaultValue:"Create an Account"})})]})]})})]})}const Fa="http://77.242.26.150:8000/api",Ua=e=>(e||"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");function Ha(){const{t:t}=Me("shoplist"),[n,s]=(0,e.useState)([]),[o,i]=(0,e.useState)([]),[r,a]=(0,e.useState)(0),[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)(!0),[h,p]=(0,e.useState)(""),[f,m]=(0,e.useState)(1),[g,v]=(0,e.useState)([]),[y,_]=(0,e.useState)(!0),[b,x]=(0,e.useState)(""),w=_n(),j=(0,e.useRef)(null);(0,e.useEffect)(()=>{let e=!1;return(async()=>{d(!0);try{const t=await fetch(`${Fa}/Business/paginated?pageNumber=1&pageSize=8`);if(!t.ok)throw new Error(await t.text()||t.statusText);const{items:n}=await t.json(),s=(n||[]).map(e=>({...e,slug:e.slug||Ua(e.name)}));e||i(s)}catch(Xl){console.error("Error loading new shops:",Xl)}finally{e||d(!1)}})(),()=>{e=!0}},[]),(0,e.useEffect)(()=>{let e=!1;return(async()=>{c(!0),p("");try{const t=await fetch(`${Fa}/Business/paginated?pageNumber=${f}&pageSize=9`);if(!t.ok)throw new Error(await t.text()||t.statusText);const{items:n,totalCount:o}=await t.json(),i=(n||[]).map(e=>({...e,slug:e.slug||Ua(e.name)}));e||(s(i),a(o||0))}catch(Xl){e||p(Xl.message||"Failed to load shops")}finally{e||c(!1)}})(),()=>{e=!0}},[f]),(0,e.useEffect)(()=>{let e=!1;return(async()=>{_(!0),x("");try{const t=await fetch(`${Fa}/ClothingCategory/all`);if(!t.ok)throw new Error(await t.text()||t.statusText);const n=await t.json();e||v(Array.isArray(n)?n:[])}catch(Xl){e||x(Xl.message||"Failed to load categories")}finally{e||_(!1)}})(),()=>{e=!0}},[]);const S=e=>{w(`/category-filter?category=${encodeURIComponent(e)}`)};return(0,e.useEffect)(()=>{const e=j.current;if(!e||0===o.length)return;let t,n,s=!1;const i=()=>{s=!0,clearTimeout(n),n=setTimeout(()=>{s=!1},3e3)};return e.addEventListener("scroll",i),t=setInterval(()=>{if(!s&&e){const t=e.scrollWidth-e.clientWidth;e.scrollLeft>=t?e.scrollTo({left:0,behavior:"smooth"}):e.scrollBy({left:320,behavior:"smooth"})}},4e3),()=>{clearInterval(t),clearTimeout(n),null===e||void 0===e||e.removeEventListener("scroll",i)}},[o]),(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("section",{className:"hero-section","aria-label":t("hero_aria",{defaultValue:"Hero"}),children:[(0,ts.jsxs)("div",{className:"hero-background",children:[(0,ts.jsx)("div",{className:"hero-gradient"}),(0,ts.jsx)("div",{className:"hero-pattern"}),(0,ts.jsxs)("div",{className:"floating-elements",children:[(0,ts.jsx)("div",{className:"floating-element element-1"}),(0,ts.jsx)("div",{className:"floating-element element-2"}),(0,ts.jsx)("div",{className:"floating-element element-3"}),(0,ts.jsx)("div",{className:"floating-element element-4"}),(0,ts.jsx)("div",{className:"floating-element element-5"})]})]}),(0,ts.jsxs)("div",{className:"hero-content",children:[(0,ts.jsxs)("h1",{className:"hero-title",children:[t("hero_title_prefix",{defaultValue:"Welcome, To"})," ",(0,ts.jsx)("span",{className:"hero-title-accent",children:t("brand_name",{defaultValue:"Triwears"})})]}),(0,ts.jsx)("p",{className:"hero-subtitle",children:t("hero_subtitle",{defaultValue:"Discover thousands of clothing brands and shops in one place. Search, explore, discover and find exactly what you're looking for."})}),(0,ts.jsx)("div",{className:"hero-search",children:(0,ts.jsx)($a,{})}),(0,ts.jsxs)("div",{className:"hero-stats","aria-label":t("stats_aria",{defaultValue:"Site statistics"}),children:[(0,ts.jsxs)("div",{className:"stat-item",children:[(0,ts.jsxs)("span",{className:"stat-number",children:[r,"+"]}),(0,ts.jsx)("span",{className:"stat-label",children:t("stats_shops",{defaultValue:"Shops"})})]}),(0,ts.jsx)("div",{className:"stat-divider"}),(0,ts.jsxs)("div",{className:"stat-item",children:[(0,ts.jsxs)("span",{className:"stat-number",children:[g.length,"+"]}),(0,ts.jsx)("span",{className:"stat-label",children:t("stats_categories",{defaultValue:"Categories"})})]}),(0,ts.jsx)("div",{className:"stat-divider"}),(0,ts.jsxs)("div",{className:"stat-item",children:[(0,ts.jsx)("span",{className:"stat-number",children:"24/7"}),(0,ts.jsx)("span",{className:"stat-label",children:t("stats_support",{defaultValue:"Support"})})]})]})]})]}),(0,ts.jsxs)("main",{className:"main-container",children:[(0,ts.jsxs)("section",{className:"featured-section","aria-label":t("featured_aria",{defaultValue:"New shops"}),children:[(0,ts.jsxs)("div",{className:"section-header",children:[(0,ts.jsx)("h2",{className:"section-title",children:(0,ts.jsx)("span",{className:"title-gradient",children:t("featured_title",{defaultValue:"New Shops"})})}),(0,ts.jsx)("p",{className:"section-subtitle",children:t("featured_subtitle",{defaultValue:"Discover the latest shops and newest brands in our marketplace"})})]}),(0,ts.jsx)("div",{className:"featured-carousel",ref:j,children:u?(0,ts.jsx)("div",{className:"loading-carousel",children:[...Array(4)].map((e,t)=>(0,ts.jsxs)("div",{className:"brand-card-skeleton",children:[(0,ts.jsx)("div",{className:"skeleton-image",children:(0,ts.jsx)("div",{className:"skeleton-shimmer"})}),(0,ts.jsxs)("div",{className:"skeleton-content",children:[(0,ts.jsx)("div",{className:"skeleton-line"}),(0,ts.jsx)("div",{className:"skeleton-line short"}),(0,ts.jsxs)("div",{className:"skeleton-tags",children:[(0,ts.jsx)("div",{className:"skeleton-tag"}),(0,ts.jsx)("div",{className:"skeleton-tag"})]})]})]},t))}):o.length>0?o.map(e=>(0,ts.jsxs)(Kn,{to:`/shop/${e.slug}`,className:"brand-card featured",children:[(0,ts.jsxs)("div",{className:"brand-card-image",children:[e.profilePictureUrl?(0,ts.jsx)("img",{src:e.profilePictureUrl||"/placeholder.svg",alt:e.name}):(0,ts.jsxs)("div",{className:"brand-placeholder","aria-label":t("brand_placeholder_aria",{defaultValue:"Shop placeholder"}),children:[(0,ts.jsx)("div",{className:"placeholder-glow"}),(0,ts.jsx)("div",{className:"placeholder-icon",children:"\ud83c\udfea"}),(0,ts.jsx)("div",{className:"placeholder-text",children:(e.name||"?").charAt(0)})]}),(0,ts.jsx)("div",{className:"brand-overlay",children:(0,ts.jsxs)("div",{className:"overlay-content",children:[(0,ts.jsx)("span",{className:"view-brand",children:t("view_shop",{defaultValue:"View Shop"})}),(0,ts.jsx)("svg",{className:"overlay-arrow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ts.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})}),(0,ts.jsx)("div",{className:"brand-badge",children:t("badge_new",{defaultValue:"New"})})]}),(0,ts.jsx)("div",{className:"brand-info",children:(0,ts.jsx)("h3",{className:"brand-name",children:e.name})})]},e.businessId)):(0,ts.jsxs)("div",{className:"empty-state",children:[(0,ts.jsx)("svg",{className:"empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ts.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,ts.jsx)("h3",{children:t("empty_new_title",{defaultValue:"No New Shops"})}),(0,ts.jsx)("p",{children:t("empty_new_desc",{defaultValue:"Check back later for new shops and latest brands."})})]})})]}),(0,ts.jsxs)("section",{className:"browse-section","aria-label":t("browse_aria",{defaultValue:"Browse shops"}),children:[(0,ts.jsxs)("div",{className:"section-header",children:[(0,ts.jsx)("h2",{className:"section-title",children:t("browse_title",{defaultValue:"Browse Shops"})}),(0,ts.jsx)("p",{className:"section-subtitle",children:t("browse_subtitle",{defaultValue:"Explore our complete collection of clothing shops and brands"})})]}),h&&(0,ts.jsxs)("div",{className:"error-message",role:"alert",children:[(0,ts.jsx)("svg",{className:"error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ts.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,ts.jsxs)("div",{children:[(0,ts.jsx)("h4",{children:t("error_shops_title",{defaultValue:"Error Loading Shops"})}),(0,ts.jsx)("p",{children:h})]})]}),(0,ts.jsx)("div",{className:"brands-grid",children:l?[...Array(8)].map((e,t)=>(0,ts.jsxs)("div",{className:"brand-card-skeleton","aria-hidden":"true",children:[(0,ts.jsx)("div",{className:"skeleton-image",children:(0,ts.jsx)("div",{className:"skeleton-shimmer"})}),(0,ts.jsxs)("div",{className:"skeleton-content",children:[(0,ts.jsx)("div",{className:"skeleton-line"}),(0,ts.jsx)("div",{className:"skeleton-line short"}),(0,ts.jsxs)("div",{className:"skeleton-tags",children:[(0,ts.jsx)("div",{className:"skeleton-tag"}),(0,ts.jsx)("div",{className:"skeleton-tag"})]})]})]},t)):n.length>0?n.map(e=>(0,ts.jsxs)(Kn,{to:`/shop/${e.slug}`,className:"brand-card",children:[(0,ts.jsxs)("div",{className:"brand-card-image",children:[e.profilePictureUrl?(0,ts.jsx)("img",{src:e.profilePictureUrl||"/placeholder.svg",alt:e.name}):(0,ts.jsxs)("div",{className:"brand-placeholder","aria-label":t("brand_placeholder_aria",{defaultValue:"Shop placeholder"}),children:[(0,ts.jsx)("div",{className:"placeholder-glow"}),(0,ts.jsx)("div",{className:"placeholder-icon",children:"\ud83c\udfea"}),(0,ts.jsx)("div",{className:"placeholder-text",children:(e.name||"?").charAt(0)})]}),(0,ts.jsx)("div",{className:"brand-overlay",children:(0,ts.jsxs)("div",{className:"overlay-content",children:[(0,ts.jsx)("span",{className:"view-brand",children:t("view_shop",{defaultValue:"View Shop"})}),(0,ts.jsx)("svg",{className:"overlay-arrow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ts.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]}),(0,ts.jsxs)("div",{className:"brand-info",children:[(0,ts.jsx)("h3",{className:"brand-name",children:e.name}),(0,ts.jsx)("div",{className:"brand-tags"})]})]},e.businessId)):(0,ts.jsxs)("div",{className:"empty-state",children:[(0,ts.jsx)("svg",{className:"empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ts.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,ts.jsx)("h3",{children:t("empty_browse_title",{defaultValue:"No Shops Found"})}),(0,ts.jsx)("p",{children:t("empty_browse_desc",{defaultValue:"Try adjusting your search or check back later for new shops."})})]})}),(0,ts.jsx)("div",{className:"pagination-wrapper",children:(0,ts.jsx)(zi,{page:f,pageSize:9,totalCount:r,onPageChange:e=>{m(e),window.scrollTo({top:0,behavior:"smooth"})}})})]}),(0,ts.jsxs)("section",{className:"categories-section","aria-label":t("categories_aria",{defaultValue:"Categories"}),children:[(0,ts.jsxs)("div",{className:"section-header",children:[(0,ts.jsx)("h2",{className:"section-title",children:t("categories_title",{defaultValue:"Shop by Category"})}),(0,ts.jsx)("p",{className:"section-subtitle",children:t("categories_subtitle",{defaultValue:"Browse through our organized categories to find exactly what you need"})})]}),b&&(0,ts.jsxs)("div",{className:"error-message",role:"alert",children:[(0,ts.jsx)("svg",{className:"error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ts.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,ts.jsxs)("div",{children:[(0,ts.jsx)("h4",{children:t("error_categories_title",{defaultValue:"Error Loading Categories"})}),(0,ts.jsx)("p",{children:b})]})]}),(0,ts.jsx)("div",{className:"categories-grid",children:y?[...Array(6)].map((e,t)=>(0,ts.jsxs)("div",{className:"category-card-skeleton","aria-hidden":"true",children:[(0,ts.jsx)("div",{className:"skeleton-icon"}),(0,ts.jsxs)("div",{className:"category-content",children:[(0,ts.jsx)("div",{className:"skeleton-line"}),(0,ts.jsx)("div",{className:"skeleton-line short"})]}),(0,ts.jsx)("div",{className:"skeleton-arrow"})]},t)):g.length>0?g.filter((e,t,n)=>n.findIndex(t=>t.name===e.name)===t).map(e=>(0,ts.jsxs)("div",{className:"category-card",onClick:()=>S(e.name),role:"button",tabIndex:0,onKeyDown:t=>"Enter"===t.key?S(e.name):null,"aria-label":t("category_card_aria",{defaultValue:"Open category"}),children:[(0,ts.jsx)("div",{className:"category-hover-effect"}),(0,ts.jsx)("div",{className:"category-icon",children:e.iconUrl?(0,ts.jsx)("img",{src:e.iconUrl||"/placeholder.svg",alt:e.name}):(0,ts.jsx)("div",{className:"category-placeholder",children:(e.name||"?").charAt(0)})}),(0,ts.jsxs)("div",{className:"category-content",children:[(0,ts.jsx)("h3",{className:"category-name",children:e.name}),(0,ts.jsx)("p",{className:"category-count",children:t("category_cta",{defaultValue:"Click To See Featured Shops"})})]}),(0,ts.jsx)("svg",{className:"category-arrow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ts.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},e.clothingCategoryId)):(0,ts.jsxs)("div",{className:"empty-state",children:[(0,ts.jsx)("svg",{className:"empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ts.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,ts.jsx)("h3",{children:t("empty_categories_title",{defaultValue:"No Categories Available"})}),(0,ts.jsx)("p",{children:t("empty_categories_desc",{defaultValue:"Categories will appear here once they are added to the system."})})]})})]})]}),(0,ts.jsx)(ds,{})]})}const Wa="http://77.242.26.150:8000",Za=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],qa=["Mo","Tu","We","Th","Fr","Sa","Su"],Ka=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ja=e=>{if("string"!==typeof e)return"00:00";const[t,n]=e.split(":"),s=Math.max(0,Math.min(23,parseInt(t,10)||0)),o=Math.max(0,Math.min(59,parseInt(null!==n&&void 0!==n?n:"0",10)||0));return`${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`},Ya=e=>Ja(e),Xa=(e,t)=>e&&t&&e.open===t.open&&e.close===t.close&&!e.closed&&!t.closed,Ga=e=>{const t={monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};try{for(const i of Za){var n,s,o;const r=null!==(n=null===e||void 0===e?void 0:e[i])&&void 0!==n?n:{};t[i]={open:Ja(null!==(s=r.open)&&void 0!==s?s:t[i].open),close:Ja(null!==(o=r.close)&&void 0!==o?o:t[i].close),closed:Boolean(r.closed)}}}catch{return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}}}return t},Qa=e=>{if(!e)return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};if("object"===typeof e)return Ga(e);if("string"===typeof e){const t=e.trim();if(!t)return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};if("closed"===t.toLowerCase()){const e={monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};for(const t of Za)e[t].closed=!0;return e}if(t.startsWith("{")||t.startsWith("["))try{const e=JSON.parse(t);if(e&&"object"===typeof e)return Ga(e)}catch{}return(e=>{const t={monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};for(const c of Za)t[c].closed=!0;const n=String(e||"").trim();if(!n)return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};if("closed"===n.toLowerCase())return t;const s=n.match(/^\s*Daily\s+(\d{1,2}(?::\d{2})?)\s*-\s*(\d{1,2}(?::\d{2})?)\s*$/i);if(s){const e=Ja(s[1]),n=Ja(s[2]);for(const s of Za)t[s]={open:e,close:n,closed:!1};return t}const o="(?:Mo|Tu|We|Th|Fr|Sa|Su|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)",i=new RegExp(`(${o}(?:\\s*-\\s*${o})?)\\s+(Closed|closed|(\\d{1,2}(?::\\d{2})?)\\s*-\\s*(\\d{1,2}(?::\\d{2})?))`,"g"),r=e=>{const t=e.trim().toLowerCase(),n=Ka.findIndex(e=>e.toLowerCase()===t);if(-1!==n)return n;const s=qa.findIndex(e=>e.toLowerCase()===t);return s};let a,l=!1;for(;null!==(a=i.exec(n));){l=!0;const e=a[1],n="closed"===String(a[2]).toLowerCase();let s=null,o=null;n||(s=Ja(a[3]),o=Ja(a[4]));const i=(e,i)=>{for(let r=e;r<=i;r++)t[Za[r]]=n?{...t[Za[r]],closed:!0}:{open:s,close:o,closed:!1}};if(e.includes("-")){const[t,n]=e.split("-").map(e=>e.trim()),s=r(t),o=r(n);-1!==s&&-1!==o&&s<=o&&i(s,o)}else{const t=r(e);-1!==t&&i(t,t)}}return l?t:{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}}})(t)}return{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}}},el=e=>e?{Authorization:`Bearer ${e}`}:{};function tl(){var t;const{slug:n}=bn(),s=_n(),{t:o}=Me("shopdetails"),[i,r]=(0,e.useState)(null),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[p,f]=(0,e.useState)([]),[m,g]=(0,e.useState)(0),[v,y]=(0,e.useState)([]),[_,b]=(0,e.useState)(1),[x,w]=(0,e.useState)(1),[j,S]=(0,e.useState)(!0),[k,N]=(0,e.useState)(null),[C,E]=(0,e.useState)(!1),[P,T]=(0,e.useState)(!1),[L,M]=(0,e.useState)(!1),[I,A]=(0,e.useState)(()=>"undefined"!==typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);(0,e.useEffect)(()=>{if(!window.matchMedia)return;const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>A(e.matches);return e.addEventListener?e.addEventListener("change",t):e.addListener&&e.addListener(t),()=>{e.removeEventListener?e.removeEventListener("change",t):e.removeListener&&e.removeListener(t)}},[]);const z=(0,e.useMemo)(()=>(()=>{const e=localStorage.getItem("token")||localStorage.getItem("authToken");if(!e||""===e.trim())return null;try{const t=JSON.parse(e);return t.token||t}catch{return e.replace(/^"|"$/g,"")}})(),[]);(0,e.useEffect)(()=>{if(!z)return N(o("errors.login_required")),void S(!1);(async()=>{S(!0),N(null);try{var e;const t=await fetch(`${Wa}/api/Business/slug/${encodeURIComponent(n)}`,{headers:{...el(z)}});if(401===t.status)return void s("/login");if(!t.ok)throw new Error(`Shop fetch failed: ${t.status}`);const i=await t.json();r(i),document.title=i.name||"Shop";const a=Qa(i.openingHours);u(a);const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;const n=(t.getDay()+6)%7,s=e[Za[n]];if(!s||s.closed)return!1;const[o,i]=s.open.split(":").map(Number),[r,a]=s.close.split(":").map(Number),l=new Date(t);l.setHours(o,i,0,0);const c=new Date(t);return c.setHours(r,a,0,0),t>=l&&t<=c}(a),d="boolean"===typeof i.isManuallyOpen?i.isManuallyOpen:null;if(h(null!==d&&void 0!==d?d:c),null!==(e=i.location)&&void 0!==e&&e.includes(",")){const[e,t]=i.location.split(",").map(e=>parseFloat(String(e).trim()));isNaN(e)||isNaN(t)||fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}`).then(e=>e.ok?e.json():null).then(e=>l((null===e||void 0===e?void 0:e.display_name)||i.location)).catch(()=>l(i.location))}const p=i.businessId,[m,g]=await Promise.all([fetch(`${Wa}/api/ClothingCategory/business/${p}`,{headers:{...el(z)}}),fetch(`${Wa}/api/ClothingItem/business/${p}`,{headers:{...el(z)}})]),v=m.ok?await m.json():[],_=g.ok?await g.json():[];f([{clothingCategoryId:0,name:o("categories_all")},...v]),y(Array.isArray(_)?_:[])}catch(Xl){console.error(Xl),N(o("errors.load_failed"))}finally{S(!1)}})()},[n,z,s,o]),(0,e.useEffect)(()=>{z&&null!==i&&void 0!==i&&i.businessId&&fetch(`${Wa}/api/favorites/${i.businessId}/is-favorited`,{headers:{...el(z)}}).then(e=>e.ok?e.json():null).then(e=>{e&&"undefined"!==typeof e.isFavorited&&E(!!e.isFavorited)}).catch(()=>{})},[z,null===i||void 0===i?void 0:i.businessId]),(0,e.useEffect)(()=>{const e=0===m?v:v.filter(e=>e.clothingCategoryId===m);w(Math.max(1,Math.ceil(e.length/8))),b(1)},[v,m]);const O=(0,e.useMemo)(()=>0===m?v:v.filter(e=>e.clothingCategoryId===m),[v,m]),R=(0,e.useMemo)(()=>{const e=8*(_-1);return O.slice(e,e+8)},[O,_]),D=(0,e.useMemo)(()=>{var e;if(null===i||void 0===i||null===(e=i.location)||void 0===e||!e.includes(","))return null;const[t,n]=i.location.split(",").map(e=>parseFloat(String(e).trim()));return isNaN(t)||isNaN(n)?null:[t,n]},[null===i||void 0===i?void 0:i.location]),V=null!==i&&void 0!==i&&i.profilePictureUrl&&i.profilePictureUrl.trim()?i.profilePictureUrl:I?"/Assets/default-shop-logo-dark.png":"/Assets/default-shop-logo-light.png",B=null!==i&&void 0!==i&&i.coverPictureUrl&&i.coverPictureUrl.trim()?i.coverPictureUrl:I?"/Assets/default-shop-cover-dark.png":"/Assets/default-shop-cover-light.png",$=(0,e.useMemo)(()=>c?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;const n=Za.map(t=>e[t]),s=n.map(e=>!e.closed);if(s.every(e=>!e))return"Closed";const o=s.findIndex(Boolean),i=n[o];if(s.every(e=>e===s[o])&&!i.closed&&n.every(e=>Xa(e,i))){const e=`Daily ${Ya(i.open)} - ${Ya(i.close)}`;return e.length<=t?e:"Varies by day"}const r=[];let a=0;for(;a<7;){if(!s[a]){a++;continue}const e=a,t=n[a];for(;a+1<7&&s[a+1]&&Xa(n[a+1],t);)a++;const o=a;r.push({start:e,end:o,open:Ya(t.open),close:Ya(t.close)}),a++}const l=r.map(e=>`${e.start===e.end?Ka[e.start]:`${Ka[e.start]}-${Ka[e.end]}`} ${e.open} - ${e.close}`);let c="";for(const u of l){const e=c?`${c} ${u}`:u;if(!(e.length<=t))break;c=e}return c||(c=l[0]||"Varies by day"),c.length>t&&(c="Varies by day"),c}(c,80):"\u2014",[c]),F=(0,e.useMemo)(()=>{if(!c)return"\u2014";const e=((new Date).getDay()+6)%7,t=c[Za[e]];return!t||t.closed?o("info.closed"):`${Ya(t.open)} - ${Ya(t.close)}`},[c,o]),U=(0,e.useMemo)(()=>{if(!c)return"";const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;const n=(t.getDay()+6)%7,s=e[Za[n]],o=(e,t,n,s)=>({type:e,timeStr:Ya(t),dayIdx:n,isToday:s});if(s&&!s.closed){const[e,i]=s.open.split(":").map(Number),[r,a]=s.close.split(":").map(Number),l=new Date(t);l.setHours(e,i,0,0);const c=new Date(t);if(c.setHours(r,a,0,0),t<l)return o("opens",s.open,n,!0);if(t>=l&&t<c)return o("closes",s.close,n,!0)}for(let i=1;i<=7;i++){const t=(n+i)%7,s=e[Za[t]];if(s&&!s.closed)return o("opens",s.open,t,!1)}return{type:"none"}}(c,new Date);return"closes"===e.type?o("info.next_closes_at",{time:e.timeStr}):"opens"===e.type?e.isToday?o("info.next_opens_at",{time:e.timeStr}):o("info.next_opens_on_at",{day:Ka[e.dayIdx],time:e.timeStr}):""},[c,o]);return j?(0,ts.jsx)("div",{className:"loading-spinner","aria-label":o("loading")}):k?(0,ts.jsx)("p",{className:"sd-error",children:k}):i?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"sd-page-wrapper",children:[(0,ts.jsx)("div",{className:"sd-shop-hero",style:{backgroundImage:`url(${B})`},children:(0,ts.jsxs)("div",{className:"sd-shop-hero-content",children:[(0,ts.jsx)("img",{className:"sd-shop-logo",src:V,alt:`${i.name} Logo`}),(0,ts.jsx)("h1",{className:"sd-shop-name",children:i.name})]})}),(0,ts.jsxs)("div",{className:"sd-body-wrapper",children:[(0,ts.jsxs)("main",{className:"sd-main-col",children:[(0,ts.jsx)("nav",{className:"sd-category-bar","aria-label":o("categories_aria"),children:p.map(e=>(0,ts.jsx)("button",{className:"sd-category-pill "+(m===e.clothingCategoryId?"active":""),onClick:()=>g(e.clothingCategoryId),children:e.name},e.clothingCategoryId))}),(0,ts.jsxs)("section",{className:"sd-products-section",children:[(0,ts.jsx)("h2",{children:0===m?o("lists.all_items"):null===(t=p.find(e=>e.clothingCategoryId===m))||void 0===t?void 0:t.name}),0===O.length?(0,ts.jsx)("p",{className:"sd-no-items",children:o("lists.empty_category")}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("ul",{className:"sd-product-list",children:R.map(e=>{const t=Array.isArray(e.pictureUrls)&&e.pictureUrls.length>0&&"string"===typeof e.pictureUrls[0]?e.pictureUrls[0]:"/Assets/default-product.jpg",n=e.name&&e.brand&&`${e.name} - ${e.brand}`||e.name||e.model||o("product.alt",{shop:i.name}),s="number"===typeof e.price?e.price:Number(e.price),r=isNaN(s)?"\u2014":o("product.price",{value:s.toFixed(2)}),a="string"===typeof e.description?e.description:"";return(0,ts.jsx)("li",{className:"sd-product-card",children:(0,ts.jsxs)(Kn,{to:`/product/${e.clothingItemId}`,className:"sd-product-link",children:[(0,ts.jsx)("img",{className:"sd-product-image",src:t,alt:o("product.alt",{shop:i.name})}),(0,ts.jsxs)("div",{className:"sd-product-inline",children:[(0,ts.jsx)("span",{className:"product-name",children:n}),(0,ts.jsx)("span",{className:"product-price",children:r}),a&&(0,ts.jsx)("span",{className:"product-desc",children:a})]})]})},e.clothingItemId)})}),x>1&&(0,ts.jsxs)("div",{className:"sd-pagination",children:[(0,ts.jsx)("button",{disabled:1===_,onClick:()=>b(e=>e-1),children:o("lists.prev")}),(0,ts.jsx)("span",{children:o("lists.page_x_of_y",{page:_,total:x})}),(0,ts.jsx)("button",{disabled:_===x,onClick:()=>b(e=>e+1),children:o("lists.next")})]})]})]})]}),(0,ts.jsxs)("aside",{className:"sd-info-col",children:[(0,ts.jsxs)("div",{className:"sd-shop-info",children:[(0,ts.jsxs)("div",{className:"sd-shop-info-section",children:[(0,ts.jsxs)("h4",{children:[(0,ts.jsx)(Cs,{})," ",o("info.description")]}),(0,ts.jsx)("p",{children:i.description||"\u2014"})]}),(0,ts.jsxs)("div",{className:"sd-shop-info-section",children:[(0,ts.jsxs)("h4",{children:[(0,ts.jsx)(Es,{})," ",o("info.contact")]}),(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[o("info.phone"),":"]})," ",i.businessPhoneNumber||"\u2014"]}),(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[o("info.email"),":"]})," ",i.businessEmailAddress||"\u2014"]})]}),(0,ts.jsxs)("div",{className:"sd-shop-info-section",children:[(0,ts.jsxs)("h4",{children:[(0,ts.jsx)(ks,{})," ",o("info.hours")]}),(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[o("info.weekly"),":"]})," ",$||"\u2014"]}),(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[o("info.today"),":"]})," ",F||"\u2014"]}),(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[o("info.status"),":"]})," ",(0,ts.jsx)("span",{className:"shop-status "+(d?"open":"closed"),children:o(d?"info.open":"info.closed")}),U&&(0,ts.jsxs)("span",{className:"status-next",children:[" \u2022 ",U]})]}),(0,ts.jsxs)("div",{className:"sd-shop-favorite",role:"region","aria-labelledby":"fav-heading",children:[(0,ts.jsxs)("h4",{id:"fav-heading",children:[(0,ts.jsx)(Ns,{})," ",o("favorite.title")]}),(0,ts.jsxs)("div",{className:"sd-fav-row",children:[(0,ts.jsx)("strong",{children:o("favorite.cta")}),(0,ts.jsx)("button",{onClick:async function(){if(z&&null!==i&&void 0!==i&&i.businessId&&!P){T(!0);try{if(C){const e=await fetch(`${Wa}/api/favorites/${i.businessId}`,{method:"DELETE",headers:{...el(z)}});if(401===e.status)return s("/login");e.ok&&E(!1)}else{const e=await fetch(`${Wa}/api/favorites/${i.businessId}`,{method:"POST",headers:{...el(z)}});if(401===e.status)return s("/login");e.ok&&E(!0)}}catch(Uc){console.error(Uc)}finally{T(!1)}}},disabled:P,"aria-pressed":C,"aria-label":o(C?"favorite.aria_remove":"favorite.aria_add"),className:"sd-favorite-btn",style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 10px",borderRadius:"999px",border:"1px solid "+(C?"#ff1616f3":"#e5e7eb"),background:C?"#fa9097ff":"#fff",color:C?"#e11d48":"#111",cursor:P?"not-allowed":"pointer"},type:"button",children:(0,ts.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",children:C?(0,ts.jsx)("path",{d:"M12 21s-6.716-4.315-9.428-7.027A6.5 6.5 0 1 1 12 5.07a6.5 6.5 0 1 1 9.428 8.903C18.716 16.685 12 21 12 21z"}):(0,ts.jsx)("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.8",d:"M20.84 4.61a5.5 5.5 0 0 1 .11 7.78L12 21l-8.95-8.61a5.5 5.5 0 0 1 7.78-7.78L12 5.5l1.17-1.17a5.5 5.5 0 0 1 7.67-.28z"})})})]})]})]})]}),D&&(0,ts.jsxs)("div",{className:"sd-shop-location",children:[(0,ts.jsx)("h3",{children:o("location.title")}),(0,ts.jsx)("small",{children:a||`${D[0]}, ${D[1]}`}),(0,ts.jsx)("div",{className:"sd-location-map",children:(0,ts.jsx)(Rr,{height:300,defaultCenter:D,defaultZoom:13,metaWheel:!0,mouseEvents:!0,children:(0,ts.jsx)(Dr,{width:40,anchor:D})})}),(0,ts.jsx)("a",{href:`https://www.google.com/maps?q=${D[0]},${D[1]}`,target:"_blank",rel:"noopener noreferrer",className:"map-link",children:o("location.open_in_maps")})]}),(0,ts.jsxs)("div",{className:"sd-shop-share",children:[(0,ts.jsx)("h3",{children:o("share.section_title",{name:i.name})}),(0,ts.jsx)("br",{}),(0,ts.jsx)("input",{type:"text",readOnly:!0,value:window.location.href,onClick:e=>e.target.select(),className:"sd-share-input","aria-label":o("share.aria_link")}),(0,ts.jsx)("button",{onClick:async()=>{try{await navigator.clipboard.writeText(window.location.href),M(!0),setTimeout(()=>M(!1),2500)}catch{const e=document.createElement("textarea");e.value=window.location.href,document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch{}document.body.removeChild(e),M(!0),setTimeout(()=>M(!1),2500)}},className:"sd-share-btn",children:o(L?"share.copied":"share.copy")}),(0,ts.jsxs)("div",{className:"sd-social-buttons",children:[(0,ts.jsx)("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,target:"_blank",rel:"noopener noreferrer",className:"sd-social facebook",children:o("share.facebook")}),(0,ts.jsx)("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=Check%20out%20${encodeURIComponent(i.name)}!`,target:"_blank",rel:"noopener noreferrer",className:"sd-social twitter",children:o("share.twitter")}),(0,ts.jsx)("a",{href:`https://api.whatsapp.com/send?text=${encodeURIComponent(`Check out ${i.name}: ${window.location.href}`)}`,target:"_blank",rel:"noopener noreferrer",className:"sd-social whatsapp",children:o("share.whatsapp")}),(0,ts.jsx)("a",{href:`https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=Check%20out%20${encodeURIComponent(i.name)}!`,target:"_blank",rel:"noopener noreferrer",className:"sd-social telegram",children:o("share.telegram")})]})]})]})]})]}),(0,ts.jsx)(ds,{})]}):(0,ts.jsx)("p",{className:"sd-error",children:o("errors.not_found")})}const nl="http://77.242.26.150:8000/api",sl=()=>{const e=localStorage.getItem("token")||localStorage.getItem("authToken");if(!e||""===e.trim())return null;try{const t=JSON.parse(e);return t.token||t}catch{return e}},ol=()=>{const e=sl(),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t},il=e=>(e||"").toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""),rl=()=>{const{t:t,ready:n}=Me("productdetail",{useSuspense:!1}),{id:s}=bn(),o=_n(),[i,r]=(0,e.useState)(null),[a,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(null),[p,f]=(0,e.useState)(!0),[m,g]=(0,e.useState)(!1),[v,y]=(0,e.useState)(0),[_,b]=(0,e.useState)(0),[x,w]=(0,e.useState)(!1),[j,S]=(0,e.useState)(!1),[k,N]=(0,e.useState)(1),[C,E]=(0,e.useState)(!1),[P,T]=(0,e.useState)({x:0,y:0}),L=(0,e.useRef)({x:0,y:0}),M=(0,e.useRef)({x:0,y:0}),I=(0,e.useCallback)(async e=>{if(sl()&&e){w(!0);try{const t=await fetch(`${nl}/Reservation/my-bookings`,{headers:ol()});if(!t.ok)throw new Error(`Bookings fetch failed: ${t.status}`);const n=await t.json(),s=Array.isArray(n)?n.filter(t=>String(null===t||void 0===t?void 0:t.clothingItemId)===String(e)).length:0;b(s);try{localStorage.setItem(`reservations:${e}`,String(s))}catch{}}catch{try{const t=localStorage.getItem(`reservations:${e}`);b(t&&parseInt(t,10)||0)}catch{b(0)}}finally{w(!1)}}else b(0)},[]);(0,e.useEffect)(()=>{let e=!0;return(async()=>{f(!0);try{const t=await fetch(`${nl}/ClothingItem/${s}`,{headers:ol()});if(!t.ok)throw new Error(`Product fetch failed: ${t.status}`);const n=await t.json();if(!e)return;r(n);try{(Array.isArray(n.pictureUrls)?n.pictureUrls:JSON.parse(n.pictureUrls||"[]")).length>0&&y(0)}catch{}b(0),I(n.clothingItemId);const o=Array.isArray(n.businessIds)&&n.businessIds[0]||n.businessId||null;if(o){l(o);try{const t=await fetch(`${nl}/Business/${o}`,{headers:ol()});if(t.ok){const n=await t.json(),s=n.slug&&n.slug.trim()||il(n.name);if(!e)return;u(s||null),h(n.name||null)}}catch{}}}catch{e&&r(null)}finally{e&&f(!1)}})(),()=>{e=!1}},[s,I]);const A=(0,e.useMemo)(()=>{if(!i)return[];try{if(Array.isArray(i.pictureUrls))return i.pictureUrls.filter(Boolean);if("string"===typeof i.pictureUrls&&""!==i.pictureUrls.trim())try{const e=JSON.parse(i.pictureUrls);return Array.isArray(e)?e.filter(Boolean):[i.pictureUrls]}catch{return[i.pictureUrls]}return[]}catch{return[]}},[i]);(0,e.useEffect)(()=>{(0===A.length||v>=A.length)&&y(0)},[A,v]);const z=A.length>0?A[v]:null,O=()=>{0!==A.length&&y(e=>(e-1+A.length)%A.length)},R=()=>{0!==A.length&&y(e=>(e+1)%A.length)};(0,e.useEffect)(()=>{const e=e=>{if(j){if("Escape"===e.key)return void S(!1);if("ArrowLeft"===e.key)return void O();if("ArrowRight"===e.key)return void R()}else"ArrowLeft"===e.key&&O(),"ArrowRight"===e.key&&R()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[j,A.length]);const D=()=>{S(!1),N(1),T({x:0,y:0}),E(!1)},V=e=>{if(!C)return;const t=e.clientX-L.current.x,n=e.clientY-L.current.y;T({x:M.current.x+t,y:M.current.y+n})},B=()=>E(!1);(0,e.useEffect)(()=>{if(j&&C)return window.addEventListener("mousemove",V),window.addEventListener("mouseup",B),()=>{window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",B)}},[j,C]);if(!n)return(0,ts.jsxs)("div",{className:"loading-container",children:[(0,ts.jsx)("div",{className:"loading-spinner"}),(0,ts.jsx)("div",{className:"loading-text",children:t("loading",{defaultValue:"Loading product details..."})})]});if(p)return(0,ts.jsxs)("div",{className:"loading-container",children:[(0,ts.jsx)("div",{className:"loading-spinner"}),(0,ts.jsx)("div",{className:"loading-text",children:t("loading",{defaultValue:"Loading product details..."})})]});if(!i)return(0,ts.jsx)("div",{className:"error-container",children:(0,ts.jsx)("div",{className:"error-message",children:t("errors.not_found",{defaultValue:"Product not found."})})});const $=A.length<=1,F={position:"absolute",top:"40%",transform:"translateY(-50%)",border:"none",background:"rgba(0,0,0,0.45)",color:"#fff",width:56,height:56,borderRadius:9999,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:24,lineHeight:1,cursor:"pointer",zIndex:50,userSelect:"none"},U=Number(i.price),H=isNaN(U)?t("price_fmt",{value:i.price,defaultValue:`${i.price} LEK`}):t("price_fmt",{value:U.toFixed(2),defaultValue:`${U.toFixed(2)} LEK`});return(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"product-detail-container",children:[(0,ts.jsx)("div",{className:"top-back-button-wrapper",children:(0,ts.jsx)("button",{type:"button",onClick:async()=>{if(c&&c.trim())o(`/shop/${c.trim()}`);else if(d&&il(d))o(`/shop/${il(d)}`);else{if(a)try{const e=await fetch(`${nl}/Business/${a}`,{headers:ol()});if(e.ok){const t=await e.json(),n=t.slug&&t.slug.trim()||il(t.name);if(n)return u(n),h(t.name||null),void o(`/shop/${n}`)}}catch{}o("/")}},className:"back-to-shop-button",children:t("nav.back_to_shop",{defaultValue:"\u2190 Back to Shop"})})}),(0,ts.jsxs)("div",{className:"product-main",children:[(0,ts.jsxs)("div",{className:"product-images",style:{position:"relative",isolation:"isolate"},children:[z&&(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("button",{type:"button","aria-label":t("carousel.prev",{defaultValue:"Previous image"}),onClick:O,disabled:$,className:"carousel-arrow left",style:{...F,left:8,opacity:$?.35:1},children:"\u2039"}),(0,ts.jsx)("img",{src:z,alt:t("carousel.main_alt",{defaultValue:"Main product"}),className:"main-image",style:{display:"block",width:"100%",cursor:"zoom-in"},onClick:()=>{S(!0),N(1),T({x:0,y:0})}}),(0,ts.jsx)("button",{type:"button","aria-label":t("carousel.next",{defaultValue:"Next image"}),onClick:R,disabled:$,className:"carousel-arrow right",style:{...F,right:8,opacity:$?.35:1},children:"\u203a"})]}),(0,ts.jsx)("div",{className:"thumbnail-list",children:A.slice(0,10).map((e,n)=>(0,ts.jsx)("img",{src:e,alt:t("carousel.thumb_alt",{index:n+1,defaultValue:`Thumbnail ${n+1}`}),onClick:()=>((e,t)=>y(t))(0,n),className:"thumbnail "+(v===n?"active":"")},n))})]}),(0,ts.jsxs)("div",{className:"product-info",children:[(0,ts.jsxs)("h1",{children:[i.name," \u2013 ",i.brand]}),(0,ts.jsxs)("div",{className:"product-info-grid",children:[(0,ts.jsx)("div",{className:"info-card",children:(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[t("fields.model",{defaultValue:"Model"}),":"]})," ",i.model]})}),(0,ts.jsx)("div",{className:"info-card",children:(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[t("fields.description",{defaultValue:"Description"}),":"]})," ",i.description]})}),(0,ts.jsx)("div",{className:"info-card price-card",children:(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[t("fields.price",{defaultValue:"Price"}),":"]})," ",H]})}),(0,ts.jsx)("div",{className:"info-card",children:(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[t("fields.quantity",{defaultValue:"Quantity"}),":"]})," ",i.quantity]})}),(0,ts.jsx)("div",{className:"info-card",children:(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[t("fields.material",{defaultValue:"Material"}),":"]})," ",i.material]})}),(0,ts.jsx)("div",{className:"info-card",children:(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[t("fields.colors",{defaultValue:"Colors"}),":"]})," ",Array.isArray(i.colors)?i.colors.join(", "):i.colors]})}),(0,ts.jsx)("div",{className:"info-card",children:(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[t("fields.size",{defaultValue:"Size"}),":"]})," ",i.sizes]})})]}),(0,ts.jsx)("button",{onClick:async()=>{if(!i)return;if(sl()){g(!0);try{const e=await fetch(`${nl}/Reservation`,{method:"POST",headers:ol(),body:JSON.stringify({clothingItemId:i.clothingItemId})});if(401===e.status)return void o("/login");if(e.ok){alert(t("booking.success",{defaultValue:"Product booked successfully!"})),b(e=>{const t=(e||0)+1;try{localStorage.setItem(`reservations:${i.clothingItemId}`,String(t))}catch{}return t}),await I(i.clothingItemId);try{localStorage.setItem("reservationUpdated",Date.now().toString())}catch{}}else{const n=await e.text();alert(t("errors.booking_api",{message:n,defaultValue:`Booking error: ${n}`}))}}catch{alert(t("errors.booking_failed",{defaultValue:"An error occurred while booking."}))}finally{g(!1)}}else alert(t("booking.login_required",{defaultValue:"Please log in to make a reservation."}))},disabled:m,className:"rezerve-button",children:m?t("booking.reserving",{defaultValue:"Booking this product..."}):_>0?t("booking.reserve_another",{defaultValue:"Book Another"}):t("booking.reserve",{defaultValue:"Book Product"})}),_>0&&(0,ts.jsx)("div",{className:"info-card",style:{marginTop:8},children:(0,ts.jsxs)("p",{children:[(0,ts.jsxs)("strong",{children:[t("booking.count_label",{defaultValue:"Booked"}),":"]})," ",x?"\u2026":_]})})]})]})]}),j&&(0,ts.jsx)("div",{className:"lightbox-overlay",role:"dialog","aria-modal":"true",onClick:D,children:(0,ts.jsxs)("div",{className:"lightbox-inner",onClick:e=>e.stopPropagation(),children:[(0,ts.jsx)("button",{className:"lightbox-close","aria-label":t("lightbox.close",{defaultValue:"Close"}),onClick:D,title:t("lightbox.close",{defaultValue:"Close"}),children:"\xd7"}),(0,ts.jsx)("button",{className:"lightbox-arrow left",onClick:O,"aria-label":t("carousel.prev",{defaultValue:"Previous image"}),children:"\u2039"}),(0,ts.jsx)("button",{className:"lightbox-arrow right",onClick:R,"aria-label":t("carousel.next",{defaultValue:"Next image"}),children:"\u203a"}),(0,ts.jsx)("div",{className:"lightbox-viewport",children:(0,ts.jsx)("img",{src:z,alt:t("carousel.main_alt",{defaultValue:"Main product"}),className:"lightbox-image",onMouseDown:e=>{1!==k&&(e.preventDefault(),E(!0),L.current={x:e.clientX,y:e.clientY},M.current={...P})},onClick:()=>{1===k?N(2):(N(1),T({x:0,y:0}))},style:{cursor:1===k?"zoom-in":C?"grabbing":"grab",transform:`translate(calc(-50% + ${P.x}px), calc(-50% + ${P.y}px)) scale(${k})`},draggable:!1})}),(0,ts.jsxs)("div",{className:"lightbox-toolbar",children:[(0,ts.jsx)("button",{className:"lightbox-tool",onClick:()=>N(e=>Math.max(1,+(e-.25).toFixed(2))),disabled:k<=1,title:t("lightbox.zoom_out",{defaultValue:"Zoom out"}),children:"\u2212"}),(0,ts.jsxs)("span",{className:"lightbox-zoom-label",children:[Math.round(100*k),"%"]}),(0,ts.jsx)("button",{className:"lightbox-tool",onClick:()=>N(e=>Math.min(4,+(e+.25).toFixed(2))),title:t("lightbox.zoom_in",{defaultValue:"Zoom in"}),children:"+"}),(0,ts.jsx)("button",{className:"lightbox-tool",onClick:()=>{N(1),T({x:0,y:0})},title:t("lightbox.reset",{defaultValue:"Reset"}),children:"100%"})]})]})}),(0,ts.jsx)(ds,{})]})};delete di().Icon.Default.prototype._getIconUrl,di().Icon.Default.mergeOptions({iconRetinaUrl:n(249),iconUrl:n(24),shadowUrl:n(71)});const al="http://77.242.26.150:8000/api",ll=Array.from({length:96},(e,t)=>`${String(Math.floor(t/4)).padStart(2,"0")}:${String(t%4*15).padStart(2,"0")}`),cl=[{key:"monday",label:"days.monday"},{key:"tuesday",label:"days.tuesday"},{key:"wednesday",label:"days.wednesday"},{key:"thursday",label:"days.thursday"},{key:"friday",label:"days.friday"},{key:"saturday",label:"days.saturday"},{key:"sunday",label:"days.sunday"}],ul=["Mo","Tu","We","Th","Fr","Sa","Su"],dl={monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!0},sunday:{open:"10:00",close:"14:00",closed:!0}};function hl(){const e=localStorage.getItem("token");if(!e)return null;try{const t=JSON.parse(e);return t.token||t}catch{return e}}function pl(e){const[t,n]=e.split(":"),s=String(Number(t));return"00"===n?s:`${s}:${n}`}function fl(e,t){return e.open===t.open&&e.close===t.close&&!e.closed&&!t.closed}function ml(e){let{value:t,onChange:n}=e;const{t:s}=Me("registerBusiness"),o=(e,s)=>n({...t,[e]:{...t[e],...s}});return(0,ts.jsxs)("div",{className:"hours-picker",children:[(0,ts.jsxs)("div",{className:"hours-toolbar",children:[(0,ts.jsx)(bi,{type:"button",variant:"secondary",onClick:()=>{const e=t.monday,s={};for(const t of cl)s[t.key]={...e};n(s)},children:s("hours.use_monday",{defaultValue:"Use Monday for all"})}),(0,ts.jsx)(bi,{type:"button",variant:"outline",onClick:()=>{const e={};for(const n of cl)e[n.key]={...t[n.key],closed:!0};n(e)},children:s("hours.mark_all_closed",{defaultValue:"Mark all closed"})})]}),(0,ts.jsxs)("div",{className:"hours-grid",children:[(0,ts.jsxs)("div",{className:"hours-grid-head",children:[(0,ts.jsx)("div",{children:s("hours.day",{defaultValue:"Day"})}),(0,ts.jsx)("div",{children:s("hours.open",{defaultValue:"Open"})}),(0,ts.jsx)("div",{children:s("hours.close",{defaultValue:"Close"})}),(0,ts.jsx)("div",{children:s("hours.closed",{defaultValue:"Closed"})})]}),cl.map(e=>{let{key:n,label:i}=e;const r=t[n],a=!!r.closed;return(0,ts.jsxs)("div",{className:"hours-row",children:[(0,ts.jsx)("div",{className:"hours-day",children:s(i)}),(0,ts.jsx)("div",{className:"hours-cell "+(a?"disabled":""),children:(0,ts.jsxs)(pi,{value:r.open,onValueChange:e=>o(n,{open:e}),disabled:a,children:[(0,ts.jsx)(mi,{className:"time-trigger",children:(0,ts.jsx)(fi,{placeholder:s("hours.open_ph",{defaultValue:"Open"})})}),(0,ts.jsx)(gi,{className:"time-content",children:ll.map(e=>(0,ts.jsx)(vi,{value:e,children:e},e))})]})}),(0,ts.jsx)("div",{className:"hours-cell "+(a?"disabled":""),children:(0,ts.jsxs)(pi,{value:r.close,onValueChange:e=>o(n,{close:e}),disabled:a,children:[(0,ts.jsx)(mi,{className:"time-trigger",children:(0,ts.jsx)(fi,{placeholder:s("hours.close_ph",{defaultValue:"Close"})})}),(0,ts.jsx)(gi,{className:"time-content",children:ll.map(e=>(0,ts.jsx)(vi,{value:e,children:e},e))})]})}),(0,ts.jsx)("div",{className:"hours-cell",children:(0,ts.jsx)(yi,{checked:r.closed,onCheckedChange:e=>o(n,{closed:e}),"aria-label":s("hours.closed_on",{day:s(i),defaultValue:"Closed on {{day}}"})})})]},n)})]})]})}function gl(){const{t:t}=Me("registerBusiness"),n=_n(),{search:s}=vn(),o=new URLSearchParams(s).get("token"),[i,r]=(0,e.useState)({name:"",description:"",businessEmail:"",location:"",businessPhoneNumber:"",nipt:"",openingHours:""}),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)([]),[p,f]=(0,e.useState)(null),[m,g]=(0,e.useState)(!1),[v,y]=(0,e.useState)(null),[_,b]=(0,e.useState)(null),[x,w]=(0,e.useState)(!1),[j,S]=(0,e.useState)(!1),[k,N]=(0,e.useState)(0),[C,E]=(0,e.useState)({}),[P,T]=(0,e.useState)(!1),[L,M]=(0,e.useState)(dl),I=(0,e.useRef)(null),A=(0,e.useRef)(null),z=(0,e.useRef)(null),O=(0,e.useRef)(null);(0,e.useEffect)(()=>{const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;const n=[e.monday,e.tuesday,e.wednesday,e.thursday,e.friday,e.saturday,e.sunday],s=n.map(e=>!e.closed);if(s.every(e=>!e))return"Closed";const o=s.findIndex(Boolean),i=n[o];if(s.every((e,t)=>e===s[o])&&n.every(e=>fl(e,i))&&!i.closed){const e=`Daily ${pl(i.open)}-${pl(i.close)}`;return e.length<=t?e:"Varies by day"}const r=[];let a=0;for(;a<7;){if(!s[a]){a++;continue}const e=a,t=n[a];for(;a+1<7&&s[a+1]&&fl(n[a+1],t);)a++;const o=a;r.push({start:e,end:o,open:pl(t.open),close:pl(t.close)}),a++}const l=r.map(e=>`${e.start===e.end?ul[e.start]:`${ul[e.start]}-${ul[e.end]}`} ${e.open}-${e.close}`);let c="";for(let u of l){const e=c?`${c} ${u}`:u;if(!(e.length<=t))break;c=e}return c||(c=l[0]||"Varies by day"),c.length>t&&(c="Varies by day"),c}(L,20);r(t=>({...t,openingHours:e}))},[L]),(0,e.useEffect)(()=>{const e=["name","description","businessPhoneNumber","nipt","openingHours"].map(e=>{var t;return null!==(t=i[e])&&void 0!==t&&t.trim?""!==i[e].trim():!!i[e]}).filter(Boolean).length,t=[a,c].filter(Boolean).length;N((e+t+(p?1:0))/8*100)},[i,a,c,p]),(0,e.useEffect)(()=>{fetch(`${al}/User/me`,{headers:{Authorization:`Bearer ${hl()}`}}).then(e=>{if(!e.ok)throw new Error("Failed to load user info");return e.json()}).then(e=>{r(t=>({...t,businessEmail:e.email}))}).catch(()=>{console.warn("Could not fetch user email")})},[]),(0,e.useEffect)(()=>{if(!o)return y(t("errors.missing_token",{defaultValue:"Missing access token"})),void w(!0);fetch(`${al}/payment/validate-token?token=${o}`).then(e=>e.ok?e.json():Promise.reject()).then(e=>S(e.valid)).catch(()=>y(t("errors.invalid_token",{defaultValue:"Invalid or expired token"}))).finally(()=>w(!0))},[o,t]),(0,e.useEffect)(()=>{if(!x||!j||!z.current)return;var e;I.current&&(I.current.remove(),null===(e=A.current)||void 0===e||e.remove());const t=di().map(z.current,{center:[41.3275,19.8187],zoom:10,zoomControl:!1,layers:[di().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"})]});return t.on("click",e=>{const{lat:t,lng:n}=e.latlng;f([t,n]),r(e=>({...e,location:`${t.toFixed(6)},${n.toFixed(6)}`})),h([]),T(!1),E(e=>({...e,location:null})),R(t,n)}),t.whenReady(()=>t.invalidateSize()),I.current=t,()=>t.remove()},[x,j]),(0,e.useEffect)(()=>{var e;const t=I.current;if(!t)return;if(null===(e=A.current)||void 0===e||e.remove(),!p)return;const n=di().marker(p,{draggable:!0}).addTo(t);n.on("dragend",e=>{const{lat:t,lng:n}=e.target.getLatLng();f([t,n]),r(e=>({...e,location:`${t.toFixed(6)},${n.toFixed(6)}`})),R(t,n)}),A.current=n,t.setView(p,13)},[p]);const R=async(e,t)=>{try{const n=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`),s=await n.json();s.display_name&&r(e=>({...e,location:s.display_name}))}catch(Uc){console.error("Reverse geocoding failed:",Uc)}},D=(0,e.useCallback)(async e=>{const t=e.target.value;if(r(e=>({...e,location:t})),f(null),E(e=>({...e,location:null})),t.length<3)return h([]),void T(!1);try{const e=await fetch(`https://nominatim.openstreetmap.org/search?format=json&limit=8&q=${encodeURIComponent(t)}&addressdetails=1&extratags=1`),n=(await e.json()).map(e=>({...e,main:e.name||e.display_name.split(",")[0],sub:e.display_name.split(",").slice(1).join(",").trim()}));h(n),T(!0)}catch{h([]),T(!1)}},[]),V=(e,n,s)=>{var o;const i=null===(o=e.target.files)||void 0===o?void 0:o[0];i&&(g(!0),E(e=>({...e,[s]:null})),(async e=>{const t=`https://storage.googleapis.com/edcms_bucket/${Date.now()}-${e.name}`,n=`${t}.txt`;try{let s=await fetch(t,{method:"PUT",headers:{"Content-Type":e.type},body:e});if(!s.ok)throw new Error("Upload failed");if(s=await fetch(n,{method:"PUT",headers:{"Content-Type":"text/plain"},body:t}),!s.ok)throw new Error("TXT write failed");return t}catch(Xl){return console.error(Xl),null}})(i).then(e=>{e?n(e):(y(t("errors.image_upload_failed",{defaultValue:"Image upload failed"})),E(e=>({...e,[s]:t("errors.upload_failed",{defaultValue:"Upload failed"})})))}).finally(()=>g(!1)))},B=(e,t)=>{e(""),E(e=>({...e,[t]:null}))},$=()=>{const e={};return i.name.trim()||(e.name=t("errors.name_required",{defaultValue:"Business name is required"})),i.description.trim()||(e.description=t("errors.desc_required",{defaultValue:"Description is required"})),i.businessPhoneNumber.trim()||(e.businessPhoneNumber=t("errors.phone_required",{defaultValue:"Phone number is required"})),(e=>{const t=Object.values(e),n=t.some(e=>!e.closed),s=t.every(e=>e.closed||e.open&&e.close&&((e,t)=>e<t)(e.open,e.close));return n&&s})(L)||(e.openingHours=t("errors.hours_invalid",{defaultValue:"Please provide valid hours (open < close) and at least one open day"})),i.businessEmail.trim()||(e.businessEmail=t("errors.email_required",{defaultValue:"Business email is required"})),p||(e.location=t("errors.location_required",{defaultValue:"Please select a location"})),i.openingHours&&i.openingHours.length>1e3&&(e.openingHours=t("errors.hours_length",{defaultValue:"Opening hours text must be \u2264 1000 characters"})),E(e),!Object.keys(e).length},F=(e,t)=>{r(n=>({...n,[e]:t})),E(t=>({...t,[e]:null}))};(0,e.useEffect)(()=>{const e=e=>{O.current&&!O.current.contains(e.target)&&T(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return x?j?(0,ts.jsxs)("div",{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"register-business-form-container",children:[(0,ts.jsxs)("div",{className:"form-header",children:[(0,ts.jsx)("h2",{children:t("hero.title",{defaultValue:"Register Your Business"})}),(0,ts.jsx)("p",{children:t("hero.subtitle",{defaultValue:"Create your business profile and start reaching customers today"})})]}),(0,ts.jsx)("div",{className:"form-progress","aria-label":t("progress.aria",{defaultValue:"Form progress"}),children:(0,ts.jsx)("div",{className:"form-progress-bar",style:{width:`${k}%`}})}),(0,ts.jsxs)("form",{className:"register-business-form",onSubmit:async e=>{if(e.preventDefault(),y(null),b(null),$()){g(!0);try{const e={name:i.name.trim(),description:i.description,businessEmail:i.businessEmail,businessPhoneNumber:i.businessPhoneNumber,nipt:i.nipt,openingHours:i.openingHours,profilePictureUrl:a,coverPictureUrl:c,location:`${p[0]},${p[1]}`},s=await fetch(`${al}/Business?token=${encodeURIComponent(o)}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${hl()}`},body:JSON.stringify(e)});if(!s.ok){const e=await s.text();throw new Error(e||"Registration failed")}const d=await s.json();b(t("success.registered",{defaultValue:"Business registered successfully!"})),r(e=>({...e,name:"",description:"",location:"",businessPhoneNumber:"",nipt:"",openingHours:""})),l(""),u(""),f(null),h([]),T(!1),E({}),setTimeout(()=>n(`/shop/${d.slug}`),1500)}catch(Xl){y(Xl.message)}finally{g(!1)}}else y(t("errors.fill_required",{defaultValue:"Please fill in all required fields"}))},noValidate:!0,children:[(0,ts.jsxs)("div",{className:"form-group "+(C.name?"error":""),children:[(0,ts.jsx)("label",{htmlFor:"name",children:t("fields.name.label",{defaultValue:"Business Name *"})}),(0,ts.jsx)("input",{id:"name",name:"name",type:"text",placeholder:t("fields.name.ph",{defaultValue:"Enter your business name"}),value:i.name,onChange:e=>F("name",e.target.value),required:!0}),C.name&&(0,ts.jsxs)("div",{className:"error-message",children:["\u26a0\ufe0f ",C.name]})]}),(0,ts.jsxs)("div",{className:"form-group "+(C.description?"error":""),children:[(0,ts.jsx)("label",{htmlFor:"description",children:t("fields.description.label",{defaultValue:"Description *"})}),(0,ts.jsx)("textarea",{id:"description",name:"description",placeholder:t("fields.description.ph",{defaultValue:"Describe your business and services"}),value:i.description,onChange:e=>F("description",e.target.value),required:!0}),C.description&&(0,ts.jsxs)("div",{className:"error-message",children:["\u26a0\ufe0f ",C.description]})]}),(0,ts.jsxs)("div",{className:"form-group "+(C.businessEmail?"error":""),children:[(0,ts.jsx)("label",{htmlFor:"businessEmail",children:t("fields.email.label",{defaultValue:"Business Email *"})}),(0,ts.jsx)("input",{id:"businessEmail",name:"businessEmail",type:"text",placeholder:t("fields.email.ph",{defaultValue:"Enter your business email"}),value:i.businessEmail,onChange:e=>F("businessEmail",e.target.value),required:!0}),C.businessEmail&&(0,ts.jsxs)("div",{className:"error-message",children:["\u26a0\ufe0f ",C.businessEmail]})]}),(0,ts.jsxs)("div",{className:"form-group "+(C.businessPhoneNumber?"error":""),children:[(0,ts.jsx)("label",{htmlFor:"phone",children:t("fields.phone.label",{defaultValue:"Phone Number *"})}),(0,ts.jsx)("input",{id:"phone",name:"businessPhoneNumber",type:"tel",placeholder:t("fields.phone.ph",{defaultValue:"Enter your business phone number"}),value:i.businessPhoneNumber,onChange:e=>F("businessPhoneNumber",e.target.value),required:!0}),C.businessPhoneNumber&&(0,ts.jsxs)("div",{className:"error-message",children:["\u26a0\ufe0f ",C.businessPhoneNumber]})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"nipt",children:t("fields.nipt.label",{defaultValue:"NIPT (Tax Number)"})}),(0,ts.jsx)("input",{id:"nipt",name:"nipt",type:"text",placeholder:t("fields.nipt.ph",{defaultValue:"Enter your tax identification number"}),value:i.nipt,onChange:e=>F("nipt",e.target.value)})]}),(0,ts.jsxs)("div",{className:"form-group "+(C.openingHours?"error":""),children:[(0,ts.jsx)("label",{children:t("fields.hours.label",{defaultValue:"Opening Hours"})}),(0,ts.jsx)(ml,{value:L,onChange:M}),C.openingHours&&(0,ts.jsxs)("div",{className:"error-message",children:["\u26a0\ufe0f ",C.openingHours]})]}),(0,ts.jsxs)("div",{className:"form-group "+(C.location?"error":""),children:[(0,ts.jsx)("label",{htmlFor:"location",children:t("fields.location.label",{defaultValue:"Location *"})}),(0,ts.jsxs)("div",{className:"location-input-container",ref:O,children:[(0,ts.jsxs)("div",{className:"location-input-wrapper",children:[(0,ts.jsx)("div",{className:"location-input-icon",children:"\ud83d\udccd"}),(0,ts.jsx)("input",{id:"location",type:"text",className:"location-input",placeholder:t("fields.location.ph",{defaultValue:"Start typing to search for location..."}),value:i.location,onChange:D,onFocus:()=>T(d.length>0),required:!0}),i.location&&(0,ts.jsx)("button",{type:"button",className:"location-clear-btn",onClick:()=>{var e;r(e=>({...e,location:""})),f(null),h([]),T(!1),E(e=>({...e,location:null})),null===(e=O.current)||void 0===e||e.focus()},title:t("fields.location.clear",{defaultValue:"Clear location"}),children:"\u2715"})]}),P&&d.length>0&&(0,ts.jsx)("ul",{className:"location-suggestions",children:d.map(e=>(0,ts.jsx)("li",{onClick:()=>(e=>{var t;r(t=>({...t,location:e.display_name})),f([+e.lat,+e.lon]),h([]),T(!1),E(e=>({...e,location:null})),null===(t=O.current)||void 0===t||t.blur()})(e),children:(0,ts.jsxs)("div",{className:"location-suggestion-text",children:[(0,ts.jsx)("div",{className:"location-suggestion-main",children:e.main}),(0,ts.jsx)("div",{className:"location-suggestion-sub",children:e.sub})]})},e.place_id))})]}),C.location&&(0,ts.jsxs)("div",{className:"error-message",children:["\u26a0\ufe0f ",C.location]})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{children:t("map.label",{defaultValue:"Select Location on Map"})}),(0,ts.jsxs)("div",{className:"map-container",children:[(0,ts.jsx)("div",{className:"map-overlay",children:(0,ts.jsxs)("div",{className:"map-overlay-content",children:[(0,ts.jsx)("div",{className:"map-overlay-icon",children:"\ud83d\uddfa\ufe0f"}),(0,ts.jsx)("div",{className:"map-overlay-text",children:t("map.help",{defaultValue:"Click on the map to place a marker at your business location"})})]})}),(0,ts.jsxs)("div",{className:"map-wrapper",children:[(0,ts.jsx)("div",{ref:z,style:{height:"100%",width:"100%"}}),(0,ts.jsxs)("div",{className:"map-controls",children:[(0,ts.jsx)("button",{type:"button",className:"map-control-btn",onClick:()=>{var e;return null===(e=I.current)||void 0===e?void 0:e.zoomIn()},title:t("map.zoom_in",{defaultValue:"Zoom In"}),children:"+"}),(0,ts.jsx)("button",{type:"button",className:"map-control-btn",onClick:()=>{var e;return null===(e=I.current)||void 0===e?void 0:e.zoomOut()},title:t("map.zoom_out",{defaultValue:"Zoom Out"}),children:"\u2212"}),p&&(0,ts.jsx)("button",{type:"button",className:"map-control-btn",onClick:()=>{var e;return p&&(null===(e=I.current)||void 0===e?void 0:e.setView(p,15))},title:t("map.center",{defaultValue:"Center on Marker"}),children:"\ud83c\udfaf"})]})]})]})]}),(0,ts.jsx)("br",{}),(0,ts.jsxs)("div",{className:"form-group "+(C.profilePicture?"error":""),children:[(0,ts.jsx)("label",{htmlFor:"profile",children:t("fields.profile.label",{defaultValue:"Profile Photo *"})}),(0,ts.jsxs)("div",{className:"file-input-wrapper",children:[(0,ts.jsx)("input",{id:"profile",type:"file",accept:"image/*",onChange:e=>V(e,l,"profilePicture")}),(0,ts.jsxs)("div",{className:"file-input-label",children:[(0,ts.jsx)("span",{className:"file-input-icon",children:"\ud83d\udcf7"}),(0,ts.jsx)("span",{children:t("fields.profile.pick",{defaultValue:"Choose Profile Photo"})})]})]}),C.profilePicture&&(0,ts.jsxs)("div",{className:"error-message",children:["\u26a0\ufe0f ",C.profilePicture]}),a&&(0,ts.jsxs)("div",{className:"image-preview profile-preview",children:[(0,ts.jsx)("img",{src:a,alt:t("fields.profile.alt",{defaultValue:"Profile preview"})}),(0,ts.jsx)("div",{className:"image-preview-overlay",onClick:()=>B(l,"profilePicture"),title:t("fields.profile.remove",{defaultValue:"Remove image"}),children:"\u2715"})]})]}),(0,ts.jsxs)("div",{className:"form-group "+(C.coverPicture?"error":""),children:[(0,ts.jsx)("label",{htmlFor:"cover",children:t("fields.cover.label",{defaultValue:"Cover Photo *"})}),(0,ts.jsxs)("div",{className:"file-input-wrapper",children:[(0,ts.jsx)("input",{id:"cover",type:"file",accept:"image/*",onChange:e=>V(e,u,"coverPicture")}),(0,ts.jsxs)("div",{className:"file-input-label",children:[(0,ts.jsx)("span",{className:"file-input-icon",children:"\ud83d\uddbc\ufe0f"}),(0,ts.jsx)("span",{children:t("fields.cover.pick",{defaultValue:"Choose Cover Photo"})})]})]}),C.coverPicture&&(0,ts.jsxs)("div",{className:"error-message",children:["\u26a0\ufe0f ",C.coverPicture]}),c&&(0,ts.jsxs)("div",{className:"image-preview cover-preview",children:[(0,ts.jsx)("img",{src:c,alt:t("fields.cover.alt",{defaultValue:"Cover preview"})}),(0,ts.jsx)("div",{className:"image-preview-overlay",onClick:()=>B(u,"coverPicture"),title:t("fields.cover.remove",{defaultValue:"Remove image"}),children:"\u2715"})]})]}),(0,ts.jsx)("button",{type:"submit",className:"submit-button "+(m?"loading":""),disabled:m,children:m?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("div",{className:"loading-spinner"}),(0,ts.jsx)("span",{children:t("cta.registering",{defaultValue:"Registering Business..."})})]}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("span",{children:"\ud83d\ude80"}),(0,ts.jsx)("span",{children:t("cta.register",{defaultValue:"Register Business"})})]})}),v&&(0,ts.jsxs)("div",{className:"error-message",style:{textAlign:"center"},children:["\u26a0\ufe0f ",v]}),_&&(0,ts.jsxs)("div",{className:"success-message",style:{textAlign:"center"},children:["\u2705 ",_]})]})]})]}):(0,ts.jsxs)("div",{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("div",{className:"register-business-form-container",children:(0,ts.jsxs)("div",{className:"form-header",children:[(0,ts.jsx)("h2",{children:t("denied.title",{defaultValue:"Access Denied"})}),(0,ts.jsxs)("p",{className:"error-message",children:["\u26a0\ufe0f ",v||t("errors.invalid_token",{defaultValue:"Invalid or expired access token"})]})]})})]}):(0,ts.jsxs)("div",{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("div",{className:"register-business-form-container",children:(0,ts.jsxs)("div",{className:"loading-state",children:[(0,ts.jsx)("div",{className:"loading-spinner"}),(0,ts.jsx)("p",{className:"loading-text",children:t("status.validating_token",{defaultValue:"Validating access token..."})})]})})]})}const vl=()=>{const e=_n();return(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("div",{className:"unauthorized-page",children:(0,ts.jsxs)("div",{className:"shopcard unauthorized-card",children:[(0,ts.jsx)("div",{className:"unauthorized-icon",children:"\ud83d\udeab"}),(0,ts.jsx)("h2",{className:"unauthorized-title",children:"403 \u2014 Unauthorized"}),(0,ts.jsx)("p",{className:"unauthorized-text",children:"Sorry, you don\u2019t have permission to view this page."}),(0,ts.jsx)("button",{className:"btn btn-primary unauthorized-btn",onClick:()=>e("/"),children:"Back to Home"})]})})]})},yl="http://77.242.26.150:8000";function _l(){const{t:t}=Me("usersettings"),n=_n(),[s,o]=(0,e.useState)({userId:null,name:"",email:"",telephoneNumber:"",profilePictureUrl:"",dateOfBirth:""}),[i,r]=(0,e.useState)(""),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(!1),[p,f]=(0,e.useState)(""),[m,g]=(0,e.useState)(""),[v,y]=(0,e.useState)(!1),_=(()=>{const e=localStorage.getItem("token");if(!e)return null;try{const t=JSON.parse(e);return t.token||t}catch{return e}})(),b={"Content-Type":"application/json",..._&&{Authorization:`Bearer ${_}`}},x=(e=>{if(!e)return{score:0,label:"",width:0,color:""};let t=0;const n={length:e.length>=8,lowercase:/[a-z]/.test(e),uppercase:/[A-Z]/.test(e),numbers:/\d/.test(e),special:/[!@#$%^&*(),.?":{}|<>]/.test(e)};return t=Object.values(n).filter(Boolean).length,t<=2?{score:t,label:"Weak",width:25,color:"weak",checks:n}:3===t?{score:t,label:"Fair",width:50,color:"fair",checks:n}:4===t?{score:t,label:"Good",width:75,color:"good",checks:n}:{score:t,label:"Strong",width:100,color:"strong",checks:n}})(i),w=[{key:"at_least",text:"At least 8 characters",met:(j=i).length>=8},{key:"lowercase",text:"One lowercase letter",met:/[a-z]/.test(j)},{key:"uppercase",text:"One uppercase letter",met:/[A-Z]/.test(j)},{key:"number",text:"One number",met:/\d/.test(j)},{key:"special",text:"One special character",met:/[!@#$%^&*(),.?\":{}|<>]/.test(j)}];var j;const S=i===a&&a.length>0,k=a.length>0&&i!==a;(0,e.useEffect)(()=>{(async()=>{try{const e=await fetch(`${yl}/api/User/me`,{headers:b});if(401===e.status)return void n("/login");if(!e.ok)throw new Error("Failed to fetch profile");const t=await e.json();let s="";if(t.dateOfBirth)try{const e=new Date(t.dateOfBirth);isNaN(e)||(s=e.toISOString().slice(0,10))}catch{}o({userId:t.userId,name:t.name||"",email:t.email||"",telephoneNumber:t.telephoneNumber||"",profilePictureUrl:t.profilePictureUrl||"",dateOfBirth:s})}catch(Xl){console.error("Failed to load profile:",Xl),f(t("errors.load_profile",{defaultValue:"Could not load profile."}))}})()},[]);return(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("div",{className:"user-settings-page",children:(0,ts.jsxs)("div",{className:"user-settings-container",children:[(0,ts.jsxs)("div",{className:"settings-header",children:[(0,ts.jsx)("div",{className:"settings-icon",children:"\u2699\ufe0f"}),(0,ts.jsx)("h1",{className:"settings-title",children:t("title",{defaultValue:"Account Settings"})}),(0,ts.jsx)("p",{className:"settings-subtitle",children:t("subtitle",{defaultValue:"Manage your profile and account preferences"})})]}),p&&(0,ts.jsxs)("div",{className:"status-message error",role:"alert","aria-live":"assertive",children:[(0,ts.jsx)("span",{className:"status-icon",children:"\u26a0\ufe0f"}),(0,ts.jsx)("span",{className:"status-text",children:p})]}),m&&(0,ts.jsxs)("div",{className:"status-message success",role:"status","aria-live":"polite",children:[(0,ts.jsx)("span",{className:"status-icon",children:"\u2705"}),(0,ts.jsx)("span",{className:"status-text",children:m})]}),(0,ts.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f(""),g(""),y(!0),i&&i!==a)return f(t("errors.passwords_mismatch",{defaultValue:"Passwords do not match."})),void y(!1);if(i&&x.score<3)return f(t("errors.password_too_weak",{defaultValue:"Password is too weak. Please choose a stronger password."})),void y(!1);const o={userId:s.userId,name:s.name,email:s.email,telephoneNumber:s.telephoneNumber,profilePictureUrl:s.profilePictureUrl,dateOfBirth:s.dateOfBirth||null,...i?{password:i}:{}};try{const e=await fetch(`${yl}/api/User/${s.userId}`,{method:"PUT",headers:b,body:JSON.stringify(o)});if(401===e.status)return void n("/login");if(!e.ok)throw new Error("Update failed");if(s.profilePictureUrl){localStorage.setItem("latestProfilePicture",s.profilePictureUrl);try{window.dispatchEvent(new Event("latestProfilePicture"))}catch{}}g(t("success.updated",{defaultValue:"Profile updated successfully!"})),r(""),l(""),setTimeout(()=>n("/my-profile"),1500)}catch(Xl){console.error(Xl),f(t("errors.update_failed",{defaultValue:"Update failed. Please try again."}))}finally{y(!1)}},className:"settings-form",noValidate:!0,children:[(0,ts.jsxs)("div",{className:"form-section",children:[(0,ts.jsxs)("h3",{className:"section-title",children:[(0,ts.jsx)("span",{className:"section-icon",children:"\ud83d\udc64"}),t("sections.profile_info",{defaultValue:"Profile Information"})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",children:t("fields.profile_picture",{defaultValue:"Profile Picture"})}),(0,ts.jsxs)("div",{className:"image-upload-container",children:[(0,ts.jsx)("div",{className:"current-image",children:s.profilePictureUrl?(0,ts.jsx)("img",{className:"profile-preview",src:s.profilePictureUrl||"/placeholder.svg",alt:t("aria.profile_preview",{defaultValue:"Profile preview"})}):(0,ts.jsx)("div",{className:"profile-placeholder","aria-label":t("aria.no_picture",{defaultValue:"No picture"}),children:(0,ts.jsx)("span",{children:"\ud83d\udcf7"})})}),(0,ts.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{var n;const s=null===(n=e.target.files)||void 0===n?void 0:n[0];if(!s)return;const i=await(async e=>{if(!e)return null;const t=`https://storage.googleapis.com/edcms_bucket/${Date.now()}-${e.name.replace(/[^a-zA-Z0-9.\-_]/g,"_")}`,n=`${t}.txt`;try{return await fetch(t,{method:"PUT",headers:{"Content-Type":e.type},body:e}),await fetch(n,{method:"PUT",headers:{"Content-Type":"text/plain"},body:t}),t}catch(Xl){return console.error("Upload error:",Xl),null}})(s);i?o(e=>({...e,profilePictureUrl:i})):f(t("errors.image_upload",{defaultValue:"Image upload failed."}))},className:"file-input",id:"profile-image"}),(0,ts.jsx)("label",{htmlFor:"profile-image",className:"file-input-label",children:t("actions.choose_image",{defaultValue:"Choose Image"})})]})]}),(0,ts.jsxs)("div",{className:"form-row",children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",children:t("fields.full_name",{defaultValue:"Full Name"})}),(0,ts.jsx)("input",{type:"text",className:"form-input",value:s.name,onChange:e=>o({...s,name:e.target.value}),required:!0,placeholder:t("placeholders.full_name",{defaultValue:"Enter your full name"}),autoComplete:"name"})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",children:t("fields.email",{defaultValue:"Email Address"})}),(0,ts.jsx)("input",{type:"email",className:"form-input",value:s.email,onChange:e=>o({...s,email:e.target.value}),required:!0,placeholder:t("placeholders.email",{defaultValue:"Enter your email"}),autoComplete:"email"})]})]}),(0,ts.jsxs)("div",{className:"form-row",children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",children:t("fields.phone",{defaultValue:"Phone Number"})}),(0,ts.jsx)("input",{type:"tel",className:"form-input",value:s.telephoneNumber,onChange:e=>o({...s,telephoneNumber:e.target.value}),placeholder:t("placeholders.phone",{defaultValue:"Enter your phone number"}),autoComplete:"tel"})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",children:t("fields.dob",{defaultValue:"Date of Birth"})}),(0,ts.jsx)("input",{type:"date",className:"form-input",value:s.dateOfBirth,onChange:e=>o({...s,dateOfBirth:e.target.value}),placeholder:"YYYY-MM-DD",autoComplete:"bday"})]})]})]}),(0,ts.jsxs)("div",{className:"form-section",children:[(0,ts.jsxs)("h3",{className:"section-title",children:[(0,ts.jsx)("span",{className:"section-icon",children:"\ud83d\udd12"}),t("sections.change_password",{defaultValue:"Change Password"})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",children:t("fields.new_password",{defaultValue:"New Password"})}),(0,ts.jsxs)("div",{className:"password-input-container",children:[(0,ts.jsx)("input",{type:c?"text":"password",className:"form-input",value:i,onChange:e=>r(e.target.value),placeholder:t("placeholders.new_password",{defaultValue:"Enter new password"}),autoComplete:"new-password"}),(0,ts.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>u(!c),disabled:!i,"aria-label":c?t("aria.hide_password",{defaultValue:"Hide password"}):t("aria.show_password",{defaultValue:"Show password"}),children:c?"\ud83d\ude48":"\ud83d\udc41\ufe0f"})]}),i&&(0,ts.jsxs)("div",{className:"password-strength","aria-live":"polite",children:[(0,ts.jsx)("div",{className:"strength-bar",children:(0,ts.jsx)("div",{className:`strength-fill ${x.color}`,style:{width:`${x.width}%`}})}),(0,ts.jsx)("span",{className:`strength-text ${x.color}`,children:t(`strength.${x.label.toLowerCase()}`,{defaultValue:x.label})})]}),i&&(0,ts.jsx)("div",{className:"password-requirements",children:w.map(e=>(0,ts.jsxs)("div",{className:"requirement "+(e.met?"met":"unmet"),children:[(0,ts.jsx)("span",{className:"requirement-icon",children:e.met?"\u2705":"\u274c"}),(0,ts.jsx)("span",{className:"requirement-text",children:t(`requirements.${e.key}`,{defaultValue:e.text})})]},e.key))})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{className:"form-label",children:t("fields.confirm_new_password",{defaultValue:"Confirm New Password"})}),(0,ts.jsxs)("div",{className:"password-input-container",children:[(0,ts.jsx)("input",{type:d?"text":"password",className:`form-input ${k?"error":""} ${S?"success":""}`,value:a,onChange:e=>l(e.target.value),placeholder:t("placeholders.confirm_new_password",{defaultValue:"Confirm new password"}),autoComplete:"new-password"}),(0,ts.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>h(!d),disabled:!a,"aria-label":d?t("aria.hide_password",{defaultValue:"Hide password"}):t("aria.show_password",{defaultValue:"Show password"}),children:d?"\ud83d\ude48":"\ud83d\udc41\ufe0f"})]}),k&&(0,ts.jsxs)("div",{className:"password-mismatch",children:[(0,ts.jsx)("span",{className:"mismatch-icon",children:"\u26a0\ufe0f"}),(0,ts.jsx)("span",{children:t("errors.passwords_mismatch",{defaultValue:"Passwords do not match"})})]}),S&&(0,ts.jsxs)("div",{className:"password-match",children:[(0,ts.jsx)("span",{className:"match-icon",children:"\u2705"}),(0,ts.jsx)("span",{children:t("info.passwords_match",{defaultValue:"Passwords match"})})]})]})]}),(0,ts.jsx)("div",{className:"form-actions",children:(0,ts.jsx)("button",{type:"submit",className:"submit-button "+(v?"loading":""),disabled:v||i&&x.score<3,children:v?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("div",{className:"loading-spinner","aria-hidden":"true"}),(0,ts.jsx)("span",{children:t("cta.saving",{defaultValue:"Saving Changes..."})})]}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("span",{children:"\ud83d\udcbe"}),(0,ts.jsx)("span",{children:t("cta.save",{defaultValue:"Save Changes"})})]})})})]}),(0,ts.jsxs)("div",{className:"danger-zone",children:[(0,ts.jsxs)("div",{className:"danger-zone-header",children:[(0,ts.jsxs)("h3",{className:"danger-zone-title",children:[(0,ts.jsx)("span",{className:"danger-icon",children:"\u26a0\ufe0f"}),t("danger.title",{defaultValue:"Danger Zone"})]}),(0,ts.jsx)("p",{className:"danger-zone-subtitle",children:t("danger.subtitle",{defaultValue:"Once you delete your account, all shops that you might have will be deleted as well and there is no going back. Please be certain."})})]}),(0,ts.jsxs)("button",{className:"delete-account-button",onClick:async()=>{if(window.confirm(t("danger.confirm",{defaultValue:"Are you sure you want to delete your account? This action cannot be undone."})))try{const e=await fetch(`${yl}/api/User/${s.userId}`,{method:"DELETE",headers:b});if(401===e.status)return void n("/login");if(!e.ok)throw new Error("Delete failed");window.location.href="/login"}catch(Xl){console.error(Xl),alert(t("errors.delete_failed",{defaultValue:"Delete failed. Please try again."}))}},children:[(0,ts.jsx)("span",{children:"\ud83d\uddd1\ufe0f"}),(0,ts.jsx)("span",{children:t("danger.delete_btn",{defaultValue:"Delete My Account"})})]})]}),(0,ts.jsxs)("div",{className:"settings-footer",children:[(0,ts.jsxs)("button",{type:"button",className:"back-button",onClick:()=>n("/my-profile"),children:["\u2190 ",t("footer.back_to_profile",{defaultValue:"Back to Profile"})]}),(0,ts.jsxs)("div",{className:"help-links",children:[t("footer.need_help",{defaultValue:"Need Help? Contact Our Support"}),(0,ts.jsx)("span",{className:"separator",children:"\u2022"}),(0,ts.jsx)("a",{href:"/privacy",className:"help-link",children:t("footer.privacy",{defaultValue:"Privacy Policy"})})]})]})]})}),(0,ts.jsx)(ds,{})]})}const bl="http://77.242.26.150:8000",xl=()=>{const e=(()=>{const e=localStorage.getItem("token")||localStorage.getItem("authToken");if(!e||""===e.trim())return null;try{const t=JSON.parse(e);return t.token||t}catch{return e.replace(/^"|"$/g,"")}})(),t={};return e&&(t.Authorization=`Bearer ${e}`),t},wl=()=>{const{t:t,i18n:n}=Me("about"),[s,o]=(0,e.useState)(null),[i,r]=(0,e.useState)(null),a=(0,e.useMemo)(()=>new Intl.NumberFormat(n.language||"en"),[n.language]);return(0,e.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await fetch(`${bl}/api/Business`,{headers:xl()});if(!t.ok){if(console.error("Failed to fetch stores:",t.status),!e)return;return o(0),void r(0)}const n=await t.json(),s=Array.isArray(n)?n:[];if(!e)return;o(s.length);const i=(e,t)=>{const n=[];for(let s=0;s<e.length;s+=t)n.push(e.slice(s,s+t));return n},a=i(s,8);let l=0;for(const o of a){if(!e)return;const t=await Promise.all(o.map(async e=>{var t;const n=null!==(t=e.id)&&void 0!==t?t:e.businessId;if(null==n)return 0;try{const e=await fetch(`${bl}/api/ClothingItem/business/${n}`,{headers:xl()});if(!e.ok)return 0;const t=await e.json();return Array.isArray(t)?t.length:0}catch{return 0}}));if(l+=t.reduce((e,t)=>e+(Number.isFinite(t)?t:0),0),!e)return;r(e=>null==e?l:e+(l-e))}e&&r(e=>null==e?0:e)}catch(Xl){if(console.error("Error fetching stats:",Xl),!e)return;o(0),r(0)}})(),()=>{e=!1}},[]),(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"about-container",children:[(0,ts.jsx)("div",{className:"about-hero",children:(0,ts.jsxs)("div",{className:"about-hero-content",children:[(0,ts.jsx)("h1",{className:"about-title",children:t("hero.title")}),(0,ts.jsx)("p",{className:"about-subtitle",children:t("hero.subtitle")}),(0,ts.jsxs)("div",{className:"about-logo-section",children:[(0,ts.jsx)("img",{src:"/Assets/logo.png",alt:t("hero.logo_alt"),className:"about-logo"}),(0,ts.jsx)("p",{className:"about-slogan",children:t("hero.slogan")})]})]})}),(0,ts.jsxs)("div",{className:"about-content",children:[(0,ts.jsxs)("div",{className:"about-section",children:[(0,ts.jsx)("h2",{className:"about-section-title",children:t("sections.welcome.title")}),(0,ts.jsxs)("p",{className:"about-paragraph",children:[t("sections.welcome.p1.a")," ",(0,ts.jsx)("span",{className:"about-highlight",children:t("sections.welcome.p1.b_highlight")})," ",t("sections.welcome.p1.c")," ",(0,ts.jsx)("span",{className:"about-highlight",children:t("sections.welcome.p1.d_highlight")}),t("sections.welcome.p1.e")]})]}),(0,ts.jsxs)("div",{className:"about-section",children:[(0,ts.jsx)("h2",{className:"about-section-title",children:t("sections.how.title")}),(0,ts.jsxs)("p",{className:"about-paragraph",children:[t("sections.how.p1.a")," ",(0,ts.jsx)("span",{className:"about-highlight",children:t("sections.how.p1.b_highlight")})," ",t("sections.how.p1.c")]})]}),(0,ts.jsxs)("div",{className:"about-section",children:[(0,ts.jsx)("h2",{className:"about-section-title",children:t("sections.real.title")}),(0,ts.jsxs)("p",{className:"about-paragraph",children:[t("sections.real.p1.a")," ",(0,ts.jsx)("span",{className:"about-highlight",children:t("sections.real.p1.b_highlight")})]}),(0,ts.jsx)("p",{className:"about-paragraph",children:t("sections.real.p2")})]}),(0,ts.jsxs)("div",{className:"about-section",children:[(0,ts.jsx)("h2",{className:"about-section-title",children:t("sections.promise.title")}),(0,ts.jsxs)("p",{className:"about-paragraph",children:[t("sections.promise.p1.a")," ",(0,ts.jsx)("span",{className:"about-highlight",children:t("sections.promise.p1.b_highlight")}),"."]}),(0,ts.jsx)("p",{className:"about-paragraph",children:t("sections.promise.p2")})]})]}),(0,ts.jsxs)("div",{className:"about-features",children:[(0,ts.jsxs)("div",{className:"about-feature",children:[(0,ts.jsx)("div",{className:"about-feature-icon",children:"\ud83d\udd0d"}),(0,ts.jsx)("h3",{className:"about-feature-title",children:t("features.realtime.title")}),(0,ts.jsx)("p",{className:"about-feature-description",children:t("features.realtime.desc")})]}),(0,ts.jsxs)("div",{className:"about-feature",children:[(0,ts.jsx)("div",{className:"about-feature-icon",children:"\ud83c\udfea"}),(0,ts.jsx)("h3",{className:"about-feature-title",children:t("features.verified.title")}),(0,ts.jsx)("p",{className:"about-feature-description",children:t("features.verified.desc")})]}),(0,ts.jsxs)("div",{className:"about-feature",children:[(0,ts.jsx)("div",{className:"about-feature-icon",children:"\ud83d\udcf1"}),(0,ts.jsx)("h3",{className:"about-feature-title",children:t("features.mobile.title")}),(0,ts.jsx)("p",{className:"about-feature-description",children:t("features.mobile.desc")})]})]}),(0,ts.jsxs)("div",{className:"about-stats",children:[(0,ts.jsxs)("div",{className:"about-stat",children:[(0,ts.jsx)("div",{className:"about-stat-value",children:null!==s?a.format(s):"\u2026"}),(0,ts.jsx)("div",{className:"about-stat-label",children:t("stats.registered_stores")})]}),(0,ts.jsxs)("div",{className:"about-stat",children:[(0,ts.jsx)("div",{className:"about-stat-value",children:null!==i?a.format(i):"\u2026"}),(0,ts.jsx)("div",{className:"about-stat-label",children:t("stats.products_listed")})]}),(0,ts.jsxs)("div",{className:"about-stat",children:[(0,ts.jsx)("div",{className:"about-stat-value",children:"50+"}),(0,ts.jsx)("div",{className:"about-stat-label",children:t("stats.cities_covered")})]}),(0,ts.jsxs)("div",{className:"about-stat",children:[(0,ts.jsx)("div",{className:"about-stat-value",children:"24/7"}),(0,ts.jsx)("div",{className:"about-stat-label",children:t("stats.realtime_updates")})]})]}),(0,ts.jsx)("div",{className:"about-cta",children:(0,ts.jsxs)("div",{className:"about-cta-content",children:[(0,ts.jsx)("h2",{className:"about-cta-title",children:t("cta.title")}),(0,ts.jsx)("p",{className:"about-cta-text",children:t("cta.text")}),(0,ts.jsxs)("a",{href:"/allshops",className:"about-cta-button","aria-label":t("cta.explore_aria"),children:[t("cta.explore")," ",(0,ts.jsx)("span",{children:"\u2192"})]})]})})]}),(0,ts.jsx)(ds,{})]})},jl=()=>{const{t:e}=Me("privacy");return(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"policy-container",children:[(0,ts.jsx)("h1",{children:e("title")}),(0,ts.jsx)("p",{children:(0,ts.jsx)("strong",{children:e("last_updated")})}),(0,ts.jsx)("p",{children:(0,ts.jsxs)(Te,{i18nKey:"intro",children:["At ",(0,ts.jsx)("strong",{children:"Triwears"}),", your privacy is important to us. This Privacy Policy explains how we collect, use, and protect your personal information when you use our platform."]})}),(0,ts.jsx)("h2",{children:e("info_collect.title")}),(0,ts.jsxs)("ul",{children:[(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("info_collect.items.account.label")})," ",e("info_collect.items.account.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("info_collect.items.business.label")})," ",e("info_collect.items.business.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("info_collect.items.usage.label")})," ",e("info_collect.items.usage.desc")]})]}),(0,ts.jsx)("h2",{children:e("use_info.title")}),(0,ts.jsxs)("ul",{children:[(0,ts.jsx)("li",{children:e("use_info.items.display")}),(0,ts.jsx)("li",{children:e("use_info.items.improve")}),(0,ts.jsx)("li",{children:e("use_info.items.communicate")})]}),(0,ts.jsx)("h2",{children:e("data_protection.title")}),(0,ts.jsx)("p",{children:e("data_protection.body")}),(0,ts.jsx)("h2",{children:e("rights.title")}),(0,ts.jsxs)("ul",{children:[(0,ts.jsx)("li",{children:e("rights.items.access")}),(0,ts.jsx)("li",{children:e("rights.items.optout")})]}),(0,ts.jsx)("h2",{children:e("contact.title")}),(0,ts.jsx)("p",{children:(0,ts.jsxs)(Te,{i18nKey:"contact.body",values:{email:"contact@edshopping.al"},children:["If you have any questions about this policy or our practices, feel free to reach out at: ",(0,ts.jsx)("strong",{children:"contact@edshopping.al"})]})}),(0,ts.jsx)("p",{children:e("consent")})]}),(0,ts.jsx)(ds,{})]})},Sl=()=>{const{t:e}=Me("terms");return(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"policy-container",children:[(0,ts.jsx)("h1",{children:e("title")}),(0,ts.jsx)("p",{children:(0,ts.jsxs)(Te,{i18nKey:"intro",children:["Welcome to ",(0,ts.jsx)("strong",{children:"Triwears"}),' ("we", "us", "our"). By accessing or using our website at ',(0,ts.jsx)("em",{children:"edshopping.al"})," and related services, you agree to be bound by these Terms & Conditions."]})}),(0,ts.jsx)("h2",{children:e("acceptance.title")}),(0,ts.jsx)("p",{children:e("acceptance.body")}),(0,ts.jsx)("h2",{children:e("service_overview.title")}),(0,ts.jsx)("p",{children:e("service_overview.body")}),(0,ts.jsx)("h2",{children:e("user_accounts.title")}),(0,ts.jsxs)("ul",{children:[(0,ts.jsx)("li",{children:e("user_accounts.items.age")}),(0,ts.jsx)("li",{children:e("user_accounts.items.security")}),(0,ts.jsx)("li",{children:e("user_accounts.items.notify")})]}),(0,ts.jsx)("h2",{children:e("payments.title")}),(0,ts.jsx)("p",{children:(0,ts.jsxs)(Te,{i18nKey:"payments.body",components:{OwnerLink:(0,ts.jsx)(Kn,{to:"/become-owner"}),SettingsLink:(0,ts.jsx)(Kn,{to:"/settings"}),em:(0,ts.jsx)("em",{})},children:["Shop owners subscribe via our sandbox payment system at",(0,ts.jsx)(Kn,{to:"/become-owner",children:" Become Owner"})," for a recurring fee of $20/month. Payments are handled through Stripe. Subscriptions renew automatically until canceled. You may cancel anytime via the ",(0,ts.jsx)(Kn,{to:"/settings",children:"Settings "}),"dashboard under ",(0,ts.jsx)("em",{children:"Delete Business"}),". No refunds for partial periods."]})}),(0,ts.jsx)("h2",{children:e("owner_dashboard.title")}),(0,ts.jsx)("p",{children:e("owner_dashboard.intro")}),(0,ts.jsxs)("ul",{children:[(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("owner_dashboard.items.business_info.label")})," ",e("owner_dashboard.items.business_info.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("owner_dashboard.items.products.label")})," ",e("owner_dashboard.items.products.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("owner_dashboard.items.categories.label")})," ",e("owner_dashboard.items.categories.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("owner_dashboard.items.photos.label")})," ",e("owner_dashboard.items.photos.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("owner_dashboard.items.employees.label")})," ",e("owner_dashboard.items.employees.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("owner_dashboard.items.pending.label")})," ",e("owner_dashboard.items.pending.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("owner_dashboard.items.reservations.label")})," ",e("owner_dashboard.items.reservations.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("owner_dashboard.items.notifications.label")})," ",e("owner_dashboard.items.notifications.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("owner_dashboard.items.myshops.label")})," ",e("owner_dashboard.items.myshops.desc")]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:e("owner_dashboard.items.delete.label")})," ",e("owner_dashboard.items.delete.desc")]})]}),(0,ts.jsx)("h2",{children:e("responsibilities.title")}),(0,ts.jsxs)("ul",{children:[(0,ts.jsx)("li",{children:e("responsibilities.items.lawful")}),(0,ts.jsx)("li",{children:e("responsibilities.items.accuracy")}),(0,ts.jsx)("li",{children:e("responsibilities.items.impersonation")})]}),(0,ts.jsx)("h2",{children:e("ip.title")}),(0,ts.jsx)("p",{children:e("ip.body")}),(0,ts.jsx)("h2",{children:e("disclaimers.title")}),(0,ts.jsx)("p",{children:e("disclaimers.body")}),(0,ts.jsx)("h2",{children:e("termination.title")}),(0,ts.jsx)("p",{children:e("termination.body")}),(0,ts.jsx)("h2",{children:e("changes.title")}),(0,ts.jsx)("p",{children:e("changes.body")}),(0,ts.jsx)("h2",{children:e("law.title")}),(0,ts.jsx)("p",{children:e("law.body")}),(0,ts.jsx)("h2",{children:e("contact.title")}),(0,ts.jsx)("p",{children:(0,ts.jsxs)(Te,{i18nKey:"contact.body",values:{email:"edjcms2025@gmail.com"},children:["For questions about these terms, please contact us at"," ",(0,ts.jsx)("strong",{children:"edjcms2025@gmail.com"}),"."]})})]}),(0,ts.jsx)(ds,{})]})};function kl(){return(0,ts.jsxs)("div",{className:"owner-guide page-wrapper",children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("main",{className:"owner-guide-content",children:[(0,ts.jsx)("h1",{children:"Shop Owner Guide"}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"1. Getting Started"}),(0,ts.jsxs)("p",{children:["To become a shop owner, subscribe to the $20/month plan on the ",(0,ts.jsx)(Kn,{to:"/become-owner",children:"Become Owner"})," page. After a successful payment, you\u2019ll be redirected to fill out the Owner Form with your shop details."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"2. Accessing Your Dashboard"}),(0,ts.jsxs)("p",{children:["Once your shop is created, use the Navbar to navigate to ",(0,ts.jsx)(Kn,{to:"/settings",children:"Settings"}),". This will open the Shop Owner Dashboard where you can manage every aspect of your business."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"3. Dashboard Layout"}),(0,ts.jsx)("p",{children:"The Settings page is split into two columns:"}),(0,ts.jsxs)("ul",{children:[(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:"Sidebar:"})," Lists panels for Business Info, Products, Categories, Photos, Employees, Pending Changes, Reservations, Notifications, My Shops, and Delete Business."]}),(0,ts.jsxs)("li",{children:[(0,ts.jsx)("strong",{children:"Content Area:"})," Displays the selected panel\u2019s interface for CRUD operations and data views."]})]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"4. Business Info"}),(0,ts.jsxs)("p",{children:["In the ",(0,ts.jsx)("em",{children:"Business Info"})," panel, update your shop name, description, address, phone number, and opening hours. Click ",(0,ts.jsx)("strong",{children:"Save"})," to apply changes immediately."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"5. Product Management"}),(0,ts.jsxs)("p",{children:["The ",(0,ts.jsx)("em",{children:"Products"})," panel lets you add, edit, or delete clothing items. You can upload up to 10 photos per product, preview them, and remove individual images before saving."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"6. Categories"}),(0,ts.jsxs)("p",{children:["Under ",(0,ts.jsx)("em",{children:"Categories"}),", create and manage product categories (e.g., T-shirts, Boots). You can either use Premade Categories made by us or you can add your own unique categpry. It will be displayed as a category for everyone to see"]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"7. Photos"}),(0,ts.jsxs)("p",{children:["In the ",(0,ts.jsx)("em",{children:"Photos"})," panel, upload or update your shop\u2019s cover image and logo. Images are stored in Google Cloud Storage; once uploaded, they appear instantly on your public Shop page."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"8. Employees"}),(0,ts.jsxs)("p",{children:["The ",(0,ts.jsx)("em",{children:"Employees"})," panel allows you to search users by email and promote them to employee role. Employees can propose product additions or edits, which you\u2019ll then review under Pending Changes."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"9. Pending Changes"}),(0,ts.jsxs)("p",{children:["Review all product changes proposed by employees in ",(0,ts.jsx)("em",{children:"Pending Changes"}),". Approve or reject each change. Approved changes go live immediately; rejected ones remain editable by employees."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"10. Reservations"}),(0,ts.jsxs)("p",{children:["View customer reservation requests in the ",(0,ts.jsx)("em",{children:"Reservations"})," panel. Accept or decline reservations and manage availability directly from your dashboard."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"11. Notifications"}),(0,ts.jsxs)("p",{children:["All system notifications (e.g., payment receipts, reservation updates) are logged under ",(0,ts.jsx)("em",{children:"Notifications"}),". Use this panel to review your notification history and resend any needed alerts."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"12. My Shops"}),(0,ts.jsxs)("p",{children:["If you own multiple shops, switch between them easily in ",(0,ts.jsx)("em",{children:"My Shops"}),". Selecting a different shop reloads the dashboard panels with that shop\u2019s data."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"13. Deleting Your Shop"}),(0,ts.jsxs)("p",{children:["To permanently remove a shop, go to the ",(0,ts.jsx)("em",{children:"Delete Business"})," panel. This action is irreversible\u2014make sure you have backups of any important data."]})]}),(0,ts.jsxs)("section",{children:[(0,ts.jsx)("h2",{children:"14. Support"}),(0,ts.jsx)("p",{children:"For technical support or feature requests, contact our team via the email edjcms2025@gmail.com."})]})]}),(0,ts.jsx)(ds,{})]})}function Nl(){const[t,n]=(0,e.useState)("loading"),s=_n();return(0,e.useEffect)(()=>{const e=new URLSearchParams(window.location.search),t=e.get("userId"),o=e.get("token");t&&o?fetch(`http://77.242.26.150:8000/api/Auth/confirm-email?userId=${encodeURIComponent(t)}&token=${encodeURIComponent(o)}`,{method:"GET"}).then(e=>{e.ok?(n("success"),setTimeout(()=>s("/login"),3e3)):n("error")}).catch(()=>n("error")):n("error")},[s]),(0,ts.jsxs)("div",{className:"confirmation-page",children:["loading"===t&&(0,ts.jsx)("p",{children:"Verifying your email\u2026"}),"success"===t&&(0,ts.jsxs)("div",{children:[(0,ts.jsx)("h2",{children:"Email confirmed!"}),(0,ts.jsx)("p",{children:"You will be redirected to login shortly."})]}),"error"===t&&(0,ts.jsxs)("div",{children:[(0,ts.jsx)("h2",{children:"Oops! Confirmation failed."}),(0,ts.jsx)("p",{children:"Please check your link or request another confirmation email."})]})]})}const Cl=e=>{var t;return`/shop/${(null===e||void 0===e?void 0:e.slug)&&String(e.slug).trim()||(t=null===e||void 0===e?void 0:e.slug,String(t||"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""))}`},El=e=>{var t,n,s;const o=null!==(t=null!==(n=null!==(s=null===e||void 0===e?void 0:e.role)&&void 0!==s?s:null===e||void 0===e?void 0:e.roleName)&&void 0!==n?n:null===e||void 0===e?void 0:e.Role)&&void 0!==t?t:null;return"Admin"===o||"admin"===o||1===o||"1"===o||"Administrator"===o},Pl=()=>{const{userId:t}=bn(),n=_n(),[s,o]=(0,e.useState)(null),[i,r]=(0,e.useState)({loading:!0,error:""});return(0,e.useEffect)(()=>{!async function(){const e=localStorage.getItem("token");try{const s=await fetch(`http://77.242.26.150:8000/api/User/${t}`,{headers:{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}});if(401===s.status)return n("/login");if(404===s.status)return void r({loading:!1,error:"User not found."});if(!s.ok)throw new Error(`Server returned ${s.status}`);const i=await s.json();o(i),r({loading:!1,error:""})}catch(Xl){r({loading:!1,error:Xl.message||"Failed to load."})}}()},[t,n]),i.loading?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("div",{className:"public-profile-container",children:(0,ts.jsxs)("div",{className:"public-profile-loading",children:[(0,ts.jsx)("div",{className:"loading-spinner-public"}),(0,ts.jsxs)("div",{className:"loading-dots-public",children:[(0,ts.jsx)("span",{}),(0,ts.jsx)("span",{}),(0,ts.jsx)("span",{})]}),(0,ts.jsx)("p",{className:"loading-text-public",children:"Loading profile\u2026"})]})}),(0,ts.jsx)(ds,{})]}):i.error?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("div",{className:"public-profile-container",children:(0,ts.jsxs)("div",{className:"public-profile-error",children:[(0,ts.jsxs)("div",{className:"error-animation-public",children:[(0,ts.jsx)("div",{className:"error-icon-public",children:"\ud83d\ude14"}),(0,ts.jsx)("div",{className:"error-waves-public"})]}),(0,ts.jsx)("h2",{className:"error-title-public",children:"Oops! Something went wrong"}),(0,ts.jsx)("p",{className:"error-message-public",children:i.error}),(0,ts.jsxs)("button",{className:"btn-retry-public",onClick:()=>window.location.reload(),children:[(0,ts.jsx)("span",{children:"\ud83d\udd04"}),"Try Again"]})]})}),(0,ts.jsx)(ds,{})]}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"public-profile-container",children:[(0,ts.jsxs)("div",{className:"public-profile-background",children:[(0,ts.jsx)("div",{className:"gradient-orb orb-1"}),(0,ts.jsx)("div",{className:"gradient-orb orb-2"}),(0,ts.jsx)("div",{className:"gradient-orb orb-3"}),(0,ts.jsx)("div",{className:"floating-particles",children:[...Array(20)].map((e,t)=>(0,ts.jsx)("div",{className:"particle",style:{left:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:3+4*Math.random()+"s"}},t))})]}),(0,ts.jsx)("div",{className:"public-profile-hero",children:(0,ts.jsxs)("div",{className:"hero-content-public",children:[(0,ts.jsx)("div",{className:"avatar-section-public",children:(0,ts.jsxs)("div",{className:"avatar-container-public",children:[(0,ts.jsx)("img",{src:s.profilePictureUrl||"/Assets/default-avatar.jpg",alt:s.name,className:"profile-picture-public"}),(0,ts.jsx)("div",{className:"avatar-ring-public"}),(0,ts.jsx)("div",{className:"online-indicator-public"})]})}),(0,ts.jsxs)("div",{className:"profile-info-public",children:[(0,ts.jsx)("h1",{className:"profile-name-public",children:s.name}),(0,ts.jsxs)("div",{className:"profile-details-public",children:[(0,ts.jsxs)("div",{className:"detail-item-public",children:[(0,ts.jsx)("span",{className:"detail-icon-public",children:"\u2709\ufe0f"}),(0,ts.jsx)("span",{className:"detail-text-public",children:s.email})]}),s.telephoneNumber&&(0,ts.jsxs)("div",{className:"detail-item-public",children:[(0,ts.jsx)("span",{className:"detail-icon-public",children:"\ud83d\udcde"}),(0,ts.jsx)("span",{className:"detail-text-public",children:s.telephoneNumber})]})]}),(0,ts.jsxs)("div",{className:"profile-badges-public",children:[(0,ts.jsxs)("div",{className:"badge-public verified-badge",children:[(0,ts.jsx)("span",{className:"badge-icon-public",children:"\u2713"}),"Verified User"]}),s.businesses&&s.businesses.length>0&&(0,ts.jsxs)("div",{className:"badge-public business-badge",children:[(0,ts.jsx)("span",{className:"badge-icon-public",children:"\ud83c\udfea"}),"Business Owner"]})]})]})]})}),(0,ts.jsxs)("div",{className:"public-profile-content",children:[(0,ts.jsxs)("div",{className:"stats-section-public",children:[(0,ts.jsxs)("div",{className:"stat-card-public",children:[(0,ts.jsx)("div",{className:"stat-icon-public",children:"\ud83d\udc64"}),(0,ts.jsxs)("div",{className:"stat-info-public",children:[(0,ts.jsx)("div",{className:"stat-value-public",children:"Admin"===s.role?"Support Agent":"Member"}),(0,ts.jsx)("div",{className:"stat-label-public",children:"Status"})]})]}),!El(s)&&(0,ts.jsxs)("div",{className:"stat-card-public",children:[(0,ts.jsx)("div",{className:"stat-icon-public",children:"\ud83c\udfea"}),(0,ts.jsxs)("div",{className:"stat-info-public",children:[(0,ts.jsx)("div",{className:"stat-value-public",children:Array.isArray(s.businesses)?s.businesses.length:0}),(0,ts.jsx)("div",{className:"stat-label-public",children:"Businesses"})]})]})]}),!El(s)&&Array.isArray(s.businesses)&&s.businesses.length>0&&(0,ts.jsxs)("div",{className:"businesses-section-public",children:[(0,ts.jsxs)("div",{className:"section-header-public",children:[(0,ts.jsxs)("h3",{className:"section-title-public",children:[(0,ts.jsx)("span",{className:"title-icon-public",children:"\ud83c\udfea"}),"Businesses Owned"]}),(0,ts.jsx)("div",{className:"section-decoration-public"})]}),(0,ts.jsx)("div",{className:"businesses-grid-public",children:s.businesses.map((e,t)=>{var n;return(0,ts.jsxs)("div",{className:"business-card-public",style:{animationDelay:.1*t+"s"},children:[(0,ts.jsx)("div",{className:"business-card-background-public"}),(0,ts.jsxs)("div",{className:"business-card-content-public",children:[(0,ts.jsxs)("div",{className:"business-header-public",children:[(0,ts.jsx)("div",{className:"business-logo-public",children:(0,ts.jsx)("img",{src:e.profilePictureUrl||"/default-shop-logo.png",alt:`${e.name||"Business"} logo`,className:"business-logo-img-public"})}),(0,ts.jsxs)("div",{className:"business-status-public",children:[(0,ts.jsx)("div",{className:"status-dot-public open"}),(0,ts.jsx)("span",{children:"Active"})]})]}),(0,ts.jsxs)("div",{className:"business-info-public",children:[(0,ts.jsx)("h4",{className:"business-name-public",children:e.name||"Business"}),e.address&&(0,ts.jsxs)("div",{className:"business-detail-public",children:[(0,ts.jsx)("span",{className:"business-detail-icon-public",children:"\ud83d\udccd"}),(0,ts.jsx)("span",{className:"business-detail-text-public",children:e.address})]}),e.category&&(0,ts.jsxs)("div",{className:"business-detail-public",children:[(0,ts.jsx)("span",{className:"business-detail-icon-public",children:"\ud83c\udff7\ufe0f"}),(0,ts.jsx)("span",{className:"business-detail-text-public",children:e.category})]})]}),(0,ts.jsx)("div",{className:"business-actions-public",children:(0,ts.jsxs)(Kn,{to:Cl(e),className:"btn-view-business-public",children:[(0,ts.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),"View Business"]})})]})]},null!==(n=e.businessId)&&void 0!==n?n:t)})})]})]})]}),(0,ts.jsx)(ds,{})]})},Tl=()=>{const t=_n(),[n,s]=(0,e.useState)([]),[o,i]=(0,e.useState)(""),[r,a]=(0,e.useState)(""),[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)(null),[h,p]=(0,e.useState)(1),f=(0,e.useMemo)(()=>{const e=localStorage.getItem("token");if(!e)return null;try{var t,n;const s=JSON.parse(atob(e.split(".")[1])),o=null!==(t=null!==(n=s.UserId)&&void 0!==n?n:s.userId)&&void 0!==t?t:s.nameid;return null!=o?String(o):null}catch{return null}},[]);(0,e.useEffect)(()=>{(async()=>{const e=localStorage.getItem("token");try{const n=await fetch("http://77.242.26.150:8000/api/User/all",{headers:{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}});if(401===n.status)return t("/login");if(!n.ok)throw new Error(`Server returned ${n.status}`);const o=await n.json();s(o)}catch(Xl){d(Xl.message||"Unknown error")}finally{c(!1)}})()},[t]),(0,e.useEffect)(()=>{const e=setTimeout(()=>a(o.trim()),300);return()=>clearTimeout(e)},[o]);const m=(0,e.useMemo)(()=>{if(!r)return n;let e;try{e=new RegExp(r,"i")}catch{return n}return n.filter(t=>e.test(t.name)||e.test(t.email)||t.telephoneNumber&&e.test(t.telephoneNumber))},[n,r]),g=Math.ceil(m.length/6)||1,v=(0,e.useMemo)(()=>{const e=6*(h-1);return m.slice(e,e+6)},[m,h]);return(0,e.useEffect)(()=>{p(1)},[m]),(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"users-page-container",children:[(0,ts.jsx)("h2",{children:"All Registered Users"}),(0,ts.jsx)("input",{type:"text",className:"user-search-input",placeholder:"Search by name, email, or phone",value:o,onChange:e=>i(e.target.value)}),!l&&!u&&(0,ts.jsxs)("p",{className:"status-line",children:["Showing ",v.length," of ",m.length," user",1!==m.length&&"s"]}),l&&(0,ts.jsx)("div",{className:"users-list",children:Array.from({length:6}).map((e,t)=>(0,ts.jsxs)("div",{className:"user-card skeleton-card",children:[(0,ts.jsx)("div",{className:"avatar-placeholder"}),(0,ts.jsxs)("div",{className:"info-placeholder",children:[(0,ts.jsx)("div",{className:"line short"}),(0,ts.jsx)("div",{className:"line long"})]})]},t))}),u&&(0,ts.jsxs)("p",{className:"error-text",children:["Error: ",u]}),!l&&!u&&0===m.length&&(0,ts.jsx)("p",{className:"no-results",children:"No users found."}),!l&&!u&&m.length>0&&(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("div",{className:"users-list",children:v.map(e=>(0,ts.jsxs)("div",{className:"user-card",onClick:()=>t(String(e.userId)===f?"/my-profile":`/profile/${e.userId}`),children:[(0,ts.jsx)("img",{src:e.profilePictureUrl||"/Assets/default-avatar.jpg",alt:`${e.name}'s avatar`,className:"user-avatar"}),(0,ts.jsx)("div",{className:"user-info",children:(0,ts.jsx)("h3",{children:e.name})})]},e.userId))}),(0,ts.jsxs)("div",{className:"pagination",children:[(0,ts.jsx)("button",{className:"page-button",onClick:()=>p(e=>Math.max(e-1,1)),disabled:1===h,children:"Prev"}),Array.from({length:g},(e,t)=>(0,ts.jsx)("button",{className:"page-button "+(h===t+1?"active":""),onClick:()=>p(t+1),children:t+1},t+1)),(0,ts.jsx)("button",{className:"page-button",onClick:()=>p(e=>Math.min(e+1,g)),disabled:h===g,children:"Next"})]})]})]}),(0,ts.jsx)(ds,{})]})};function Ll(){const[t,n]=(0,e.useState)([]),[s,o]=(0,e.useState)(0),[i,r]=(0,e.useState)(1),[a,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(null);return(0,e.useEffect)(()=>{let e=!1;return l(!0),u(null),(async()=>{try{const t=await fetch(`http://77.242.26.150:8000/api/Business/paginated?pageNumber=${i}&pageSize=6`);if(!t.ok){const e=await t.text();throw new Error(e||t.statusText)}const s=await t.json();if(e)return;const r=s.items.map(e=>{return{...e,slug:e.slug||(t=e.name||`shop-${e.businessId}`,t.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),name:e.name||e.slug||`Shop ${e.businessId}`,profilePictureUrl:e.profilePictureUrl||"/placeholder.svg?height=60&width=60",coverPictureUrl:e.coverPictureUrl||"/placeholder.svg?height=320&width=400"};var t});n(r),o(s.totalCount)}catch(Xl){e||u(Xl)}finally{e||l(!1)}})(),()=>{e=!0}},[i]),a?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("div",{className:"page-container",children:(0,ts.jsxs)("div",{className:"loading-state",children:[(0,ts.jsx)("div",{className:"loading-spinner"}),(0,ts.jsx)("p",{children:"Loading shops..."})]})}),(0,ts.jsx)(ds,{})]}):c?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("div",{className:"page-container",children:(0,ts.jsxs)("div",{className:"error-state",children:[(0,ts.jsxs)("p",{children:["Error loading shops: ",c.message]}),(0,ts.jsx)("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Try Again"})]})}),(0,ts.jsx)(ds,{})]}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"page-container",children:[(0,ts.jsxs)("div",{className:"page-header",children:[(0,ts.jsx)("h1",{className:"page-title",children:"All Shops"}),(0,ts.jsxs)("p",{className:"page-subtitle",children:["Discover ",s," amazing shops in our marketplace"]})]}),(0,ts.jsx)("div",{className:"shops-grid",children:t.map(e=>(0,ts.jsx)(Kn,{to:`/shop/${e.slug}`,className:"shop-card-link","aria-label":`Visit ${e.name}`,children:(0,ts.jsxs)("article",{className:"shop-card",children:[(0,ts.jsx)("div",{className:"shop-card-image",style:{backgroundImage:`url(${e.coverPictureUrl})`},role:"img","aria-label":`${e.name} cover image`,children:(0,ts.jsx)("div",{className:"shop-card-overlay"})}),(0,ts.jsx)("div",{className:"shop-card-content",children:(0,ts.jsxs)("div",{className:"shop-info",children:[(0,ts.jsx)("img",{src:e.profilePictureUrl||"/placeholder.svg",alt:`${e.name} logo`,className:"shop-logo",loading:"lazy"}),(0,ts.jsxs)("div",{className:"shop-details",children:[(0,ts.jsx)("h3",{className:"shop-name",children:e.name}),(0,ts.jsx)("span",{className:"shop-category",children:"Shop"})]})]})})]})},e.businessId))}),(0,ts.jsx)("div",{className:"pagination-wrapper",children:(0,ts.jsx)(zi,{page:i,pageSize:6,totalCount:s,onPageChange:r})})]}),(0,ts.jsx)(ds,{})]})}const Ml=()=>{const{t:t}=Me("forgotpassword"),[n,s]=(0,e.useState)(""),[o,i]=(0,e.useState)(""),[r,a]=(0,e.useState)(""),[l,c]=(0,e.useState)(!1);return(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("div",{className:"forgot-password-page",children:(0,ts.jsxs)("div",{className:"forgot-password-container",children:[(0,ts.jsxs)("div",{className:"forgot-password-header",children:[(0,ts.jsx)("div",{className:"forgot-password-icon","aria-hidden":"true",children:(0,ts.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ts.jsx)("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H11V21H5V3H13V9H21ZM23 15V13C23 11.9 22.1 11 21 11H15C13.9 11 13 11.9 13 13V15C12.4 15 12 15.4 12 16V20C12 20.6 12.4 21 13 21H23C23.6 21 24 20.6 24 20V16C24 15.4 23.6 15 23 15ZM21 15H15V13C15 12.4 15.4 12 16 12H20C20.6 12 21 12.4 21 13V15Z",fill:"currentColor"})})}),(0,ts.jsx)("h1",{children:t("title",{defaultValue:"Forgot Password?"})}),(0,ts.jsx)("p",{className:"forgot-password-subtitle",children:t("subtitle",{defaultValue:"No worries! Enter your email address and we'll send you a link to reset your password."})})]}),(0,ts.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(""),a(""),c(!0);try{const e=await fetch("http://77.242.26.150:8000/api/PasswordReset/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,ClientUrl:window.location.origin})});let o={};try{o=await e.json()}catch{}e.ok?(i(o.Message||t("status.success",{defaultValue:"Reset link sent successfully! Please check your email to continue with the password restoration process."})),a("success"),s("")):(i(o.Message||t("status.genericError",{defaultValue:"Something went wrong. Please try again or contact support if the problem persists."})),a("error"))}catch(Xl){console.error("Network error:",Xl),i(t("status.networkError",{defaultValue:"Network error. Please check your internet connection and try again."})),a("error")}finally{c(!1)}},className:"forgot-password-form",children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"email",className:"form-label",children:t("form.emailLabel",{defaultValue:"Email Address"})}),(0,ts.jsxs)("div",{className:"input-wrapper",children:[(0,ts.jsx)("div",{className:"input-icon","aria-hidden":"true",children:(0,ts.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ts.jsx)("path",{d:"M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ts.jsx)("polyline",{points:"22,6 12,13 2,6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,ts.jsx)("input",{id:"email",type:"email",value:n,placeholder:t("form.emailPlaceholder",{defaultValue:"Enter your email address"}),required:!0,disabled:l,onChange:e=>s(e.target.value),className:"form-input"})]})]}),(0,ts.jsx)("button",{type:"submit",disabled:l||!n.trim(),className:"submit-button "+(l?"loading":""),"aria-busy":l?"true":"false",children:l?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("div",{className:"loading-spinner","aria-hidden":"true"}),t("cta.sending",{defaultValue:"Sending Reset Link..."})]}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:(0,ts.jsx)("path",{d:"M2 3L22 12L2 21V3Z",fill:"currentColor"})}),t("cta.send",{defaultValue:"Send Reset Link"})]})})]}),o&&(0,ts.jsxs)("div",{className:`status-message ${r}`,role:"status","aria-live":"polite",children:[(0,ts.jsx)("div",{className:"status-icon","aria-hidden":"true",children:"success"===r?(0,ts.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ts.jsx)("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,ts.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ts.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,ts.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"currentColor",strokeWidth:"2"}),(0,ts.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"currentColor",strokeWidth:"2"})]})}),(0,ts.jsx)("span",{children:o})]}),(0,ts.jsx)("div",{className:"forgot-password-footer",children:(0,ts.jsxs)("div",{className:"help-text",children:[t("footer.prompt",{defaultValue:"Remember your password?"})," ",(0,ts.jsx)("a",{href:"/login",className:"help-link",children:t("footer.login",{defaultValue:"Sign in here"})})]})})]})}),(0,ts.jsx)(ds,{})]})};function Il(){const{t:t}=Me("resetpassword"),[n]=Xn(),s=_n(),[o,i]=(0,e.useState)(""),[r,a]=(0,e.useState)(""),[l,c]=(0,e.useState)(""),[u,d]=(0,e.useState)(""),[h,p]=(0,e.useState)(""),[f,m]=(0,e.useState)(!1),[g,v]=(0,e.useState)(!1),[y,_]=(0,e.useState)(!1),[b,x]=(0,e.useState)(0),[w,j]=(0,e.useState)(0);(0,e.useEffect)(()=>{const e=n.get("token");e?i(e):(d(t("errors.invalidOrMissingToken",{defaultValue:"Invalid or missing reset token. Please request a new password reset."})),p("error"))},[n,t]),(0,e.useEffect)(()=>{if(!r)return void x(0);let e=0;r.length>=8&&(e+=25),/[A-Z]/.test(r)&&(e+=25),/[0-9]/.test(r)&&(e+=25),/[^A-Za-z0-9]/.test(r)&&(e+=25),x(e)},[r]),(0,e.useEffect)(()=>{if(w>0){const e=setTimeout(()=>j(e=>e-1),1e3);return()=>clearTimeout(e)}0===w&&"success"===h&&s("/login")},[w,h,s]);const S=()=>0===b?"":b<=25?"weak":b<=50?"fair":b<=75?"good":"strong",k=()=>S()||"weak";return(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("div",{className:"reset-password-page",children:(0,ts.jsxs)("div",{className:"reset-password-container",children:[(0,ts.jsxs)("div",{className:"reset-password-header",children:[(0,ts.jsx)("div",{className:"reset-password-icon","aria-hidden":"true",children:"\ud83d\udd10"}),(0,ts.jsx)("h1",{className:"reset-password-title",children:t("title",{defaultValue:"Reset Your Password"})}),(0,ts.jsx)("p",{className:"reset-password-subtitle",children:t("subtitle",{defaultValue:"Enter your new password below to complete the reset process"})})]}),u&&(0,ts.jsxs)("div",{className:`status-message ${h}`,role:"status","aria-live":"polite",children:[(0,ts.jsx)("span",{className:"status-icon","aria-hidden":"true",children:"success"===h?"\u2705":"\u274c"}),(0,ts.jsx)("span",{className:"status-text",children:u}),w>0&&(0,ts.jsxs)("span",{className:"countdown",children:["(",w,"s)"]})]}),(0,ts.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d(""),p(""),!o)return d(t("errors.missingToken",{defaultValue:"Missing reset token."})),void p("error");if(r.length<8)return d(t("errors.shortPassword",{defaultValue:"Password must be at least 8 characters long."})),void p("error");if(r!==l)return d(t("errors.mismatch",{defaultValue:"Passwords do not match."})),void p("error");m(!0);try{const e=await fetch("http://77.242.26.150:8000/api/PasswordReset/reset-password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o,newPassword:r})});let n={};try{n=await e.json()}catch{}e.ok?(d(n.Message||t("status.success",{defaultValue:"Password has been reset successfully! Redirecting to login..."})),p("success"),j(3)):(d(n.Message||t("status.genericError",{defaultValue:"Failed to reset password. Please try again or request a new reset link."})),p("error"))}catch(Xl){console.error("Network error:",Xl),d(t("status.networkError",{defaultValue:"Network error. Please check your connection and try again."})),p("error")}finally{m(!1)}},className:"reset-password-form",noValidate:!0,children:[(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"password",className:"form-label",children:t("form.passwordLabel",{defaultValue:"New Password"})}),(0,ts.jsxs)("div",{className:"password-input-container",children:[(0,ts.jsx)("input",{id:"password",type:g?"text":"password",placeholder:t("form.passwordPlaceholder",{defaultValue:"Enter your new password"}),required:!0,disabled:f||!o,value:r,onChange:e=>a(e.target.value),className:"form-input",minLength:8}),(0,ts.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>v(e=>!e),disabled:f,"aria-label":g?t("a11y.hidePassword",{defaultValue:"Hide password"}):t("a11y.showPassword",{defaultValue:"Show password"}),children:g?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]}),r&&(0,ts.jsxs)("div",{className:"password-strength",children:[(0,ts.jsx)("div",{className:"strength-bar",children:(0,ts.jsx)("div",{className:`strength-fill ${k()}`,style:{width:`${b}%`}})}),(0,ts.jsx)("span",{className:`strength-text ${k()}`,children:S()?t(`strength.labels.${S()}`,{defaultValue:"Strength"}):""})]})]}),(0,ts.jsxs)("div",{className:"form-group",children:[(0,ts.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:t("form.confirmLabel",{defaultValue:"Confirm New Password"})}),(0,ts.jsxs)("div",{className:"password-input-container",children:[(0,ts.jsx)("input",{id:"confirmPassword",type:y?"text":"password",placeholder:t("form.confirmPlaceholder",{defaultValue:"Confirm your new password"}),required:!0,disabled:f||!o,value:l,onChange:e=>c(e.target.value),className:"form-input",minLength:8}),(0,ts.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>_(e=>!e),disabled:f,"aria-label":y?t("a11y.hidePassword",{defaultValue:"Hide password"}):t("a11y.showPassword",{defaultValue:"Show password"}),children:y?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]}),l&&r!==l&&(0,ts.jsxs)("div",{className:"password-mismatch",children:["\u274c ",t("errors.mismatch",{defaultValue:"Passwords do not match."})]})]}),(0,ts.jsxs)("button",{type:"submit",disabled:f||!o||r!==l||r.length<8,className:"submit-button","aria-busy":f?"true":"false",children:[f&&(0,ts.jsx)("div",{className:"loading-spinner","aria-hidden":"true"}),f?t("cta.resetting",{defaultValue:"Resetting Password..."}):t("cta.reset",{defaultValue:"Reset Password"})]})]}),(0,ts.jsx)("div",{className:"reset-password-footer",children:(0,ts.jsx)("div",{className:"help-links",children:t("footer.help",{email:"edjcms20205@gmail.com",defaultValue:"Need help? Contact us - edjcms20205@gmail.com"})})})]})}),(0,ts.jsx)(ds,{})]})}function Al(){const e=localStorage.getItem("token");if(!e)return null;try{const t=JSON.parse(e);return"string"===typeof t?t:t.token}catch{return e}}function zl(){const{t:t}=Me("becomeOwner"),n=_n(),[s,o]=(0,e.useState)(!1),i="http://77.242.26.150",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RhqsCQ4bX1950eWrsYcnD2yN71HdaO6Ju9kr4xtI9JiRWKqZlBXfu1qtFlvUToLzfTPufbRjRwMLQPGUJIG1W8u00GhLSZ2KZ",REACT_APP_CLIENT_BASE_URL:"http://77.242.26.150"}.REACT_APP_API_BASE_URL||"http://77.242.26.150:8000";return(0,e.useEffect)(()=>{const e=Al();if(!e)return;const t=function(e){try{const t=e.split(".")[1],n=atob(t.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(decodeURIComponent(escape(n)))}catch{return null}}(e),s=function(e){var t;if(!e)return[];const n=null!==(t=[e.roles,e.role,e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"],e.roles].find(e=>void 0!==e))&&void 0!==t?t:[];return Array.isArray(n)?n:[n]}(t).map(String),o=s.some(e=>"admin"===e.toLowerCase());o&&n("/unauthorized",{replace:!0})},[n]),(0,ts.jsxs)("div",{className:"bo-page",children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("main",{className:"bo-main",role:"main",children:(0,ts.jsxs)("section",{className:"bo-container",children:[(0,ts.jsxs)("div",{className:"bo-card",children:[(0,ts.jsxs)("div",{className:"bo-copy",children:[(0,ts.jsx)("h1",{className:"bo-title",children:t("hero.title",{defaultValue:"Open your shop with confidence"})}),(0,ts.jsx)("p",{className:"bo-subtitle",children:t("hero.subtitle",{defaultValue:"Create a verified presence, manage inventory and team members, and reach customers who are ready to buy in-store today."})}),(0,ts.jsxs)("ul",{className:"bo-bullets","aria-label":t("aria.features",{defaultValue:"Included features"}),children:[(0,ts.jsx)("li",{children:t("features.profile",{defaultValue:"Dedicated shop profile with custom URL"})}),(0,ts.jsx)("li",{children:t("features.inventory",{defaultValue:"Inventory & category management"})}),(0,ts.jsx)("li",{children:t("features.roles",{defaultValue:"Employee roles & access controls"})}),(0,ts.jsx)("li",{children:t("features.analytics",{defaultValue:"Analytics and shop activity overview"})}),(0,ts.jsx)("li",{children:t("features.support",{defaultValue:"Priority support"})})]}),(0,ts.jsx)("div",{className:"bo-note",children:t("hero.note",{defaultValue:"Secure checkout is handled externally. You\u2019ll be redirected to complete payment and then brought back to finish setting up your shop."})})]}),(0,ts.jsxs)("aside",{className:"bo-plan","aria-labelledby":"plan-heading",children:[(0,ts.jsxs)("div",{className:"bo-plan-head",children:[(0,ts.jsx)("h2",{id:"plan-heading",className:"bo-plan-title",children:t("plan.title",{defaultValue:"Owner Subscription"})}),(0,ts.jsxs)("p",{className:"bo-price",children:[(0,ts.jsx)("span",{className:"bo-price-amount",children:"$20"}),(0,ts.jsx)("span",{className:"bo-price-term",children:t("plan.per_month",{defaultValue:"/month"})})]})]}),(0,ts.jsx)("div",{className:"bo-divider",role:"separator","aria-hidden":"true"}),(0,ts.jsxs)("ul",{className:"bo-includes",children:[(0,ts.jsx)("li",{children:t("plan.includes.core",{defaultValue:"All core owner features"})}),(0,ts.jsx)("li",{children:t("plan.includes.no_fees",{defaultValue:"No hidden fees"})})]}),(0,ts.jsx)("button",{type:"button",className:"bo-cta",onClick:async function(){const e=Al();if(!e)return void alert(t("alerts.login_required",{defaultValue:"Please log in to continue."}));o(!0);const n=`${i}/payment-cancel`,s=`${r}/api/payment/create-session?successUrl=${encodeURIComponent(`${i}/create-shop`)}&cancelUrl=${encodeURIComponent(n)}`;try{const t=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)return console.error("Failed to create checkout session:",await t.text()),void o(!1);const{url:n}=await t.json();window.location.href=n}catch(a){console.error("Error:",a),o(!1)}},disabled:s,"aria-busy":s?"true":"false",children:s?t("cta.preparing",{defaultValue:"Preparing checkout\u2026"}):t("cta.start",{defaultValue:"Start subscription"})}),(0,ts.jsx)("p",{className:"bo-terms",children:t("legal.continue_agree",{defaultValue:"By continuing you agree to our Terms and Privacy Policy."})}),(0,ts.jsx)("div",{className:"bo-processor","aria-label":t("aria.processor",{defaultValue:"Payment processor"}),children:(0,ts.jsxs)("a",{href:"https://stripe.com",target:"_blank",rel:"noopener noreferrer",className:"bo-stripe-badge","aria-label":t("stripe.badge_aria",{defaultValue:"Payments powered by Stripe"}),children:[(0,ts.jsx)("svg",{className:"bo-lock",width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ts.jsx)("path",{d:"M7 10V8a5 5 0 0 1 10 0v2h1a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h1zm2 0h6V8a3 3 0 0 0-6 0v2z",fill:"currentColor"})}),(0,ts.jsx)("span",{className:"bo-stripe-text",children:t("stripe.badge_text",{defaultValue:"Payments powered by Stripe"})})]})})]})]}),(0,ts.jsxs)("div",{className:"bo-trust",children:[(0,ts.jsx)("span",{className:"bo-dot","aria-hidden":"true"}),(0,ts.jsx)("span",{children:t("trust.encrypted",{defaultValue:"Encrypted payments via Stripe"})}),(0,ts.jsx)("span",{className:"bo-sep","aria-hidden":"true",children:"\u2022"}),(0,ts.jsx)("span",{children:t("trust.receipts",{defaultValue:"Email receipt & invoices"})}),(0,ts.jsx)("span",{className:"bo-sep","aria-hidden":"true",children:"\u2022"}),(0,ts.jsx)("span",{children:t("trust.roles",{defaultValue:"Role-based access for staff"})})]})]})})]})}function Ol(){return(0,ts.jsxs)("div",{className:"page-wrapper",children:[(0,ts.jsx)("h1",{children:"Payment Successful"}),(0,ts.jsx)("p",{children:"Check your email for a one-time link to complete your Business registration."})]})}function Rl(){return(0,ts.jsxs)("div",{className:"page-wrapper",children:[(0,ts.jsx)("h1",{children:"Payment Canceled"}),(0,ts.jsx)("p",{children:"Your subscription was not completed. You can try again below:"}),(0,ts.jsx)("a",{href:"/become-owner",children:"Subscribe Now"})]})}function Dl(){const[e]=Xn(),t=e.get("token");return(0,ts.jsxs)("div",{className:"page-wrapper",children:[(0,ts.jsx)("h1",{children:"Owner Registration"}),(0,ts.jsx)(gl,{token:t})]})}function Vl(){const[t]=Xn(),n=t.get("category"),[s,o]=(0,e.useState)([]),[i,r]=(0,e.useState)(0),[a,l]=(0,e.useState)(1),[c,u]=(0,e.useState)(!0),[d,h]=(0,e.useState)(""),p=(0,e.useRef)(null);(0,e.useEffect)(()=>{let e=!1;return(async()=>{u(!0),h("");try{const t=await fetch(`http://77.242.26.150:8000/api/Business/category-name/${encodeURIComponent(n)}`);if(!t.ok)throw new Error(await t.text()||t.statusText);const s=await t.json();e||(o(s.slice(0,6)),r(s.length))}catch(Xl){e||h(Xl.message)}finally{e||u(!1)}})(),()=>{e=!0}},[n]),(0,e.useEffect)(()=>{const e=p.current;if(!e)return;const t=()=>{if(!c&&e.scrollWidth-e.scrollLeft-e.clientWidth<150&&s.length<i){const e=a+1;o(s.slice(0,6*e)),l(e)}};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[s,c,i,a]);return(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"hero-banner",children:[(0,ts.jsx)("div",{className:"hero-overlay"}),(0,ts.jsxs)("div",{className:"hero-content",children:[(0,ts.jsxs)("h1",{children:["Category: ",n]}),(0,ts.jsx)("p",{children:"Showing all shops in this category"}),(0,ts.jsx)($a,{})]})]}),(0,ts.jsxs)("div",{className:"shop-list-container",children:[(0,ts.jsx)("div",{className:"shop-list-header",children:(0,ts.jsx)("h2",{children:"Filtered Shops"})}),d&&(0,ts.jsxs)("p",{className:"error-text",children:["Error: ",d]}),!c&&!d&&0===s.length&&(0,ts.jsx)("p",{className:"no-shops-text",children:"No Shops Yet In this Category"}),(0,ts.jsx)("div",{className:"browse-shops-wrapper",children:(0,ts.jsxs)("div",{className:"browse-carousel",ref:p,children:[s.map((e,t)=>(0,ts.jsx)(Kn,{to:`/shop/${encodeURIComponent(e.slug)}`,className:"carousel-slide",style:{flex:"0 0 20%"},children:(0,ts.jsxs)("div",{className:"shop-card",children:[(0,ts.jsx)("div",{className:"shop-card-media",children:e.profilePictureUrl?(0,ts.jsx)("img",{src:e.profilePictureUrl,alt:`${e.slug} Logo`}):(0,ts.jsx)("div",{className:"shop-card-placeholder"})}),(0,ts.jsx)("h3",{className:"shop-card-title",children:e.slug})]})},`${e.slug}-${t}`)),c&&(0,ts.jsx)("div",{className:"loading-spinner small"}),(0,ts.jsx)("div",{className:"carousel-end-sentinel"})]})}),(0,ts.jsx)(zi,{page:a,pageSize:6,totalCount:i,onPageChange:e=>{var t;o(s.slice(0,6*e)),l(e),null===(t=p.current)||void 0===t||t.scrollTo({left:0,behavior:"auto"})}})]}),(0,ts.jsx)(ds,{})]})}function Bl(){const[t,n]=(0,e.useState)([]),[s,o]=(0,e.useState)(0),[i,r]=(0,e.useState)(!0),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(1);(0,e.useEffect)(()=>{let e=!1;return(async()=>{r(!0),l("");try{const t=await(async()=>{const e=await fetch("http://77.242.26.150:8000/api/Business/paginated?pageNumber=1&pageSize=10000");if(!e.ok)throw new Error(await e.text()||e.statusText);const{items:t}=await e.json(),n=await Promise.all(t.map(e=>fetch(`http://77.242.26.150:8000/api/ClothingCategory/business/${e.businessId}`).then(e=>e.ok?e.json():[]))),s=n.flat(),o=new Map;return s.forEach(e=>{o.has(e.clothingCategoryId)||o.set(e.clothingCategoryId,e)}),Array.from(o.values())})();if(e)return;o(t.length),n(t)}catch(Xl){e||l(Xl.message)}finally{e||r(!1)}})(),()=>{e=!0}},[]);const d=t.slice(12*(c-1),12*c);return(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{className:"hero-banner",children:[(0,ts.jsx)("div",{className:"hero-overlay"}),(0,ts.jsxs)("div",{className:"hero-content",children:[(0,ts.jsx)("h1",{children:"All Categories"}),(0,ts.jsx)("p",{children:"Browse all available clothing categories"}),(0,ts.jsx)($a,{})]})]}),(0,ts.jsxs)("div",{className:"shop-list-container",children:[(0,ts.jsx)("div",{className:"shop-list-header",children:(0,ts.jsx)("h2",{children:"Categories"})}),a&&(0,ts.jsxs)("p",{className:"error-text",children:["Error: ",a]}),i&&(0,ts.jsx)("div",{className:"loading-spinner"}),!i&&d.length>0&&(0,ts.jsx)("div",{className:"categories-grid",children:d.map(e=>(0,ts.jsxs)(Kn,{to:`/category-filter?category=${e.clothingCategoryId}`,className:"all-category-card",children:[e.iconUrl?(0,ts.jsx)("img",{src:e.iconUrl,alt:e.name,className:"category-card-icon"}):(0,ts.jsx)("div",{className:"category-card-placeholder"}),(0,ts.jsx)("p",{className:"category-card-title",children:e.name})]},e.clothingCategoryId))}),(0,ts.jsx)(zi,{page:c,pageSize:12,totalCount:s,onPageChange:e=>u(e)})]}),(0,ts.jsx)(ds,{})]})}const $l="http://77.242.26.150:8000/api";function Fl(e){if(!e)return"";const t=e.size||e.Size||e.sizeLabel||e.sizeName||e.dimension||e.Dimension;if(t&&"string"===typeof t)return t.trim();const n=e.sizes||e.Sizes||e.availableSizes||e.AvailableSizes||e.sizeOptions||e.SizeOptions;if(Array.isArray(n)){const e=n.map(String).map(e=>e.trim()).filter(Boolean);if(e.length)return e.join("/")}if("string"===typeof n){const e=n.split(/[,\|/]+/).map(e=>e.trim()).filter(Boolean);if(e.length)return e.join("/")}const s=e.sizeMap||e.availability||e.Availability||e.stockBySize||e.StockBySize;if(s&&"object"===typeof s&&!Array.isArray(s)){const e=Object.keys(s).map(e=>String(e).trim()).filter(Boolean);if(e.length)return e.join("/")}const o=e.variants||e.Variants||e.options||e.Options;if(Array.isArray(o)){const e=Array.from(new Set(o.map(e=>(null===e||void 0===e?void 0:e.size)||(null===e||void 0===e?void 0:e.Size)||(null===e||void 0===e?void 0:e.option)||(null===e||void 0===e?void 0:e.Option)).map(e=>null==e?"":String(e).trim()).filter(Boolean)));if(e.length)return e.join("/")}return""}function Ul(){var t;const{search:n}=vn(),s=(null===(t=new URLSearchParams(n).get("query"))||void 0===t?void 0:t.trim())||"",[o,i]=(0,e.useState)(!0),[r,a]=(0,e.useState)(null),[l,c]=(0,e.useState)([]),[u,d]=(0,e.useState)([]),[h,p]=(0,e.useState)([]),[f,m]=(0,e.useState)([]),[g,v]=(0,e.useState)("");(0,e.useEffect)(()=>{(async()=>{i(!0);const e=function(){const e=localStorage.getItem("token");if(!e)return null;try{return JSON.parse(e).token}catch{return e}}();if(!e)return a("Please log in to search."),void i(!1);const t={Authorization:`Bearer ${e}`};try{const[e,n,s]=await Promise.all([fetch(`${$l}/Business`,{headers:t}),fetch(`${$l}/ClothingCategory/all`,{headers:t}),fetch(`${$l}/User/all`,{headers:t})]);if(!e.ok||!n.ok||!s.ok)throw new Error("Failed to fetch search data.");const o=await e.json(),i=await n.json(),r=await s.json(),a=await Promise.all(o.map(async e=>{const n=await fetch(`${$l}/ClothingItem/business/${e.businessId}`,{headers:t}),s=n.ok?await n.json():[];return{id:e.businessId,slug:e.slug||(o=e.name,o.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),name:e.name,logoUrl:e.profilePictureUrl||"/Assets/default-shop.png",description:e.description,address:e.address,NIPT:e.nipt,phoneNumber:e.businessPhoneNumber,clothingItems:s.map(e=>{var t;return{id:e.clothingItemId,name:e.name,brand:e.brand,model:e.model,price:e.price,category:e.category,description:e.description,imageUrl:(null===(t=e.pictureUrls)||void 0===t?void 0:t[0])||"/Assets/default-product.jpg",sizeLabel:Fl(e)}})};var o})),l=r.map(e=>({userId:e.userId,name:e.name,email:e.email,imageUrl:e.profilePictureUrl||e.profileImage||"/Assets/default-avatar.jpg"}));c(a),d(i),p(l)}catch(Uc){console.error(Uc),a(Uc.message)}finally{i(!1)}})()},[]);const y=(0,e.useMemo)(()=>l.flatMap(e=>e.clothingItems.map(t=>({...t,shopSlug:e.slug}))),[l]),_=(0,e.useMemo)(()=>new Oa(l,{keys:["name","description","address","NIPT","phoneNumber"],threshold:.35}),[l]),b=(0,e.useMemo)(()=>new Oa(y,{keys:["name","brand","model","category","description","price","sizeLabel"],threshold:.35}),[y]),x=(0,e.useMemo)(()=>new Oa(u,{keys:["name"],threshold:.3}),[u]),w=(0,e.useMemo)(()=>new Oa(h,{keys:["name","email"],threshold:.3}),[h]),j=(0,e.useMemo)(()=>{const e=[...l.map(e=>e.name),...y.map(e=>e.name),...u.map(e=>e.name),...h.map(e=>e.name)];return new Oa(e,{includeScore:!0,threshold:.6})},[l,y,u,h]);return(0,e.useEffect)(()=>{if(o||r)return;if(!s)return m([]),void v("");const e=_.search(s).map(e=>e.item),t=b.search(s).map(e=>e.item),n=x.search(s).map(e=>e.item),i=w.search(s).map(e=>e.item),a=e.map(e=>({type:"shop",id:e.id,slug:e.slug,name:e.name,imageUrl:e.logoUrl})),l=t.map(e=>({type:"item",id:e.id,name:e.name,brand:e.brand,shopSlug:e.shopSlug,imageUrl:e.imageUrl,sizeLabel:e.sizeLabel||""})),c=n.map(e=>({type:"category",name:e.name,imageUrl:"/Assets/default-category.png"})),u=i.map(e=>({type:"user",id:e.userId,name:e.name,email:e.email,imageUrl:e.imageUrl})),d=[];if(a.length&&d.push({title:"Shops",items:a}),l.length&&d.push({title:"Clothing Items",items:l}),c.length&&d.push({title:"Categories",items:c}),u.length&&d.push({title:"Users",items:u}),m(d),0===d.length){const[e]=j.search(s);v(e?e.item:"")}else v("")},[o,r,s,_,b,x,w,j]),(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsx)("main",{className:"search-results-page",children:o?(0,ts.jsx)("div",{className:"search-results__loading",children:"Loading search results\u2026"}):r?(0,ts.jsx)("div",{className:"search-results__error",children:r}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("header",{className:"search-results__header",children:(0,ts.jsxs)("h1",{className:"search-results__title",children:["Search Results for \u201c",s,"\u201d"]})}),0===f.length?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("p",{className:"search-results__empty",children:"No results found."}),g&&(0,ts.jsxs)("p",{className:"search-results__suggestion",children:["Did you mean"," ",(0,ts.jsx)(Kn,{to:`/search?query=${encodeURIComponent(g)}`,children:(0,ts.jsx)("strong",{children:g})}),"?"]})]}):f.map(e=>(0,ts.jsxs)("section",{className:"search-results__group",children:[(0,ts.jsx)("h2",{className:"search-results__group-title",children:e.title}),(0,ts.jsx)("ul",{className:"search-results__list",children:e.items.map(e=>(0,ts.jsxs)("li",{className:"search-results__item",children:["shop"===e.type&&(0,ts.jsxs)(Kn,{to:`/shop/${e.slug}`,className:"search-results__link",children:[(0,ts.jsx)("img",{src:e.imageUrl,alt:e.name,className:"search-results__image"}),(0,ts.jsx)("span",{className:"search-results__item-name",children:e.name})]}),"item"===e.type&&(0,ts.jsxs)(Kn,{to:`/product/${e.id}`,className:"search-results__link search-results__item-with-image",children:[(0,ts.jsx)("img",{src:e.imageUrl,alt:e.name,className:"search-results__image"}),(0,ts.jsxs)("div",{className:"search-results__item-info",children:[(0,ts.jsx)("span",{className:"search-results__item-name",children:e.brand?`${e.name} \u2014 ${e.brand}`:e.name}),(0,ts.jsxs)("span",{className:"search-results__item-meta",children:[e.shopSlug,e.sizeLabel?(0,ts.jsxs)(ts.Fragment,{children:[" \xb7 ",(0,ts.jsx)("b",{children:e.sizeLabel})]}):null]})]})]}),"category"===e.type&&(0,ts.jsxs)(Kn,{to:`/category-filter?category=${encodeURIComponent(e.name)}`,className:"search-results__link",children:[(0,ts.jsx)("img",{src:e.imageUrl,alt:e.name,className:"search-results__image"}),(0,ts.jsx)("span",{className:"search-results__item-name",children:e.name})]}),"user"===e.type&&(0,ts.jsxs)(Kn,{to:`/profile/${e.id}`,className:"search-results__link search-results__item-user",children:[(0,ts.jsx)("img",{src:e.imageUrl,alt:e.name,className:"search-results__image"}),(0,ts.jsxs)("div",{className:"search-results__item-info",children:[(0,ts.jsx)("span",{className:"search-results__item-name",children:e.name}),(0,ts.jsx)("span",{className:"search-results__item-email",children:e.email})]})]})]},`${e.type}-${e.id}-${e.name}`))})]},e.title))]})}),(0,ts.jsx)(ds,{})]})}function Hl(){const t=function(){const{search:t}=vn();return(0,e.useMemo)(()=>new URLSearchParams(t),[t])}(),n=_n(),s=t.get("token")||"",o="1"===t.get("canceled"),[i,r]=(0,e.useState)(s?"idle":"error"),[a,l]=(0,e.useState)(s?"":"Missing token. Open the link from your email.");(0,e.useEffect)(()=>{o&&(r("error"),l("Payment was canceled. You can try again."))},[o]);const c=(0,e.useCallback)(async()=>{if(s){l(""),r("starting");try{const{url:e}=await async function(e,t){const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let s=null;try{s=await n.json()}catch{}if(!n.ok){var o;const e=(null===(o=s)||void 0===o?void 0:o.error)||`${n.status} ${n.statusText}`;throw new Error(e)}return s}("http://77.242.26.150:8000/api/billing/create-checkout-session",{token:s});r("redirect"),window.location.href=e}catch(Uc){l((null===Uc||void 0===Uc?void 0:Uc.message)||"Failed to start checkout. Please try again."),r("error")}}},[s]),u=(0,e.useCallback)(()=>{n("/profile")},[n]);return(0,ts.jsx)("div",{style:Wl.wrap,children:(0,ts.jsxs)("div",{style:Wl.card,children:[(0,ts.jsx)("h1",{style:Wl.title,children:"Reactivate Shop Subscription"}),(0,ts.jsx)("p",{style:Wl.sub,children:"Pay your owner subscription to unsuspend your shop and extend access by 30 days."}),(0,ts.jsxs)("div",{style:Wl.tokenRow,children:[(0,ts.jsxs)("div",{style:Wl.tokenText,children:[(0,ts.jsx)("strong",{children:"Token:"})," ",(0,ts.jsx)("span",{style:Wl.mono,children:s||"\u2014"})]}),(0,ts.jsxs)("span",{style:{...Wl.badge,..."error"===i?Wl.badgeErr:"starting"===i||"redirect"===i?Wl.badgeIdle:Wl.badgeOk},children:["idle"===i&&"Ready","starting"===i&&"Contacting Stripe\u2026","redirect"===i&&"Opening Stripe\u2026","error"===i&&"Error"]})]}),"error"===i&&!!a&&(0,ts.jsx)("div",{style:Wl.alertErr,children:a}),(0,ts.jsxs)("div",{style:Wl.actions,children:[(0,ts.jsxs)("button",{onClick:c,disabled:!s||"starting"===i||"redirect"===i,style:{...Wl.btn,...s&&"idle"===i?Wl.btnPrimary:{}},children:["idle"===i&&"Retry Payment","starting"===i&&"Starting\u2026","redirect"===i&&"Redirecting\u2026","error"===i&&"Try Again"]}),(0,ts.jsx)("button",{onClick:u,style:Wl.btnOutline,children:"Go to Dashboard"})]}),(0,ts.jsx)("div",{style:{marginTop:10,fontSize:12,color:"#6b7280"},children:"After payment you\u2019ll be redirected back to this app automatically."})]})})}const Wl={wrap:{minHeight:"70vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 16px",background:"linear-gradient(to bottom, #f9fafb, #ffffff)"},card:{width:"100%",maxWidth:560,borderRadius:16,boxShadow:"0 10px 30px rgba(0,0,0,0.06)",border:"1px solid #e5e7eb",background:"#fff",padding:24},title:{fontSize:24,margin:0,color:"#111827"},sub:{marginTop:8,fontSize:14,color:"#6b7280"},tokenRow:{marginTop:16,padding:"10px 12px",background:"#f9fafb",borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between"},tokenText:{fontSize:13,color:"#374151"},mono:{fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',wordBreak:"break-all"},badge:{padding:"4px 10px",borderRadius:999,fontSize:12,fontWeight:600},badgeOk:{background:"#dcfce7",color:"#166534"},badgeErr:{background:"#fee2e2",color:"#991b1b"},badgeIdle:{background:"#e5e7eb",color:"#374151"},alertErr:{marginTop:16,padding:12,borderRadius:12,border:"1px solid #fecaca",background:"#fef2f2",color:"#991b1b",fontSize:14},actions:{display:"flex",gap:12,marginTop:18,flexWrap:"wrap"},btn:{appearance:"none",border:"1px solid #d1d5db",padding:"10px 14px",borderRadius:12,background:"#111827",color:"#fff",fontWeight:600,fontSize:14,cursor:"pointer"},btnPrimary:{background:"#111827",color:"#fff"},btnOutline:{appearance:"none",border:"1px solid #d1d5db",padding:"10px 14px",borderRadius:12,background:"#fff",color:"#111827",fontWeight:600,fontSize:14,cursor:"pointer"}};function Zl(){const{search:t}=vn(),n=_n(),s=new URLSearchParams(t).get("session_id"),[o,i]=(0,e.useState)("Finalizing your activation\u2026"),[r,a]=(0,e.useState)("");return(0,e.useEffect)(()=>{(async()=>{if(!s)return a("Missing session id."),void i("");try{const e=await fetch(`http://77.242.26.150:8000/api/billing/confirm?session_id=${encodeURIComponent(s)}`),t=await e.json().catch(()=>({}));if(!e.ok)throw new Error((null===t||void 0===t?void 0:t.error)||"Failed to confirm payment.");const n=null!==t&&void 0!==t&&t.newExpiryUtc?new Date(t.newExpiryUtc).toUTCString():"updated";i(`Shop reactivated. New expiry (UTC): ${n}`),a("")}catch(Uc){a((null===Uc||void 0===Uc?void 0:Uc.message)||"Payment completed, finishing activation\u2026"),i("")}})()},[s]),(0,ts.jsx)("div",{style:ql,children:(0,ts.jsxs)("div",{style:Kl,children:[(0,ts.jsx)("h1",{style:Jl,children:"Payment Success"}),o&&(0,ts.jsx)("div",{style:Yl,children:o}),r&&(0,ts.jsx)("div",{style:Xl,children:r}),(0,ts.jsxs)("div",{style:{marginTop:16,display:"flex",gap:12},children:[(0,ts.jsx)("button",{style:Ql,onClick:()=>n("/profile"),children:"Go to Dashboard"}),(0,ts.jsx)("button",{style:Gl,onClick:()=>n("/"),children:"Home"})]})]})})}const ql={minHeight:"70vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 16px",background:"linear-gradient(to bottom, #f9fafb, #ffffff)"},Kl={width:"100%",maxWidth:560,borderRadius:16,boxShadow:"0 10px 30px rgba(0,0,0,0.06)",border:"1px solid #e5e7eb",background:"#fff",padding:24},Jl={fontSize:24,margin:0,color:"#111827"},Yl={marginTop:16,padding:12,borderRadius:12,border:"1px solid #bbf7d0",background:"#f0fdf4",color:"#14532d",fontSize:14},Xl={marginTop:16,padding:12,borderRadius:12,border:"1px solid #fecaca",background:"#fef2f2",color:"#991b1b",fontSize:14},Gl={appearance:"none",border:"1px solid #d1d5db",padding:"10px 14px",borderRadius:12,background:"#fff",color:"#111827",fontWeight:600,fontSize:14,cursor:"pointer"},Ql={...Gl,background:"#111827",color:"#fff"},ec={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RhqsCQ4bX1950eWrsYcnD2yN71HdaO6Ju9kr4xtI9JiRWKqZlBXfu1qtFlvUToLzfTPufbRjRwMLQPGUJIG1W8u00GhLSZ2KZ",REACT_APP_CLIENT_BASE_URL:"http://77.242.26.150"}.REACT_APP_API_BASE||"http://77.242.26.150:8000/api",tc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RhqsCQ4bX1950eWrsYcnD2yN71HdaO6Ju9kr4xtI9JiRWKqZlBXfu1qtFlvUToLzfTPufbRjRwMLQPGUJIG1W8u00GhLSZ2KZ",REACT_APP_CLIENT_BASE_URL:"http://77.242.26.150"}.REACT_APP_SUPPORT_HUB||ec.replace(/\/api$/,"")+"/supportHub",nc=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},sc=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},oc=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var ic={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rc=(0,e.forwardRef)((t,n)=>{let{color:s="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:c,...u}=t;return(0,e.createElement)("svg",{ref:n,...ic,width:o,height:o,stroke:s,strokeWidth:r?24*Number(i)/Number(o):i,className:sc("lucide",a),...!l&&!oc(u)&&{"aria-hidden":"true"},...u},[...c.map(t=>{let[n,s]=t;return(0,e.createElement)(n,s)}),...Array.isArray(l)?l:[l]])}),ac=(t,n)=>{const s=(0,e.forwardRef)((s,o)=>{let{className:i,...r}=s;return(0,e.createElement)(rc,{ref:o,iconNode:n,className:sc(`lucide-${a=nc(t),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${t}`,i),...r});var a});return s.displayName=nc(t),s},lc=ac("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),cc=ac("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),uc=ac("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),dc=ac("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),hc=ac("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),pc=ac("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),fc=ac("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),mc=ac("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),gc=ac("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),vc="Assets/default-avatar.jpg";function yc(){try{const e=Oo();if(!e)return{id:null,name:null};const t=es(e),n=["nameid","sub","uid","userId","UserId","user_id","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"],s=["name","given_name","family_name","unique_name","preferred_username","email"];let o=null;for(const r of n){const e=null===t||void 0===t?void 0:t[r];if(null!=e&&""!==`${e}`.trim()){o=`${e}`.trim();break}}let i=(null!==t&&void 0!==t&&t.given_name&&null!==t&&void 0!==t&&t.family_name?`${t.given_name} ${t.family_name}`.trim():null)||null;if(!i)for(const r of s){const e=null===t||void 0===t?void 0:t[r];if(null!=e&&""!==`${e}`.trim()){i=`${e}`.trim();break}}return{id:o,name:i}}catch{return{id:null,name:null}}}const _c=ec.replace(/\/api\/?$/,""),bc=e=>e?/^https?:\/\//i.test(e)?e:`${_c}${e.startsWith("/")?e:`/${e}`}`:"",xc=(0,e.forwardRef)(function(t,n){let{threadId:s,onDeleted:o,onToggleDrawer:i,onHamburger:r}=t;const[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(""),[p,f]=(0,e.useState)([]),[m,g]=(0,e.useState)(""),[v,y]=(0,e.useState)(!1),[_,b]=(0,e.useState)(!1),[x,w]=(0,e.useState)(!1),[j,S]=(0,e.useState)(!1),[k,N]=(0,e.useState)("open"),C=!["closed","resolved","archived","locked"].includes((k||"").toLowerCase()),[E,P]=(0,e.useState)(vc),[T,L]=(0,e.useState)("You"),[M,I]=(0,e.useState)(!1),A=(0,e.useRef)(null),z=(0,e.useRef)(null),O=(0,e.useRef)(null),R=(0,e.useRef)(null);(0,e.useEffect)(()=>{(()=>{var e;null===(e=z.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[p]),(0,e.useEffect)(()=>{let e=!0;return(async()=>{try{var t;let n=await fetch(`${ec}/User/me`,{headers:Ro({json:!1})});if(!n.ok){const{id:t,name:s}=yc();t&&(n=await fetch(`${ec}/User/${t}`,{headers:Ro({json:!1})})),e&&s&&L(s)}if(!e)return;if(null===(t=n)||void 0===t||!t.ok){const{name:e}=yc();return P(vc),void(e&&L(e))}const s=await n.json(),o=(e=>(null===e||void 0===e?void 0:e.profileImage)||(null===e||void 0===e?void 0:e.profilePictureUrl)||(null===e||void 0===e?void 0:e.avatarUrl)||(null===e||void 0===e?void 0:e.photoUrl)||"")(s),i=(e=>{const t=[null===e||void 0===e?void 0:e.firstName,null===e||void 0===e?void 0:e.lastName].filter(Boolean).join(" ").trim();return(null===e||void 0===e?void 0:e.displayName)||(null===e||void 0===e?void 0:e.fullName)||t||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.username)||(null===e||void 0===e?void 0:e.email)||""})(s);P(o&&"string"===typeof o?o:vc),L(null!==i&&void 0!==i&&i.trim()?i.trim():yc().name||"You")}catch{if(e){const{name:e}=yc();P(vc),e&&L(e)}}})(),()=>{e=!1}},[]),(0,e.useEffect)(()=>{let e=!1;return(async()=>{if(!s)return;const t=await fetch(`${ec}/Support/threads/${s}`,{headers:Ro({json:!1})});if(!t.ok)return;const n=await t.json();if(e)return;const o=n.topic||n.title||`Thread #${s}`;l(o),h(o),f(Array.isArray(n.messages)?n.messages:[]),N(n.status||"open"),await D(s),requestAnimationFrame(()=>{var e;return null===(e=R.current)||void 0===e?void 0:e.focus()})})(),()=>{e=!0,A.current&&(A.current.stop().catch(()=>{}),A.current=null)}},[s]);const D=async e=>{if(A.current)try{await A.current.stop()}catch{}const t=Oo(),n=(new Lo).withUrl(tc,{accessTokenFactory:()=>t||""}).withAutomaticReconnect([0,2e3,1e4,3e4]).build();A.current=n,n.on("message",e=>{const t={...e,createdAt:e.createdAt||(new Date).toISOString(),attachments:Array.isArray(e.attachments)?e.attachments:[]};f(e=>[...e,t])}),n.onreconnected(()=>w(!0)),n.onreconnecting(()=>w(!1)),n.onclose(()=>w(!1));try{await n.start(),w(!0),await n.invoke("JoinThread",e)}catch(Uc){console.error("SupportHub connect error",Uc),w(!1)}},V=e=>{if(!e)return"";const t=new Date(e),n=new Date,s=Math.floor((n-t)/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:t.toLocaleDateString()},B=()=>requestAnimationFrame(()=>{var e;return null===(e=R.current)||void 0===e?void 0:e.focus()}),$=async()=>{const e=m.trim();if(e&&A.current&&s&&!v){if(!C)return alert("This conversation is closed. Start a new chat to continue."),void B();y(!0);try{await A.current.invoke("SendMessage",s,e),g(""),B()}catch(Uc){console.error(Uc),B()}finally{y(!1)}}},F=async e=>{if(e&&!_){if(!C)return alert("This conversation is closed. Uploads are disabled."),void B();if(e.type.startsWith("image/"))if(e.size>10485760)alert("Image is too large (max 10MB).");else{b(!0);try{const t=new FormData;t.append("file",e),m.trim()&&t.append("caption",m.trim());const n=await fetch(`${ec}/Support/threads/${s}/photos`,{method:"POST",headers:Ro({json:!1}),body:t});if(!n.ok){const e=await n.text().catch(()=>"");throw new Error(e||`Upload failed (${n.status})`)}const o=await n.json(),i={...o,createdAt:o.createdAt||(new Date).toISOString(),attachments:Array.isArray(o.attachments)?o.attachments:[]};f(e=>[...e,i]),m.trim()&&g(""),B()}catch(Uc){console.error(Uc),alert("Failed to upload image."),B()}finally{b(!1)}}else alert("Please choose an image.")}},U=e=>e.isSystem?"System":e.senderIsAdmin?e.senderName&&e.senderName.trim()||"Support":e.senderName&&e.senderName.trim()||(null===T||void 0===T?void 0:T.trim())||"You";return(0,ts.jsxs)("div",{className:"chat-window",onDragOver:e=>{C&&(e.preventDefault(),I(!0))},onDragLeave:()=>I(!1),onDrop:e=>{var t,n;if(!C)return;e.preventDefault(),I(!1);const s=null===(t=e.dataTransfer)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0];s&&F(s)},ref:n,children:[(0,ts.jsxs)("div",{className:"chat-window-header",children:[(0,ts.jsxs)("button",{className:"hamburger-btn","aria-label":"Open chat list",onClick:()=>{var e;"function"!==typeof i?"function"!==typeof r?null===(e=document.querySelector(".chat-container"))||void 0===e||e.classList.toggle("drawer-open"):r():i()},children:[(0,ts.jsx)("span",{className:"hamburger-bar"}),(0,ts.jsx)("span",{className:"hamburger-bar"}),(0,ts.jsx)("span",{className:"hamburger-bar"})]}),(0,ts.jsx)("div",{className:"chat-window-title",style:{gap:8},children:c?(0,ts.jsxs)("div",{className:"topic-edit",children:[(0,ts.jsx)("input",{className:"topic-input",value:d,onChange:e=>h(e.target.value),maxLength:300,autoFocus:!0,disabled:j}),(0,ts.jsx)("button",{className:"topic-commit",onMouseDown:e=>e.preventDefault(),onClick:async()=>{const e=d.trim();if(e&&e!==a)try{const t=await fetch(`${ec}/Support/threads/${s}/topic`,{method:"PUT",headers:{...Ro(),"Content-Type":"application/json"},body:JSON.stringify({topic:e})});if(!t.ok){const e=await t.text().catch(()=>"");throw new Error(e||`Failed (${t.status})`)}const n=await t.json();l(n.topic||e),u(!1),B()}catch(Uc){console.error(Uc),alert("Couldn't update the subject."),B()}else u(!1)},title:"Save",disabled:j,children:(0,ts.jsx)(lc,{className:"w-4 h-4"})}),(0,ts.jsx)("button",{className:"topic-cancel",onMouseDown:e=>e.preventDefault(),onClick:()=>{h(a),u(!1),B()},title:"Cancel",disabled:j,children:(0,ts.jsx)(cc,{className:"w-4 h-4"})})]}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("strong",{children:a||`Thread #${s}`}),(0,ts.jsx)("button",{className:"topic-edit-btn",onMouseDown:e=>e.preventDefault(),onClick:()=>u(!0),title:"Rename subject",disabled:j,children:(0,ts.jsx)(uc,{className:"w-4 h-4"})}),(0,ts.jsx)("button",{className:"chat-delete-btn",onMouseDown:e=>e.preventDefault(),onClick:async()=>{if(!s||j)return;if(window.confirm("Delete this conversation permanently? This cannot be undone.")){S(!0);try{const e=await fetch(`${ec}/Support/threads/${s}`,{method:"DELETE",headers:Ro({json:!1})});if(!e.ok&&204!==e.status){const t=await e.text().catch(()=>"");throw new Error(t||`Delete failed (${e.status})`)}if(A.current){try{await A.current.stop()}catch{}A.current=null}w(!1),f([]),l("(deleted)"),h("(deleted)"),"function"===typeof o&&o(s)}catch(Uc){console.error(Uc),alert("Couldn't delete this conversation.")}finally{S(!1),B()}}},title:"Delete chat",disabled:j,children:j?(0,ts.jsx)(dc,{className:"w-4 h-4 animate-spin"}):(0,ts.jsx)(hc,{className:"w-4 h-4"})})]})}),(0,ts.jsxs)("div",{className:"chat-conn",children:[(0,ts.jsx)("div",{className:"conn-dot "+(x?"online":"offline")}),(0,ts.jsx)("span",{children:x?"Connected":"Disconnected"})]})]}),M&&C&&(0,ts.jsxs)("div",{className:"chat-drop-overlay",children:[(0,ts.jsx)(pc,{className:"w-8 h-8"}),(0,ts.jsx)("div",{children:"Drop image to upload"})]}),(0,ts.jsxs)("div",{className:"chat-messages",children:[0===p.length?(0,ts.jsxs)("div",{className:"chat-messages-empty",children:[(0,ts.jsx)(fc,{className:"w-10 h-10 opacity-30"}),(0,ts.jsx)("div",{children:"No messages yet"})]}):p.map(e=>(0,ts.jsxs)("div",{className:"chat-msg "+(e.isSystem?"system":e.senderIsAdmin?"agent":"user"),children:[(0,ts.jsx)("div",{className:"chat-avatar",children:e.isSystem?(0,ts.jsx)("div",{className:"sd-avatar system",children:(0,ts.jsx)(mc,{className:"w-4 h-4"})}):e.senderIsAdmin?(0,ts.jsx)("div",{className:"sd-avatar agent",children:"A"}):(0,ts.jsx)("div",{className:"sd-avatar user",children:(0,ts.jsx)("img",{className:"sd-avatar-img",src:E||vc,alt:"Your avatar",loading:"lazy",draggable:!1,onError:e=>{e.currentTarget.onerror=null,e.currentTarget.src=vc}})})}),(0,ts.jsxs)("div",{className:"chat-bubble",children:[(0,ts.jsx)("div",{className:"chat-author",children:U(e)}),e.body&&(0,ts.jsx)("div",{className:"chat-text",children:e.body}),Array.isArray(e.attachments)&&e.attachments.length>0&&(0,ts.jsx)("div",{className:"chat-attachments-grid",children:e.attachments.map(e=>"image"===e.kind?(0,ts.jsx)("a",{href:bc(e.url),target:"_blank",rel:"noreferrer",className:"chat-attachment",title:e.fileName||"image",children:(0,ts.jsx)("img",{src:bc(e.url),alt:e.fileName||"attachment"})},e.attachmentId||e.url):null)}),(0,ts.jsx)("div",{className:"chat-time",children:V(e.createdAt)})]})]},e.messageId||`${e.createdAt}-${e.senderUserId||(e.isSystem?"sys":"u")}`)),(0,ts.jsx)("div",{ref:z})]}),(0,ts.jsxs)("div",{className:"chat-input-row",children:[(0,ts.jsx)("input",{type:"file",accept:"image/*",ref:O,style:{display:"none"},onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&F(n),e.currentTarget.value=""}}),(0,ts.jsx)("button",{className:"chat-img-btn",onMouseDown:e=>e.preventDefault(),onClick:()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.click()},disabled:_||j||!C,title:C?"Send a photo":"This conversation is closed",children:_?(0,ts.jsx)(dc,{className:"w-4 h-4 animate-spin"}):(0,ts.jsx)(pc,{className:"w-4 h-4"})}),(0,ts.jsx)("textarea",{ref:R,value:m,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),$())},className:"chat-input",rows:1,placeholder:j?"Deleting\u2026":_?"Uploading\u2026":C?"Type a message\u2026":"This conversation is closed",disabled:_||v||j||!C}),(0,ts.jsx)("button",{className:"chat-send-btn",onMouseDown:e=>e.preventDefault(),onClick:$,disabled:!m.trim()||v||_||j||!C,title:C?"Send":"This conversation is closed",children:v?(0,ts.jsx)(dc,{className:"w-4 h-4 animate-spin"}):(0,ts.jsx)(gc,{className:"w-4 h-4"})})]})]})}),wc=xc;function jc(){const[t,n]=(0,e.useState)(!1),[s,o]=(0,e.useState)([]),[i,r]=(0,e.useState)(null),[a,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),d=(0,e.useRef)(null),h=(0,e.useRef)(null),p=(0,e.useRef)(0),f=(0,e.useMemo)(()=>!!Oo(),[]),m=(0,e.useMemo)(()=>s.find(e=>e.threadId===i)||null,[s,i]);(0,e.useEffect)(()=>{const e=()=>window.matchMedia("(max-width: 640px)").matches,n=()=>{e()&&(p.current=window.scrollY||window.pageYOffset||0,document.body.classList.add("chat-scroll-lock"),document.body.style.top=`-${p.current}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%")},s=()=>{const e=p.current||0;document.body.classList.remove("chat-scroll-lock"),document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",window.scrollTo(0,e)};t?n():s();const o=()=>{t&&(e()?document.body.classList.contains("chat-scroll-lock")||n():s())};return window.addEventListener("resize",o),window.addEventListener("orientationchange",o),()=>{window.removeEventListener("resize",o),window.removeEventListener("orientationchange",o),t&&s()}},[t]),(0,e.useEffect)(()=>{t&&(async()=>{if(f){l(!0);try{const e=await fetch(`${ec}/Support/my-threads`,{headers:Ro()}),t=await e.json(),n=Array.isArray(t)?t:[];o(n),n.length&&!i&&r(n[0].threadId)}finally{l(!1)}}})()},[t]),(0,e.useEffect)(()=>{if(!t)return;const e=e=>{const t=d.current,s=h.current;t&&t.contains(e.target)||s&&s.contains(e.target)||(n(!1),u(!1))},s=e=>{"Escape"===e.key&&(n(!1),u(!1))};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("keydown",s),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",s)}},[t]);const g=e=>{if(!e)return"Just now";try{const t=new Date(e);if(isNaN(t.getTime()))return"Just now";const n=new Date,s=Math.floor((n-t)/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:t.toLocaleDateString()}catch{return"Just now"}};return f?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)("button",{ref:h,className:"chat-launcher",onClick:e=>{e.stopPropagation(),n(e=>!e),u(!1)},"aria-label":"Open support chat","aria-expanded":t,"aria-controls":"chat-widget-container",children:t?"\xd7":"Support"}),t&&(0,ts.jsxs)("div",{ref:d,id:"chat-widget-container",className:"chat-container "+(c?"drawer-open":""),role:"dialog","aria-modal":"true",children:[(0,ts.jsx)("div",{className:"chat-drawer-scrim",onClick:()=>u(!1),"aria-hidden":"true"}),(0,ts.jsxs)("div",{className:"chat-sidebar",children:[(0,ts.jsxs)("div",{className:"chat-sidebar-header",children:[(0,ts.jsx)("strong",{children:"Help & Support"}),(0,ts.jsx)("div",{className:"chat-actions",children:(0,ts.jsx)("button",{className:"chat-close mobile-only","aria-label":"Close support",title:"Close",onClick:()=>{n(!1),u(!1)},children:"Exit"})})]}),(0,ts.jsx)("button",{className:"chat-new-btn-support",onClick:()=>(async(e,t,n)=>{const s={topic:e,initialMessage:t,businessId:null!==n&&void 0!==n?n:null},i=await fetch(`${ec}/Support/threads`,{method:"POST",headers:Ro(),body:JSON.stringify(s)});if(!i.ok)return;const a=await i.json();o(e=>[{threadId:a.threadId,topic:a.topic,status:a.status,priority:a.priority,lastMessageAt:a.lastMessageAt},...e]),r(a.threadId),u(!1)})("General help","Hello, I need assistance.",null),children:"+ New chat"}),(0,ts.jsxs)("div",{className:"chat-thread-list",children:[s.map(e=>(0,ts.jsxs)("div",{className:"chat-thread-item "+(i===e.threadId?"active":""),onClick:()=>{r(e.threadId),u(!1)},children:[(0,ts.jsx)("div",{className:"chat-thread-topic",children:e.topic||"Untitled"}),(0,ts.jsxs)("div",{className:"chat-thread-meta",children:[(0,ts.jsx)("span",{"data-status":e.status,children:e.status}),(0,ts.jsx)("span",{children:g(e.lastMessageAt)})]})]},e.threadId)),0===s.length&&!a&&(0,ts.jsx)("div",{className:"chat-empty",children:"No conversations yet."})]})]}),i?(0,ts.jsx)(wc,{threadId:i,threadStatus:m&&m.status,onToggleDrawer:()=>u(e=>!e),onDeleted:e=>{o(t=>{const s=t.filter(t=>t.threadId!==e);return r(t=>{var n;return t===e?(null===(n=s[0])||void 0===n?void 0:n.threadId)||null:t}),0===s.length&&(n(!1),u(!1)),s})}}):(0,ts.jsx)("div",{className:"chat-window-placeholder",children:"Select a conversation or create a new one."})]})]}):null}const Sc=ac("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),kc=ac("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Nc=ac("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Cc=ac("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ec=ac("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Pc=ac("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Tc=ac("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Lc="Assets/default-avatar.jpg";function Mc(){const t=_n(),[n,s]=(0,e.useState)(!1),[o,i]=(0,e.useState)(!1),[r,a]=(0,e.useState)("awaiting"),[l,c]=(0,e.useState)(!1),u=(0,e.useRef)(0),[d,h]=(0,e.useState)([]),[p,f]=(0,e.useState)([]),[m,g]=(0,e.useState)(!0),[v,y]=(0,e.useState)(null),[_,b]=(0,e.useState)(null),[x,w]=(0,e.useState)([]),[j,S]=(0,e.useState)(""),[k,N]=(0,e.useState)(!1),[C,E]=(0,e.useState)(""),[P,T]=(0,e.useState)(""),[L,M]=(0,e.useState)(!1),[I,A]=(0,e.useState)(!1),[z,O]=(0,e.useState)(!1),[R,D]=(0,e.useState)(!1),V=(0,e.useRef)(null),[B,$]=(0,e.useState)(!1),[F,U]=(0,e.useState)({}),H=(0,e.useRef)(new Set),W=(0,e.useRef)(new Set),Z=(0,e.useRef)(null),q=(0,e.useRef)(null);(0,e.useEffect)(()=>{const e=Oo();if(e)try{var n,o;const r=es(e),a=null!==(n=null!==(o=r.roles)&&void 0!==o?o:r.role)&&void 0!==n?n:r["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"],l=(Array.isArray(a)?a:"string"===typeof a?a.split(/[,\s]+/).filter(Boolean):[]).some(e=>"admin"===String(e).toLowerCase());if(!l)return void t("/unauthorized",{replace:!0});i(!0),s(!0)}catch{t("/unauthorized",{replace:!0})}else t("/unauthorized",{replace:!0})},[t]),(0,e.useEffect)(()=>()=>{Z.current&&Z.current.stop().catch(()=>{})},[]),(0,e.useEffect)(()=>{g("awaiting"===r)},[r]),(0,e.useEffect)(()=>{const e=()=>window.matchMedia("(max-width: 640px)").matches,t=()=>{const e=u.current||0;document.body.classList.remove("sd-scroll-lock"),document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",window.scrollTo(0,e)};l?e()&&(u.current=window.scrollY||window.pageYOffset||0,document.body.classList.add("sd-scroll-lock"),document.body.style.top=`-${u.current}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%"):t();const n=()=>{l&&(e()||t())};return window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n),l&&t()}},[l]),(0,e.useEffect)(()=>{if(!l)return;const e=e=>{"Escape"===e.key&&c(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[l]);(0,e.useEffect)(()=>{(()=>{var e;null===(e=q.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[x]);const K=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await fetch(e,{headers:Ro(),...t});return 401===n.status||403===n.status?(A(!0),null):(A(!1),204===n.status?{}:n.ok?n.json():null)},J=async()=>{M(!0);const e=await K(`${ec}/Support/queue?unassignedOnly=${m}`);e&&h(Array.isArray(e)?e:[]),M(!1)},Y=async()=>{const e=await K(`${ec}/Support/my-threads`);e&&f(Array.isArray(e)?e:[])},X=async e=>{if(e.length)try{const t=await Promise.all(e.map(async e=>{try{const t=await fetch(`${ec}/User/${e}`,{headers:Ro()});if(!t.ok)return[e,{avatar:Lc,name:`User #${e}`}];const n=await t.json(),s=(e=>(null===e||void 0===e?void 0:e.profileImage)||(null===e||void 0===e?void 0:e.profilePictureUrl)||(null===e||void 0===e?void 0:e.avatarUrl)||(null===e||void 0===e?void 0:e.photoUrl)||"")(n),o=(e=>{const t=[null===e||void 0===e?void 0:e.firstName,null===e||void 0===e?void 0:e.lastName].filter(Boolean).join(" ").trim();return(null===e||void 0===e?void 0:e.displayName)||(null===e||void 0===e?void 0:e.fullName)||t||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.username)||(null===e||void 0===e?void 0:e.email)||""})(n);return[e,{avatar:s&&"string"===typeof s?s:Lc,name:null!==o&&void 0!==o&&o.trim()?o.trim():`User #${e}`}]}catch{return[e,{avatar:Lc,name:`User #${e}`}]}}));U(e=>{let n=!1;const s={...e};for(const[o,i]of t){const e=String(o),t=i||{avatar:Lc,name:`User #${o}`},r=s[e];r&&r.avatar===t.avatar&&r.name===t.name||(s[e]=t,n=!0)}return n?s:e})}finally{e.forEach(e=>H.current.delete(String(e)))}},G=(0,e.useMemo)(()=>{if(null===x||void 0===x||!x.length)return[];const e=new Set;for(const t of x){if(null!==t&&void 0!==t&&t.isSystem||null!==t&&void 0!==t&&t.senderIsAdmin)continue;const n=null===t||void 0===t?void 0:t.senderUserId,s=String(null!==n&&void 0!==n?n:"");s&&(F[s]||H.current.has(s)||e.add(s))}return Array.from(e)},[x,F]);(0,e.useEffect)(()=>{G.length&&(G.forEach(e=>H.current.add(String(e))),X(G))},[G]);const Q=async e=>{y(e),W.current=new Set;const t=await K(`${ec}/Support/threads/${e}`);if(!t)return;const n=t.topic||t.title||`Thread #${e}`;S(n),E(n);const s=Array.isArray(t.messages)?t.messages:[];w(s);for(const o of s)null!=(null===o||void 0===o?void 0:o.messageId)&&W.current.add(String(o.messageId));b(t.status||"Open"),await ee(e),c(!1)},ee=async e=>{if(Z.current)try{await Z.current.stop()}catch{}const t=Oo(),n=(new Lo).withUrl(tc,{accessTokenFactory:()=>t||""}).withAutomaticReconnect([0,2e3,1e4,3e4]).build();Z.current=n,n.on("message",e=>{const t=null===e||void 0===e?void 0:e.messageId;if(null!=t){const e=String(t);if(W.current.has(e))return;W.current.add(e)}else{const t=`${(null===e||void 0===e?void 0:e.createdAt)||""}|${(null===e||void 0===e?void 0:e.senderUserId)||""}|${(null===e||void 0===e?void 0:e.body)||""}`;if(W.current.has(t))return;W.current.add(t)}const n={...e,senderIsAdmin:!!e.senderIsAdmin,createdAt:e.createdAt||(new Date).toISOString(),attachments:Array.isArray(e.attachments)?e.attachments:[]};w(e=>[...e,n])}),n.on("ThreadClosed",t=>{(null===t||void 0===t?void 0:t.threadId)===e&&(b("Closed"),w(e=>[...e,{isSystem:!0,body:"Thread was closed.",createdAt:t.closedAt||(new Date).toISOString()}]),J(),Y())}),n.onreconnected(()=>$(!0)),n.onreconnecting(()=>$(!1)),n.onclose(()=>$(!1));try{await n.start(),$(!0),await n.invoke("JoinThread",e)}catch(Uc){$(!1),console.error("SupportHub connect error",Uc)}},te=async()=>{const e=P.trim();if(e&&Z.current&&v&&!z&&"closed"!==(_||"").toLowerCase()){O(!0);try{await Z.current.invoke("SendMessage",v,e),T(""),requestAnimationFrame(()=>{var e;return null===(e=V.current)||void 0===e?void 0:e.focus()})}catch(Uc){console.error(Uc),requestAnimationFrame(()=>{var e;return null===(e=V.current)||void 0===e?void 0:e.focus()})}finally{O(!1)}}},ne=e=>{switch((e||"").toLowerCase()){case"open":return(0,ts.jsx)(Sc,{className:"w-3 h-3"});case"pending":return(0,ts.jsx)(kc,{className:"w-3 h-3"});case"closed":return(0,ts.jsx)(mc,{className:"w-3 h-3"});default:return(0,ts.jsx)(fc,{className:"w-3 h-3"})}},se=e=>{switch((e||"").toLowerCase()){case"open":return"status-open";case"pending":return"status-pending";case"closed":return"status-closed";default:return"status-default"}},oe=e=>{if(!e)return"";const t=new Date(e),n=new Date,s=Math.floor((n-t)/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:t.toLocaleDateString()},ie=e=>{var t;if(e.isSystem)return"System";if(e.senderIsAdmin)return e.senderName&&e.senderName.trim()||"Support";const n=String(null!==(t=null===e||void 0===e?void 0:e.senderUserId)&&void 0!==t?t:""),s=n?F[n]:null;return e.senderName&&e.senderName.trim()||(null===s||void 0===s?void 0:s.name)||(n?`User #${n}`:"User")};return(0,e.useEffect)(()=>(document.body.classList.add("hide-support-widget"),()=>document.body.classList.remove("hide-support-widget")),[]),(0,e.useEffect)(()=>{n&&o&&(J(),Y())},[n,o,m]),n?o?I?(0,ts.jsxs)("div",{className:"sd-denied",children:[(0,ts.jsx)(mc,{className:"w-12 h-12 text-red-500 mb-4"}),(0,ts.jsx)("h2",{children:"Access Denied"}),(0,ts.jsx)("p",{children:"You don't have permission to access the support dashboard."})]}):(0,ts.jsxs)("div",{className:"sd-root "+(l?"drawer-open":""),children:[(0,ts.jsx)("div",{className:"sd-drawer-scrim",onClick:()=>c(!1),"aria-hidden":"true"}),(0,ts.jsxs)("aside",{className:"sd-sidebar","aria-label":"Conversation lists",children:[(0,ts.jsxs)("div",{className:"sd-sidebar-header mobile-only",children:[(0,ts.jsx)("strong",{children:"Filters"}),(0,ts.jsx)("button",{className:"sd-close",onClick:()=>c(!1),"aria-label":"Close",children:"Close"})]}),(0,ts.jsxs)("div",{className:"sd-segmented",children:[(0,ts.jsx)("button",{className:"awaiting"===r?"active":"",onClick:()=>a("awaiting"),children:"Awaiting"}),(0,ts.jsx)("button",{className:"assigned"===r?"active":"",onClick:()=>a("assigned"),children:"Assigned"})]}),"awaiting"===r&&(0,ts.jsxs)("div",{className:"sd-section",children:[(0,ts.jsx)("div",{className:"sd-section-header",children:(0,ts.jsxs)("div",{className:"sd-section-title",children:[(0,ts.jsx)(Nc,{className:"w-5 h-5"}),(0,ts.jsx)("h2",{children:"Support Queue"}),(0,ts.jsx)("span",{className:"sd-count",children:d.length})]})}),(0,ts.jsx)("div",{className:"sd-list",children:L?(0,ts.jsxs)("div",{className:"sd-loading",children:[(0,ts.jsx)(dc,{className:"w-6 h-6 animate-spin"}),(0,ts.jsx)("span",{children:"Loading threads..."})]}):0===d.length?(0,ts.jsxs)("div",{className:"sd-empty",children:[(0,ts.jsx)(fc,{className:"w-8 h-8 opacity-50",style:{position:"relative",top:"6px"}}),(0,ts.jsx)("span",{children:"   No conversations yet"})]}):d.map(e=>{const t=e.lastMessageAt||e.updatedAt||e.createdAt;return(0,ts.jsxs)("div",{className:"sd-thread-card",children:[(0,ts.jsxs)("div",{className:"sd-thread-main "+(v===e.threadId?"active":""),onClick:()=>Q(e.threadId),children:[(0,ts.jsxs)("div",{className:"sd-thread-header",children:[(0,ts.jsx)("h3",{className:"sd-thread-title",children:e.topic||e.title||`Thread #${e.threadId}`}),(0,ts.jsx)("span",{className:"sd-thread-time",children:oe(t)})]}),(0,ts.jsxs)("div",{className:"sd-thread-meta",children:[(0,ts.jsxs)("span",{className:`sd-status ${se(e.status)}`,children:[ne(e.status),e.status]}),e.priority&&(0,ts.jsx)("span",{className:`sd-priority priority-${e.priority}`,children:e.priority})]})]}),!e.assigneeUserId&&(0,ts.jsx)("div",{className:"sd-thread-actions",children:(0,ts.jsx)("button",{className:"sd-assign-btn",onClick:()=>(async e=>{const t=await fetch(`${ec}/Support/threads/${e}/assign`,{method:"PUT",headers:Ro(),body:""});401!==t.status&&403!==t.status?(await J(),await Y()):A(!0)})(e.threadId),children:"Assign to me"})})]},e.threadId)})})]}),"assigned"===r&&(0,ts.jsxs)("div",{className:"sd-section",children:[(0,ts.jsx)("div",{className:"sd-section-header",children:(0,ts.jsxs)("div",{className:"sd-section-title",children:[(0,ts.jsx)(Cc,{className:"w-5 h-5"}),(0,ts.jsx)("h3",{children:"My Threads"}),(0,ts.jsx)("span",{className:"sd-count",children:p.length})]})}),(0,ts.jsx)("div",{className:"sd-list",children:0===p.length?(0,ts.jsxs)("div",{className:"sd-empty",children:[(0,ts.jsx)(Cc,{className:"w-6 h-6 opacity-50"}),(0,ts.jsx)("span",{children:"No assigned threads"})]}):p.map(e=>{const t=e.lastMessageAt||e.updatedAt||e.createdAt;return(0,ts.jsxs)("div",{className:"sd-my-thread "+(v===e.threadId?"active":""),onClick:()=>Q(e.threadId),children:[(0,ts.jsxs)("div",{className:"sd-thread-header",children:[(0,ts.jsx)("h4",{className:"sd-thread-title",children:e.topic||e.title||`Thread #${e.threadId}`}),(0,ts.jsx)("span",{className:"sd-thread-time",children:oe(t)})]}),(0,ts.jsxs)("span",{className:`sd-status ${se(e.status)}`,children:[ne(e.status),e.status]})]},e.threadId)})})]})]}),(0,ts.jsxs)("div",{className:"sd-main",children:[(0,ts.jsxs)("div",{className:"sd-chat-header",children:[(0,ts.jsx)("button",{className:"sd-hamburger mobile-only "+(l?"is-open":""),"aria-label":l?"Close lists":"Open lists","aria-expanded":l,onClick:()=>c(e=>!e),children:(0,ts.jsx)("span",{className:"hb","aria-hidden":"true"})}),(0,ts.jsxs)("div",{className:"sd-chat-info",children:[k?(0,ts.jsxs)("div",{className:"topic-edit",children:[(0,ts.jsx)("input",{className:"topic-input",value:C,onChange:e=>E(e.target.value),maxLength:300,autoFocus:!0}),(0,ts.jsx)("button",{className:"topic-commit",onClick:async()=>{if(!v)return;const e=C.trim();if(e&&e!==j)try{const t=await fetch(`${ec}/Support/threads/${v}/topic`,{method:"PUT",headers:{...Ro(),"Content-Type":"application/json"},body:JSON.stringify({topic:e})});if(!t.ok){const e=await t.text().catch(()=>"");throw new Error(e||`Failed (${t.status})`)}const n=(await t.json()).topic||e;S(n),N(!1),h(e=>e.map(e=>e.threadId===v?{...e,topic:n,title:n}:e)),f(e=>e.map(e=>e.threadId===v?{...e,topic:n,title:n}:e))}catch(Uc){console.error(Uc),alert("Couldn't update the subject.")}else N(!1)},title:"Save",children:(0,ts.jsx)(lc,{className:"w-4 h-4"})}),(0,ts.jsx)("button",{className:"topic-cancel",onClick:()=>{E(j),N(!1)},title:"Cancel",children:(0,ts.jsx)(cc,{className:"w-4 h-4"})})]}):(0,ts.jsxs)("div",{className:"sd-chat-title-row",children:[(0,ts.jsx)("h1",{className:"sd-chat-title",children:j||"Support"}),v&&(0,ts.jsx)("button",{className:"topic-edit-btn",onClick:()=>N(!0),title:"Rename subject",children:(0,ts.jsx)(uc,{className:"w-4 h-4",style:{marginRight5:"5px"}})})]}),v&&(0,ts.jsxs)("span",{className:"sd-chat-id",children:["Thread #",v]})]}),(0,ts.jsxs)("div",{className:"sd-chat-actions",children:[(0,ts.jsx)("button",{className:"sd-close-btn",onClick:async()=>{if(v&&!R&&"closed"!==(_||"").toLowerCase()){D(!0);try{const e=await fetch(`${ec}/Support/threads/${v}/close`,{method:"PUT",headers:{...Ro(),"Content-Type":"application/json"},body:JSON.stringify("Resolved by support.")});if(401===e.status||403===e.status)return void A(!0);if(!e.ok&&204!==e.status){const t=await e.text();throw new Error(t||`Failed to close: ${e.status}`)}b("Closed"),w(e=>[...e,{isSystem:!0,body:"Thread closed by support.",createdAt:(new Date).toISOString()}]),h(e=>e.map(e=>e.threadId===v?{...e,status:"Closed"}:e)),f(e=>e.map(e=>e.threadId===v?{...e,status:"Closed"}:e))}catch(Uc){console.error(Uc),alert("Failed to close the thread.")}finally{D(!1)}}},disabled:!v||"closed"===(_||"").toLowerCase()||R,title:"closed"===(_||"").toLowerCase()?"Already closed":"Close this thread",children:R?(0,ts.jsx)(dc,{className:"w-4 h-4 animate-spin"}):(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsx)(Ec,{className:"w-4 h-4",style:{position:"relative",top:"2px",right:"3px"}}),(0,ts.jsx)("span",{style:{position:"relative",bottom:"5px"},children:"Close thread"})]})}),(0,ts.jsxs)("div",{className:"sd-chat-status hide-on-mobile",children:[(0,ts.jsx)("div",{className:"sd-status-indicator "+(B?"online":"offline")}),(0,ts.jsx)("span",{children:B?"Connected":"Disconnected"})]})]})]}),v?(0,ts.jsxs)(ts.Fragment,{children:[(0,ts.jsxs)("div",{className:"sd-messages",children:[0===x.length?(0,ts.jsxs)("div",{className:"sd-messages-empty",children:[(0,ts.jsx)(fc,{className:"w-12 h-12 opacity-30"}),(0,ts.jsx)("h3",{children:"Start the conversation"}),(0,ts.jsx)("p",{children:"This thread is ready for your first message."})]}):x.map(e=>{var t,n,s,o,i;const r=String(null!==(t=null===e||void 0===e?void 0:e.senderUserId)&&void 0!==t?t:""),a=e.isSystem||e.senderIsAdmin?null:(null===(n=F[r])||void 0===n?void 0:n.avatar)||Lc;return(0,ts.jsxs)("div",{className:"sd-message "+(e.isSystem?"system":e.senderIsAdmin?"agent":"user"),children:[(0,ts.jsx)("div",{className:"sd-message-avatar",children:e.isSystem?(0,ts.jsx)("div",{className:"sd-avatar system",children:(0,ts.jsx)(mc,{className:"w-4 h-4"})}):e.senderIsAdmin?(0,ts.jsx)("div",{className:"sd-avatar agent",children:(0,ts.jsx)(Pc,{className:"w-4 h-4"})}):(0,ts.jsx)("div",{className:"sd-avatar user",children:(0,ts.jsx)(Kn,{to:(l=e.senderUserId,`/profile/${l}`),className:"sd-avatar-link",title:`Open ${ie(e)}'s profile`,onClick:e=>e.stopPropagation(),children:(0,ts.jsx)("img",{src:a,alt:`${ie(e)} avatar`,className:"sd-avatar-img",loading:"lazy",draggable:!1,onError:e=>{e.currentTarget.onerror=null,e.currentTarget.src=Lc}})})})}),(0,ts.jsxs)("div",{className:"sd-message-content",children:[(0,ts.jsx)("div",{className:"sd-author",children:ie(e)}),e.body&&(0,ts.jsx)("div",{className:"sd-message-body",children:e.body}),Array.isArray(e.attachments)&&e.attachments.length>0&&(0,ts.jsx)("div",{className:"sd-attachments-grid",children:e.attachments.map(e=>"image"===e.kind?(0,ts.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"sd-attachment",title:e.fileName||"image",children:(0,ts.jsx)("img",{src:e.url,alt:e.fileName||"attachment",loading:"lazy",draggable:!1})},e.attachmentId||e.url):null)}),(0,ts.jsx)("div",{className:"sd-message-time",children:oe(e.createdAt)})]})]},null!==(s=e.messageId)&&void 0!==s?s:`${e.createdAt}-${null!==(o=null!==(i=e.senderUserId)&&void 0!==i?i:e.senderIsAdmin)&&void 0!==o?o:"sys"}`);var l}),(0,ts.jsx)("div",{ref:q})]}),(0,ts.jsxs)("div",{className:"sd-input-area",children:[(0,ts.jsxs)("div",{className:"sd-input-container",children:[(0,ts.jsx)("textarea",{ref:V,value:P,onChange:e=>T(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),te())},placeholder:"closed"===(_||"").toLowerCase()?"Thread is closed.":"Type your reply...",className:"sd-input",rows:1,disabled:z||"closed"===(_||"").toLowerCase()}),(0,ts.jsx)("button",{onClick:te,disabled:!P.trim()||z||"closed"===(_||"").toLowerCase(),className:"sd-send-btn",title:"closed"===(_||"").toLowerCase()?"Thread is closed":"Send",children:z?(0,ts.jsx)(dc,{className:"w-4 h-4 animate-spin"}):(0,ts.jsx)(gc,{className:"w-4 h-4"})})]}),"closed"===(_||"").toLowerCase()&&(0,ts.jsxs)("div",{className:"sd-closed-hint",children:[(0,ts.jsx)(Tc,{className:"w-4 h-4"}),"This conversation is closed. You can still review messages."]})]})]}):(0,ts.jsxs)("div",{className:"sd-placeholder",children:[(0,ts.jsx)(fc,{className:"w-16 h-16 opacity-30"}),(0,ts.jsx)("h2",{children:"Select a thread to view"}),(0,ts.jsx)("p",{children:"Choose a conversation from the sidebar to start helping customers."})]})]})]}):null:(0,ts.jsxs)("div",{className:"sd-loading",children:[(0,ts.jsx)(dc,{className:"w-6 h-6 animate-spin"}),(0,ts.jsx)("span",{children:"Checking access\u2026"})]})}const Ic=[{key:"support",label:"Support Dashboard"}];function Ac(){const[t,n]=(0,e.useState)("support"),[s,o]=(0,e.useState)("assigned"),[i,r]=(0,e.useState)(!1),a=(0,e.useRef)(null),l=(0,e.useRef)(0),c=()=>"undefined"!==typeof window&&window.matchMedia("(max-width: 640px)").matches;(0,e.useEffect)(()=>{const e=()=>{const e=l.current||0;document.body.classList.remove("panel-scroll-lock"),document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",window.scrollTo(0,e)};i?c()&&(l.current=window.scrollY||window.pageYOffset||0,document.body.classList.add("panel-scroll-lock"),document.body.style.top=`-${l.current}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%"):e();const t=()=>{i&&(c()||e())};return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t),i&&e()}},[i]),(0,e.useEffect)(()=>{if(!i)return;const e=e=>{"Escape"===e.key&&r(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]);(0,e.useMemo)(()=>({assignment:s}),[s]);return(0,ts.jsxs)("div",{children:[(0,ts.jsx)(Zo,{}),(0,ts.jsxs)("div",{ref:a,className:"panel-root "+(i?"drawer-open":""),children:[(0,ts.jsx)("div",{className:"panel-drawer-scrim",onClick:()=>r(!1),"aria-hidden":"true"}),(0,ts.jsxs)("div",{className:"panel-header",children:[(0,ts.jsxs)("button",{className:"hamburger-btn mobile-only","aria-label":"Open filters","aria-expanded":i,onClick:()=>r(e=>!e),children:[(0,ts.jsx)("span",{className:"hamburger-bar"}),(0,ts.jsx)("span",{className:"hamburger-bar"}),(0,ts.jsx)("span",{className:"hamburger-bar"})]}),(0,ts.jsx)("h1",{children:"Control Panel"}),(0,ts.jsxs)("div",{className:"segmented hide-on-mobile",role:"tablist","aria-label":"Assignment filter",children:[(0,ts.jsx)("button",{role:"tab","aria-selected":"assigned"===s,className:"assigned"===s?"active":"",onClick:()=>o("assigned"),children:"Assigned"}),(0,ts.jsx)("button",{role:"tab","aria-selected":"awaiting"===s,className:"awaiting"===s?"active":"",onClick:()=>o("awaiting"),children:"Awaiting"})]}),(0,ts.jsx)("div",{className:"panel-tabs hide-on-mobile",children:Ic.map(e=>(0,ts.jsx)("button",{className:"panel-tab "+(t===e.key?"active":""),onClick:()=>n(e.key),children:e.label},e.key))})]}),(0,ts.jsxs)("aside",{className:"panel-sidebar mobile-only","aria-label":"Filters",children:[(0,ts.jsxs)("div",{className:"panel-sidebar-header",children:[(0,ts.jsx)("strong",{children:"Filters"}),(0,ts.jsx)("button",{className:"panel-close","aria-label":"Close",onClick:()=>r(!1),children:"Close"})]}),(0,ts.jsxs)("div",{className:"panel-sidebar-content",children:[(0,ts.jsxs)("div",{className:"segmented",role:"tablist","aria-label":"Assignment filter",children:[(0,ts.jsx)("button",{role:"tab","aria-selected":"assigned"===s,className:"assigned"===s?"active":"",onClick:()=>o("assigned"),children:"Assigned"}),(0,ts.jsx)("button",{role:"tab","aria-selected":"awaiting"===s,className:"awaiting"===s?"active":"",onClick:()=>o("awaiting"),children:"Awaiting"})]}),(0,ts.jsx)("div",{className:"panel-sidebar-footer",children:(0,ts.jsx)("button",{className:"primary",onClick:()=>r(!1),children:"Apply"})})]})]}),(0,ts.jsx)("div",{className:"panel-body",children:"support"===t&&(0,ts.jsx)(Mc,{assignment:s})})]}),(0,ts.jsx)(ds,{})]})}const zc=[{key:"support",label:"Home"}];function Oc(){const[t,n]=(0,e.useState)("support");return(0,ts.jsxs)("div",{className:"panel-root",children:[(0,ts.jsxs)("div",{className:"panel-header",children:[(0,ts.jsx)("h1",{children:"Control Panel"}),(0,ts.jsx)("div",{className:"panel-tabs",children:zc.map(e=>(0,ts.jsx)("a",{href:"/",children:(0,ts.jsx)("button",{className:"panel-tab "+(t===e.key?"active":""),onClick:()=>n(e.key),children:e.label},e.key)}))})]}),(0,ts.jsx)("div",{className:"panel-body",children:"support"===t&&(0,ts.jsx)(Mc,{})})]})}function Rc(){return(0,ts.jsx)(xt,{clientId:"926761454099-bt8mfk6fnka8nkmanvhne1t3oi7lgj3m.apps.googleusercontent.com",children:(0,ts.jsxs)(Wn,{children:[(0,ts.jsxs)(Dn,{children:[(0,ts.jsx)(On,{path:"/",element:(0,ts.jsx)(Ha,{})}),(0,ts.jsx)(On,{path:"/login",element:(0,ts.jsx)(as,{})}),(0,ts.jsx)(On,{path:"/register",element:(0,ts.jsx)(us,{})}),(0,ts.jsx)(On,{path:"/my-profile",element:(0,ts.jsx)(ii,{})}),(0,ts.jsx)(On,{path:"/profile/:userId",element:(0,ts.jsx)(Pl,{})}),(0,ts.jsx)(On,{path:"/settings",element:(0,ts.jsx)(gr,{})}),(0,ts.jsx)(On,{path:"/map",element:(0,ts.jsx)(Wr,{})}),(0,ts.jsx)(On,{path:"/about",element:(0,ts.jsx)(wl,{})}),(0,ts.jsx)(On,{path:"/privacy",element:(0,ts.jsx)(jl,{})}),(0,ts.jsx)(On,{path:"/terms",element:(0,ts.jsx)(Sl,{})}),(0,ts.jsx)(On,{path:"/owner-guide",element:(0,ts.jsx)(kl,{})}),(0,ts.jsx)(On,{path:"/user-search",element:(0,ts.jsx)(Tl,{})}),(0,ts.jsx)(On,{path:"/forgot-password",element:(0,ts.jsx)(Ml,{})}),(0,ts.jsx)(On,{path:"/reset-password",element:(0,ts.jsx)(Il,{})}),(0,ts.jsx)(On,{path:"/shop/:slug",element:(0,ts.jsx)(tl,{})}),(0,ts.jsx)(On,{path:"/product/:id",element:(0,ts.jsx)(rl,{})}),(0,ts.jsx)(On,{path:"/create-shop",element:(0,ts.jsx)(gl,{})}),(0,ts.jsx)(On,{path:"/unauthorized",element:(0,ts.jsx)(vl,{})}),(0,ts.jsx)(On,{path:"/settings/profile",element:(0,ts.jsx)(_l,{})}),(0,ts.jsx)(On,{path:"/confirm-email",element:(0,ts.jsx)(Nl,{})}),(0,ts.jsx)(On,{path:"/allshops",element:(0,ts.jsx)(Ll,{})}),(0,ts.jsx)(On,{path:"/category-filter",element:(0,ts.jsx)(Vl,{})}),(0,ts.jsx)(On,{path:"/categories",element:(0,ts.jsx)(Bl,{})}),(0,ts.jsx)(On,{path:"/become-owner",element:(0,ts.jsx)(zl,{})}),(0,ts.jsx)(On,{path:"/payment-success",element:(0,ts.jsx)(Ol,{})}),(0,ts.jsx)(On,{path:"/payment-cancel",element:(0,ts.jsx)(Rl,{})}),(0,ts.jsx)(On,{path:"/owner-form",element:(0,ts.jsx)(Dl,{})}),(0,ts.jsx)(On,{path:"/search",element:(0,ts.jsx)(Ul,{})}),(0,ts.jsx)(On,{path:"/billing/repay",element:(0,ts.jsx)(Hl,{})}),(0,ts.jsx)(On,{path:"/billing/repay/success",element:(0,ts.jsx)(Zl,{})}),(0,ts.jsx)(On,{path:"/support-dashboard",element:(0,ts.jsx)(Oc,{children:(0,ts.jsx)(Mc,{})})}),(0,ts.jsx)(On,{path:"/panel",element:(0,ts.jsx)(Oc,{children:(0,ts.jsx)(Ac,{})})})]}),(0,ts.jsx)(jc,{})]})})}const Dc=(0,e.createContext)(),Vc=t=>{let{children:n}=t;const[s,o]=(0,e.useState)(!1);return(0,ts.jsx)(Dc.Provider,{value:{isDarkMode:s,toggleTheme:()=>o(e=>!e)},children:n})},Bc=new Set;function $c(e){for(const t of Bc)t(e)}function Fc(){const[t,n]=(0,e.useState)([]);return(0,e.useEffect)(()=>{let e=1;const t=(s=t=>{let{url:s,status:o,messages:i}=t;const r=e++;n(e=>[...e,{id:r,url:s,status:o,messages:i}]),setTimeout(()=>n(e=>e.filter(e=>e.id!==r)),7e3)},Bc.add(s),()=>Bc.delete(s));var s;return t},[]),0===t.length?null:(0,ts.jsx)("div",{className:"neterr-toasts",children:t.map(e=>{let{id:t,url:s,status:o,messages:i}=e;return(0,ts.jsxs)("div",{className:"neterr-toast",role:"alert","aria-live":"assertive",children:[(0,ts.jsxs)("div",{className:"neterr-head",children:[(0,ts.jsxs)("span",{className:"neterr-status",children:["HTTP ",o||"?"]}),(0,ts.jsx)("button",{className:"neterr-close",onClick:()=>n(e=>e.filter(e=>e.id!==t)),children:"\xd7"})]}),(0,ts.jsx)("ul",{className:"neterr-list",children:(i&&i.length?i:["Request failed."]).map((e,t)=>(0,ts.jsx)("li",{children:e},t))})]},t)})})}!function(){if("undefined"===typeof window||!window.fetch||window.__fetch_interceptor_installed__)return;window.__fetch_interceptor_installed__=!0;const e=window.fetch;window.fetch=async(t,n)=>{let s;try{s=await e(t,n)}catch(o){throw $c({status:0,url:"string"===typeof t?t:(null===t||void 0===t?void 0:t.url)||"unknown",messages:[(null===o||void 0===o?void 0:o.message)||"Network error. Check your connection."]}),o}if(!s.ok){const e="string"===typeof t?t:(null===t||void 0===t?void 0:t.url)||s.url||"unknown";let n=null;try{const e=s.headers.get("content-type")||"",t=s.clone();n=e.includes("application/json")||e.includes("problem+json")?await t.json():await t.text()}catch{n=null}const{messages:o,fields:i}=function(e,t){const n=[],s={};if(!e)return n.push(t>=500?"Server error. Please try again.":"Request failed."),{messages:n,fields:s};if("string"===typeof e){const o=e.trim();return o.startsWith("<!DOCTYPE")||o.startsWith("<html")?n.push(t>=500?"Server error (HTML response).":`Request failed (HTTP ${t}).`):n.push(o),{messages:n,fields:s}}if(e.title||e.detail||e.type){if(e.title&&n.push(String(e.title)),e.detail&&e.detail!==e.title&&n.push(String(e.detail)),e.errors&&"object"===typeof e.errors)for(const[t,n]of Object.entries(e.errors))s[t]=Array.isArray(n)?n:[String(n)];return{messages:n.filter(Boolean),fields:s}}if((e.message||e.Message)&&n.push(String(e.message||e.Message)),e.errors)if(Array.isArray(e.errors))n.push(...e.errors.map(String));else if("object"===typeof e.errors)for(const[o,i]of Object.entries(e.errors))s[o]=Array.isArray(i)?i:[String(i)];(e.error||e.Error)&&n.push(String(e.error||e.Error));for(const o of["detail","title","Description","Reason"])e[o]&&n.push(String(e[o]));return{messages:n.filter(Boolean),fields:s}}(n,s.status);$c({status:s.status,url:e,messages:o,fields:i})}return s}}();s.createRoot(document.getElementById("root")).render((0,ts.jsx)(e.StrictMode,{children:(0,ts.jsxs)(Vc,{children:[(0,ts.jsx)(Rc,{}),(0,ts.jsx)(Fc,{})]})}))})()})();
//# sourceMappingURL=main.28ceb199.js.map